<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Day 7 - 500ã‚µãƒ³ãƒ—ãƒ«å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆï¼ˆTask 7-2ï¼‰</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            padding: 20px; 
            background: #1e1e1e; 
            color: #d4d4d4;
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 { color: #4ec9b0; }
        h2 { color: #569cd6; }
        h3 { color: #dcdcaa; }
        
        .test-section {
            background: #2d2d30;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .metrics-dashboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .metric-tile {
            background: #252526;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-label {
            font-size: 0.9em;
            color: #808080;
        }
        
        .achieved { color: #4ec9b0; }
        .partial { color: #dcdcaa; }
        .failed { color: #f48771; }
        
        .distribution-chart {
            display: flex;
            align-items: flex-end;
            height: 200px;
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background: #252526;
            border-radius: 5px;
        }
        
        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, #4ec9b0, #569cd6);
            border-radius: 3px 3px 0 0;
            position: relative;
            min-height: 10px;
        }
        
        .chart-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
        }
        
        .chart-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #3c3c3c;
        }
        
        th { 
            background: #252526;
            font-weight: bold;
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 2px;
            margin: 20px 0;
            padding: 10px;
            background: #1e1e1e;
            border-radius: 5px;
        }
        
        .heatmap-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            border-radius: 2px;
        }
        
        .heat-0 { background: #5a1e1e; }
        .heat-1 { background: #4a4a1e; }
        .heat-2 { background: #3a3a2e; }
        .heat-3 { background: #2a4a3e; }
        .heat-4 { background: #1a5a4e; }
        .heat-5 { background: #0a6a5e; }
        
        .progress-container {
            margin: 20px 0;
            padding: 20px;
            background: #252526;
            border-radius: 5px;
        }
        
        .progress-bar {
            height: 40px;
            background: #1e1e1e;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #4ec9b0, #569cd6);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: #fff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Day 7 - 500ã‚µãƒ³ãƒ—ãƒ«å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆï¼ˆTask 7-2ï¼‰</h1>
    
    <div id="results"></div>
    
    <script type="module">
        async function runLargeScaleTest() {
            // TextTo384LinesBridgeã‚’å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰
            const script = document.createElement('script');
            script.src = './public/js/ai/TextTo384LinesBridge.js';
            await new Promise(resolve => {
                script.onload = resolve;
                document.head.appendChild(script);
            });
            
            const bridge = new window.TextTo384LinesBridge();
            await bridge.initialize();
            
            // 500ã‚µãƒ³ãƒ—ãƒ«ã®åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆ
            const testSamples = generateComprehensiveTestSet(500);
            
            // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–
            const statistics = {
                // åŸºæœ¬çµ±è¨ˆ
                totalSamples: 500,
                uniqueLines: new Set(),
                positionDistribution: [0, 0, 0, 0, 0, 0, 0],
                hexagramUsage: {},
                lineUsage: {},
                
                // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
                processingTimes: [],
                cacheHits: 0,
                errors: [],
                
                // ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ
                categoryResults: {
                    basic: { total: 0, uniqueLines: new Set() },
                    business: { total: 0, uniqueLines: new Set() },
                    emotion: { total: 0, uniqueLines: new Set() },
                    action: { total: 0, uniqueLines: new Set() },
                    abstract: { total: 0, uniqueLines: new Set() }
                },
                
                // æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿
                progressData: []
            };
            
            // é€²æ—è¡¨ç¤º
            let html = '<div class="progress-container">';
            html += '<h2>ğŸš€ å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</h2>';
            html += '<div class="progress-bar"><div class="progress-fill" id="progress" style="width: 0%;">0/500</div></div>';
            html += '</div>';
            
            document.getElementById('results').innerHTML = html;
            
            // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            for (let i = 0; i < testSamples.length; i++) {
                const sample = testSamples[i];
                
                try {
                    const startTime = performance.now();
                    const result = await bridge.analyzeText(sample.text);
                    const endTime = performance.now();
                    
                    // ãƒ‡ãƒ¼ã‚¿åé›†
                    const processingTime = endTime - startTime;
                    statistics.processingTimes.push(processingTime);
                    
                    const lineId = (result.hexagram_number - 1) * 6 + result.line_position;
                    statistics.uniqueLines.add(lineId);
                    statistics.positionDistribution[result.line_position]++;
                    
                    // å¦ä½¿ç”¨çµ±è¨ˆ
                    if (!statistics.hexagramUsage[result.hexagram_number]) {
                        statistics.hexagramUsage[result.hexagram_number] = 0;
                    }
                    statistics.hexagramUsage[result.hexagram_number]++;
                    
                    // çˆ»ä½¿ç”¨çµ±è¨ˆ
                    if (!statistics.lineUsage[lineId]) {
                        statistics.lineUsage[lineId] = 0;
                    }
                    statistics.lineUsage[lineId]++;
                    
                    // ã‚«ãƒ†ã‚´ãƒªåˆ¥çµ±è¨ˆ
                    if (sample.category && statistics.categoryResults[sample.category]) {
                        statistics.categoryResults[sample.category].total++;
                        statistics.categoryResults[sample.category].uniqueLines.add(lineId);
                    }
                    
                    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ
                    if (result.fromCache) {
                        statistics.cacheHits++;
                    }
                    
                    // é€²æ—ãƒ‡ãƒ¼ã‚¿ï¼ˆ50ã‚µãƒ³ãƒ—ãƒ«ã”ã¨ï¼‰
                    if ((i + 1) % 50 === 0) {
                        statistics.progressData.push({
                            samples: i + 1,
                            coverage: (statistics.uniqueLines.size / 384) * 100,
                            avgTime: statistics.processingTimes.reduce((a, b) => a + b, 0) / statistics.processingTimes.length
                        });
                    }
                    
                } catch (error) {
                    statistics.errors.push({
                        sample: sample.text,
                        error: error.message
                    });
                }
                
                // é€²æ—æ›´æ–°
                if ((i + 1) % 25 === 0) {
                    const progress = ((i + 1) / 500) * 100;
                    document.getElementById('progress').style.width = progress + '%';
                    document.getElementById('progress').innerText = `${i + 1}/500`;
                }
            }
            
            // çµæœã®è¡¨ç¤º
            displayTestResults(statistics);
        }
        
        function displayTestResults(stats) {
            let html = '';
            
            // ä¸»è¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
            html += '<div class="test-section">';
            html += '<h2>ğŸ“Š 500ã‚µãƒ³ãƒ—ãƒ«å¤§è¦æ¨¡ãƒ†ã‚¹ãƒˆçµæœ</h2>';
            
            const coverageRate = (stats.uniqueLines.size / 384) * 100;
            const avgTime = stats.processingTimes.reduce((a, b) => a + b, 0) / stats.processingTimes.length;
            const errorRate = (stats.errors.length / stats.totalSamples) * 100;
            const cacheHitRate = (stats.cacheHits / stats.totalSamples) * 100;
            
            html += '<div class="metrics-dashboard">';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">ã‚«ãƒãƒ¼ç‡</div>';
            html += `<div class="metric-value ${coverageRate >= 10 ? 'achieved' : 'partial'}">${coverageRate.toFixed(1)}%</div>`;
            html += '<div>ç›®æ¨™: 10-15%</div>';
            html += '</div>';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">ãƒ¦ãƒ‹ãƒ¼ã‚¯çˆ»æ•°</div>';
            html += `<div class="metric-value ${stats.uniqueLines.size >= 40 ? 'achieved' : 'partial'}">${stats.uniqueLines.size}</div>`;
            html += '<div>ç›®æ¨™: 40-60å€‹</div>';
            html += '</div>';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">å¹³å‡å‡¦ç†æ™‚é–“</div>';
            html += `<div class="metric-value ${avgTime <= 20 ? 'achieved' : 'partial'}">${avgTime.toFixed(1)}ms</div>`;
            html += '<div>ç›®æ¨™: <15ms</div>';
            html += '</div>';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">ã‚¨ãƒ©ãƒ¼ç‡</div>';
            html += `<div class="metric-value ${errorRate < 1 ? 'achieved' : 'failed'}">${errorRate.toFixed(2)}%</div>`;
            html += '<div>ç›®æ¨™: <1%</div>';
            html += '</div>';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">ä½¿ç”¨ã•ã‚ŒãŸå¦</div>';
            html += `<div class="metric-value partial">${Object.keys(stats.hexagramUsage).length}/64</div>`;
            html += '<div>å…¨ä½“ã®' + ((Object.keys(stats.hexagramUsage).length / 64) * 100).toFixed(0) + '%</div>';
            html += '</div>';
            
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡</div>';
            html += `<div class="metric-value achieved">${cacheHitRate.toFixed(1)}%</div>`;
            html += '<div>åŠ¹ç‡çš„</div>';
            html += '</div>';
            
            const pos5Rate = (stats.positionDistribution[5] / stats.totalSamples) * 100;
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">5çˆ»é¸æŠç‡</div>';
            html += `<div class="metric-value ${pos5Rate >= 5 && pos5Rate <= 10 ? 'achieved' : 'partial'}">${pos5Rate.toFixed(1)}%</div>`;
            html += '<div>ç›®æ¨™: 5-10%</div>';
            html += '</div>';
            
            const chiSquare = calculateChiSquare(stats.positionDistribution.slice(1), stats.totalSamples);
            html += '<div class="metric-tile">';
            html += '<div class="metric-label">Ï‡Â²å€¤</div>';
            html += `<div class="metric-value ${chiSquare < 10 ? 'achieved' : 'partial'}">${chiSquare.toFixed(2)}</div>`;
            html += '<div>ãƒãƒ©ãƒ³ã‚¹æŒ‡æ¨™</div>';
            html += '</div>';
            
            html += '</div>';
            html += '</div>';
            
            // ä½ç½®åˆ†å¸ƒã‚°ãƒ©ãƒ•
            html += '<div class="test-section">';
            html += '<h2>ğŸ“ˆ ä½ç½®åˆ†å¸ƒï¼ˆ500ã‚µãƒ³ãƒ—ãƒ«ï¼‰</h2>';
            
            html += '<div class="distribution-chart">';
            const maxCount = Math.max(...stats.positionDistribution.slice(1));
            for (let i = 1; i <= 6; i++) {
                const count = stats.positionDistribution[i];
                const percentage = (count / stats.totalSamples) * 100;
                const height = (count / maxCount) * 100;
                
                html += `<div class="chart-bar" style="height: ${height}%;">`;
                html += `<div class="chart-value">${percentage.toFixed(1)}%</div>`;
                html += `<div class="chart-label">${i}çˆ»</div>`;
                html += '</div>';
            }
            html += '</div>';
            
            html += '</div>';
            
            // ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†æ
            html += '<div class="test-section">';
            html += '<h2>ğŸ” ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ</h2>';
            
            html += '<table>';
            html += '<tr><th>ã‚«ãƒ†ã‚´ãƒª</th><th>ã‚µãƒ³ãƒ—ãƒ«æ•°</th><th>ãƒ¦ãƒ‹ãƒ¼ã‚¯çˆ»</th><th>ã‚«ãƒãƒ¼ç‡</th><th>å¤šæ§˜æ€§</th></tr>';
            
            for (const [category, data] of Object.entries(stats.categoryResults)) {
                if (data.total > 0) {
                    const categoryCoverage = (data.uniqueLines.size / 384) * 100;
                    const diversity = data.uniqueLines.size / data.total;
                    
                    html += '<tr>';
                    html += `<td>${getCategoryName(category)}</td>`;
                    html += `<td>${data.total}</td>`;
                    html += `<td>${data.uniqueLines.size}</td>`;
                    html += `<td>${categoryCoverage.toFixed(2)}%</td>`;
                    html += `<td class="${diversity >= 0.5 ? 'achieved' : diversity >= 0.3 ? 'partial' : 'failed'}">${(diversity * 100).toFixed(0)}%</td>`;
                    html += '</tr>';
                }
            }
            
            html += '</table>';
            html += '</div>';
            
            // å¦ä½¿ç”¨ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—
            html += '<div class="test-section">';
            html += '<h2>ğŸ—ºï¸ 64å¦ä½¿ç”¨ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</h2>';
            
            html += '<div class="heatmap-grid">';
            for (let i = 1; i <= 64; i++) {
                const usage = stats.hexagramUsage[i] || 0;
                let heatClass = 'heat-0';
                if (usage >= 15) heatClass = 'heat-5';
                else if (usage >= 10) heatClass = 'heat-4';
                else if (usage >= 7) heatClass = 'heat-3';
                else if (usage >= 4) heatClass = 'heat-2';
                else if (usage >= 1) heatClass = 'heat-1';
                
                html += `<div class="heatmap-cell ${heatClass}" title="${i}å¦: ${usage}å›">${i}</div>`;
            }
            html += '</div>';
            
            const unusedHexagrams = [];
            for (let i = 1; i <= 64; i++) {
                if (!stats.hexagramUsage[i]) {
                    unusedHexagrams.push(i);
                }
            }
            
            if (unusedHexagrams.length > 0) {
                html += `<p class="failed">æœªä½¿ç”¨ã®å¦: ${unusedHexagrams.join(', ')} (${unusedHexagrams.length}å€‹)</p>`;
            }
            
            html += '</div>';
            
            // é€²æ—ãƒˆãƒ¬ãƒ³ãƒ‰
            html += '<div class="test-section">';
            html += '<h2>ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸é€²æ—ãƒˆãƒ¬ãƒ³ãƒ‰</h2>';
            
            html += '<table>';
            html += '<tr><th>ã‚µãƒ³ãƒ—ãƒ«æ•°</th><th>ã‚«ãƒãƒ¼ç‡</th><th>å¹³å‡å‡¦ç†æ™‚é–“</th><th>ãƒˆãƒ¬ãƒ³ãƒ‰</th></tr>';
            
            for (const point of stats.progressData) {
                const trend = point.coverage > 10 ? 'â†—ï¸' : point.coverage > 8 ? 'â†’' : 'â†˜ï¸';
                html += '<tr>';
                html += `<td>${point.samples}</td>`;
                html += `<td>${point.coverage.toFixed(2)}%</td>`;
                html += `<td>${point.avgTime.toFixed(1)}ms</td>`;
                html += `<td>${trend}</td>`;
                html += '</tr>';
            }
            html += '</table>';
            
            html += '</div>';
            
            // æœ€é »å‡ºçˆ»ã¨æœªä½¿ç”¨çˆ»
            html += '<div class="test-section">';
            html += '<h2>ğŸ¯ ä½¿ç”¨é »åº¦åˆ†æ</h2>';
            
            // æœ€é »å‡ºTOP10
            const sortedLines = Object.entries(stats.lineUsage)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);
            
            html += '<h3>æœ€é »å‡ºçˆ» TOP10</h3>';
            html += '<table>';
            html += '<tr><th>é †ä½</th><th>çˆ»ID</th><th>å¦-ä½ç½®</th><th>ä½¿ç”¨å›æ•°</th><th>å æœ‰ç‡</th></tr>';
            
            for (let i = 0; i < sortedLines.length; i++) {
                const [lineId, count] = sortedLines[i];
                const hexagram = Math.ceil(lineId / 6);
                const position = ((parseInt(lineId) - 1) % 6) + 1;
                const rate = (count / stats.totalSamples) * 100;
                
                html += '<tr>';
                html += `<td>${i + 1}</td>`;
                html += `<td>#${lineId}</td>`;
                html += `<td>${hexagram}å¦${position}çˆ»</td>`;
                html += `<td>${count}</td>`;
                html += `<td>${rate.toFixed(2)}%</td>`;
                html += '</tr>';
            }
            html += '</table>';
            
            // æœªä½¿ç”¨çˆ»ã®æ•°
            const unusedLines = 384 - stats.uniqueLines.size;
            html += `<p>æœªä½¿ç”¨çˆ»: <span class="failed">${unusedLines}/384</span> (${((unusedLines / 384) * 100).toFixed(1)}%)</p>`;
            
            html += '</div>';
            
            // ç·åˆè©•ä¾¡
            html += '<div class="test-section" style="background: linear-gradient(135deg, #2d2d30, #3d3d40);">';
            html += '<h2>âœ… 500ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆç·åˆè©•ä¾¡</h2>';
            
            const goals = [
                { name: 'ã‚«ãƒãƒ¼ç‡ 10-15%', achieved: coverageRate >= 10 },
                { name: 'ãƒ¦ãƒ‹ãƒ¼ã‚¯çˆ» 40-60å€‹', achieved: stats.uniqueLines.size >= 40 },
                { name: '5çˆ»é¸æŠç‡ 5-10%', achieved: pos5Rate >= 5 && pos5Rate <= 10 },
                { name: 'å‡¦ç†é€Ÿåº¦ <15ms', achieved: avgTime <= 15 },
                { name: 'ã‚¨ãƒ©ãƒ¼ç‡ <1%', achieved: errorRate < 1 }
            ];
            
            const achievedCount = goals.filter(g => g.achieved).length;
            
            html += `<h3>ç›®æ¨™é”æˆç‡: ${achievedCount}/${goals.length}</h3>`;
            html += '<ul>';
            for (const goal of goals) {
                html += `<li class="${goal.achieved ? 'achieved' : 'failed'}">${goal.achieved ? 'âœ…' : 'âŒ'} ${goal.name}</li>`;
            }
            html += '</ul>';
            
            if (achievedCount >= 4) {
                html += '<p class="achieved" style="font-size: 1.2em; text-align: center;">ğŸŠ Week 1ã®ç›®æ¨™ã‚’æ¦‚ã­é”æˆã—ã¾ã—ãŸï¼</p>';
            } else if (achievedCount >= 3) {
                html += '<p class="partial" style="font-size: 1.2em; text-align: center;">âš ï¸ éƒ¨åˆ†çš„ãªé”æˆã§ã™ã€‚ã•ã‚‰ãªã‚‹æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</p>';
            } else {
                html += '<p class="failed" style="font-size: 1.2em; text-align: center;">âŒ è¿½åŠ ã®ä½œæ¥­ãŒå¿…è¦ã§ã™ã€‚</p>';
            }
            
            html += '</div>';
            
            document.getElementById('results').innerHTML = html;
        }
        
        function generateComprehensiveTestSet(count) {
            const samples = [];
            
            // ã‚«ãƒ†ã‚´ãƒªå®šç¾©
            const categories = {
                basic: [
                    'æ–°ã—ã„', 'å§‹ã¾ã‚Š', 'é–‹å§‹', 'å”åŠ›', 'é–¢ä¿‚', 'å›°é›£', 'å•é¡Œ', 'å¤‰åŒ–',
                    'è»¢æ›', 'ãƒªãƒ¼ãƒ€ãƒ¼', 'ç®¡ç†', 'å®Œæˆ', 'çµ‚äº†', 'æ±ºæ–­', 'åˆ¤æ–­', 'æˆ¦ç•¥'
                ],
                business: [
                    'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ', 'ä¼šè­°', 'ææ¡ˆ', 'å¥‘ç´„', 'äº¤æ¸‰', 'å£²ä¸Š', 'åˆ©ç›Š', 'æŠ•è³‡',
                    'çµŒå–¶', 'çµ„ç¹”', 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°', 'é–‹ç™º', 'è£½é€ ', 'å“è³ª', 'æ”¹å–„', 'åŠ¹ç‡'
                ],
                emotion: [
                    'å–œã³', 'æ‚²ã—ã¿', 'æ€’ã‚Š', 'æã‚Œ', 'é©šã', 'æœŸå¾…', 'ä¸å®‰', 'å¸Œæœ›',
                    'æ„›æƒ…', 'æ†ã—ã¿', 'ä¿¡é ¼', 'ç–‘ã„', 'æº€è¶³', 'ä¸æº€', 'æ„Ÿè¬', 'å¾Œæ‚”'
                ],
                action: [
                    'å®Ÿè¡Œ', 'è¨ˆç”»', 'åˆ†æ', 'è©•ä¾¡', 'æ”¹å–„', 'æ§‹ç¯‰', 'ç ´å£Š', 'å‰µé€ ',
                    'ä¿å­˜', 'å‰Šé™¤', 'æ›´æ–°', 'ç§»å‹•', 'åœæ­¢', 'é–‹å§‹', 'ç¶™ç¶š', 'çµ‚äº†'
                ],
                abstract: [
                    'æ¦‚å¿µ', 'ç†è«–', 'å“²å­¦', 'çœŸç†', 'æ­£ç¾©', 'è‡ªç”±', 'å¹³ç­‰', 'èª¿å’Œ',
                    'å‡è¡¡', 'å¯¾ç«‹', 'çµ±åˆ', 'åˆ†é›¢', 'é€²åŒ–', 'é€€åŒ–', 'å¾ªç’°', 'æ°¸é '
                ]
            };
            
            // å„ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰å‡ç­‰ã«ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
            const samplesPerCategory = Math.floor(count / Object.keys(categories).length);
            
            for (const [category, words] of Object.entries(categories)) {
                for (let i = 0; i < samplesPerCategory; i++) {
                    const word = words[i % words.length];
                    const variations = [
                        word,
                        `${word}ã«ã¤ã„ã¦`,
                        `${word}ã®æ™‚æœŸ`,
                        `${word}ã‚’è€ƒãˆã‚‹`,
                        `æ–°ã—ã„${word}`,
                        `${word}ã®å¤‰åŒ–`
                    ];
                    
                    samples.push({
                        text: variations[i % variations.length],
                        category: category
                    });
                }
            }
            
            // æ®‹ã‚Šã‚’åŸºæœ¬ã‚«ãƒ†ã‚´ãƒªã§åŸ‹ã‚ã‚‹
            while (samples.length < count) {
                samples.push({
                    text: categories.basic[samples.length % categories.basic.length],
                    category: 'basic'
                });
            }
            
            return samples;
        }
        
        function calculateChiSquare(distribution, total) {
            const expected = total / 6;
            let chiSquare = 0;
            
            for (const observed of distribution) {
                chiSquare += Math.pow(observed - expected, 2) / expected;
            }
            
            return chiSquare;
        }
        
        function getCategoryName(category) {
            const names = {
                basic: 'åŸºæœ¬',
                business: 'ãƒ“ã‚¸ãƒã‚¹',
                emotion: 'æ„Ÿæƒ…',
                action: 'è¡Œå‹•',
                abstract: 'æŠ½è±¡'
            };
            return names[category] || category;
        }
        
        runLargeScaleTest();
    </script>
</body>
</html>