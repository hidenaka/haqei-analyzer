<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>5爻キーワード効果測定</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
        .result { margin: 10px 0; padding: 10px; background: #2d2d30; border-radius: 5px; }
        .yao5 { color: #4ec9b0; font-weight: bold; }
        .other { color: #f48771; }
    </style>
</head>
<body>
    <h1>5爻選択率測定（現在の状態）</h1>
    <div id="results"></div>

    <script type="module">
        import { TextTo384LinesBridge } from './public/js/ai/TextTo384LinesBridge.js';
        
        // 5爻向けテストサンプル（明確にリーダーシップ関連）
        const testSamples = [
            "リーダーシップを発揮する",
            "経営判断を下す時期",
            "統率力が求められる",
            "管理責任を果たす",
            "最終決定を行う",
            "戦略を立案する段階",
            "指導的立場での行動",
            "トップとしての決断",
            "成熟した判断が必要",
            "中心的役割を担う",
            "権限を持って進める",
            "主導権を握る",
            "責任者として対応",
            "幹部としての判断",
            "上級管理職の立場",
            "決定権を行使する",
            "統括業務を遂行",
            "方針を決定する",
            "重要な判断をする",
            "マネジメントを実施"
        ];
        
        async function testCurrentState() {
            const bridge = new TextTo384LinesBridge();
            await bridge.initialize();
            
            let results = [];
            let yao5Count = 0;
            
            for (const text of testSamples) {
                const result = await bridge.analyzeText(text);
                const is5Yao = result.line_position === 5;
                if (is5Yao) yao5Count++;
                
                results.push({
                    text: text,
                    position: result.line_position,
                    is5Yao: is5Yao
                });
            }
            
            const percentage = (yao5Count / testSamples.length * 100).toFixed(1);
            
            let html = `<h2>結果: ${yao5Count}/${testSamples.length} (${percentage}%)</h2>`;
            html += '<div class="result">';
            results.forEach(r => {
                const className = r.is5Yao ? 'yao5' : 'other';
                html += `<div class="${className}">${r.text} → ${r.position}爻</div>`;
            });
            html += '</div>';
            
            document.getElementById('results').innerHTML = html;
            
            console.log('5爻選択率:', percentage + '%');
            console.log('詳細:', results);
        }
        
        testCurrentState();
    </script>
</body>
</html>