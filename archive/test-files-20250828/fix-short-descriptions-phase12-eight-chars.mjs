import { readFile, writeFile } from 'fs/promises';

async function fixPhase12EightChars() {
  try {
    console.log('=== フェーズ12: 8文字の説明222件を一行一行修正 ===\n');
    
    // データベース読み込み
    let content = await readFile('./public/js/data/hexagram-human-traits-v3.js', 'utf-8');
    
    // 8文字の説明を一行一行丁寧に修正（222件）
    const eightCharFixes = {
      // 健康・生活系
      '"健康的な生活環境"': '"健康的で快適な生活環境"',
      '"健康的な環境と習慣"': '"健康的な環境と良い習慣を保つ"',
      '"十分な休養と栄養"': '"十分な休養と栄養を取ることが大切"',
      '"健康管理の達人"': '"健康管理を徹底する達人"',
      '"栄養バランスの良い食事"': '"栄養バランスの良い食事を心がける"',
      '"体調管理が得意"': '"体調管理が得意で健康的"',
      '"食事と睡眠の質"': '"食事と睡眠の質を重視する"',
      '"健康第一の生活"': '"健康第一の生活を送る"',
      '"養生法を知る"': '"効果的な養生法を知っている"',
      '"体力の回復"': '"体力を着実に回復させる"',
      '"エネルギー補給"': '"適切なエネルギー補給を行う"',
      '"栄養源の確保"': '"必要な栄養源を確保する"',
      '"健康的な習慣"': '"健康的な習慣を維持する"',
      '"規則正しい生活"': '"規則正しい生活リズムを保つ"',
      '"バランスの良い食事"': '"バランスの良い食事を取る"',
      '"適度な運動"': '"適度な運動を継続する"',
      '"十分な睡眠"': '"十分な睡眠時間を確保する"',
      
      // 挑戦・冒険系
      '"大きな挑戦と冒険"': '"大きな挑戦と冒険に挑む"',
      '"限界突破の達成感"': '"限界を突破する達成感"',
      '"挑戦を楽しむ環境"': '"挑戦を楽しめる環境"',
      '"冒険心ある仲間"': '"冒険心を持つ仲間たち"',
      '"限界を超える経験"': '"限界を超える貴重な経験"',
      '"未知への好奇心"': '"未知のものへの好奇心"',
      '"新たな挑戦機会"': '"新たな挑戦の機会を得る"',
      
      // 関係・交流系
      '"健康相談、生活指導"': '"健康相談や生活指導が得意"',
      '"みんなの健康を守る"': '"みんなの健康を守る存在"',
      '"素晴らしい出会い"': '"素晴らしい出会いに恵まれる"',
      '"縁結びの達人"': '"縁結びが得意な達人"',
      '"縁を大切にする"': '"縁を大切にする姿勢"',
      '"関係性の調整役"': '"関係性を調整する役割"',
      '"人脈を広げる"': '"人脈を戦略的に広げる"',
      '"社交的な環境"': '"社交的で開放的な環境"',
      
      // 集団・チーム系
      '"集団の中で輝く"': '"集団の中で輝く存在"',
      '"チームワークの力"': '"チームワークの大きな力"',
      '"仲間と共に成長"': '"仲間と共に成長する"',
      '"協力体制の構築"': '"協力体制を構築する"',
      '"組織力の発揮"': '"組織力を存分に発揮"',
      '"集団行動が得意"': '"集団行動が得意な人"',
      
      // 達成・成功系
      '"成功体験の積み重ね"': '"成功体験を積み重ねる"',
      '"目標達成の喜び"': '"目標を達成する喜び"',
      '"完成させる喜び"': '"物事を完成させる喜び"',
      '"成果を出す力"': '"確実に成果を出す力"',
      '"結果を残す能力"': '"結果を残す確かな能力"',
      '"実績を積む姿勢"': '"実績を着実に積む姿勢"',
      
      // 創造・表現系
      '"創造的な活動"': '"創造的な活動に没頭する"',
      '"芸術的な表現"': '"芸術的な表現を楽しむ"',
      '"独創的な発想"': '"独創的な発想を生み出す"',
      '"革新的なアイデア"': '"革新的なアイデアを出す"',
      '"クリエイティブな環境"': '"クリエイティブな環境で活躍"',
      
      // 変化・革新系
      '"変革の推進者"': '"変革を推進する存在"',
      '"革命的な行動"': '"革命的な行動を起こす"',
      '"改革の実行者"': '"改革を実行する立場"',
      '"変化を起こす力"': '"大きな変化を起こす力"',
      '"革新的な環境"': '"革新的で刺激的な環境"',
      
      // 知識・学習系
      '"知識の蓄積"': '"知識を着実に蓄積する"',
      '"学習の継続"': '"継続的な学習を続ける"',
      '"知恵の共有"': '"知恵を積極的に共有"',
      '"理論と実践"': '"理論と実践を両立する"',
      '"専門知識の習得"': '"専門知識を習得する"',
      
      // 資源・管理系
      '"資源の有効活用"': '"資源を有効に活用する"',
      '"蓄積と運用"': '"蓄積と運用を両立する"',
      '"管理能力の発揮"': '"管理能力を発揮する"',
      '"効率的な運営"': '"効率的に運営する"',
      '"資産の形成"': '"資産を着実に形成する"',
      
      // 感覚・感性系
      '"感覚的な満足"': '"感覚的な満足を得る"',
      '"感性を磨く"': '"感性を継続的に磨く"',
      '"直感を信じる"': '"直感を信じて行動する"',
      '"感受性を活かす"': '"感受性を最大限活かす"',
      '"感覚的なつながり"': '"感覚的な深いつながり"',
      
      // 持続・継続系
      '"継続的な努力"': '"継続的な努力を重ねる"',
      '"着実な前進"': '"着実に前進し続ける"',
      '"持続可能な成長"': '"持続可能な成長を実現"',
      '"長期的な視点"': '"長期的な視点を持つ"',
      '"段階的な発展"': '"段階的に発展する"',
      
      // 突破・限界系
      '"限界への挑戦"': '"自分の限界に挑戦する"',
      '"突破力の発揮"': '"突破力を存分に発揮"',
      '"壁を破る力"': '"壁を破る強い力"',
      '"障害の克服"': '"障害を着実に克服"',
      '"困難を乗り越える"': '"困難を乗り越える力"',
      
      // 過去・経験系
      '"過去の経験を活かす"': '"過去の経験を最大限活かす"',
      '"歴史から学ぶ"': '"歴史から多くを学ぶ"',
      '"経験の蓄積"': '"経験を着実に蓄積"',
      '"実績を重視"': '"実績を重視する姿勢"',
      '"伝統を守る"': '"大切な伝統を守る"',
      
      // 位置・配置系
      '"適材適所の配置"': '"適材適所の配置を実現"',
      '"ポジショニング"': '"的確なポジショニング"',
      '"位置関係の調整"': '"位置関係を調整する"',
      '"空間的な把握"': '"空間を的確に把握する"',
      '"整理整頓の徹底"': '"整理整頓を徹底する"',
      
      // 内面・精神系
      '"内面の充実"': '"内面を充実させる"',
      '"精神的な成長"': '"精神的に成長する"',
      '"心の平安"': '"心の平安を保つ"',
      '"内省の時間"': '"内省する貴重な時間"',
      '"静かな強さ"': '"静かだが確かな強さ"',
      
      // 個性・独自性系
      '"個性を活かす"': '"個性を最大限活かす"',
      '"独自性の発揮"': '"独自性を発揮する"',
      '"オリジナリティ"': '"オリジナリティを追求"',
      '"自分らしさ"': '"自分らしさを大切にする"',
      '"独立独歩"': '"独立独歩の精神を持つ"',
      
      // 違い・多様性系
      '"違いを受け入れる"': '"違いを素直に受け入れる"',
      '"多様性を尊重"': '"多様性を尊重する"',
      '"異質な融合"': '"異質なものを融合する"',
      '"対照的な要素"': '"対照的な要素を統合"',
      '"バランスの調整"': '"バランスを調整する"',
      
      // 長期・持続系
      '"長期戦略"': '"長期的な戦略を立てる"',
      '"持久力の勝負"': '"持久力で勝負する"',
      '"耐久性の証明"': '"耐久性を証明する"',
      '"息の長い活動"': '"息の長い活動を続ける"',
      '"継続は力なり"': '"継続は力なりを実践"',
      
      // 解放・自由系
      '"解放感を味わう"': '"解放感を存分に味わう"',
      '"自由への憧れ"': '"自由への強い憧れ"',
      '"束縛からの解放"': '"束縛から解放される"',
      '"制約のない活動"': '"制約のない自由な活動"',
      '"開放的な雰囲気"': '"開放的で自由な雰囲気"',
      
      // 奉仕・貢献系
      '"奉仕の精神"': '"奉仕の精神を持つ"',
      '"社会への貢献"': '"社会に貢献する活動"',
      '"与える喜び"': '"与える喜びを知る"',
      '"利他的な行動"': '"利他的な行動を取る"',
      '"無償の愛"': '"無償の愛を注ぐ"',
      
      // 成長・発展系
      '"成長の実感"': '"成長を実感する喜び"',
      '"発展的な活動"': '"発展的な活動を続ける"',
      '"拡大する喜び"': '"活動が拡大する喜び"',
      '"進化し続ける"': '"常に進化し続ける"',
      '"向上心を持つ"': '"強い向上心を持つ"',
      
      // 危機・リスク系
      '"危機管理能力"': '"優れた危機管理能力"',
      '"リスク回避"': '"リスクを賢く回避する"',
      '"危険察知能力"': '"危険を察知する能力"',
      '"安全確保"': '"安全を確実に確保する"',
      '"予防的措置"': '"予防的措置を講じる"',
      
      // 決断・判断系
      '"決断力の発揮"': '"決断力を発揮する"',
      '"判断の的確さ"': '"判断の的確さを保つ"',
      '"決定的な行動"': '"決定的な行動を取る"',
      '"明確な選択"': '"明確な選択をする"',
      '"迷いのない判断"': '"迷いのない判断を下す"',
      
      // その他の重要な8文字
      '"感動的な瞬間"': '"感動的な瞬間を作る"',
      '"印象的な出来事"': '"印象的な出来事を経験"',
      '"記憶に残る体験"': '"記憶に残る体験をする"',
      '"心に響く言葉"': '"心に響く言葉を伝える"',
      '"共感を呼ぶ行動"': '"共感を呼ぶ行動を取る"',
      '"信頼を築く努力"': '"信頼を築く努力を続ける"',
      '"関係性の深化"': '"関係性を深化させる"',
      '"絆を深める活動"': '"絆を深める活動をする"',
      '"つながりを大切に"': '"つながりを大切にする"',
      '"ネットワークの構築"': '"ネットワークを構築する"',
      '"影響力の拡大"': '"影響力を着実に拡大"',
      '"存在感を示す"': '"存在感を確実に示す"',
      '"価値を提供する"': '"高い価値を提供する"',
      '"意味を見出す"': '"活動に意味を見出す"',
      '"目的を明確に"': '"目的を明確にする"',
      '"ビジョンを描く"': '"明確なビジョンを描く"',
      '"未来を創造する"': '"より良い未来を創造する"',
      '"希望を持ち続ける"': '"希望を持ち続ける姿勢"',
      '"夢を追い求める"': '"夢を追い求め続ける"',
      '"理想を実現する"': '"理想を着実に実現する"',
      '"目標を達成する"': '"目標を確実に達成する"',
      '"成功への道筋"': '"成功への道筋を作る"',
      '"勝利への執念"': '"勝利への強い執念"',
      '"克服する力"': '"困難を克服する力"',
      '"乗り越える勇気"': '"困難を乗り越える勇気"',
      '"打ち破る意志"': '"壁を打ち破る意志"',
      '"突破する能力"': '"限界を突破する能力"',
      '"開拓する精神"': '"新しい道を開拓する精神"',
      '"切り開く力"': '"未来を切り開く力"',
      '"築き上げる努力"': '"確かなものを築き上げる努力"',
      '"作り上げる喜び"': '"価値あるものを作り上げる喜び"',
      '"生み出す創造力"': '"新しいものを生み出す創造力"',
      '"表現する自由"': '"自由に表現する権利"',
      '"発信する勇気"': '"価値ある情報を発信する勇気"',
      '"伝える責任"': '"正確に伝える責任"',
      '"共有する文化"': '"知識を共有する文化"',
      '"つながる喜び"': '"人とつながる喜び"',
      '"結びつける力"': '"人と人を結びつける力"',
      '"橋渡しの役割"': '"異なる世界の橋渡し役"',
      '"調和を生む能力"': '"調和を生み出す能力"',
      '"バランスを保つ力"': '"バランスを保つ力"',
      '"統合する知恵"': '"異なるものを統合する知恵"',
      '"まとめる技術"': '"全体をまとめる技術"',
      '"導く使命"': '"正しい方向へ導く使命"',
      '"支える存在"': '"しっかりと支える存在"',
      '"守る責任"': '"大切なものを守る責任"',
      '"育てる喜び"': '"丁寧に育てる喜び"',
      '"見守る愛情"': '"温かく見守る愛情"',
      '"寄り添う優しさ"': '"そっと寄り添う優しさ"',
      '"励ます言葉"': '"温かく励ます言葉"',
      '"勇気づける存在"': '"勇気を与える存在"',
      '"希望を与える力"': '"希望を与える力"',
      '"光を当てる役割"': '"良い面に光を当てる役割"',
      '"可能性を開く鍵"': '"可能性を開く鍵となる"',
      '"扉を開く勇気"': '"新しい扉を開く勇気"',
      '"道を示す知恵"': '"進むべき道を示す知恵"',
      '"方向を定める力"': '"明確な方向を定める力"',
      '"指針を示す役割"': '"明確な指針を示す役割"',
      '"基準を作る責任"': '"新しい基準を作る責任"',
      '"枠組みを作る能力"': '"効果的な枠組みを作る能力"',
      '"仕組みを作る技術"': '"持続的な仕組みを作る技術"',
      '"システムを構築"': '"効率的なシステムを構築"',
      '"プロセスを改善"': '"プロセスを継続的に改善"',
      '"効率化を進める"': '"業務の効率化を進める"',
      '"最適化を図る"': '"全体の最適化を図る"',
      '"品質を高める"': '"品質を着実に高める"',
      '"価値を高める"': '"価値を継続的に高める"',
      '"レベルを上げる"': '"全体のレベルを上げる"',
      '"スキルを磨く"': '"専門スキルを磨く"',
      '"能力を開発する"': '"潜在能力を開発する"',
      '"才能を伸ばす"': '"才能を最大限伸ばす"',
      '"強みを活かす"': '"強みを最大限活かす"',
      '"弱みを克服する"': '"弱みを着実に克服する"'
    };
    
    // バックアップ作成
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    await writeFile(`./public/js/data/hexagram-human-traits-v3.backup.phase12.${timestamp}.js`, content);
    console.log(`📁 バックアップ作成: hexagram-human-traits-v3.backup.phase12.${timestamp}.js\n`);
    
    // 修正適用
    let totalFixCount = 0;
    let successfulFixes = [];
    
    console.log('8文字の修正を適用中...\n');
    
    Object.entries(eightCharFixes).forEach(([old, newText]) => {
      const regex = new RegExp(old.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
      const matches = content.match(regex);
      if (matches) {
        content = content.replace(regex, newText);
        totalFixCount += matches.length;
        successfulFixes.push(`${old} → ${newText} (${matches.length}箇所)`);
      }
    });
    
    // 成功した修正を表示（最初の30件）
    console.log('【修正成功項目】');
    successfulFixes.slice(0, 30).forEach(fix => {
      console.log(`✅ ${fix}`);
    });
    if (successfulFixes.length > 30) {
      console.log(`... 他 ${successfulFixes.length - 30}件`);
    }
    
    // ファイル保存
    await writeFile('./public/js/data/hexagram-human-traits-v3.js', content);
    
    console.log(`\n=== フェーズ12完了 ===`);
    console.log(`総修正件数: ${totalFixCount}件`);
    console.log(`修正成功項目: ${successfulFixes.length}種類`);
    console.log(`\n次のフェーズ: node fix-short-descriptions-phase13-nine-chars.mjs`);
    
  } catch (error) {
    console.error('エラー:', error);
  }
}

fixPhase12EightChars();