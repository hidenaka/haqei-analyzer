<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAQEI - UXæ”¹å–„ç‰ˆ çµæœç”»é¢</title>
    <style>
        /* ==========================================================================
           HAQEI UXæ”¹å–„ç‰ˆãƒ‡ã‚¶ã‚¤ãƒ³ - éšå±¤çš„æƒ…å ±è¨­è¨ˆ
           ========================================================================== */
        
        :root {
            /* ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ */
            --primary-blue: #3b82f6;
            --primary-blue-dark: #2563eb;
            --secondary-blue: #6366f1;
            --light-blue: #dbeafe;
            --very-light-blue: #f0f9ff;
            
            /* Engine OS ã‚«ãƒ©ãƒ¼ */
            --engine-color: #f59e0b;
            --engine-light: #fef3c7;
            --engine-dark: #d97706;
            
            /* Interface OS ã‚«ãƒ©ãƒ¼ */
            --interface-color: #10b981;
            --interface-light: #d1fae5;
            --interface-dark: #059669;
            
            /* SafeMode OS ã‚«ãƒ©ãƒ¼ */
            --safemode-color: #8b5cf6;
            --safemode-light: #e9d5ff;
            --safemode-dark: #7c3aed;
            
            /* ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ« */
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #374151;
            --gray-700: #1f2937;
            --gray-900: #030712;
            
            /* ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚° */
            --spacing-xs: 0.5rem;
            --spacing-sm: 0.75rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            
            /* ã‚·ãƒ£ãƒ‰ã‚¦ */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--gray-900);
            background: var(--gray-50);
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--white);
        }

        /* ==========================================================================
           ãƒ¬ãƒ™ãƒ«1: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆãƒ»ã‚¤ãƒ³ã‚µã‚¤ãƒˆ (5ç§’ã§ç†è§£)
           ========================================================================== */
        
        .instant-insight {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-lg);
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .instant-insight h1 {
            font-size: 2.5rem;
            margin: 0 0 var(--spacing-lg) 0;
            font-weight: 700;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .personality-visual {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: var(--spacing-xl);
            margin: var(--spacing-lg) 0;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .personality-bars {
            display: grid;
            gap: var(--spacing-md);
            max-width: 500px;
            margin: 0 auto;
        }

        .personality-bar {
            display: grid;
            grid-template-columns: 120px 1fr 60px;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .bar-label {
            text-align: right;
            font-weight: 600;
        }

        .bar-track {
            height: 24px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            border-radius: 12px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .one-liner {
            background: white;
            color: var(--gray-900);
            padding: var(--spacing-lg) var(--spacing-xl);
            border-radius: 100px;
            font-size: 1.25rem;
            font-weight: 600;
            margin: var(--spacing-xl) 0;
            box-shadow: var(--shadow-lg);
            animation: fadeInUp 1s ease 0.4s both;
        }

        .scroll-indicator {
            position: absolute;
            bottom: var(--spacing-xl);
            animation: bounce 2s infinite;
            cursor: pointer;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .scroll-indicator button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scroll-indicator button:hover {
            background: white;
            color: var(--primary-blue);
            transform: scale(1.05);
        }

        /* ==========================================================================
           ãƒ¬ãƒ™ãƒ«2: ã‚¯ã‚¤ãƒƒã‚¯ãƒ»ã‚µãƒãƒªãƒ¼ (30ç§’ã§è¦ç‚¹æŠŠæ¡)
           ========================================================================== */
        
        .quick-summary {
            padding: var(--spacing-xl);
            background: var(--very-light-blue);
        }

        .summary-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .summary-header h2 {
            font-size: 1.75rem;
            color: var(--gray-900);
            margin: 0 0 var(--spacing-sm) 0;
        }

        .summary-subtitle {
            color: var(--gray-600);
            font-size: 1.1rem;
        }

        .three-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .point-card {
            background: white;
            border-radius: 12px;
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .point-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .point-card h3 {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin: 0 0 var(--spacing-md) 0;
            font-size: 1.25rem;
        }

        .strength-card { border-top: 4px solid var(--engine-color); }
        .watchout-card { border-top: 4px solid var(--safemode-color); }
        .growth-card { border-top: 4px solid var(--interface-color); }

        .weekly-action {
            background: white;
            border-radius: 12px;
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--spacing-xl);
        }

        .action-card {
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--very-light-blue) 100%);
            border-radius: 8px;
            padding: var(--spacing-lg);
            border-left: 4px solid var(--primary-blue);
        }

        .action-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-blue-dark);
            margin-bottom: var(--spacing-sm);
        }

        .action-detail {
            color: var(--gray-700);
            margin-bottom: var(--spacing-md);
        }

        .expected-result {
            background: white;
            padding: var(--spacing-sm);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .detail-navigation {
            text-align: center;
            padding: var(--spacing-lg);
        }

        .show-details-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .show-details-btn:hover {
            background: var(--primary-blue-dark);
            transform: scale(1.05);
        }

        /* ==========================================================================
           ãƒ¬ãƒ™ãƒ«3: ãƒ‡ã‚£ãƒ†ãƒ¼ãƒ«ãƒ»ã‚¢ãƒŠãƒªã‚·ã‚¹ (è©³ç´°åˆ†æ)
           ========================================================================== */
        
        .detailed-analysis {
            padding: var(--spacing-xl);
            background: var(--gray-50);
            display: none;
        }

        .detailed-analysis.active {
            display: block;
        }

        .detail-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .detail-header h2 {
            font-size: 1.5rem;
            color: var(--gray-900);
            margin: 0 0 var(--spacing-sm) 0;
        }

        /* æŠ˜ã‚ŠãŸãŸã¿å¼è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .collapsible-section {
            background: white;
            border-radius: 12px;
            margin-bottom: var(--spacing-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .collapsible-header {
            padding: var(--spacing-lg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s ease;
        }

        .collapsible-header:hover {
            background: var(--gray-50);
        }

        .collapsible-title {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .collapsible-indicator {
            transition: transform 0.3s ease;
            font-size: 1.5rem;
        }

        .collapsible-section.expanded .collapsible-indicator {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .collapsible-section.expanded .collapsible-content {
            max-height: 2000px;
        }

        .collapsible-inner {
            padding: 0 var(--spacing-lg) var(--spacing-lg) var(--spacing-lg);
        }

        .engine-header { border-top: 4px solid var(--engine-color); }
        .interface-header { border-top: 4px solid var(--interface-color); }
        .safemode-header { border-top: 4px solid var(--safemode-color); }

        /* OS Details Styling */
        .os-info-bar {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background: var(--gray-50);
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .os-subsection {
            margin-bottom: var(--spacing-lg);
        }

        .os-subsection h4 {
            font-size: 1.1rem;
            margin: 0 0 var(--spacing-sm) 0;
            color: var(--gray-900);
        }

        /* ãƒ‡ãƒ¼ã‚¿ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æ”¹å–„ */
        .data-simulator {
            position: fixed;
            bottom: var(--spacing-lg);
            right: var(--spacing-lg);
            background: white;
            padding: var(--spacing-md);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
        }

        .simulator-title {
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .pattern-buttons {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .pattern-btn {
            padding: 0.5rem;
            background: var(--gray-100);
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .pattern-btn:hover {
            background: var(--primary-blue);
            color: white;
        }

        .pattern-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .instant-insight h1 {
                font-size: 1.75rem;
            }
            
            .three-points {
                grid-template-columns: 1fr;
            }
            
            .data-simulator {
                bottom: var(--spacing-sm);
                right: var(--spacing-sm);
                left: var(--spacing-sm);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ==========================================================================
             ãƒ¬ãƒ™ãƒ«1: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆãƒ»ã‚¤ãƒ³ã‚µã‚¤ãƒˆ (5ç§’ã§ç†è§£)
             ========================================================================== -->
        <section class="instant-insight" id="instant-section">
            <h1 id="main-title">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã‚’åˆ†æä¸­...</h1>
            
            <div class="personality-visual">
                <div class="personality-bars" id="personality-bars">
                    <!-- å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="one-liner" id="one-liner">
                <!-- å‹•çš„ã«ç”Ÿæˆ -->
            </div>
            
            <div class="scroll-indicator">
                <button onclick="scrollToSummary()">
                    â†“ ã‚‚ã£ã¨è©³ã—ãè¦‹ã‚‹
                </button>
            </div>
        </section>

        <!-- ==========================================================================
             ãƒ¬ãƒ™ãƒ«2: ã‚¯ã‚¤ãƒƒã‚¯ãƒ»ã‚µãƒãƒªãƒ¼ (30ç§’ã§è¦ç‚¹æŠŠæ¡)
             ========================================================================== -->
        <section class="quick-summary" id="summary-section">
            <div class="summary-header">
                <h2>ã‚ãªãŸã®3ã¤ã®ãƒã‚¤ãƒ³ãƒˆ</h2>
                <p class="summary-subtitle">å¼·ã¿ãƒ»æ³¨æ„ç‚¹ãƒ»æˆé•·ã®ãƒ’ãƒ³ãƒˆã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¾ã—ãŸ</p>
            </div>
            
            <div class="three-points" id="three-points">
                <!-- å‹•çš„ã«ç”Ÿæˆ -->
            </div>
            
            <div class="weekly-action">
                <h3>ğŸ“… ä»Šé€±è©¦ã—ã¦ã¿ã‚ˆã†</h3>
                <div class="action-card" id="weekly-action">
                    <!-- å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="detail-navigation">
                <button class="show-details-btn" onclick="toggleDetails()">
                    è©³ç´°åˆ†æã‚’è¦‹ã‚‹ â†’
                </button>
            </div>
        </section>

        <!-- ==========================================================================
             ãƒ¬ãƒ™ãƒ«3: ãƒ‡ã‚£ãƒ†ãƒ¼ãƒ«ãƒ»ã‚¢ãƒŠãƒªã‚·ã‚¹ (è©³ç´°åˆ†æ)
             ========================================================================== -->
        <section class="detailed-analysis" id="detail-section">
            <div class="detail-header">
                <h2>è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ</h2>
                <p class="summary-subtitle">ã‚ãªãŸã®ç‰¹æ€§ã‚’3ã¤ã®è¦³ç‚¹ã‹ã‚‰æ·±ãåˆ†æã—ã¾ã—ãŸ</p>
            </div>
            
            <div id="detailed-content">
                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æŠ˜ã‚ŠãŸãŸã¿å¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            </div>
        </section>
    </div>

    <!-- ãƒ‡ãƒ¼ã‚¿ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ -->
    <div class="data-simulator">
        <div class="simulator-title">ğŸ”§ ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ</div>
        <div class="pattern-buttons">
            <button class="pattern-btn active" onclick="loadPattern('innovator')">
                ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼å‹
            </button>
            <button class="pattern-btn" onclick="loadPattern('supporter')">
                ã‚µãƒãƒ¼ã‚¿ãƒ¼å‹
            </button>
            <button class="pattern-btn" onclick="loadPattern('balanced')">
                ãƒãƒ©ãƒ³ã‚¹å‹
            </button>
            <button class="pattern-btn" onclick="loadPattern('revolutionary')">
                é©å‘½å‹
            </button>
            <button class="pattern-btn" onclick="loadPattern('stabilizer')">
                å®‰å®šå‹
            </button>
        </div>
    </div>

    <!-- V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ­ã‚¸ãƒƒã‚¯ -->
    <script src="public/js/data/hexagram-human-traits-v3.js"></script>
    <script>
        // ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
        const dataPatterns = {
            innovator: {
                engineOS: { hexagram: "ä¹¾ç‚ºå¤©", score: 92 },
                interfaceOS: { hexagram: "é›¢ç‚ºç«", score: 75 },
                safeModeOS: { hexagram: "éœ‡ç‚ºé›·", score: 68 }
            },
            supporter: {
                engineOS: { hexagram: "å¤ç‚ºåœ°", score: 85 },
                interfaceOS: { hexagram: "å±±æ°´è’™", score: 88 },
                safeModeOS: { hexagram: "è‰®ç‚ºå±±", score: 72 }
            },
            balanced: {
                engineOS: { hexagram: "æ°´å¤©éœ€", score: 80 },
                interfaceOS: { hexagram: "å·½ç‚ºé¢¨", score: 79 },
                safeModeOS: { hexagram: "åç‚ºæ°´", score: 81 }
            },
            revolutionary: {
                engineOS: { hexagram: "æ¾¤ç«é©", score: 89 },
                interfaceOS: { hexagram: "ç«é¢¨é¼", score: 86 },
                safeModeOS: { hexagram: "å¤©æ°´è¨Ÿ", score: 73 }
            },
            stabilizer: {
                engineOS: { hexagram: "è‰®ç‚ºå±±", score: 77 },
                interfaceOS: { hexagram: "æ°´ç«æ—¢æ¸ˆ", score: 82 },
                safeModeOS: { hexagram: "å…Œç‚ºæ¾¤", score: 78 }
            }
        };

        // ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒ—åˆ¤å®šé–¢æ•°
        function determineMainType(data) {
            const engineData = window.HexagramHumanTraitsV3[data.engineOS.hexagram];
            const interfaceData = window.HexagramHumanTraitsV3[data.interfaceOS.hexagram];
            
            // ã‚¹ã‚³ã‚¢ã®é«˜ã„æ–¹ã‚’å„ªå…ˆã—ã¦çµ„ã¿åˆã‚ã›
            if (data.engineOS.score > 85) {
                return `${engineData.nickname}å‹${interfaceData.nickname}`;
            } else if (data.interfaceOS.score > 85) {
                return `${interfaceData.nickname}å¯„ã‚Šã®${engineData.nickname}`;
            } else {
                return `ãƒãƒ©ãƒ³ã‚¹å‹${engineData.nickname}`;
            }
        }

        // ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ç”Ÿæˆ
        function generateOneLiner(data) {
            const engineData = window.HexagramHumanTraitsV3[data.engineOS.hexagram];
            const interfaceData = window.HexagramHumanTraitsV3[data.interfaceOS.hexagram];
            
            // Engine OSã¨Interface OSã®ç‰¹å¾´ã‚’çµ„ã¿åˆã‚ã›
            return `${engineData.emoji} ${engineData.asEngineOS.profile.description.split('ã€')[0]}ã€ã‚’åŸå‹•åŠ›ã«ã€${interfaceData.asInterfaceOS.profile.description}`;
        }

        // å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ
        function generateDynamicContent(pattern) {
            const data = dataPatterns[pattern];
            const engineData = window.HexagramHumanTraitsV3[data.engineOS.hexagram];
            const interfaceData = window.HexagramHumanTraitsV3[data.interfaceOS.hexagram];
            const safeData = window.HexagramHumanTraitsV3[data.safeModeOS.hexagram];
            
            // ãƒ¬ãƒ™ãƒ«1: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆãƒ»ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
            const mainType = determineMainType(data);
            document.getElementById('main-title').innerHTML = `ã‚ãªãŸã¯ã€Œ${mainType}ã€ã‚¿ã‚¤ãƒ—`;
            
            // ãƒ‘ãƒ¼ã‚½ãƒŠãƒªãƒ†ã‚£ãƒãƒ¼
            const bars = [
                { label: 'åŸå‹•åŠ›', value: data.engineOS.score, color: 'var(--engine-color)' },
                { label: 'ç¤¾äº¤æ€§', value: data.interfaceOS.score, color: 'var(--interface-color)' },
                { label: 'å®‰å®šæ€§', value: data.safeModeOS.score, color: 'var(--safemode-color)' }
            ];
            
            document.getElementById('personality-bars').innerHTML = bars.map(bar => `
                <div class="personality-bar">
                    <div class="bar-label">${bar.label}</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width: ${bar.value}%; background: ${bar.color};">
                            ${bar.value}%
                        </div>
                    </div>
                </div>
            `).join('');
            
            // ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼
            document.getElementById('one-liner').innerHTML = generateOneLiner(data);
            
            // ãƒ¬ãƒ™ãƒ«2: ã‚¯ã‚¤ãƒƒã‚¯ãƒ»ã‚µãƒãƒªãƒ¼
            document.getElementById('three-points').innerHTML = `
                <div class="point-card strength-card">
                    <h3>âœ¨ ã‚ãªãŸã®å¼·ã¿</h3>
                    <p>${engineData.asEngineOS.profile.description}</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gray-600);">
                        ${engineData.asEngineOS.normalState.example}
                    </p>
                </div>
                
                <div class="point-card watchout-card">
                    <h3>âš ï¸ æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨</h3>
                    <p>${safeData.asSafeModeOS.stressResponse.badPoint}</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gray-600);">
                        ${engineData.asEngineOS.maintenance.warning}
                    </p>
                </div>
                
                <div class="point-card growth-card">
                    <h3>ğŸŒ± æˆé•·ã®ãƒ’ãƒ³ãƒˆ</h3>
                    <p>${interfaceData.asInterfaceOS.relationshipTips.advice}</p>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--gray-600);">
                        ${engineData.osBalance.tip}
                    </p>
                </div>
            `;
            
            // ä»Šé€±ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
            document.getElementById('weekly-action').innerHTML = `
                <div class="action-title">${engineData.asEngineOS.maintenance.tip}</div>
                <div class="action-detail">
                    ${interfaceData.asInterfaceOS.relationshipTips.advice}
                </div>
                <div class="expected-result">
                    <strong>æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœï¼š</strong> ${engineData.osBalance.whenBalanced}
                </div>
            `;
            
            // ãƒ¬ãƒ™ãƒ«3: è©³ç´°åˆ†æï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¼ï¼‰
            document.getElementById('detailed-content').innerHTML = `
                <!-- Engine OSè©³ç´° -->
                <div class="collapsible-section engine-header">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <div class="collapsible-title">
                            ${engineData.emoji} ã‚ãªãŸã®åŸå‹•åŠ›ï¼š${data.engineOS.hexagram}ã€Œ${engineData.nickname}ã€
                        </div>
                        <div class="collapsible-indicator">â–¼</div>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="os-info-bar">
                                <span>ğŸ“ ç¬¬${engineData.id}å¦</span>
                                <span>å¦è±¡: ${engineData.symbol}</span>
                                <span>äº”è¡Œ: ${engineData.element}</span>
                                <span>ã‚¹ã‚³ã‚¢: ${data.engineOS.score}</span>
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ”§ ${engineData.asEngineOS.profile.type}</h4>
                                <p>${engineData.asEngineOS.profile.description}</p>
                                <p style="font-style: italic; color: var(--gray-600);">
                                    ${engineData.asEngineOS.profile.metaphor}
                                </p>
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ’« é€šå¸¸ã®çŠ¶æ…‹</h4>
                                <p>${engineData.asEngineOS.normalState.whatHappens}</p>
                                <div style="background: var(--engine-light); padding: var(--spacing-sm); border-radius: 6px; margin: 0.5rem 0;">
                                    ä¾‹: ${engineData.asEngineOS.normalState.example}
                                </div>
                                <p>ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ«: ${engineData.asEngineOS.normalState.energyLevel}</p>
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ”¥ ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¢ãƒ¼ãƒ‰</h4>
                                <p><strong>ç™ºå‹•æ¡ä»¶:</strong> ${engineData.asEngineOS.superMode.when}</p>
                                <p>${engineData.asEngineOS.superMode.whatHappens}</p>
                                ${engineData.asEngineOS.superMode.example ? `
                                    <div style="background: #fef3c7; padding: var(--spacing-sm); border-radius: 6px;">
                                        ä¾‹: ${engineData.asEngineOS.superMode.example}
                                    </div>
                                ` : ''}
                            </div>
                            
                            ${engineData.asEngineOS.restMode ? `
                                <div class="os-subsection">
                                    <h4>ğŸ˜´ ä¼‘æ¯ãƒ¢ãƒ¼ãƒ‰</h4>
                                    <p>${engineData.asEngineOS.restMode.whatHappens}</p>
                                    <p><strong>ä¼‘æ¯æ–¹æ³•:</strong> ${engineData.asEngineOS.restMode.howToRest}</p>
                                    ${engineData.asEngineOS.restMode.note ? `
                                        <p style="font-style: italic; color: var(--gray-600);">
                                            ${engineData.asEngineOS.restMode.note}
                                        </p>
                                    ` : ''}
                                </div>
                            ` : ''}
                            
                            <div class="os-subsection">
                                <h4>ğŸ”§ ã‚»ãƒ«ãƒ•ã‚±ã‚¢æ–¹æ³•</h4>
                                <p><strong>å¿…è¦ãªã‚‚ã®:</strong> ${engineData.asEngineOS.maintenance.whatYouNeed}</p>
                                <p><strong>å……é›»æ–¹æ³•:</strong> ${engineData.asEngineOS.maintenance.howToCharge}</p>
                                <p style="color: #92400e;"><strong>âš ï¸ æ³¨æ„:</strong> ${engineData.asEngineOS.maintenance.warning}</p>
                                <p style="color: #059669;"><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ${engineData.asEngineOS.maintenance.tip}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Interface OSè©³ç´° -->
                <div class="collapsible-section interface-header">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <div class="collapsible-title">
                            ${interfaceData.emoji} äººã¨ã®é–¢ã‚ã‚Šæ–¹ï¼š${data.interfaceOS.hexagram}ã€Œ${interfaceData.nickname}ã€
                        </div>
                        <div class="collapsible-indicator">â–¼</div>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="os-info-bar">
                                <span>ğŸ“ ç¬¬${interfaceData.id}å¦</span>
                                <span>å¦è±¡: ${interfaceData.symbol}</span>
                                <span>äº”è¡Œ: ${interfaceData.element}</span>
                                <span>ã‚¹ã‚³ã‚¢: ${data.interfaceOS.score}</span>
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ”— ${interfaceData.asInterfaceOS.profile.type}</h4>
                                <p>${interfaceData.asInterfaceOS.profile.description}</p>
                                ${interfaceData.asInterfaceOS.profile.metaphor ? `
                                    <p style="font-style: italic; color: var(--gray-600);">
                                        ${interfaceData.asInterfaceOS.profile.metaphor}
                                    </p>
                                ` : ''}
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ—£ï¸ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«</h4>
                                <p><strong>è©±ã—æ–¹:</strong> ${interfaceData.asInterfaceOS.howToTalk.style}</p>
                                <div style="background: var(--interface-light); padding: var(--spacing-sm); border-radius: 6px; margin: 0.5rem 0;">
                                    ä¾‹: ${interfaceData.asInterfaceOS.howToTalk.example}
                                </div>
                                <p><strong>å¾—æ„ãªã“ã¨:</strong> ${interfaceData.asInterfaceOS.howToTalk.goodAt}</p>
                                ${interfaceData.asInterfaceOS.howToTalk.notGoodAt ? `
                                    <p><strong>è‹¦æ‰‹ãªã“ã¨:</strong> ${interfaceData.asInterfaceOS.howToTalk.notGoodAt}</p>
                                ` : ''}
                            </div>
                            
                            ${interfaceData.asInterfaceOS.bestEnvironment ? `
                                <div class="os-subsection">
                                    <h4>ğŸŒŸ æœ€é©ç’°å¢ƒ</h4>
                                    <p><strong>å ´æ‰€:</strong> ${interfaceData.asInterfaceOS.bestEnvironment.where}</p>
                                    <p><strong>ä¾‹:</strong> ${interfaceData.asInterfaceOS.bestEnvironment.example}</p>
                                    <p><strong>ç›¸æ€§ã®è‰¯ã„äºº:</strong> ${interfaceData.asInterfaceOS.bestEnvironment.withWho}</p>
                                    ${interfaceData.asInterfaceOS.bestEnvironment.avoid ? `
                                        <p><strong>é¿ã‘ã‚‹ã¹ãç’°å¢ƒ:</strong> ${interfaceData.asInterfaceOS.bestEnvironment.avoid}</p>
                                    ` : ''}
                                </div>
                            ` : ''}
                            
                            ${interfaceData.asInterfaceOS.relationshipTips ? `
                                <div class="os-subsection">
                                    <h4>ğŸ’ é–¢ä¿‚æ€§ã®ã‚³ãƒ„</h4>
                                    <p><strong>å¼·ã¿:</strong> ${interfaceData.asInterfaceOS.relationshipTips.strength}</p>
                                    <p><strong>å¼±ã¿:</strong> ${interfaceData.asInterfaceOS.relationshipTips.weakness}</p>
                                    <div style="background: #fef3c7; padding: var(--spacing-sm); border-radius: 6px;">
                                        <strong>ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong> ${interfaceData.asInterfaceOS.relationshipTips.advice}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
                
                <!-- SafeMode OSè©³ç´° -->
                <div class="collapsible-section safemode-header">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <div class="collapsible-title">
                            ${safeData.emoji} ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³•ï¼š${data.safeModeOS.hexagram}ã€Œ${safeData.nickname}ã€
                        </div>
                        <div class="collapsible-indicator">â–¼</div>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <div class="os-info-bar">
                                <span>ğŸ“ ç¬¬${safeData.id}å¦</span>
                                <span>å¦è±¡: ${safeData.symbol}</span>
                                <span>äº”è¡Œ: ${safeData.element}</span>
                                <span>ã‚¹ã‚³ã‚¢: ${data.safeModeOS.score}</span>
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ›¡ï¸ ${safeData.asSafeModeOS.profile.type}</h4>
                                <p>${safeData.asSafeModeOS.profile.description}</p>
                                ${safeData.asSafeModeOS.profile.metaphor ? `
                                    <p style="font-style: italic; color: var(--gray-600);">
                                        ${safeData.asSafeModeOS.profile.metaphor}
                                    </p>
                                ` : ''}
                            </div>
                            
                            <div class="os-subsection">
                                <h4>ğŸ˜° ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³•</h4>
                                <p><strong>å¯¾å‡¦æ–¹æ³•:</strong> ${safeData.asSafeModeOS.stressResponse.whatYouDo}</p>
                                <div style="background: var(--safemode-light); padding: var(--spacing-sm); border-radius: 6px; margin: 0.5rem 0;">
                                    ä¾‹: ${safeData.asSafeModeOS.stressResponse.example}
                                </div>
                                <p style="color: #166534;"><strong>è‰¯ã„ç‚¹:</strong> ${safeData.asSafeModeOS.stressResponse.goodPoint}</p>
                                <p style="color: #991b1b;"><strong>æ³¨æ„ç‚¹:</strong> ${safeData.asSafeModeOS.stressResponse.badPoint}</p>
                            </div>
                            
                            ${safeData.asSafeModeOS.emergencyMode ? `
                                <div class="os-subsection">
                                    <h4>ğŸš¨ ç·Šæ€¥ãƒ¢ãƒ¼ãƒ‰</h4>
                                    <p><strong>åå¿œ:</strong> ${safeData.asSafeModeOS.emergencyMode.whatHappens}</p>
                                    <p><strong>ä¾‹:</strong> ${safeData.asSafeModeOS.emergencyMode.example}</p>
                                    ${safeData.asSafeModeOS.emergencyMode.recovery ? `
                                        <p><strong>å›å¾©ãƒ—ãƒ­ã‚»ã‚¹:</strong> ${safeData.asSafeModeOS.emergencyMode.recovery}</p>
                                    ` : ''}
                                    <p><strong>å›å¾©æ™‚é–“:</strong> ${safeData.asSafeModeOS.emergencyMode.timeToRecover}</p>
                                </div>
                            ` : ''}
                            
                            ${safeData.asSafeModeOS.howToRecover ? `
                                <div class="os-subsection">
                                    <h4>ğŸ’š å›å¾©æ–¹æ³•</h4>
                                    <p><strong>ãƒ™ã‚¹ãƒˆãªæ–¹æ³•:</strong> ${safeData.asSafeModeOS.howToRecover.bestWay}</p>
                                    <p><strong>ä¾‹:</strong> ${safeData.asSafeModeOS.howToRecover.example}</p>
                                    ${safeData.asSafeModeOS.howToRecover.environment ? `
                                        <p><strong>ç’°å¢ƒ:</strong> ${safeData.asSafeModeOS.howToRecover.environment}</p>
                                    ` : ''}
                                    ${safeData.asSafeModeOS.howToRecover.support ? `
                                        <p><strong>ã‚µãƒãƒ¼ãƒˆ:</strong> ${safeData.asSafeModeOS.howToRecover.support}</p>
                                    ` : ''}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
                
                <!-- OSãƒãƒ©ãƒ³ã‚¹åˆ†æ -->
                <div class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleCollapsible(this)">
                        <div class="collapsible-title">
                            âš–ï¸ OSãƒãƒ©ãƒ³ã‚¹ç·åˆåˆ†æ
                        </div>
                        <div class="collapsible-indicator">â–¼</div>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-inner">
                            <h4>ğŸ“Š ç¾åœ¨ã®OSæ§‹æˆ</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md); margin-bottom: var(--spacing-lg);">
                                <div style="padding: var(--spacing-sm); background: var(--engine-light); border-radius: 6px;">
                                    <strong>åŸå‹•åŠ›:</strong> ${data.engineOS.hexagram}ã€Œ${engineData.nickname}ã€
                                </div>
                                <div style="padding: var(--spacing-sm); background: var(--interface-light); border-radius: 6px;">
                                    <strong>é–¢ã‚ã‚Šæ–¹:</strong> ${data.interfaceOS.hexagram}ã€Œ${interfaceData.nickname}ã€
                                </div>
                                <div style="padding: var(--spacing-sm); background: var(--safemode-light); border-radius: 6px;">
                                    <strong>å®ˆã‚Šæ–¹:</strong> ${data.safeModeOS.hexagram}ã€Œ${safeData.nickname}ã€
                                </div>
                            </div>
                            
                            ${engineData.osBalance ? `
                                <div class="os-subsection">
                                    <h4>åŸå‹•åŠ›ã®ãƒãƒ©ãƒ³ã‚¹</h4>
                                    <p><strong>ç†æƒ³:</strong> ${engineData.osBalance.idealBalance}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã‚‹æ™‚:</strong> ${engineData.osBalance.whenBalanced}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå´©ã‚ŒãŸæ™‚:</strong> ${engineData.osBalance.whenImbalanced}</p>
                                    <p><strong>ãƒ’ãƒ³ãƒˆ:</strong> ${engineData.osBalance.tip}</p>
                                </div>
                            ` : ''}
                            
                            ${interfaceData.osBalance ? `
                                <div class="os-subsection">
                                    <h4>é–¢ã‚ã‚Šæ–¹ã®ãƒãƒ©ãƒ³ã‚¹</h4>
                                    <p><strong>ç†æƒ³:</strong> ${interfaceData.osBalance.idealBalance}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã‚‹æ™‚:</strong> ${interfaceData.osBalance.whenBalanced}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå´©ã‚ŒãŸæ™‚:</strong> ${interfaceData.osBalance.whenImbalanced}</p>
                                    <p><strong>ãƒ’ãƒ³ãƒˆ:</strong> ${interfaceData.osBalance.tip}</p>
                                </div>
                            ` : ''}
                            
                            ${safeData.osBalance ? `
                                <div class="os-subsection">
                                    <h4>å®ˆã‚Šæ–¹ã®ãƒãƒ©ãƒ³ã‚¹</h4>
                                    <p><strong>ç†æƒ³:</strong> ${safeData.osBalance.idealBalance}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã‚‹æ™‚:</strong> ${safeData.osBalance.whenBalanced}</p>
                                    <p><strong>ãƒãƒ©ãƒ³ã‚¹ãŒå´©ã‚ŒãŸæ™‚:</strong> ${safeData.osBalance.whenImbalanced}</p>
                                    <p><strong>ãƒ’ãƒ³ãƒˆ:</strong> ${safeData.osBalance.tip}</p>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function scrollToSummary() {
            document.getElementById('summary-section').scrollIntoView({ behavior: 'smooth' });
        }

        function toggleDetails() {
            const detailSection = document.getElementById('detail-section');
            detailSection.classList.toggle('active');
            
            if (detailSection.classList.contains('active')) {
                detailSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function toggleCollapsible(header) {
            const section = header.parentElement;
            section.classList.toggle('expanded');
        }

        function loadPattern(patternName) {
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.pattern-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆ
            generateDynamicContent(patternName);
            
            // ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆæœŸè¡¨ç¤º
        window.onload = () => {
            generateDynamicContent('innovator');
        };
    </script>
</body>
</html>