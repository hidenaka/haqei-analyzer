import { readFile, writeFile } from 'fs/promises';

async function fixPhase1() {
  try {
    console.log('=== ãƒ•ã‚§ãƒ¼ã‚º1: 5æ–‡å­—ä»¥ä¸‹ã®ç·Šæ€¥ä¿®æ­£ é–‹å§‹ ===\n');
    
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿
    let content = await readFile('./public/js/data/hexagram-human-traits-v3.js', 'utf-8');
    
    // ãƒ•ã‚§ãƒ¼ã‚º1ã®ä¿®æ­£ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆ94ä»¶ï¼‰
    const phase1Fixes = {
      // 4æ–‡å­—ã®æœ€çŸ­èª¬æ˜
      '"å²©ã«ãªã‚‹"': '"å²©ã®ã‚ˆã†ã«å‹•ã‹ãšèº«ã‚’å®ˆã‚‹å§¿å‹¢"',
      '"ç¬‘é¡”ã®æ³‰"': '"å°½ãã‚‹ã“ã¨ã®ãªã„ç¬‘é¡”ã¨å–œã³ã®æº"',
      '"çŸ³åŒ–ã™ã‚‹"': '"å®Œå…¨ã«å‹•ãã‚’æ­¢ã‚ã¦é˜²å¾¡æ…‹å‹¢ã«å…¥ã‚‹"',
      '"ç¢ºèªåœ°ç„"': '"ä½•åº¦ã‚‚ç¢ºèªã‚’ç¹°ã‚Šè¿”ã—ã¦ã—ã¾ã†çŠ¶æ…‹"',
      '"åŸç‚¹å›å¸°"': '"åŸºæœ¬ã«ç«‹ã¡è¿”ã£ã¦å•é¡Œã‚’è§£æ±ºã™ã‚‹"',
      '"ãã®ã¾ã¾"': '"ç¾çŠ¶ã‚’ãã®ã¾ã¾ç¶­æŒã—ç¶šã‘ã‚‹"',
      '"æ—…ã®æ„Ÿå‹•"': '"æ—…ã§å¾—ã‚‰ã‚Œã‚‹æ–°é®®ãªæ„Ÿå‹•ã¨ç™ºè¦‹"',
      '"æ—…ã®ä»²é–“"': '"æ—…è·¯ã§å‡ºä¼šã†å¤§åˆ‡ãªä»²é–“ãŸã¡"',
      '"äººã®ç¬‘é¡”"': '"äººã€…ã®ç¬‘é¡”ã‚’ç”Ÿã¿å‡ºã™åŠ›"',
      '"é›†å›£ã®åŠ›"': '"é›†å›£ã®åŠ›ã‚’çµé›†ã—ã¦å•é¡Œè§£æ±ºã™ã‚‹"',
      
      // 5æ–‡å­—ã®èª¬æ˜
      '"é™ã‹ã«è¦³å¯Ÿ"': '"é™ã‹ã«çŠ¶æ³ã‚’è¦³å¯Ÿã—ã¦ç†è§£ã‚’æ·±ã‚ã‚‹"',
      '"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è“„ç©"': '"æ¬¡ã®æ´»å‹•ã«å‘ã‘ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è“„ç©ã™ã‚‹"',
      '"å®Œå…¨ã«é™æ­¢"': '"å®Œå…¨ã«æ´»å‹•ã‚’åœæ­¢ã—ã¦ä¼‘æ¯ã™ã‚‹"',
      '"é™ã‹ã«ç•™ã¾ã‚‹"': '"é™ã‹ã«ãã®å ´ã«ç•™ã¾ã£ã¦æ§˜å­ã‚’è¦‹ã‚‹"',
      '"æ¬¡ã®ç‡ƒæ–™ã‚’æ¢ã™"': '"æ¬¡ã®æƒ…ç†±ã®å¯¾è±¡ã¨ãªã‚‹ç‡ƒæ–™ã‚’æ¢ã—ã¦ã„ã‚‹"',
      '"æ„Ÿè¦šã‚’é®æ–­"': '"å¤–éƒ¨ã‹ã‚‰ã®æ„Ÿè¦šã‚’é®æ–­ã—ã¦å®ˆã‚‹"',
      '"åŠ›ã‚’è“„ãˆã‚‹"': '"æ¬¡ã®è¡Œå‹•ã®ãŸã‚ã«åŠ›ã‚’è“„ãˆã¦ã„ã‚‹"',
      '"æ¬¡ã®ä¸Šæ˜‡ã‚’æº–å‚™"': '"æ¬¡ã®ä¸Šæ˜‡æ©Ÿä¼šã«å‘ã‘ã¦æº–å‚™ã—ã¦ã„ã‚‹"',
      '"å®Œå…¨ã«å†…ã«ç± ã‚‹"': '"å®Œå…¨ã«å†…é¢ä¸–ç•Œã«ç± ã£ã¦å……é›»ã™ã‚‹"',
      '"å®¶æ—ã¨ã®å›£ã‚‰ã‚“"': '"å®¶æ—ã¨ã®å›£ã‚‰ã‚“ã§å¿ƒã‚’ç™’ã—ã¦ã„ã‚‹"',
      '"è‡ªç”±ã‚’æº€å–«"': '"ç²å¾—ã—ãŸè‡ªç”±ã‚’æº€å–«ã—ã¦ã„ã‚‹"',
      '"æ¬¡ã®å¢—å¹…å¯¾è±¡ã‚’æ¢ã™"': '"æ¬¡ã«ä¾¡å€¤ã‚’å¢—å¹…ã™ã‚‹å¯¾è±¡ã‚’æ¢ã—ã¦ã„ã‚‹"',
      '"æ—¢å­˜ã®ç¸ã‚’æ·±ã‚ã‚‹"': '"æ—¢å­˜ã®äººé–“é–¢ä¿‚ã®ç¸ã‚’æ·±ã‚ã¦ã„ã‚‹"',
      '"é›†ã‚ãŸã‚‚ã®ã‚’æ•´ç†"': '"ã“ã‚Œã¾ã§é›†ã‚ãŸã‚‚ã®ã‚’æ•´ç†ã—ã¦ã„ã‚‹"',
      '"æ ¹ã‚’å¼µã‚‹æ™‚é–“"': '"ã—ã£ã‹ã‚Šã¨æ ¹ã‚’å¼µã‚‹æ™‚é–“ã‚’éã”ã™"',
      '"æ¬¡ã®å›°é›£ã«å‚™ãˆã‚‹"': '"æ¬¡ã®å›°é›£ã«å‘ã‘ã¦æº–å‚™ã‚’æ•´ãˆã‚‹"',
      '"æºæ³‰ã‚’è£œå……"': '"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æºæ³‰ã‚’è£œå……ã—ã¦ã„ã‚‹"',
      '"ç´ æã‚’é›†ã‚ã‚‹"': '"å‰µé€ ã«å¿…è¦ãªç´ æã‚’é›†ã‚ã¦ã„ã‚‹"',
      '"ã‚‚ã¨ã‚‚ã¨å‹•ã‹ãªã„"': '"å…ƒã€…å‹•ã‹ãªã„æ€§è³ªãªã®ã§ä¼‘æ¯ã‚‚åŒã˜"',
      '"ç¾åœ¨ã®æ®µéšã‚’å›ºã‚ã‚‹"': '"ç¾åœ¨ã®æ®µéšã‚’ã—ã£ã‹ã‚Šã¨å›ºã‚ã¦ã„ã‚‹"',
      '"è‡ªåˆ†ã®é–¢ä¿‚ã‚’è¦‹ç›´ã™"': '"è‡ªåˆ†ã®äººé–“é–¢ä¿‚ã‚’è¦‹ç›´ã—ã¦ã„ã‚‹"',
      '"æ¬¡ã®è±Šä½œã®æº–å‚™"': '"æ¬¡ã®è±Šä½œã«å‘ã‘ã¦æº–å‚™ã—ã¦ã„ã‚‹"',
      '"ä¸€æ™‚çš„ãªæ»åœ¨"': '"ä¸€æ™‚çš„ã«ãã®å ´ã«æ»åœ¨ã—ã¦ã„ã‚‹"',
      '"è‡ªåˆ†ã‚‚æº¶ã‘ã‚‹"': '"è‡ªåˆ†è‡ªèº«ã‚‚æº¶ã‘ã¦æµå‹•çš„ã«ãªã‚‹"',
      '"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç¯€ç´„"': '"ç„¡é§„ã‚’çœã„ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç¯€ç´„ã™ã‚‹"',
      '"ä¿¡é ¼é–¢ä¿‚ã‚’æ·±ã‚ã‚‹"': '"æ—¢å­˜ã®ä¿¡é ¼é–¢ä¿‚ã‚’ã•ã‚‰ã«æ·±ã‚ã‚‹"',
      '"å®Œæˆã®æº€è¶³æ„Ÿã«æµ¸ã‚‹"': '"å®Œæˆã•ã›ãŸæº€è¶³æ„Ÿã«æµ¸ã£ã¦ã„ã‚‹"',
      '"æ¬¡ã®æ—…ã®æº–å‚™"': '"æ¬¡ã®æ—…ã«å‘ã‘ã¦æº–å‚™ã‚’é€²ã‚ã‚‹"',
      
      // ãã®ä»–ã®çŸ­ã„èª¬æ˜
      '"æ€¥æ¿€ãªå¤‰åŒ–ã¯è‹¦æ‰‹"': '"æ€¥æ¿€ãªå¤‰åŒ–ã«å¯¾å¿œã™ã‚‹ã®ãŒè‹¦æ‰‹ãªå‚¾å‘"',
      '"å®ˆã‚Šã‚’å›ºã‚ã¦è€ãˆã‚‹"': '"å®ˆã‚Šã®å§¿å‹¢ã‚’å›ºã‚ã¦å›°é›£ã«è€ãˆã‚‹"',
      '"æ¥µç«¯ãªçŠ¶æ³ã¯è‹¦æ‰‹"': '"æ¥µç«¯ãªçŠ¶æ³ã§ã®å¯¾å¿œãŒè‹¦æ‰‹ãªå‚¾å‘"',
      '"æ„Ÿæƒ…ã®ãƒ‡ãƒˆãƒƒã‚¯ã‚¹"': '"æºœã¾ã£ãŸæ„Ÿæƒ…ã‚’ãƒ‡ãƒˆãƒƒã‚¯ã‚¹ã™ã‚‹æ™‚é–“"',
      '"æ„Ÿæƒ…çš„ã«ç–²ã‚Œã‚„ã™ã„"': '"æ„Ÿæƒ…é¢ã§ç–²ã‚Œã‚„ã™ã„å‚¾å‘ãŒã‚ã‚‹"',
      '"æ¬¡ã®çµ±åˆæ©Ÿä¼šã‚’æ¢ã‚‹"': '"æ¬¡ã®çµ±åˆã®æ©Ÿä¼šã‚’æ¢ã£ã¦ã„ã‚‹çŠ¶æ…‹"',
      '"å¸¸ã«å­¦ã¶å§¿å‹¢ã‚’æŒã¤"': '"å¸¸ã«è¬™è™šã«å­¦ã¶å§¿å‹¢ã‚’æŒã¡ç¶šã‘ã‚‹"',
      '"ã²ãŸã™ã‚‰è€ãˆã‚‹"': '"ã©ã‚“ãªå›°é›£ã‚‚ã²ãŸã™ã‚‰è€ãˆæŠœã"',
      '"æ¥½ã—ã„ã“ã¨ã‚’è€ƒãˆã‚‹"': '"æ¥½ã—ã„ã“ã¨ã‚’è€ƒãˆã¦æ°—åˆ†ã‚’ä¸Šã’ã‚‹"',
      '"æŠµæŠ—ã›ãšæµã‚Œã«ä¹—ã‚‹"': '"ç„¡ç†ã«æŠµæŠ—ã›ãšè‡ªç„¶ã®æµã‚Œã«ä¹—ã‚‹"',
      '"ç’°å¢ƒã«å®Œå…¨ã«åŒåŒ–"': '"ç’°å¢ƒã«å®Œå…¨ã«åŒåŒ–ã—ã¦æº¶ã‘è¾¼ã‚€"',
      '"æ¬¡ã®æ”¹å–„å¯¾è±¡ã‚’æ¢ã™"': '"æ¬¡ã«æ”¹å–„ã™ã¹ãå¯¾è±¡ã‚’æ¢ã—ã¦ã„ã‚‹"',
      '"ç·Šæ€¥ä¿®å¾©ãƒ¢ãƒ¼ãƒ‰èµ·å‹•"': '"ç·Šæ€¥ä¿®å¾©ãƒ¢ãƒ¼ãƒ‰ã‚’èµ·å‹•ã—ã¦å¯¾å‡¦ã™ã‚‹"',
      '"è¡Œå‹•ãŒé…ã‚ŒãŒã¡"': '"æ…é‡ã™ãã¦è¡Œå‹•ãŒé…ã‚ŒãŒã¡ã«ãªã‚‹"',
      '"å®Œå…¨ã«å¼•ãã“ã‚‚ã‚‹"': '"å¤–ç•Œã‹ã‚‰å®Œå…¨ã«å¼•ãã“ã‚‚ã£ã¦å®ˆã‚‹"',
      '"å¸¸ã«å…¨ä½“åƒã‚’æŠŠæ¡"': '"å¸¸ã«çŠ¶æ³ã®å…¨ä½“åƒã‚’æŠŠæ¡ã—ã¦ã„ã‚‹"',
      '"è¦–ç‚¹ã‚’å¤‰ãˆã¦è¦³å¯Ÿ"': '"è¦–ç‚¹ã‚’å¤‰ãˆã¦ç‰©äº‹ã‚’è¦³å¯Ÿã™ã‚‹"',
      '"ç´°éƒ¨ã‚’è¦‹è½ã¨ã—ãŒã¡"': '"å…¨ä½“ã‚’è¦‹ã¦ç´°éƒ¨ã‚’è¦‹è½ã¨ã—ãŒã¡ã«ãªã‚‹"',
      '"è·é›¢ã‚’ç½®ã„ã¦å®¢è¦³è¦–"': '"å•é¡Œã‹ã‚‰è·é›¢ã‚’ç½®ã„ã¦å®¢è¦³è¦–ã™ã‚‹"',
      '"å®Œå…¨ã«é›¢ã‚Œã¦è¦³å¯Ÿ"': '"å®Œå…¨ã«é›¢ã‚ŒãŸä½ç½®ã‹ã‚‰è¦³å¯Ÿã™ã‚‹"',
      '"æ¬¡ã®æ±ºæ–­ã«å‚™ãˆã‚‹"': '"æ¬¡ã®é‡è¦ãªæ±ºæ–­ã«å‚™ãˆã¦ã„ã‚‹"',
      '"æ€§æ€¥ãªåˆ¤æ–­ã®ãƒªã‚¹ã‚¯"': '"æ€§æ€¥ãªåˆ¤æ–­ã«ã‚ˆã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚‹"',
      '"å³åº§ã«åˆ¤æ–­ã—ã¦è¡Œå‹•"': '"å³åº§ã«åˆ¤æ–­ã—ã¦è¡Œå‹•ã«ç§»ã™"',
      '"è¶…é«˜é€Ÿæ±ºæ–­ãƒ¢ãƒ¼ãƒ‰"': '"è¶…é«˜é€Ÿã§æ±ºæ–­ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‹"',
      '"ç‰©äº‹ã‚’ç¾ã—ãæ•´ãˆã‚‹"': '"ç‰©äº‹ã‚’ç¾ã—ãæ•´ãˆã‚‹ã“ã¨ã‚’é‡è¦–ã™ã‚‹"',
      '"å¸¸ã«ç¾ã—ã•ã‚’è¿½æ±‚"': '"å¸¸ã«ç¾ã—ã•ã‚’è¿½æ±‚ã—ç¶šã‘ã‚‹"',
      '"ç¾ã—ã„ã‚‚ã®ã«è§¦ã‚Œã‚‹"': '"ç¾ã—ã„ã‚‚ã®ã«è§¦ã‚Œã¦å¿ƒã‚’ç™’ã™"',
      '"ç¾ã—ã„ã‚‚ã®ã«æ²¡é ­"': '"ç¾ã—ã„ã‚‚ã®ã«æ²¡é ­ã—ã¦ç¾å®Ÿã‚’å¿˜ã‚Œã‚‹"',
      '"ç¾ã®ä¸–ç•Œã«é€ƒã’è¾¼ã‚€"': '"ç¾ã®ä¸–ç•Œã«é€ƒã’è¾¼ã‚“ã§å®ˆã‚‹"',
      '"å¾¹åº•çš„ã«å‰Šãè½ã¨ã™"': '"ä¸è¦ãªã‚‚ã®ã‚’å¾¹åº•çš„ã«å‰Šãè½ã¨ã™"',
      '"ä½•ã‚‚ã—ãªã„æ™‚é–“"': '"ä½•ã‚‚ã—ãªã„æ™‚é–“ã‚’å¤§åˆ‡ã«ã™ã‚‹"',
      '"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è“„ç©"': '"æ¬¡ã®æ´»å‹•ã®ãŸã‚ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’è“„ç©"',
      '"ä¸ƒè»¢ã³å…«èµ·ãã®ç²¾ç¥"': '"ä¸ƒè»¢ã³å…«èµ·ãã®ä¸å±ˆã®ç²¾ç¥ã‚’æŒã¤"',
      '"è¿·ã„ãªãæœ¬èƒ½ã«å¾“ã†"': '"è¿·ã„ãªãè‡ªåˆ†ã®æœ¬èƒ½ã«å¾“ã£ã¦å‹•ã"',
      '"ç„¡å¿ƒã«ãªã‚‹"': '"ç„¡å¿ƒã«ãªã£ã¦å¿ƒã‚’ç©ºã«ã™ã‚‹"',
      '"è£è¡¨ã®ãªã„æ­£ç›´è€…"': '"è£è¡¨ã®ãªã„æ­£ç›´ãªæ€§æ ¼ã®æŒã¡ä¸»"',
      '"ç´ ç›´ã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹"': '"å›°ã£ãŸæ™‚ã¯ç´ ç›´ã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹"',
      '"å­ä¾›ã®ã‚ˆã†ã«æ³£ã"': '"å­ä¾›ã®ã‚ˆã†ã«ç´ ç›´ã«æ„Ÿæƒ…ã‚’å‡ºã™"',
      '"çŸ¥è­˜ã®æ•´ç†ã¨ä½“ç³»åŒ–"': '"è“„ç©ã—ãŸçŸ¥è­˜ã‚’æ•´ç†ã—ã¦ä½“ç³»åŒ–ã™ã‚‹"',
      '"çŸ¥è­˜ã®é™³è…åŒ–ã«æ³¨æ„"': '"çŸ¥è­˜ãŒé™³è…åŒ–ã—ãªã„ã‚ˆã†æ³¨æ„ã™ã‚‹"',
      '"å…¨çŸ¥è­˜ã‚’ç·å‹•å“¡"': '"æŒã¦ã‚‹å…¨ã¦ã®çŸ¥è­˜ã‚’ç·å‹•å“¡ã™ã‚‹"',
      '"å¾¹åº•çš„ãªå¥åº·ç®¡ç†"': '"å¾¹åº•çš„ã«å¥åº·ç®¡ç†ã‚’è¡Œã†"',
      '"å®Œå…¨ãªãƒªãƒ©ãƒƒã‚¯ã‚¹"': '"å®Œå…¨ã«ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ãŸçŠ¶æ…‹ã«ãªã‚‹"',
      '"ã¾ãšä½“èª¿ã‚’æ•´ãˆã‚‹"': '"ä½•ã‚ˆã‚Šã‚‚ã¾ãšä½“èª¿ã‚’æ•´ãˆã‚‹"',
      '"å¥åº·ç¬¬ä¸€ã§æ’¤é€€"': '"å¥åº·ã‚’ç¬¬ä¸€ã«è€ƒãˆã¦æ’¤é€€ã™ã‚‹"',
      '"ä½“èª¿ä¸è‰¯ãªã‚‰å³ä¼‘ã‚€"': '"ä½“èª¿ä¸è‰¯ã‚’æ„Ÿã˜ãŸã‚‰å³åº§ã«ä¼‘ã‚€"'
    };
    
    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    await writeFile(`./public/js/data/hexagram-human-traits-v3.backup.phase1.${timestamp}.js`, content);
    console.log(`ğŸ“ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ: hexagram-human-traits-v3.backup.phase1.${timestamp}.js`);
    
    // ä¿®æ­£é©ç”¨
    let fixCount = 0;
    Object.entries(phase1Fixes).forEach(([old, newText]) => {
      const regex = new RegExp(old.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
      const originalContent = content;
      content = content.replace(regex, newText);
      if (originalContent !== content) {
        fixCount++;
        console.log(`âœ… ä¿®æ­£: ${old} â†’ ${newText}`);
      }
    });
    
    // ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
    await writeFile('./public/js/data/hexagram-human-traits-v3.js', content);
    
    console.log(`\n=== ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº† ===`);
    console.log(`ä¿®æ­£ä»¶æ•°: ${fixCount}ä»¶`);
    console.log(`\næ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:`);
    console.log(`1. node comprehensive-v3-review.mjs ã§ç¢ºèª`);
    console.log(`2. node fix-short-descriptions-phase2.mjs ã§ãƒ•ã‚§ãƒ¼ã‚º2å®Ÿè¡Œ`);
    
  } catch (error) {
    console.error('ã‚¨ãƒ©ãƒ¼:', error);
  }
}

fixPhase1();