# 📝 TRAE作業指示：V3データ完全活用版の実装

## 🎯 作業概要
HaQei AnalyzerのBasicResultsTabに、V3データベースの豊富な情報を完全活用した詳細表示機能を実装してください。現在はシンプルな表示のみですが、V3データには各OSの詳細な状態（通常モード、スーパーモード、ストレス反応、回復方法など）が含まれているため、これらを活用してユーザーにより価値のある情報を提供します。

## 📂 作業用ドキュメントの場所

### 1. 実装計画書（必読）
```
/TRAE_V3データ完全活用版実装計画書.md
```
- 実装の全体像と詳細仕様
- Phase1〜5の実装手順
- HTML構造、JavaScript、CSSの具体例
- チェックリストとテスト項目

### 2. サンプルコード集（コピペ用）
```
/TRAE_V3実装サンプルコード.md
```
- そのまま使える実装済みコード
- 各メソッドの完全実装
- デバッグ用コード

## 🔧 作業対象ファイル

### メインファイル（編集対象）
```
/public/js/tabs/BasicResultsTab.js
```

### V3データファイル（参照用）
```
/public/js/data/hexagram-human-traits-v3.js
```

### スタイルシート（必要に応じて編集）
```
/public/css/results.css
/public/css/results-blue-theme.css
```

### HTMLファイル（スクリプト追加）
```
/public/results.html
```

## 📋 作業内容

### ステップ1：V3データの接続
1. `BasicResultsTab.js`を開く
2. `TRAE_V3実装サンプルコード.md`の「1️⃣ V3データ取得の実装」をコピー
3. クラスのconstructorと新規メソッドを追加
4. console.logで読み込み確認

### ステップ2：各OSカードの実装
1. `TRAE_V3実装サンプルコード.md`の以下をコピー＆実装：
   - 「2️⃣ Engine OSカードの完全実装」
   - 「3️⃣ Interface OSカードの完全実装」
   - 「4️⃣ SafeMode OSカードの完全実装」
2. 既存のrenderメソッドを置き換え

### ステップ3：OSバランスセクションの追加
1. `TRAE_V3実装サンプルコード.md`の「5️⃣ OSバランスセクション」をコピー
2. 新規メソッドとして追加

### ステップ4：メインrenderメソッドの更新
1. `TRAE_V3実装サンプルコード.md`の「6️⃣ メインのrenderメソッド」をコピー
2. 既存のrenderメソッドを置き換え

### ステップ5：HTML読み込み設定
1. `results.html`を開く
2. `<head>`タグ内に以下を追加：
```html
<script src="js/data/hexagram-human-traits-v3.js"></script>
```

### ステップ6：動作確認
1. ブラウザで `http://localhost:8080/results.html` を開く
2. コンソールで以下を実行：
```javascript
// V3データ読み込み確認
console.log(typeof HexagramHumanTraitsV3);
console.log(Object.keys(HexagramHumanTraitsV3));
```
3. 各OSカードにV3データが表示されることを確認

## ✅ 実装チェックリスト

- [ ] V3データファイルの読み込み確認
- [ ] getV3DataForHexagramメソッドの実装
- [ ] Engine OSカードのV3対応
- [ ] Interface OSカードのV3対応  
- [ ] SafeMode OSカードのV3対応
- [ ] OSバランスセクションの新規追加
- [ ] フォールバック処理の確認（V3データがない場合）
- [ ] コンソールエラーがないことを確認
- [ ] モバイル表示の確認

## 🎨 表示される情報の例

### 現在（シンプル版）
```
Engine OS
乾為天
スコア: 75
```

### 実装後（V3データ活用版）
```
Engine OS - 内なる原動力
🚀 イノベーター

【基本プロファイル】
タイプ: 革新追求エンジン
説明: 常に『もっと良い方法はないか？』を追い求める

【通常モード】
頭の中で常に新しいアイデアや改善案が生まれている
エネルギー: 🔋🔋🔋 (70%)

【スーパーモード】
発動条件: 困難な課題に直面した時
全リソースを創造的解決に投入！
エネルギー: 🔋🔋🔋🔋🔋 (100%)

【メンテナンス方法】
必要なもの: 新しい挑戦
充電方法: 新規プロジェクトの立ち上げ
⚠️ ルーティンワークが続くとパフォーマンス低下
```

## ⚠️ 注意事項

1. **エラーハンドリング重要**
   - V3データがない場合は必ずシンプル版を表示
   - try-catchでエラーを捕捉

2. **段階的実装推奨**
   - まずEngine OSだけ実装して動作確認
   - 問題なければInterface OS、SafeMode OSと進める

3. **既存機能を壊さない**
   - 既存のlocalStorageからのデータ読み込みは維持
   - 既存のスコア表示機能は残す

## 💬 質問・相談

実装中に不明点があれば：
1. まずは`TRAE_V3データ完全活用版実装計画書.md`の詳細仕様を確認
2. `TRAE_V3実装サンプルコード.md`のデバッグコードで問題特定
3. それでも解決しない場合は具体的なエラー内容と共に相談

## 🚀 期待される成果

- 64卦すべての詳細データが表示可能に
- ユーザーが自分のOSの詳細な特性を理解できる
- 具体的な行動指針とメンテナンス方法が分かる
- OSバランスの可視化により全体像が把握できる

---

**推定作業時間**: 8-12時間
**優先度**: 高
**期限**: できるだけ早く（品質重視）

よろしくお願いします！