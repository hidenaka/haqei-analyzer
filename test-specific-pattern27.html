<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ‘ã‚¿ãƒ¼ãƒ³27å…·ä½“çš„ãƒ‡ãƒãƒƒã‚°</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff; 
            line-height: 1.6;
        }
        .debug-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: rgba(0,0,0,0.3);
        }
        .highlight { 
            color: #22d3ee; 
            font-weight: bold; 
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ãƒ‘ã‚¿ãƒ¼ãƒ³27 vs ä»–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è©³ç´°æ¯”è¼ƒ</h1>
    <p>ãªãœãƒ‘ã‚¿ãƒ¼ãƒ³27ã ã‘ãŒç‰¹æ®Šè¡¨ç¾ã«ãªã‚‹ã‹ã‚’å…·ä½“çš„ã«èª¿æŸ»</p>
    
    <button onclick="comparePatterns()">ğŸ¯ ãƒ‘ã‚¿ãƒ¼ãƒ³æ¯”è¼ƒå®Ÿè¡Œ</button>
    
    <div id="results"></div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script>
        function comparePatterns() {
            const results = document.getElementById('results');
            results.innerHTML = '<div>ğŸ”„ æ¯”è¼ƒåˆ†æä¸­...</div>';
            
            try {
                const analyzer = new TripleOSInteractionAnalyzer();
                
                // ãƒ‘ã‚¿ãƒ¼ãƒ³27 (å®Ÿéš›ã¯28ç•ªç›®) = [45, 62, 53]
                // ãƒ‘ã‚¿ãƒ¼ãƒ³1 = [51, 59, 53]
                // ãƒ‘ã‚¿ãƒ¼ãƒ³2 = [56, 9, 59]
                
                const comparePatterns = [
                    { name: 'Pattern 1', pattern: [51, 59, 53] },
                    { name: 'Pattern 2', pattern: [56, 9, 59] },
                    { name: 'Pattern 27 (å®Ÿéš›28)', pattern: [45, 62, 53] },
                ];
                
                let html = '<h2>ğŸ” è©³ç´°æ¯”è¼ƒçµæœ</h2>';
                
                comparePatterns.forEach(({ name, pattern: [e, iface, s] }) => {
                    const engineOS = { hexagramId: e, name: `ç¬¬${e}å¦`, score: 0.5 };
                    const interfaceOS = { hexagramId: iface, name: `ç¬¬${iface}å¦`, score: 0.5 };
                    const safeModeOS = { hexagramId: s, name: `ç¬¬${s}å¦`, score: 0.5 };
                    
                    // å¦ã®ç‰¹å¾´å–å¾—
                    const char1 = analyzer.getHexagramCharacteristics(e);
                    const char2 = analyzer.getHexagramCharacteristics(iface);
                    const char3 = analyzer.getHexagramCharacteristics(s);
                    
                    // Engine-Interfaceé–“ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰çµ„ã¿åˆã‚ã›åˆ†æ
                    console.log(`${name} - Engine(${e}): ${char1.name}`, char1.keywords);
                    console.log(`${name} - Interface(${iface}): ${char2.name}`, char2.keywords);
                    console.log(`${name} - Safe(${s}): ${char3.name}`, char3.keywords);
                    
                    const combinations = analyzer.analyzeKeywordCombination(char1, char2);
                    console.log(`${name} - Keyword combinations:`, combinations);
                    
                    // å®Ÿéš›ã®è¡¨ç¾ç”Ÿæˆã‚’ãƒ†ã‚¹ãƒˆ
                    const summary = analyzer.generateHumanRelatableDescription(char1, char2, 'engine-interface');
                    console.log(`${name} - Generated summary:`, summary);
                    
                    // å®Ÿéš›ã®analyzeã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ
                    const analysisResult = analyzer.analyzePair('engine-interface', engineOS, interfaceOS);
                    
                    html += `
                        <div class="debug-section">
                            <h3>${name}: Engine(${e}: ${char1.name}) Ã— Interface(${iface}: ${char2.name})</h3>
                            
                            <div><strong>Engine ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰:</strong> ${char1.keywords.join(', ')}</div>
                            <div><strong>Interface ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰:</strong> ${char2.keywords.join(', ')}</div>
                            
                            <div><strong>Keyword Conflict Detection:</strong></div>
                            <ul>
                                <li>Speed Conflict: <span class="highlight">${combinations.speedConflict}</span></li>
                                <li>Value Conflict: <span class="highlight">${combinations.valueConflict}</span></li>
                                <li>Time Conflict: <span class="highlight">${combinations.timeConflict}</span></li>
                                <li>Direction Conflict: <span class="highlight">${combinations.directionConflict}</span></li>
                            </ul>
                            
                            <div><strong>ç”Ÿæˆã•ã‚ŒãŸè¡¨ç¾:</strong> ã€Œ${analysisResult.summary}ã€</div>
                            <div><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${analysisResult.category}</div>
                            <div><strong>ã‚·ãƒŠã‚¸ãƒ¼å€¤:</strong> ${analysisResult.synergy?.toFixed(3)}</div>
                        </div>
                    `;
                });
                
                results.innerHTML = html;
                
            } catch (error) {
                results.innerHTML = `
                    <div style="color: #ef4444; padding: 20px;">
                        âŒ åˆ†æã‚¨ãƒ©ãƒ¼: ${error.message}
                        <br>ã‚¹ã‚¿ãƒƒã‚¯: ${error.stack}
                    </div>
                `;
                console.error('æ¯”è¼ƒåˆ†æã‚¨ãƒ©ãƒ¼:', error);
            }
        }
    </script>
</body>
</html>