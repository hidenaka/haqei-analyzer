<!DOCTYPE html>
<html>
<head>
    <title>Future Simulator ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: monospace; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; }
        .fail { background: #f8d7da; }
        button { padding: 10px 20px; margin: 5px; }
        #log { background: #000; color: #0f0; padding: 10px; height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” Future Simulator ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test">
        <h3>1. åŸºæœ¬è¦ç´ ç¢ºèª</h3>
        <button onclick="checkElements()">è¦ç´ ãƒã‚§ãƒƒã‚¯</button>
        <div id="elements-result"></div>
    </div>
    
    <div class="test">
        <h3>2. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç¢ºèª</h3>
        <button onclick="checkEventListeners()">ã‚¤ãƒ™ãƒ³ãƒˆç¢ºèª</button>
        <div id="events-result"></div>
    </div>
    
    <div class="test">
        <h3>3. é–¢æ•°å­˜åœ¨ç¢ºèª</h3>
        <button onclick="checkFunctions()">é–¢æ•°ãƒã‚§ãƒƒã‚¯</button>
        <div id="functions-result"></div>
    </div>
    
    <div class="test">
        <h3>4. å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆ</h3>
        <textarea id="worryInput" placeholder="ãƒ†ã‚¹ãƒˆå…¥åŠ›">è»¢è·ã‚’æ¤œè¨ã—ã¦ã„ã¾ã™ãŒã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒåˆ†ã‹ã‚‰ãšæ‚©ã‚“ã§ã„ã¾ã™</textarea><br>
        <button id="aiGuessBtn">åˆ†æé–‹å§‹</button>
        <div id="test-result"></div>
    </div>
    
    <h3>ãƒ­ã‚°</h3>
    <div id="log"></div>
    
    <script src="public/js/core/SeedableRandom.js"></script>
    
    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += `[${new Date().toISOString()}] ${msg}\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(msg);
        }
        
        function checkElements() {
            log('è¦ç´ ãƒã‚§ãƒƒã‚¯é–‹å§‹...');
            const result = document.getElementById('elements-result');
            
            const checks = [
                { id: 'worryInput', name: 'worryInput (textarea)' },
                { id: 'aiGuessBtn', name: 'aiGuessBtn (button)' }
            ];
            
            let html = '<ul>';
            checks.forEach(check => {
                const element = document.getElementById(check.id);
                const exists = element !== null;
                html += `<li>${check.name}: ${exists ? 'âœ… å­˜åœ¨' : 'âŒ ä¸åœ¨'}</li>`;
                log(`  ${check.name}: ${exists ? 'å­˜åœ¨' : 'ä¸åœ¨'}`);
            });
            html += '</ul>';
            
            result.innerHTML = html;
        }
        
        function checkEventListeners() {
            log('ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç¢ºèª...');
            const result = document.getElementById('events-result');
            
            const aiGuessBtn = document.getElementById('aiGuessBtn');
            if (aiGuessBtn) {
                // ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
                let clicked = false;
                aiGuessBtn.addEventListener('click', () => {
                    clicked = true;
                    log('  ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼');
                });
                
                // ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ã«ã‚¯ãƒªãƒƒã‚¯
                aiGuessBtn.click();
                
                result.innerHTML = clicked ? 'âœ… ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ç¢ºèª' : 'âŒ ã‚¤ãƒ™ãƒ³ãƒˆæœªç™ºç«';
            } else {
                result.innerHTML = 'âŒ ãƒœã‚¿ãƒ³è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
            }
        }
        
        function checkFunctions() {
            log('é–¢æ•°å­˜åœ¨ç¢ºèª...');
            const result = document.getElementById('functions-result');
            
            const functionsToCheck = [
                'analyzeWorry',
                'showUserMessage',
                'SeedableRandom'
            ];
            
            let html = '<ul>';
            functionsToCheck.forEach(funcName => {
                const exists = typeof window[funcName] !== 'undefined';
                html += `<li>${funcName}: ${exists ? 'âœ… å®šç¾©æ¸ˆã¿' : 'âŒ æœªå®šç¾©'}</li>`;
                log(`  ${funcName}: ${exists ? 'å®šç¾©æ¸ˆã¿' : 'æœªå®šç¾©'}`);
            });
            html += '</ul>';
            
            result.innerHTML = html;
        }
        
        // ç°¡æ˜“ç‰ˆã®analyzeWorryå®Ÿè£…
        window.analyzeWorry = function(inputText) {
            log(`analyzeWorryå‘¼ã³å‡ºã—: "${inputText}"`);
            
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = `
                <div style="margin-top: 10px; padding: 10px; border: 1px solid #28a745; background: #d4edda;">
                    <h4>âœ… åˆ†æå®Œäº†ï¼ˆãƒ†ã‚¹ãƒˆï¼‰</h4>
                    <p>å…¥åŠ›: ${inputText}</p>
                    <p>æ–‡å­—æ•°: ${inputText.length}</p>
                    <p>ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—: ${new Date().toISOString()}</p>
                </div>
            `;
            
            return true;
        };
        
        // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        document.addEventListener('DOMContentLoaded', () => {
            log('DOMèª­ã¿è¾¼ã¿å®Œäº†');
            
            const aiGuessBtn = document.getElementById('aiGuessBtn');
            const worryInput = document.getElementById('worryInput');
            
            if (aiGuessBtn && worryInput) {
                aiGuessBtn.addEventListener('click', () => {
                    const inputText = worryInput.value.trim();
                    log(`ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯: "${inputText}"`);
                    
                    if (inputText && inputText.length >= 10) {
                        analyzeWorry(inputText);
                    } else {
                        log('âŒ å…¥åŠ›ãŒçŸ­ã™ãã¾ã™ï¼ˆ10æ–‡å­—ä»¥ä¸Šå¿…è¦ï¼‰');
                    }
                });
                log('âœ… ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†');
            } else {
                log('âŒ å¿…è¦ãªè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        });
    </script>
</body>
</html>