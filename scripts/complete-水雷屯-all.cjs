'use strict';

const fs = require('fs');
const path = require('path');

function loadJSON(p) { return JSON.parse(fs.readFileSync(p, 'utf8')); }
function saveJSON(p, obj) { fs.writeFileSync(p, JSON.stringify(obj, null, 2), 'utf8'); }

function create水雷屯CompleteNarratives() {
  const narratives = {};
  
  // 六三 - 即鹿無虞、惟入于林中。君子幾不如舍、往吝。
  const 六三Stories = {
    'JJJ': 'まず、案内人なしに森に入る危険を認識します。鹿を追って深い森に迷い込むように、準備不足のまま進むことの愚かさを理解し、一旦立ち止まる勇気を持ちます。退くことも前進です。続いて、適切な準備を整えます。案内人を探し、地図を用意し、装備を整えることで、安全に目的地に到達できる確率が格段に上がります。準備の時間は無駄ではありません。最後に、万全の体制で再挑戦します。虞（案内人）と共に森に入ることで、確実に鹿を捕らえることができます。君子の知恵が実を結び、舍（やめる）勇気が成功につながりました。突破口は、退く勇気と準備の徹底にあります。まずは無謀な挑戦を避け、確実な成功を目指しましょう。',
    
    'JJH': 'まず、無謀な挑戦の危険性を深く理解します。即鹿無虞の状態で森に入ることは、単なる失敗では済まない大きなリスクを伴います。この認識が、賢明な判断の基礎となります。続いて、リスク管理をさらに徹底します。どのような準備が必要か、どんな危険があるか、失敗した場合の影響は何かを詳細に分析し、完璧な対策を立てます。最後に、視点を変えて別の方法を探します。森に入らずに鹿を捕らえる方法、あるいは鹿以外の獲物を狙う選択肢を検討し、より確実で安全な道を選びます。突破口は、リスクと報酬の正確な評価にあります。まずは冷静に状況を分析し、最適な選択をしましょう。',
    
    'JHJ': 'まず、森への侵入を試みます。案内人がいなくても、慎重に少しずつ進み、森の構造を理解しようとします。小さな失敗を重ねながら、経験を積んでいきます。次に、アプローチを根本的に変えます。森に入るのではなく、鹿が森から出てくるのを待つ、あるいは別の場所で鹿を探すなど、全く異なる戦略を採用します。最後に、新しい方法を極めます。転換した戦略を徹底的に磨き上げ、森に入らずとも確実に成果を上げる独自の方法を確立します。君子の柔軟性が勝利をもたらします。突破口は、固定観念からの脱却にあります。まずは一つの方法に固執せず、様々な可能性を試しましょう。',
    
    'JHH': 'まず、慎重に偵察を始めます。森の入り口付近を探索し、危険度を評価し、部分的な情報を集めます。無虞でも、情報収集は可能です。続いて、収集した情報を基に計画を修正します。完全な案内人は得られなくても、部分的な情報から推測し、より安全なルートを見つけます。最後に、さらに計画を精緻化します。何度も微調整を重ね、リスクを最小限に抑えた上で、慎重に前進します。往吝を避ける知恵が身につきます。突破口は、段階的な接近にあります。まずは小さく始め、徐々に深く進んでいきましょう。',
    
    'HJJ': 'まず、「森に入る」という前提を疑います。なぜ森に入らなければならないのか、鹿を得る他の方法はないのか、根本から考え直します。問題の再定義が始まります。続いて、新しい視点で解決策を探ります。森の外で鹿を飼育する、別の獲物で代替する、そもそも狩猟以外の方法を考えるなど、創造的な解決策を深く検討します。最後に、革新的な方法を確立します。誰も考えなかった方法で目的を達成し、無虞でも成功する新しいモデルを作ります。君子の創造性が新しい道を開きます。突破口は、問題設定の見直しにあります。まずは「なぜ」を問い、本質的な目的を見極めましょう。',
    
    'HJH': 'まず、森を別の角度から観察します。上空から、地下から、あるいは時間軸を変えて観察することで、通常見えない森の構造が見えてきます。新しい視点が鍵となります。次に、その観察結果を実践に活かします。新しい視点から得た情報を基に、実際に森にアプローチし、仮説を検証しながら進みます。最後に、さらに視点を変えます。実践から得た経験を基に、メタレベルで問題を捉え直し、森と鹿の関係性そのものを変える方法を見出します。突破口は、多次元的な思考にあります。まずは平面的な見方を超えて、立体的に考えましょう。',
    
    'HHJ': 'まず、森という概念を解体します。森は本当に障害なのか、むしろ資源ではないか、全く新しい解釈を試みます。制約を資源に変える発想が生まれます。次に、さらに大胆に発想を転換します。森に入ることを目的化し、鹿は副産物とする、あるいは森そのものを獲得対象とするなど、革命的な視点転換を行います。最後に、その新しい発想を実現します。森との共生、森の活用、森の変革など、従来の狩猟とは全く異なる成功を収めます。君子幾の真の意味が明らかになります。突破口は、制約の創造的活用にあります。まずは障害を資源と見なし、活用方法を考えましょう。',
    
    'HHH': 'まず、森と鹿の二元論を超越します。森か鹿かではなく、両者を統合した新しい概念を創造し、問題そのものを別次元に移行させます。続いて、その新しい次元を深化させます。森も鹿も自分も一体となった新しい世界観を確立し、従来の狩猟という概念を完全に超越します。最後に、全く新しいパラダイムを実現します。森に入ることも、鹿を追うことも不要な、想像を超えた方法で目的を達成します。舍が最高の往となる逆説が成立します。突破口は、次元の超越にあります。まずは三次元的な問題を四次元で解決する道を探しましょう。'
  };

  // 六四 - 乘馬班如。求婚媾、往吉无不利。
  const 六四Stories = {
    'JJJ': 'まず、馬を連ねて進む準備を整えます。一人では難しい道も、仲間と共に進めば乗り越えられます。求婚媾のように、適切なパートナーシップを築く時期です。続いて、パートナーシップがより強固になります。互いの強みを活かし、弱みを補い合うことで、単独では不可能だった成果を上げることができます。信頼関係が深まります。最後に、共同での成功を収めます。班如（連なる）状態が完璧に機能し、往吉无不利の結果を得ます。協力の力が困難を吉に変えました。突破口は、適切な協力関係の構築にあります。まずは信頼できるパートナーを見つけ、共に前進しましょう。',
    
    'JJH': 'まず、協力体制の基礎を築きます。乘馬班如の形を整え、役割分担を明確にし、コミュニケーションルールを確立します。組織としての基盤が固まります。続いて、協力体制をさらに洗練させます。実践を通じて最適な連携方法を見出し、効率的な協働システムを確立します。チームワークが向上します。最後に、視点を変えて新たな展開を図ります。内部の協力から外部との連携へ、より大きなネットワークを構築し、さらなる成功を目指します。求婚媾が実を結びます。突破口は、段階的な拡大にあります。まずは小さなチームから始め、徐々に輪を広げていきましょう。',
    
    'JHJ': 'まず、基本的な協力関係を作ります。馬を連ねるように、一つ一つ丁寧に関係を築き、信頼の土台を作ります。急がず、確実に進めることが大切です。次に、協力の形を変えてみます。並列的な協力から、役割分担型へ、あるいは統合型へと、状況に応じて最適な形を模索します。柔軟な組織形態が鍵となります。最後に、新しい協力形態を深めます。転換によって見つけた最適な形を磨き上げ、他では真似できない独自の協力体制を確立します。往吉无不利が実現します。突破口は、協力形態の最適化にあります。まずは様々な形を試し、最良の形を見つけましょう。',
    
    'JHH': 'まず、慎重に協力相手を選びます。求婚媾のように、相手の本質を見極め、長期的な視点で最適なパートナーを選ぶことが重要です。続いて、関係性を調整します。初期の協力関係を実践の中で修正し、より効果的な協働方法を見つけていきます。微調整が成功の鍵となります。最後に、さらなる最適化を行います。細部まで調整を重ね、完璧な協力体制を作り上げます。班如の理想形が実現し、大きな成果を上げます。突破口は、継続的な改善にあります。まずは始めてみて、改善を重ねていきましょう。',
    
    'HJJ': 'まず、協力の概念を再定義します。単なる協力ではなく、シナジーを生む創造的な関係性を目指し、新しい協働のあり方を模索します。続いて、新しい協力概念を実践します。従来の枠を超えた協力関係を築き、予想を超える成果を生み出します。革新的なパートナーシップが生まれます。最後に、その成功モデルを完成させます。実践を重ね、改良を加え、誰も真似できない独自の協力体制を確立します。求婚媾が新しい意味を持ちます。突破口は、協力の再発明にあります。まずは既存の協力概念を超えて、新しい可能性を探りましょう。',
    
    'HJH': 'まず、別の角度から協力を考えます。垂直的な協力、時間差のある協力、仮想的な協力など、通常とは異なる協力の形を探ります。次に、その新しい協力形態を実践します。理論を現実に適用し、効果を検証しながら、最適な協力方法を見つけていきます。最後に、再び視点を変えます。実践から得た経験を基に、さらに高次の協力関係を構築し、想像を超える成果を実現します。突破口は、協力の多様性にあります。まずは固定観念を捨て、様々な協力の形を試しましょう。',
    
    'HHJ': 'まず、協力という枠組みを破壊します。協力と競争、個と集団の境界を曖昧にし、全く新しい関係性を創造します。次に、さらに革新的な関係を構築します。最初の破壊で得た自由を基に、想像を超える新しい組織形態を生み出します。最後に、その革新的な形態を実現します。従来の協力を超えた、新しい次元の関係性を確立し、画期的な成果を上げます。班如が進化します。突破口は、関係性の革新にあります。まずは既存の枠組みを忘れ、自由に関係性を設計しましょう。',
    
    'HHH': 'まず、協力の次元を変えます。三次元の協力から四次元、五次元の協力へと、時空を超えた関係性を構築します。続いて、その高次元の協力を深化させます。通常では考えられない方法で協力し、想像を超える成果を生み出します。最後に、協力という概念そのものを超越します。個と全体が一体となり、協力という言葉すら不要な、新しい存在形態を実現します。求婚媾の究極形が現れます。突破口は、次元の超越にあります。まずは三次元的な協力を超えて、高次元の関係性を探求しましょう。'
  };

  // 九五 - 屯其膏。小貞吉、大貞凶。
  const 九五Stories = {
    'JJJ': 'まず、恵みの雨（膏）が降らない状況を受け入れます。大きな計画は実現困難ですが、小さな目標なら達成可能です。身の丈に合った目標設定が重要な時期です。続いて、小さな成功を積み重ねます。小貞吉の教えに従い、確実に達成できる目標を一つずつクリアしていくことで、着実に前進します。小さな勝利が自信となります。最後に、積み重ねた成果が大きな力となります。小さな成功の集積が、やがて大きな成果につながります。大貞凶を避けて小貞吉を重ねた知恵が実を結びます。突破口は、適切な目標設定にあります。まずは小さく始め、確実に成功を重ねていきましょう。',
    
    'JJH': 'まず、リソースの制約を正確に把握します。屯其膏の状態で、何ができて何ができないかを明確にし、現実的な計画を立てます。制約の認識が成功の第一歩です。続いて、制約内での最適化を図ります。限られたリソースを最大限に活用する方法を見つけ、効率を極限まで高めます。小さな改善が大きな差を生みます。最後に、視点を変えて新たな資源を発見します。既存のリソースにとらわれず、別の角度から資源を見つけることで、新しい可能性が開けます。小貞から始めて大きな成果を得ます。突破口は、制約内での創造性にあります。まずは制約を受け入れ、その中で最善を尽くしましょう。',
    
    'JHJ': 'まず、小さな実験を始めます。大貞凶のリスクを避けて、小規模な試みを重ね、データを集めます。失敗しても影響が小さい範囲で学習します。次に、アプローチを変更します。直接的な方法が難しければ、間接的に、迂回して目標に近づく戦略を採用します。柔軟性が道を開きます。最後に、新しい方法で着実に前進します。転換によって見つけた道を確実に進み、小貞吉を積み重ねることで、最終的に大きな成果を得ます。突破口は、実験的アプローチにあります。まずは小さく試し、学びながら進みましょう。',
    
    'JHH': 'まず、慎重に第一歩を踏み出します。屯其膏の制約を認識し、リスクを最小限に抑えながら、小さな前進を始めます。石橋を叩いて渡る慎重さが必要です。続いて、進捗を見ながら調整します。小さな成功と失敗から学び、計画を修正し、より効果的な方法を見つけていきます。最後に、さらに細かな調整を加えます。微調整を重ねることで、制約の中でも最大の成果を上げる方法を確立します。小貞吉の積み重ねが大きな成功となります。突破口は、継続的な調整にあります。まずは始めてみて、改善を重ねていきましょう。',
    
    'HJJ': 'まず、膏（恵み）の概念を再定義します。外からの恵みを待つのではなく、内なる資源を膏と捉え直すことで、新しい可能性が開けます。続いて、内なる資源を徹底的に活用します。隠れた才能、未活用の知識、潜在的な人脈など、見落としていた資源を発掘し、活用します。最後に、その成功モデルを完成させます。内なる資源の活用法を体系化し、外的制約に左右されない独自の成功法則を確立します。突破口は、資源の再定義にあります。まずは外に求めず、内を見つめ直しましょう。',
    
    'HJH': 'まず、別の角度から制約を見ます。屯其膏を障害ではなく、創造性を刺激する条件と捉え直し、制約があるからこそ生まれるイノベーションを追求します。次に、その新しい視点で実践します。制約を活かした独自の方法を開発し、実際に試しながら、効果を検証していきます。最後に、また視点を変えます。実践から得た経験を基に、制約と豊かさの関係を根本から見直し、新しいパラダイムを確立します。突破口は、制約の創造的活用にあります。まずは制約を嘆かず、活かす方法を考えましょう。',
    
    'HHJ': 'まず、大貞と小貞の二元論を破壊します。大きいか小さいかではなく、全く別の評価軸を導入し、新しい成功の定義を作ります。次に、さらに革新的な基準を設けます。量的な成功から質的な成功へ、あるいは成功という概念自体を超越した新しい価値観を確立します。最後に、その新しい価値観を実現します。従来の成功概念に囚われない、独自の道を切り開き、想像を超える成果を上げます。突破口は、価値観の革新にあります。まずは既存の成功概念を疑い、新しい価値を創造しましょう。',
    
    'HHH': 'まず、問題の次元を変えます。三次元的な制約（屯其膏）を四次元的な視点で捉え直し、時間軸や別次元での解決を模索します。続いて、その高次元での解決を深化させます。通常では考えられない方法で問題を解決し、制約という概念そのものを無効化します。最後に、全く新しいパラダイムを確立します。大貞も小貞も超越した、想像を超える新しい世界を創造します。膏が不要になる革命が起こります。突破口は、次元の超越にあります。まずは三次元的な制約から自由になり、高次元での解決を探しましょう。'
  };

  // 上六 - 乘馬班如、泣血漣如。
  const 上六Stories = {
    'JJJ': 'まず、極限の困難（泣血漣如）に直面している現実を受け入れます。血の涙を流すような苦しみの中でも、希望を捨てずに耐え抜く強さを持ちます。苦難は必ず終わります。続いて、苦しみの中で学びを得ます。極限状態だからこそ見える真実があり、普通では得られない深い洞察が生まれます。苦難が知恵に変わっていきます。最後に、苦難を乗り越えて再生します。泣血の経験が強靭な精神力となり、どんな困難も乗り越えられる力が身につきます。班如（仲間）との絆も深まります。突破口は、苦難を成長の糧とすることにあります。まずは今の苦しみに意味を見出し、前を向いて進みましょう。',
    
    'JJH': 'まず、極限状態での生存戦略を立てます。泣血漣如の中でも、冷静に状況を分析し、生き延びるための最善の方法を見つけます。理性が感情を制御します。続いて、サバイバル能力を高めます。極限状態での経験を活かし、より効率的な生存方法を確立し、苦難への耐性を強化します。最後に、視点を変えて脱出口を見つけます。内側からではなく外側から、あるいは上から問題を見ることで、思わぬ解決策が見つかります。突破口は、冷静な状況分析にあります。まずは感情に流されず、理性的に対処しましょう。',
    
    'JHJ': 'まず、苦難の中で小さな行動を起こします。泣血漣如でも、できることから始め、一歩ずつ前進します。小さな行動が大きな変化を生みます。次に、アプローチを変えます。正面からの打開が難しければ、側面から、あるいは時間をかけて迂回する方法を選びます。柔軟性が生存の鍵です。最後に、新しい方法で確実に脱出します。転換によって見つけた道を着実に進み、苦難から完全に抜け出します。班如の仲間も救われます。突破口は、諦めない執念にあります。まずは小さな希望を見つけ、それを大きく育てましょう。',
    
    'JHH': 'まず、慎重に現状を観察します。泣血漣如の中でも、冷静に周囲を観察し、わずかな変化や機会を見逃さないようにします。観察が生存の鍵となります。続いて、観察結果を基に行動を調整します。わずかな改善の余地を見つけ、少しずつ状況を好転させていきます。微細な調整が大きな差を生みます。最後に、さらなる最適化を図ります。継続的な改善により、泣血の状態から徐々に回復し、最終的に完全な脱出を果たします。突破口は、継続的な改善にあります。まずは現状を詳しく観察し、改善点を見つけましょう。',
    
    'HJJ': 'まず、苦難の意味を根本から問い直します。泣血漣如を単なる苦しみではなく、変革の前兆、再生の過程と捉え直すことで、新しい視点が生まれます。続いて、苦難を資源として活用します。極限の経験が生む独自の強さ、深い共感力、卓越した問題解決能力など、苦難だからこそ得られる資源を最大限活用します。最後に、苦難を超越した成功を収めます。泣血の経験が独自の価値となり、他者には真似できない成功を実現します。班如の絆が鉄のように強くなります。突破口は、苦難の価値化にあります。まずは苦しみに意味を与え、それを力に変えましょう。',
    
    'HJH': 'まず、別の次元から状況を見ます。三次元的な苦難を、時間軸を含めた四次元、あるいは精神的な次元から捉え直し、新しい理解を得ます。次に、その新しい理解を基に行動します。高次元の視点から得た洞察を現実に適用し、通常では考えられない方法で問題に対処します。最後に、さらに視点を上げます。個人的な苦難を普遍的な真理へと昇華させ、自他共に救済する道を見出します。泣血が慈悲の涙に変わります。突破口は、視点の多次元化にあります。まずは現実を超えた視点を持ち、高い次元から解決策を探しましょう。',
    
    'HHJ': 'まず、苦難という概念を解体します。泣血漣如を苦難と見るのは一つの解釈に過ぎず、別の見方をすれば全く異なる意味を持つことに気づきます。次に、さらに大胆に認識を変えます。苦難を喜び、痛みを力、涙を宝石と捉え直す、完全な価値の転換を行います。最後に、その新しい認識を現実化します。苦難を楽しみ、それを創造の源泉とすることで、想像を超える成果を生み出します。班如が祝祭の列となります。突破口は、認識の完全な転換にあります。まずは苦難への見方を180度変え、それを祝福と捉えましょう。',
    
    'HHH': 'まず、存在の次元を変えます。泣血漣如という三次元的な苦難から、意識を高次元にシフトさせ、苦難という概念が存在しない領域に移行します。続いて、その高次元での存在を確立します。物理的な苦難を超越し、純粋な意識として存在することで、あらゆる制約から自由になります。最後に、新しい現実を創造します。高次元の意識から三次元に働きかけ、苦難そのものを消滅させる奇跡を起こします。泣血が光の雨に変わり、班如が天使の行列となります。突破口は、存在次元の上昇にあります。まずは物理的現実を超えて、高次の意識に到達しましょう。'
  };

  const patterns = ['JJJ', 'JJH', 'JHJ', 'JHH', 'HJJ', 'HJH', 'HHJ', 'HHH'];
  const lines = [
    { name: '初九', stories: 六三Stories }, // 初九は既に作成済みなのでスキップ
    { name: '六二', stories: 六三Stories }, // 六二も既に作成済みなのでスキップ
    { name: '六三', stories: 六三Stories },
    { name: '六四', stories: 六四Stories },
    { name: '九五', stories: 九五Stories },
    { name: '上六', stories: 上六Stories }
  ];

  lines.forEach((line, lineIndex) => {
    if (lineIndex < 2) return; // 初九と六二はスキップ
    
    patterns.forEach(pattern => {
      const key = `水雷屯 ${line.name} | ${pattern}`;
      narratives[key] = {
        chain_long: line.stories[pattern],
        tone: 'story',
        suitability: getSuitability(line.name, pattern),
        caution: getCaution(line.name, pattern),
        label: getLabel(pattern),
        start: { hex: '水雷屯', pos: lineIndex + 1 },
        final: { hex: '水雷屯', pos: ((lineIndex + 2) % 6) + 1 },
        updated_at: new Date().toISOString()
      };
    });
  });
  
  return narratives;
}

function getSuitability(line, pattern) {
  const suitabilities = {
    '六三': {
      'JJJ': '準備不足で失敗のリスクが高い場面で、撤退の勇気が必要な時',
      'JJH': 'リスク評価を徹底し、安全な道を選ぶ必要がある場面',
      'JHJ': '一つの方法に固執せず、柔軟に戦略を変える必要がある時',
      'JHH': '段階的に情報を集め、慎重に進む必要がある場面',
      'HJJ': '問題設定自体を見直し、根本的な解決を図る時',
      'HJH': '多角的な視点で問題を分析し、本質を見極める場面',
      'HHJ': '制約を創造的に活用し、逆転の発想が必要な時',
      'HHH': '既存の枠組みを完全に超越した解決が必要な場面'
    },
    '六四': {
      'JJJ': '協力関係を築いて困難を乗り越える必要がある場面',
      'JJH': 'チームワークを段階的に強化していく必要がある時',
      'JHJ': '協力の形を柔軟に変えて最適化する必要がある場面',
      'JHH': '協力関係を継続的に改善していく必要がある時',
      'HJJ': '従来の協力概念を超えた新しい関係性が必要な場面',
      'HJH': '多様な協力形態を試して最適解を見つける時',
      'HHJ': '革新的な組織形態や関係性を構築する必要がある場面',
      'HHH': '協力という概念を超越した一体性が必要な時'
    },
    '九五': {
      'JJJ': 'リソースが限られた中で着実に成果を上げる必要がある場面',
      'JJH': '制約内で最大の効率を追求する必要がある時',
      'JHJ': '小さな実験を重ねて最適解を見つける必要がある場面',
      'JHH': '継続的な微調整で成果を最大化する必要がある時',
      'HJJ': '外的制約に頼らず内的資源を活用する必要がある場面',
      'HJH': '制約を創造性の源泉として活用する必要がある時',
      'HHJ': '成功の定義自体を変えて新しい価値を創造する場面',
      'HHH': '制約という概念を超越した解決が必要な時'
    },
    '上六': {
      'JJJ': '極限の苦難を乗り越える強さが必要な場面',
      'JJH': '極限状態で冷静な判断力を保つ必要がある時',
      'JHJ': '絶望的状況でも諦めずに道を探す必要がある場面',
      'JHH': '微細な改善を積み重ねて脱出を図る必要がある時',
      'HJJ': '苦難を価値に変換する逆転の発想が必要な場面',
      'HJH': '高次の視点から苦難の意味を見出す必要がある時',
      'HHJ': '苦難への認識を完全に転換する必要がある場面',
      'HHH': '物理的現実を超越した解決が必要な時'
    }
  };
  return suitabilities[line]?.[pattern] || '困難を打開し、新しい道を切り開く場面';
}

function getCaution(line, pattern) {
  const cautions = {
    '六三': {
      'JJJ': '無謀な挑戦を避け、準備を整えてから再挑戦する',
      'JJH': 'リスク評価を怠らず、安全マージンを確保する',
      'JHJ': '柔軟性を保ちながらも、目的を見失わない',
      'JHH': '慎重になりすぎて機会を逃さないよう注意',
      'HJJ': '創造的な解決に固執しすぎず、実現可能性を重視',
      'HJH': '分析麻痺に陥らず、適切なタイミングで行動',
      'HHJ': '奇抜なアイデアも実用性とのバランスを保つ',
      'HHH': '現実から遊離しすぎず、実践可能な形に落とし込む'
    },
    '六四': {
      'JJJ': '依存的な関係にならず、自立性を保つ',
      'JJH': '組織の硬直化を防ぎ、柔軟性を維持する',
      'JHJ': '変化のための変化にならず、目的を明確に',
      'JHH': '調整に時間をかけすぎて実行が遅れないよう注意',
      'HJJ': '革新性と実用性のバランスを保つ',
      'HJH': '多様性の追求が混乱を招かないよう統制',
      'HHJ': '急進的すぎて周囲の理解を得られない事態を避ける',
      'HHH': '理想主義に偏らず、現実的な成果も重視'
    },
    '九五': {
      'JJJ': '小さな成功に満足せず、長期的視野を持つ',
      'JJH': '効率化が目的化しないよう、本質を見失わない',
      'JHJ': '実験に時間をかけすぎず、決断のタイミングを逃さない',
      'JHH': '完璧主義に陥らず、十分なレベルで前進',
      'HJJ': '内向きになりすぎず、外部環境の変化も察知',
      'HJH': '制約への執着が創造性を阻害しないよう注意',
      'HHJ': '独自性を追求しすぎて孤立しないよう配慮',
      'HHH': '抽象的になりすぎず、具体的な行動に結びつける'
    },
    '上六': {
      'JJJ': '苦難に飲み込まれず、希望を保ち続ける',
      'JJH': '理性に偏りすぎず、感情のケアも忘れない',
      'JHJ': '小さな改善に固執せず、大局的な視点も持つ',
      'JHH': '改善への執着が新たなストレスを生まないよう注意',
      'HJJ': '苦難の美化に陥らず、脱出の努力を続ける',
      'HJH': '精神世界に逃避せず、現実的な対処も行う',
      'HHJ': '認識の転換が現実逃避にならないよう注意',
      'HHH': '超越への憧れが現実放棄にならないよう配慮'
    }
  };
  return cautions[line]?.[pattern] || '焦らず着実に、状況に応じて柔軟に対応する';
}

function getLabel(pattern) {
  const labels = {
    'JJJ': '一貫深化 （テーマ継続）',
    'JJH': '二段深化→視点切替 （構造転換）',
    'JHJ': '深化→視点切替→再深化 （構造転換）',
    'JHH': '初動深化→連続切替 （再整流）',
    'HJJ': '視点切替→二段深化 （構造転換）',
    'HJH': '視点切替→深化→再切替 （構造転換）',
    'HHJ': '連続切替→深化 （再設計）',
    'HHH': '三段転換 （完全再設計）'
  };
  return labels[pattern];
}

function main() {
  const file = path.resolve(__dirname, '..', 'public', 'data', 'narratives_chain.v1.json');
  const db = loadJSON(file);
  
  const narratives = create水雷屯CompleteNarratives();
  
  Object.entries(narratives).forEach(([key, value]) => {
    db[key] = value;
  });
  
  saveJSON(file, db);
  console.log(`水雷屯の残りの爻を完成させました: ${Object.keys(narratives).length}件追加`);
  console.log('水雷屯の全48パターンが完成しました');
}

main();