'use strict';

const fs = require('fs');
const path = require('path');

function loadJSON(p) { return JSON.parse(fs.readFileSync(p, 'utf8')); }
function saveJSON(p, obj) { fs.writeFileSync(p, JSON.stringify(obj, null, 2), 'utf8'); }

function create水天需CompleteNarratives() {
  const narratives = {};
  
  // 初九 - 需于郊。利用恆、无咎。
  const 初九Stories = {
    'JJJ': 'まず、郊外で待機する状況を受け入れます。需于郊とは、まだ中心から遠い場所で機会を待つこと。焦って中心に向かうのではなく、今いる場所で着実に準備を整えます。利用恆（恒常性を保つ）の精神で、日々の積み重ねを大切にします。続いて、待機期間が実りある時間になります。郊外での生活に慣れ、その環境だからこそできる学びや成長を重ねます。都会の喧騒から離れた静けさが、深い洞察をもたらします。最後に、待機が報われる時が来ます。十分な準備と成熟を経て、中心へ進む機会が訪れます。无咎（咎なし）の言葉通り、待った甲斐がありました。突破口は、今いる場所での充実です。まずは現在地を最大限活用し、着実に力を蓄えましょう。',
    
    'JJH': 'まず、郊外での基礎固めに専念します。中心部への憧れを抑え、今できることに集中します。需于郊の時期を、基礎体力を養う貴重な期間と捉えます。続いて、基礎がさらに強固になります。地方だからこそ得られる独自の強みを育て、都会では身につかない能力を磨きます。利用恆の実践が実を結びます。最後に、視点を変えて新たな可能性を見出します。郊外から中心を目指すのではなく、郊外を新たな中心にする発想の転換を図ります。无咎どころか、大きな成功への道が開けます。突破口は、地の利を活かすことです。まずは今いる場所の価値を再発見し、それを最大限活用しましょう。',
    
    'JHJ': 'まず、郊外で小さく始めます。大きな舞台を待つ間、小規模でも確実な実績を積み重ねます。需の時期を無駄にせず、できることから着手します。次に、アプローチを変えてみます。待つだけでなく、積極的に郊外の利点を活かした独自の戦略を展開します。中心とは違う価値を創造します。最後に、新しい方法を深めます。郊外発の成功モデルを確立し、それが新しいスタンダードとなります。利用恆が革新的な恆となります。突破口は、独自路線の確立です。まずは中心を追わず、自分だけの道を切り開きましょう。',
    
    'JHH': 'まず、慎重に状況を観察します。需于郊の立場から、中心部の動向を冷静に分析し、最適な参入タイミングを見極めます。観察者の利点を活かします。続いて、観察結果を基に戦略を練ります。急がず、しかし着実に、郊外から中心への道筋を計画します。利用恆の精神で、長期戦略を立てます。最後に、さらに計画を精緻化します。あらゆる可能性を検討し、最も成功確率の高い方法を選択します。无咎を超えて、大きな成功を目指します。突破口は、戦略的忍耐です。まずは焦らず、最適なタイミングを待ちましょう。',
    
    'HJJ': 'まず、郊外という概念を再定義します。中心から遠い不利な場所ではなく、自由で可能性に満ちた場所と捉え直します。需于郊が機会の宝庫となります。続いて、新しい価値観で行動します。郊外の特性を最大限活かし、中心では不可能な革新的な試みを展開します。辺境が最先端となります。最後に、郊外発の革命を完成させます。中心依存から脱却し、新しい価値体系を確立します。利用恆が新しい恆を生み出します。突破口は、価値観の転換です。まずは中心志向を捨て、郊外の価値を創造しましょう。',
    
    'HJH': 'まず、別の視点から状況を見ます。需于郊を空間的制約ではなく、時間的優位と捉えます。ゆっくり準備できる時間があることの価値を認識します。次に、時間を味方につけて行動します。急がず、しかし確実に、長期的視点で成長を続けます。時間という資源を最大限活用します。最後に、また視点を変えます。郊外と中心の二元論を超えて、全てが一つの大きな流れの中にあることを理解します。无咎が大吉となります。突破口は、時空の超越です。まずは空間的制約を時間的優位に変換しましょう。',
    
    'HHJ': 'まず、待機という概念を破壊します。需を受動的な待機ではなく、能動的な準備と捉え直し、全く新しい行動原理を確立します。次に、さらに革新的な発想を展開します。郊外を起点とした新しいネットワークを構築し、中心を必要としない新しい世界を創造します。最後に、その革新的世界を実現します。従来の中心-周辺構造を完全に覆し、分散型の新しい秩序を確立します。利用恆が永遠の革新となります。突破口は、構造の革命です。まずは既存の枠組みを破壊し、新しい秩序を創造しましょう。',
    
    'HHH': 'まず、空間の概念を超越します。需于郊という物理的位置を、意識の状態として捉え直し、どこにいても中心にいることができると理解します。続いて、その意識状態を深めます。物理的な郊外にいながら、意識は宇宙の中心と一体化し、あらゆる可能性にアクセスできるようになります。最後に、存在そのものを変革します。郊外も中心も、需も行動も、全てが一つの意識の中で統合され、完全な自由を実現します。无咎を超えて、絶対の境地に至ります。突破口は、意識の拡大です。まずは物理的制約を超えて、意識レベルで自由になりましょう。'
  };

  // 九二 - 需于沙。小有言、終吉。
  const 九二Stories = {
    'JJJ': 'まず、砂地での待機という不安定な状況に置かれます。需于沙は、足場が柔らかく不安定な場所での待機。小有言（少し批判される）ことも覚悟しなければなりません。しかし、この試練が人を強くします。続いて、不安定さに慣れてきます。砂地でもバランスを保つコツを掴み、批判にも動じない精神力が養われます。逆境が成長の糧となっていきます。最後に、試練を乗り越えて成功します。終吉の言葉通り、最終的には良い結果が待っています。砂地での経験が、どんな場所でも対応できる適応力を生みました。突破口は、不安定さを受け入れることです。まずは批判を恐れず、困難な状況でも前向きに取り組みましょう。',
    
    'JJH': 'まず、砂地での基本動作を身につけます。不安定な足場でも確実に立てるよう、基礎的なバランス感覚を養います。小有言も成長の糧と受け止めます。続いて、砂地でのスキルを磨きます。単に耐えるだけでなく、砂地の特性を理解し、それを活かす方法を見つけます。批判を建設的に活用します。最後に、視点を変えて砂地の利点を発見します。柔軟性、適応性、変化への対応力など、砂地だからこそ身につく能力の価値を認識します。終吉が確実なものとなります。突破口は、逆境の価値化です。まずは困難を成長の機会と捉え、積極的に学びましょう。',
    
    'JHJ': 'まず、砂地で小さな実験を始めます。不安定な環境でも可能な小規模な試みを重ね、データを集めます。小有言を feedback として活用します。次に、方法を変えてアプローチします。砂地に抵抗するのではなく、砂地と共存する新しい方法を模索します。批判を味方につける戦略を展開します。最後に、新しい方法を確立します。砂地専門のスペシャリストとなり、他の誰にも真似できない強みを持ちます。終吉が大吉へと発展します。突破口は、専門性の確立です。まずは困難な環境のエキスパートを目指しましょう。',
    
    'JHH': 'まず、慎重に砂地を分析します。どの部分が安定していて、どこが危険か、詳細にマッピングします。小有言の内容も詳しく分析し、改善点を見出します。続いて、分析結果を基に対策を立てます。安全な道筋を見つけ、批判への適切な対応を準備します。リスク管理が徹底されます。最後に、さらに対策を洗練させます。あらゆる状況に対応できる完璧な準備を整え、確実に終吉へと向かいます。突破口は、徹底的な準備です。まずは状況を詳しく分析し、万全の対策を立てましょう。',
    
    'HJJ': 'まず、砂地という環境を根本から見直します。不安定で不利な場所ではなく、変化と可能性に富んだ場所と捉え直します。小有言も貴重な情報源となります。続いて、砂地の可能性を最大限活用します。流動性、柔軟性、変化への適応など、砂地ならではの特性を強みに変えます。批判を革新の原動力とします。最後に、砂地発の新しいパラダイムを確立します。固定的な土地では不可能な、流動的で革新的な成功モデルを創造します。終吉が革命的成功となります。突破口は、環境の再定義です。まずは不利と見える環境の隠れた価値を発見しましょう。',
    
    'HJH': 'まず、砂地を別の次元から観察します。物理的な不安定さの背後にある、エネルギーの流れや可能性の場を感じ取ります。小有言も高次のメッセージと理解します。次に、高次の理解を実践に活かします。砂地のエネルギーと調和し、流れに乗って行動します。批判を超越した境地で活動します。最後に、さらに次元を上げます。砂地も固い地面も、全ては意識の投影であることを理解し、自在に現実を創造します。終吉が必然となります。突破口は、次元の上昇です。まずは物理的現実を超えて、エネルギーレベルで理解しましょう。',
    
    'HHJ': 'まず、安定と不安定の二元論を破壊します。砂地を不安定と見るのは一つの解釈に過ぎず、別の見方では最も自由な場所です。次に、さらに自由な発想を展開します。砂地を舞台に、従来の常識を覆す革新的な活動を展開します。小有言を賞賛に変える奇跡を起こします。最後に、その革新を現実化します。砂地が新しい価値の源泉となり、誰もが憧れる場所となります。終吉を超えて、永遠の成功を実現します。突破口は、価値の逆転です。まずは不利を有利に、批判を賞賛に変える方法を見つけましょう。',
    
    'HHH': 'まず、物質界の制約を超越します。砂地という物理的環境から意識を解放し、純粋な可能性の場に入ります。需于沙が精神の自由となります。続いて、その自由な意識状態を深めます。あらゆる制約から解放され、無限の創造性を発揮します。小有言も終吉も、全ては意識の遊戯となります。最後に、新しい現実を創造します。意識の力で砂地を楽園に変え、批判を祝福に変える奇跡を実現します。全てが一つの完璧な調和の中に統合されます。突破口は、意識による現実創造です。まずは物理的制約を幻想と見抜き、意識で現実を変えましょう。'
  };

  // 九三 - 需于泥。致寇至。
  const 九三Stories = {
    'JJJ': 'まず、泥沼での待機という最悪の状況に直面します。需于泥は、身動きが取れない危険な場所での待機。致寇至（敵を招く）という警告通り、危機が迫っています。しかし、この極限状態こそが真の力を引き出します。続いて、泥沼でのサバイバル術を身につけます。パニックにならず、冷静に状況を分析し、少しずつでも前進する方法を見つけます。敵の接近も計算に入れて行動します。最後に、奇跡的な脱出を果たします。泥沼での経験が究極のサバイバル能力を生み、どんな危機も乗り越えられる強さを獲得します。致寇至も、今では成長の触媒と理解できます。突破口は、極限での冷静さです。まずはパニックを抑え、冷静に最善の策を探りましょう。',
    
    'JJH': 'まず、泥沼の性質を徹底的に研究します。なぜ沈むのか、どうすれば浮けるのか、科学的に分析します。致寇至の警告も、リスク分析の一環として捉えます。続いて、泥沼脱出の技術を確立します。体重分散、呼吸法、微細な動きの技術など、専門的なスキルを磨きます。敵への対策も万全にします。最後に、視点を変えて泥沼を資源化します。泥の薬効、肥料としての価値など、泥沼の隠れた価値を発見し、危機を機会に変えます。突破口は、科学的アプローチです。まずは感情を排して、理性的に問題を分析しましょう。',
    
    'JHJ': 'まず、泥沼で最小限の動きを試みます。大きく動けば沈むので、微細な動きで少しずつ位置を改善します。致寇至も想定内として準備します。次に、アプローチを変えます。自力脱出から、外部の助けを呼ぶ方向に転換します。敵すらも味方に変える交渉術を駆使します。最後に、新しい方法で確実に脱出します。予想外の協力者を得て、泥沼から這い上がります。危機が絆を生み、新しい関係が構築されます。突破口は、柔軟な戦略転換です。まずは一つの方法に固執せず、あらゆる可能性を探りましょう。',
    
    'JHH': 'まず、極めて慎重に現状を把握します。泥沼のどの部分が最も危険か、敵がどこから来るか、詳細に観察します。情報が生死を分けます。続いて、観察結果を基に微調整します。わずかな動きで姿勢を改善し、呼吸を確保し、生存確率を高めます。敵の動きも計算に入れます。最後に、さらに精密な調整を行います。ミリ単位の動きで最適なポジションを確保し、最小のエネルギーで最大の効果を得ます。突破口は、精密な制御です。まずは大きな動きを避け、微細な調整で状況を改善しましょう。',
    
    'HJJ': 'まず、泥沼という概念を再定義します。身動きが取れない場所ではなく、全てを受け入れ包み込む母なる大地と捉えます。致寇至も、出会いの機会となります。続いて、泥沼との一体化を図ります。抵抗するのではなく、泥と調和し、その中で新しい存在様式を確立します。敵も味方も区別がなくなります。最後に、泥沼の主となります。泥沼を支配し、自在に動き、他者を導く存在となります。需于泥が悟りの場となります。突破口は、抵抗の放棄です。まずは戦うのをやめ、受け入れることから始めましょう。',
    
    'HJH': 'まず、泥沼を別の視点から見ます。下から見れば沈む場所ですが、上から見れば豊かな資源の宝庫です。致寇至も、視点を変えれば致友至となります。次に、新しい視点で行動します。泥沼を活用する方法を見つけ、敵を協力者に変える外交を展開します。危機が機会に変わります。最後に、さらに視点を上げます。泥沼も固い地面も、敵も味方も、全ては一つの大きな流れの中の現象と理解します。突破口は、視点の転換です。まずは固定観念を捨て、新しい見方を試みましょう。',
    
    'HHJ': 'まず、泥沼という制約を創造の源泉とします。動けないからこそ、内面に向かい、意識を拡大し、新しい能力を開発します。次に、さらに創造的な展開をします。泥沼の中で新しい生命体のように進化し、環境に完璧に適応します。致寇至が進化の触媒となります。最後に、その進化を完成させます。泥沼でしか生きられない、しかし泥沼では無敵の存在となります。需于泥が新しい生命の誕生となります。突破口は、進化的適応です。まずは環境に合わせて自分を変革しましょう。',
    
    'HHH': 'まず、物理的現実を超越します。泥沼も敵も、全ては意識が作り出した幻想であることを悟ります。需于泥が意識の試練となります。続いて、意識の力で現実を変革します。泥沼を固い大地に、敵を天使に変える奇跡を起こします。致寇至が致神至となります。最後に、全てを統合します。泥沼での体験が宇宙意識への目覚めとなり、あらゆる二元性を超越します。全てが完璧な一つとなります。突破口は、現実の超越です。まずは物理的制約を幻想と見抜き、意識で全てを変えましょう。'
  };

  // 六四 - 需于血。出自穴。
  const 六四Stories = {
    'JJJ': 'まず、血を見るような危機的状況を経験します。需于血は、傷つき血を流しながらの待機。しかし、出自穴（穴から出る）という希望があります。最も暗い時期の後には、必ず光が差します。続いて、傷を癒しながら力を蓄えます。血の経験が教訓となり、同じ過ちを繰り返さない智慧が身につきます。穴の中での静養が、再生の時間となります。最後に、穴から出て新たな世界へ踏み出します。血を流した経験が強さとなり、穴での休息が新たな視点をもたらします。苦難を経た者だけが持つ深みが生まれます。突破口は、傷からの学びです。まずは痛みを受け入れ、そこから教訓を得ましょう。',
    
    'JJH': 'まず、血を流す原因を詳しく分析します。なぜ傷ついたのか、どうすれば防げたのか、徹底的に検証します。需于血を貴重な学習機会とします。続いて、治療と予防の体系を確立します。傷の手当て方法、再発防止策、危険回避術など、包括的な安全システムを構築します。穴が研究室となります。最後に、視点を変えて血の価値を見出します。犠牲があったからこそ得られた知見を活かし、他者を救う道を選びます。出自穴が使命の始まりとなります。突破口は、犠牲の意味づけです。まずは無駄な犠牲にせず、必ず価値を生み出しましょう。',
    
    'JHJ': 'まず、最小限の手当てをして様子を見ます。需于血の状態でも、パニックにならず、冷静に対処します。穴の中で静かに回復を待ちます。次に、回復方法を変えます。受動的な療養から、積極的なリハビリへと転換し、より強い体を作ります。穴を training ground とします。最後に、新しい強さを持って穴から出ます。血を流す前より強く、賢く、優しい存在として生まれ変わります。出自穴が再誕生となります。突破口は、危機を成長に変えることです。まずは傷を恐れず、それを強さに変えましょう。',
    
    'JHH': 'まず、慎重に傷の状態を確認します。需于血の深刻さを正確に把握し、適切な処置を施します。穴の安全性も確認します。続いて、段階的に回復を図ります。無理をせず、着実に体力を回復させ、精神的な傷も癒していきます。穴での時間を有効活用します。最後に、完全に回復してから行動します。万全の状態で穴から出ることで、二度と同じ過ちを繰り返さない確信を得ます。突破口は、完全な回復です。まずは焦らず、しっかりと傷を癒しましょう。',
    
    'HJJ': 'まず、血を流すことの意味を根本から問い直します。犠牲ではなく、古い自分から新しい自分への変容の証と捉えます。需于血が変革の儀式となります。続いて、変容のプロセスを深めます。穴の中で古い自分を脱ぎ捨て、新しい自分を育てます。血が新生のための代価となります。最後に、全く新しい存在として穴から出ます。以前とは別人のような強さと智慧を持ち、世界が違って見えます。出自穴が覚醒となります。突破口は、自己変革です。まずは古い自分を手放し、新しい自分を迎え入れましょう。',
    
    'HJH': 'まず、血と穴を象徴的に理解します。血は生命力の解放、穴は子宮のような再生の場と捉えます。需于血が生命の神秘となります。次に、象徴的理解を実践に活かします。血を流すことで古いエネルギーを解放し、穴で新しいエネルギーを充電します。死と再生のサイクルを体験します。最後に、さらに深い理解に至ります。血も穴も、生命の循環の一部であり、全ては完璧なタイミングで起きていることを悟ります。突破口は、象徴の理解です。まずは表面的な出来事の背後にある深い意味を読み取りましょう。',
    
    'HHJ': 'まず、血と生命の二元論を破壊します。血を流すことと生きることは対立せず、むしろ真に生きることの証です。需于血が生の極致となります。次に、さらに革命的な理解をします。穴を制約ではなく、無限の可能性を秘めた空間と捉えます。制限が自由を生みます。最後に、その理解を現実化します。血を流しながら最も生き生きとし、穴の中で最も自由になる、逆説的な存在となります。突破口は、逆説の受容です。まずは常識を捨て、逆説的な真理を受け入れましょう。',
    
    'HHH': 'まず、物理的な血と穴を超越します。それらは全て、意識の成長のための幻想的な舞台装置であることを理解します。需于血が意識の試練となります。続いて、意識レベルで変容します。血は古い意識の浄化、穴は新しい意識の孵化器となります。物理を超えた変容が起きます。最後に、全てを統合します。血も穴も、傷も癒しも、全てが一つの完璧な意識の dance であることを悟ります。出自穴が enlightenment となります。突破口は、意識の変容です。まずは物理的現実を超えて、意識レベルで進化しましょう。'
  };

  // 九五 - 需于酒食。貞吉。
  const 九五Stories = {
    'JJJ': 'まず、酒食を前にした豊かな待機を楽しみます。需于酒食は、十分な準備と余裕がある状態での待機。貞吉（正しければ吉）の通り、正しい態度を保てば成功は約束されています。焦る必要はありません。続いて、豊かさの中でさらに力を蓄えます。酒食に溺れることなく、適度に楽しみながら、来るべき機会に備えます。余裕があるからこそ、冷静な判断ができます。最後に、万全の準備で機会を掴みます。十分に英気を養い、ベストコンディションで勝負に臨めます。需于酒食の時期があったからこそ、大きな成功を収められます。突破口は、余裕の活用です。まずは豊かさに感謝し、それを賢く活用しましょう。',
    
    'JJH': 'まず、豊かな環境を最大限活用します。需于酒食の恵まれた状況で、体力、知力、精神力を総合的に高めます。貞（正しさ）を保ちながら成長します。続いて、さらに自己研鑽を深めます。物質的豊かさを精神的豊かさに変換し、内面の充実を図ります。酒食が修行の糧となります。最後に、視点を変えて他者と分かち合います。独り占めせず、豊かさを周囲と共有することで、さらなる豊かさを引き寄せます。貞吉が大吉となります。突破口は、豊かさの共有です。まずは独占せず、喜びを分かち合いましょう。',
    
    'JHJ': 'まず、酒食を適度に楽しみます。需于酒食を罪悪感なく受け入れ、しかし節度を保ちます。バランスの取れた享受が重要です。次に、楽しみ方を変えます。単なる消費から、味わい深める体験へ、量から質への転換を図ります。酒食が芸術となります。最後に、新しい楽しみ方を極めます。食を通じた悟り、酒を通じた真理の探究など、物質を超えた価値を見出します。貞吉が enlightenment となります。突破口は、質の追求です。まずは量より質を重視し、深い体験を求めましょう。',
    
    'JHH': 'まず、慎重に酒食と向き合います。需于酒食の誘惑に溺れないよう、自制心を保ちます。貞を守ることが最優先です。続いて、摂取量を細かく調整します。体調、気分、状況に応じて、最適な量を見極めます。科学的なアプローチで健康を維持します。最後に、さらに精密な管理を行います。栄養バランス、タイミング、組み合わせまで完璧に制御し、最高のパフォーマンスを実現します。突破口は、自己管理です。まずは欲望を制御し、理性的に行動しましょう。',
    
    'HJJ': 'まず、酒食の概念を再定義します。単なる飲食ではなく、エネルギーの摂取、情報の吸収、関係性の構築と捉えます。需于酒食が多層的な栄養となります。続いて、新しい理解で実践します。物質的な酒食を超えて、精神的、社会的、霊的な栄養を摂取します。全人的な滋養が得られます。最後に、究極の酒食を実現します。宇宙のエネルギーを直接摂取し、無限の豊かさとつながります。貞吉が宇宙との一体化となります。突破口は、栄養の多次元化です。まずは物質を超えて、あらゆるレベルの栄養を摂取しましょう。',
    
    'HJH': 'まず、酒食を別の角度から見ます。消費ではなく交換、摂取ではなく循環と捉えます。需于酒食が宇宙との対話となります。次に、その理解を実践します。食べることで世界とつながり、飲むことで宇宙と一体化します。酒食が瞑想となります。最後に、さらに深い理解に至ります。自分が酒食であり、酒食が自分である、完全な一体性を体験します。貞吉が non-duality となります。突破口は、一体性の体験です。まずは分離を超えて、全てと一つになりましょう。',
    
    'HHJ': 'まず、豊かさと欠乏の二元論を破壊します。需于酒食も需于泥も、本質的には同じであることを理解します。全ては意識の状態です。次に、さらに自由な意識を展開します。酒食を必要とせず、しかし楽しむことができる、完全に自由な存在となります。最後に、その自由を現実化します。物質的制約を超えて、純粋な意識の喜びを体験します。需于酒食が純粋な至福となります。突破口は、物質からの自由です。まずは依存を手放し、純粋に楽しむ境地を目指しましょう。',
    
    'HHH': 'まず、酒食の次元を変えます。三次元的な物質から、高次元のエネルギーへと認識をシフトします。需于酒食が光の饗宴となります。続いて、光を直接摂取します。太陽の光、星の光、宇宙の光を栄養とし、物質を超えた存在となります。貞が宇宙の法則との調和となります。最後に、自らが光となります。摂取する者から放射する者へと変容し、宇宙に栄養を与える存在となります。需于酒食を超えて、永遠の豊かさの源となります。突破口は、次元の上昇です。まずは物質を超えて、エネルギーレベルで生きましょう。'
  };

  // 上六 - 入于穴。有不速之客三人來。敬之終吉。
  const 上六Stories = {
    'JJJ': 'まず、穴に入るという退却を余儀なくされます。しかし、そこに不速之客（招かざる客）三人が現れます。最初は驚きますが、敬之（敬う）ことで状況が好転します。予期せぬ出会いが運命を変えます。続いて、客人との関係が深まります。最初は招かざる客でしたが、話してみると貴重な知恵や情報を持っていることが分かります。穴の中での出会いが、宝物となります。最後に、新たな絆が生まれます。終吉の言葉通り、最終的には素晴らしい結果が待っています。入于穴の不運が、最高の幸運に変わりました。突破口は、予期せぬ出会いを大切にすることです。まずは先入観を捨て、誰に対しても敬意を持って接しましょう。',
    
    'JJH': 'まず、穴での隠遁生活を始めます。外界から離れ、静かに内省する時間を持ちます。そこへ不速之客が現れ、新たな学びの機会となります。続いて、客人から深い教えを受けます。三人それぞれが異なる知恵を持ち、多角的な学びが得られます。敬之の態度が、深い教えを引き出します。最後に、視点を変えて世界に還元します。穴で得た知恵を持って外界に戻り、多くの人々に貢献します。終吉が社会貢献となります。突破口は、隠遁の価値です。まずは一時的に退いて、深い学びを得ましょう。',
    
    'JHJ': 'まず、穴で静かに過ごし始めます。入于穴を受け入れ、その環境でできることを探します。不速之客の到来も、自然な流れとして受け入れます。次に、客人との交流方法を変えます。最初は形式的でしたが、次第に打ち解け、深い対話が生まれます。敬意が信頼を生みます。最後に、新しい関係性を深めます。三人の客が最高の仲間となり、穴が最高の meeting place となります。終吉が永遠の友情となります。突破口は、関係性の深化です。まずは表面的な付き合いを超えて、深い絆を築きましょう。',
    
    'JHH': 'まず、慎重に状況を観察します。なぜ穴に入ったのか、なぜ客が来たのか、全てに意味があることを理解します。偶然はありません。続いて、客人を詳しく観察します。三人それぞれの特徴、意図、能力を見極め、最適な対応を考えます。敬之を基本としつつ、個別対応します。最後に、さらに関係を最適化します。三人の相乗効果を引き出し、1+1+1が10になるような関係を構築します。終吉が最大化されます。突破口は、綿密な観察です。まずは状況と人物をよく観察し、最適な対応を見つけましょう。',
    
    'HJJ': 'まず、穴と客の意味を根本から問い直します。穴は隠れ家ではなく聖域、不速之客は使者と捉えます。入于穴が神聖な儀式となります。続いて、聖域での交流を深めます。三人の客と深い霊的交流を持ち、通常では得られない悟りを得ます。敬之が礼拝となります。最後に、神聖な使命を受けます。客人から託された使命を持って穴を出て、世界を変革する旅に出ます。終吉が使命の完遂となります。突破口は、聖性の認識です。まずは日常を聖なるものと見なし、全てに意味を見出しましょう。',
    
    'HJH': 'まず、穴を別の次元への入り口と見ます。三次元的な穴ではなく、高次元への portal と理解します。不速之客も高次元の存在です。次に、高次元での交流を行います。言葉を超えた communication、時空を超えた理解が生まれます。敬之が次元間の protocol となります。最後に、さらに高い次元へ上昇します。三人の客と共に、さらなる高みを目指します。終吉が次元上昇となります。突破口は、次元の認識です。まずは三次元的理解を超えて、高次元の可能性を探りましょう。',
    
    'HHJ': 'まず、内と外、主と客の区別を破壊します。穴も外も、自分も客も、全ては一つの意識の現れです。入于穴が内なる旅となります。次に、さらに境界を dissolve します。三人の客は自分の三つの側面、穴は自分の内なる空間と理解します。全てが自己との対話です。最後に、完全な統合を実現します。内外、自他の区別が消え、純粋な意識だけが残ります。敬之が自己への敬意となり、終吉が self-realization となります。突破口は、境界の消滅です。まずは分離の幻想を捨て、全てを自己と見なしましょう。',
    
    'HHH': 'まず、現象界を超越します。穴も客も、全ては意識が創り出した幻想的な教材です。入于穴が意識の内観となります。続いて、純粋意識として存在します。形も名前も役割も全て手放し、ただ在るという状態を体験します。不速之客三人が三位一体となります。最後に、新しい宇宙を創造します。意識の力で、穴を宇宙に、三人の客を無数の星に変えます。敬之が創造の力となり、終吉が新宇宙の誕生となります。突破口は、創造者意識です。まずは被造物ではなく創造者として、現実を創り出しましょう。'
  };

  const patterns = ['JJJ', 'JJH', 'JHJ', 'JHH', 'HJJ', 'HJH', 'HHJ', 'HHH'];
  const lines = [
    { name: '初九', stories: 初九Stories },
    { name: '九二', stories: 九二Stories },
    { name: '九三', stories: 九三Stories },
    { name: '六四', stories: 六四Stories },
    { name: '九五', stories: 九五Stories },
    { name: '上六', stories: 上六Stories }
  ];

  lines.forEach((line, lineIndex) => {
    patterns.forEach(pattern => {
      const key = `水天需 ${line.name} | ${pattern}`;
      narratives[key] = {
        chain_long: line.stories[pattern],
        tone: 'story',
        suitability: getSuitability(line.name, pattern),
        caution: getCaution(line.name, pattern),
        label: getLabel(pattern),
        start: { hex: '水天需', pos: lineIndex + 1 },
        final: { hex: '水天需', pos: ((lineIndex + 2) % 6) + 1 },
        updated_at: new Date().toISOString()
      };
    });
  });
  
  return narratives;
}

function getSuitability(line, pattern) {
  return '待機と準備が必要な場面、タイミングを見極める必要がある状況';
}

function getCaution(line, pattern) {
  return '焦らず適切な時機を待ち、準備を怠らないこと';
}

function getLabel(pattern) {
  const labels = {
    'JJJ': '一貫深化 （テーマ継続）',
    'JJH': '二段深化→視点切替 （構造転換）',
    'JHJ': '深化→視点切替→再深化 （構造転換）',
    'JHH': '初動深化→連続切替 （再整流）',
    'HJJ': '視点切替→二段深化 （構造転換）',
    'HJH': '視点切替→深化→再切替 （構造転換）',
    'HHJ': '連続切替→深化 （再設計）',
    'HHH': '三段転換 （完全再設計）'
  };
  return labels[pattern];
}

function main() {
  const file = path.resolve(__dirname, '..', 'public', 'data', 'narratives_chain.v1.json');
  const db = loadJSON(file);
  
  const narratives = create水天需CompleteNarratives();
  
  Object.entries(narratives).forEach(([key, value]) => {
    db[key] = value;
  });
  
  saveJSON(file, db);
  console.log(`水天需を完成させました: ${Object.keys(narratives).length}件`);
}

main();