<\!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAQEI OS Analyzer è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯æ¤œè¨¼</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #00ff41; }
        .test-section { border: 1px solid #333; margin: 20px 0; padding: 15px; }
        .error { color: #ff4444; }
        .warning { color: #ffaa44; }
        .success { color: #44ff44; }
        pre { background: #2a2a2a; padding: 10px; overflow-x: auto; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        th { background: #333; }
    </style>
</head>
<body>
    <h1>ğŸ” HAQEI OS Analyzer è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ</h1>
    
    <div class="test-section">
        <h2>1. buildUserVector() æ¤œè¨¼</h2>
        <div id="vector-test"></div>
    </div>

    <div class="test-section">
        <h2>2. calculateTrigramEnergies() æ¤œè¨¼</h2>
        <div id="trigram-test"></div>
    </div>

    <div class="test-section">
        <h2>3. Interface OS 0% å•é¡Œåˆ†æ</h2>
        <div id="interface-test"></div>
    </div>

    <div class="test-section">
        <h2>4. çµ±è¨ˆçš„åˆ†æçµæœ</h2>
        <div id="statistical-test"></div>
    </div>

    <script>
        // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: å…¸å‹çš„ãª30å•å›ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³
        const testAnswers = [
            // Q1-Q24: ä¾¡å€¤è¦³è³ªå•ã®å›ç­”ä¾‹
            {questionNumber: 1, selectedOption: {scoring: {"ä¹¾_å‰µé€ æ€§": 3.0, "é›¢_è¡¨ç¾æ€§": 1.5, "è‰®_å®‰å®šæ€§": -1.0}}},
            {questionNumber: 2, selectedOption: {scoring: {"ä¹¾_å‰µé€ æ€§": 3.0, "éœ‡_è¡Œå‹•æ€§": 2.0, "è‰®_å®‰å®šæ€§": -1.0}}},
            {questionNumber: 3, selectedOption: {scoring: {"ä¹¾_å‰µé€ æ€§": 3.0, "é›¢_è¡¨ç¾æ€§": 1.5, "å¤_å—å®¹æ€§": -1.0}}},
            {questionNumber: 4, selectedOption: {scoring: {"éœ‡_è¡Œå‹•æ€§": 3.0, "ä¹¾_å‰µé€ æ€§": 1.0, "è‰®_å®‰å®šæ€§": -1.5}}},
            {questionNumber: 5, selectedOption: {scoring: {"éœ‡_è¡Œå‹•æ€§": 3.0, "ä¹¾_å‰µé€ æ€§": 1.5, "å¤_å—å®¹æ€§": -1.0}}},
            {questionNumber: 6, selectedOption: {scoring: {"éœ‡_è¡Œå‹•æ€§": 3.0, "ä¹¾_å‰µé€ æ€§": 2.0, "è‰®_å®‰å®šæ€§": -1.0}}},
            {questionNumber: 7, selectedOption: {scoring: {"å_æ¢æ±‚æ€§": 3.0, "è‰®_å®‰å®šæ€§": 1.0, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 8, selectedOption: {scoring: {"å_æ¢æ±‚æ€§": 3.0, "è‰®_å®‰å®šæ€§": 1.5, "éœ‡_è¡Œå‹•æ€§": -1.0}}},
            {questionNumber: 9, selectedOption: {scoring: {"å_æ¢æ±‚æ€§": 3.0, "è‰®_å®‰å®šæ€§": 1.0, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 10, selectedOption: {scoring: {"è‰®_å®‰å®šæ€§": 3.0, "å¤_å—å®¹æ€§": 1.0, "ä¹¾_å‰µé€ æ€§": -1.5}}},
            {questionNumber: 11, selectedOption: {scoring: {"è‰®_å®‰å®šæ€§": 3.0, "å¤_å—å®¹æ€§": 1.5, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 12, selectedOption: {scoring: {"è‰®_å®‰å®šæ€§": 3.0, "å¤_å—å®¹æ€§": 1.0, "å·½_é©å¿œæ€§": -0.5}}},
            {questionNumber: 13, selectedOption: {scoring: {"å¤_å—å®¹æ€§": 3.0, "å…Œ_èª¿å’Œæ€§": 1.5, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 14, selectedOption: {scoring: {"å¤_å—å®¹æ€§": 3.0, "å…Œ_èª¿å’Œæ€§": 1.5, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 15, selectedOption: {scoring: {"å¤_å—å®¹æ€§": 3.0, "è‰®_å®‰å®šæ€§": 2.0, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 16, selectedOption: {scoring: {"å·½_é©å¿œæ€§": 3.0, "å…Œ_èª¿å’Œæ€§": 1.0, "è‰®_å®‰å®šæ€§": -0.5}}},
            {questionNumber: 17, selectedOption: {scoring: {"å·½_é©å¿œæ€§": 3.0, "å…Œ_èª¿å’Œæ€§": 2.0, "é›¢_è¡¨ç¾æ€§": 0.5}}},
            {questionNumber: 18, selectedOption: {scoring: {"å·½_é©å¿œæ€§": 3.0, "éœ‡_è¡Œå‹•æ€§": 1.0, "è‰®_å®‰å®šæ€§": -0.5}}},
            {questionNumber: 19, selectedOption: {scoring: {"é›¢_è¡¨ç¾æ€§": 3.0, "ä¹¾_å‰µé€ æ€§": 1.5, "å¤_å—å®¹æ€§": -0.5}}},
            {questionNumber: 20, selectedOption: {scoring: {"é›¢_è¡¨ç¾æ€§": 3.0, "ä¹¾_å‰µé€ æ€§": 1.5, "å¤_å—å®¹æ€§": -0.5}}},
            {questionNumber: 21, selectedOption: {scoring: {"é›¢_è¡¨ç¾æ€§": 3.0, "éœ‡_è¡Œå‹•æ€§": 1.0, "è‰®_å®‰å®šæ€§": -0.5}}},
            {questionNumber: 22, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "å·½_é©å¿œæ€§": 2.0, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 23, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "é›¢_è¡¨ç¾æ€§": 1.5, "å_æ¢æ±‚æ€§": -0.5}}},
            {questionNumber: 24, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "é›¢_è¡¨ç¾æ€§": 1.0, "è‰®_å®‰å®šæ€§": 0.5}}},

            // Q25-Q30: ã‚·ãƒŠãƒªã‚ªè³ªå•ã®å›ç­”ä¾‹
            {questionNumber: 25, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "å¤_å—å®¹æ€§": 2.5, "å_æ¢æ±‚æ€§": 1.0}}},
            {questionNumber: 26, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 2.5, "å¤_å—å®¹æ€§": 2.0, "é›¢_è¡¨ç¾æ€§": 1.5}}},
            {questionNumber: 27, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "å¤_å—å®¹æ€§": 2.0, "é›¢_è¡¨ç¾æ€§": 1.0}}},
            {questionNumber: 28, selectedOption: {scoring: {"å_æ¢æ±‚æ€§": 3.0, "è‰®_å®‰å®šæ€§": 2.0, "éœ‡_è¡Œå‹•æ€§": -0.5}}},
            {questionNumber: 29, selectedOption: {scoring: {"å·½_é©å¿œæ€§": 3.0, "å_æ¢æ±‚æ€§": 2.0, "è‰®_å®‰å®šæ€§": 0.5}}},
            {questionNumber: 30, selectedOption: {scoring: {"å…Œ_èª¿å’Œæ€§": 3.0, "å¤_å—å®¹æ€§": 2.0, "è‰®_å®‰å®šæ€§": 1.0}}}
        ];

        // 1. buildUserVector() æ¤œè¨¼
        function testBuildUserVector() {
            console.log("=== buildUserVector() ãƒ†ã‚¹ãƒˆé–‹å§‹ ===");
            
            const worldviewAnswers = testAnswers.filter(a => a.questionNumber >= 1 && a.questionNumber <= 24);
            
            // Engine OSç”¨ã®ãƒ™ã‚¯ãƒˆãƒ«æ§‹ç¯‰
            const vector = {
                ä¹¾_å‰µé€ æ€§: 0, éœ‡_è¡Œå‹•æ€§: 0, å_æ¢æ±‚æ€§: 0, è‰®_å®‰å®šæ€§: 0,
                å¤_å—å®¹æ€§: 0, å·½_é©å¿œæ€§: 0, é›¢_è¡¨ç¾æ€§: 0, å…Œ_èª¿å’Œæ€§: 0
            };
            
            worldviewAnswers.forEach(answer => {
                const option = answer.selectedOption;
                if (option && option.scoring) {
                    Object.entries(option.scoring).forEach(([dimension, score]) => {
                        if (vector.hasOwnProperty(dimension)) {
                            vector[dimension] += score;
                        }
                    });
                }
            });
            
            console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ™ã‚¯ãƒˆãƒ«:", vector);
            
            let html = "<h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ™ã‚¯ãƒˆãƒ«æ§‹ç¯‰çµæœ</h3>";
            html += "<table><tr><th>æ¬¡å…ƒ</th><th>ç”Ÿã‚¹ã‚³ã‚¢</th><th>å•é¡Œç‚¹</th></tr>";
            
            let totalScore = 0;
            let minScore = Infinity;
            let maxScore = -Infinity;
            
            Object.entries(vector).forEach(([dim, score]) => {
                totalScore += score;
                minScore = Math.min(minScore, score);
                maxScore = Math.max(maxScore, score);
                
                const issues = [];
                if (score < 0) issues.push("è² ã®å€¤");
                if (score === 0) issues.push("ã‚¼ãƒ­å€¤");
                if (score > 50) issues.push("ç•°å¸¸ã«é«˜ã„");
                
                html += `<tr><td>${dim}</td><td>${score.toFixed(1)}</td><td class="${issues.length ? 'warning' : 'success'}">${issues.join(', ') || 'OK'}</td></tr>`;
            });
            
            html += "</table>";
            html += `<p><strong>çµ±è¨ˆã‚µãƒãƒªãƒ¼:</strong></p>`;
            html += `<ul>`;
            html += `<li>åˆè¨ˆã‚¹ã‚³ã‚¢: ${totalScore.toFixed(1)}</li>`;
            html += `<li>å¹³å‡ã‚¹ã‚³ã‚¢: ${(totalScore / 8).toFixed(1)}</li>`;
            html += `<li>æœ€å°å€¤: ${minScore.toFixed(1)}</li>`;
            html += `<li>æœ€å¤§å€¤: ${maxScore.toFixed(1)}</li>`;
            html += `<li>ãƒ¬ãƒ³ã‚¸: ${(maxScore - minScore).toFixed(1)}</li>`;
            html += `</ul>`;
            
            // å•é¡Œç‚¹åˆ†æ
            html += `<h4>ğŸš¨ æ¤œå‡ºã•ã‚ŒãŸå•é¡Œç‚¹:</h4>`;
            if (minScore < 0) {
                html += `<div class="error">â€¢ è² ã®å€¤ãŒå­˜åœ¨ï¼ˆ${minScore.toFixed(1)}ï¼‰ - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°è¨­è¨ˆã«å•é¡Œ</div>`;
            }
            if (maxScore - minScore > 30) {
                html += `<div class="warning">â€¢ æ¥µç«¯ãªåˆ†æ•£ï¼ˆãƒ¬ãƒ³ã‚¸: ${(maxScore - minScore).toFixed(1)}ï¼‰ - ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ãŒå¿…è¦</div>`;
            }
            
            document.getElementById('vector-test').innerHTML = html;
            return vector;
        }

        // 2. calculateTrigramEnergies() æ¤œè¨¼
        function testCalculateTrigramEnergies(userVector) {
            console.log("=== calculateTrigramEnergies() ãƒ†ã‚¹ãƒˆé–‹å§‹ ===");
            
            // æ­£çµ±å…«å¦ãƒãƒƒãƒ”ãƒ³ã‚°
            const AUTHENTIC_TRIGRAM_MAPPING = {
                "ä¹¾_å‰µé€ æ€§": "ä¹¾",  "å…Œ_èª¿å’Œæ€§": "å…Œ", "é›¢_è¡¨ç¾æ€§": "é›¢", "éœ‡_è¡Œå‹•æ€§": "éœ‡",
                "å·½_é©å¿œæ€§": "å·½", "å_æ¢æ±‚æ€§": "å", "è‰®_å®‰å®šæ€§": "è‰®", "å¤_å—å®¹æ€§": "å¤"
            };
            
            const rawEnergies = {};
            Object.entries(AUTHENTIC_TRIGRAM_MAPPING).forEach(([dimension, trigramName]) => {
                rawEnergies[trigramName] = userVector[dimension] || 0;
            });
            
            console.log("ç”Ÿä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼:", rawEnergies);
            
            // HaQeiå‹•çš„æ­£è¦åŒ–
            const maxEnergy = Math.max(...Object.values(rawEnergies));
            const normalizedEnergies = {};
            
            if (maxEnergy > 0) {
                Object.entries(rawEnergies).forEach(([trigram, energy]) => {
                    const normalized = (energy / maxEnergy) * 100;
                    normalizedEnergies[trigram] = Math.max(0, Math.min(100, normalized));
                });
            } else {
                Object.keys(rawEnergies).forEach(trigram => {
                    normalizedEnergies[trigram] = 12.5; // 100/8
                });
            }
            
            console.log("æ­£è¦åŒ–ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼:", normalizedEnergies);
            
            let html = "<h3>ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼è¨ˆç®—çµæœ</h3>";
            html += "<table><tr><th>ä¸‰çˆ»</th><th>ç”Ÿå€¤</th><th>æ­£è¦åŒ–å€¤</th><th>å•é¡Œç‚¹</th></tr>";
            
            Object.entries(rawEnergies).forEach(([trigram, rawValue]) => {
                const normalized = normalizedEnergies[trigram];
                const issues = [];
                
                if (rawValue === 0) issues.push("ç”Ÿå€¤ã‚¼ãƒ­");
                if (normalized === 100) issues.push("æœ€é«˜å€¤ç‹¬å ");
                if (normalized < 10) issues.push("æ¥µç«¯ã«ä½ã„");
                
                html += `<tr><td>${trigram}</td><td>${rawValue.toFixed(1)}</td><td>${normalized.toFixed(1)}%</td><td class="${issues.length ? 'warning' : 'success'}">${issues.join(', ') || 'OK'}</td></tr>`;
            });
            
            html += "</table>";
            
            // æ­£è¦åŒ–ã®å•é¡Œç‚¹
            html += `<h4>ğŸš¨ æ­£è¦åŒ–å‡¦ç†ã®å•é¡Œç‚¹:</h4>`;
            html += `<div class="error">â€¢ æœ€é«˜å€¤ã‚’100%ã¨ã™ã‚‹æ­£è¦åŒ–ã¯ç›¸å¯¾çš„éãã‚‹ - çµ¶å¯¾è©•ä¾¡ãŒå›°é›£</div>`;
            html += `<div class="warning">â€¢ ä¸€ã¤ã®æ¬¡å…ƒã ã‘é«˜ã„ã¨ã€ä»–ãŒå…¨ã¦ä½ãè¦‹ãˆã‚‹</div>`;
            html += `<div class="warning">â€¢ 30å•ã§8æ¬¡å…ƒã‚’é©åˆ‡ã«æ¸¬å®šã§ãã‚‹ã‹ç–‘å•ï¼ˆ1æ¬¡å…ƒã‚ãŸã‚Š3.75å•ï¼‰</div>`;
            
            document.getElementById('trigram-test').innerHTML = html;
            return normalizedEnergies;
        }

        // 3. Interface OS 0% å•é¡Œåˆ†æ
        function testInterfaceOSIssue() {
            console.log("=== Interface OS 0% å•é¡Œåˆ†æ ===");
            
            const scenarioAnswers = testAnswers.filter(a => a.questionNumber >= 25 && a.questionNumber <= 30);
            console.log("ã‚·ãƒŠãƒªã‚ªå›ç­”:", scenarioAnswers);
            
            // Interface OSåˆ†æã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            const socialPatterns = {
                Q25_leadership: 0, Q26_interpersonal: 0, Q27_family: 0,
                Q28_emergency: 0, Q29_competition: 0, Q30_community: 0
            };
            
            // ã‚·ãƒŠãƒªã‚ªã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆç°¡ç•¥ç‰ˆï¼‰
            scenarioAnswers.forEach((answer, index) => {
                const questionId = `Q${25 + index}`;
                // ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å•é¡Œ: scoringå€¤ã®åˆè¨ˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§
                const scores = Object.values(answer.selectedOption.scoring);
                const avgScore = scores.reduce((a, b) => a + b, 0) / scores.length;
                
                switch (questionId) {
                    case 'Q25': socialPatterns.Q25_leadership = avgScore; break;
                    case 'Q26': socialPatterns.Q26_interpersonal = avgScore; break;
                    case 'Q27': socialPatterns.Q27_family = avgScore; break;
                    case 'Q28': socialPatterns.Q28_emergency = avgScore; break;
                    case 'Q29': socialPatterns.Q29_competition = avgScore; break;
                    case 'Q30': socialPatterns.Q30_community = avgScore; break;
                }
            });
            
            console.log("ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³:", socialPatterns);
            
            // Interface Vectoræ§‹ç¯‰
            const interfaceVector = {
                "å¤–å‘_ä¸»å°æ€§": 0, "å¤–å‘_èª¿å’Œæ€§": 0, "å¤–å‘_è¡¨ç¾æ€§": 0, "å¤–å‘_è¡Œå‹•æ€§": 0,
                "å†…å‘_é©å¿œæ€§": 0, "å†…å‘_åˆ†ææ€§": 0, "å†…å‘_å®‰å®šæ€§": 0, "å†…å‘_æ”¯æ´æ€§": 0
            };
            
            // ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ï¼‰
            interfaceVector["å¤–å‘_ä¸»å°æ€§"] = (socialPatterns.Q25_leadership * 0.5) + (socialPatterns.Q28_emergency * 0.3);
            interfaceVector["å¤–å‘_èª¿å’Œæ€§"] = (socialPatterns.Q26_interpersonal * 0.4) + (socialPatterns.Q30_community * 0.4);
            interfaceVector["å¤–å‘_è¡¨ç¾æ€§"] = (socialPatterns.Q25_leadership * 0.3) + (socialPatterns.Q26_interpersonal * 0.3);
            interfaceVector["å¤–å‘_è¡Œå‹•æ€§"] = (socialPatterns.Q25_leadership * 0.2) + (socialPatterns.Q28_emergency * 0.4);
            interfaceVector["å†…å‘_é©å¿œæ€§"] = (socialPatterns.Q26_interpersonal * 0.3) + (socialPatterns.Q27_family * 0.4);
            interfaceVector["å†…å‘_åˆ†ææ€§"] = (socialPatterns.Q28_emergency * 0.3) + (socialPatterns.Q29_competition * 0.3);
            interfaceVector["å†…å‘_å®‰å®šæ€§"] = (socialPatterns.Q27_family * 0.4) + (socialPatterns.Q30_community * 0.3);
            interfaceVector["å†…å‘_æ”¯æ´æ€§"] = (socialPatterns.Q27_family * 0.3) + (socialPatterns.Q30_community * 0.3);
            
            // æ­£è¦åŒ–ï¼ˆ0-1ç¯„å›²ï¼‰
            Object.keys(interfaceVector).forEach(key => {
                interfaceVector[key] = Math.max(0, Math.min(1, interfaceVector[key]));
            });
            
            console.log("Interface Vector:", interfaceVector);
            
            let html = "<h3>Interface OS è¨ˆç®—éç¨‹æ¤œè¨¼</h3>";
            html += "<h4>Step 1: ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>";
            html += "<table><tr><th>ãƒ‘ã‚¿ãƒ¼ãƒ³</th><th>å€¤</th><th>å•é¡Œ</th></tr>";
            
            Object.entries(socialPatterns).forEach(([pattern, value]) => {
                const issues = [];
                if (value === 0) issues.push("ã‚¼ãƒ­å€¤");
                if (Math.abs(value) < 0.1) issues.push("æ¥µå°å€¤");
                
                html += `<tr><td>${pattern}</td><td>${value.toFixed(2)}</td><td class="${issues.length ? 'warning' : 'success'}">${issues.join(', ') || 'OK'}</td></tr>`;
            });
            
            html += "</table>";
            html += "<h4>Step 2: Interface Vector</h4>";
            html += "<table><tr><th>æ¬¡å…ƒ</th><th>è¨ˆç®—å¼</th><th>å€¤</th><th>å•é¡Œ</th></tr>";
            
            Object.entries(interfaceVector).forEach(([dim, value]) => {
                const issues = [];
                if (value === 0) issues.push("ã‚¼ãƒ­å€¤");
                if (value > 0.8) issues.push("ç•°å¸¸ã«é«˜ã„");
                
                html += `<tr><td>${dim}</td><td>è¤‡åˆè¨ˆç®—</td><td>${value.toFixed(3)}</td><td class="${issues.length ? 'warning' : 'success'}">${issues.join(', ') || 'OK'}</td></tr>`;
            });
            
            html += "</table>";
            
            html += `<h4>ğŸš¨ Interface OS 0% å•é¡Œã®åŸå› :</h4>`;
            html += `<div class="error">â€¢ ã‚·ãƒŠãƒªã‚ªè³ªå•ï¼ˆQ25-Q30ï¼‰ãŒEngine OSç”¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚’æµç”¨</div>`;
            html += `<div class="error">â€¢ Interfaceå°‚ç”¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ä½“ç³»ãŒæœªå®Ÿè£…</div>`;
            html += `<div class="error">â€¢ 8æ¬¡å…ƒâ†’8æ¬¡å…ƒã®è¤‡é›‘ãªãƒãƒƒãƒ”ãƒ³ã‚°ã§æƒ…å ±æå¤±</div>`;
            html += `<div class="error">â€¢ ä¿‚æ•°ã«ã‚ˆã‚‹è¨ˆç®—ã§å€¤ãŒå¸Œè–„åŒ–</div>`;
            
            document.getElementById('interface-test').innerHTML = html;
        }

        // 4. çµ±è¨ˆçš„åˆ†æ
        function testStatisticalValidation() {
            console.log("=== çµ±è¨ˆçš„åˆ†æé–‹å§‹ ===");
            
            let html = "<h3>çµ±è¨ˆçš„å¦¥å½“æ€§åˆ†æ</h3>";
            
            html += `<h4>ğŸ” è¨­è¨ˆä¸Šã®å•é¡Œç‚¹:</h4>`;
            html += `<div class="error"><strong>1. è³ªå•æ•°ã®ä¸è¶³</strong><br>`;
            html += `- 8æ¬¡å…ƒæ¸¬å®šã«30å•ä½¿ç”¨<br>`;
            html += `- 1æ¬¡å…ƒã‚ãŸã‚Š3.75å•ï¼ˆçµ±è¨ˆçš„ã«ä¸ååˆ†ï¼‰<br>`;
            html += `- ä¿¡é ¼æ€§ç¢ºä¿ã«ã¯æœ€ä½5-7å•/æ¬¡å…ƒå¿…è¦</div>`;
            
            html += `<div class="error"><strong>2. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ä½“ç³»ã®çŸ›ç›¾</strong><br>`;
            html += `- Engine OS: ç›´æ¥8æ¬¡å…ƒã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°<br>`;
            html += `- Interface OS: åŒã˜ã‚¹ã‚³ã‚¢ã‚’6ãƒ‘ã‚¿ãƒ¼ãƒ³â†’8æ¬¡å…ƒã«å¤‰æ›<br>`;
            html += `- Safe Mode OS: ã¾ãŸåˆ¥ã®å¤‰æ›ä½“ç³»<br>`;
            html += `- ä¸€è²«æ€§ãªã—</div>`;
            
            html += `<div class="error"><strong>3. æ­£è¦åŒ–æ‰‹æ³•ã®å•é¡Œ</strong><br>`;
            html += `- æœ€é«˜å€¤ã‚’100%ã¨ã™ã‚‹ç›¸å¯¾æ­£è¦åŒ–<br>`;
            html += `- çµ¶å¯¾çš„è©•ä¾¡ãŒä¸å¯èƒ½<br>`;
            html += `- å€‹äººå†…æ¯”è¼ƒã®ã¿ã§å€‹äººé–“æ¯”è¼ƒå›°é›£</div>`;
            
            html += `<div class="error"><strong>4. Interface OSç‰¹æœ‰ã®å•é¡Œ</strong><br>`;
            html += `- Q25-Q30ã§Engine OSç”¨scoringä½¿ç”¨<br>`;
            html += `- è¤‡é›‘ãªä¿‚æ•°ãƒãƒƒãƒ”ãƒ³ã‚°ã§å€¤å¸Œè–„åŒ–<br>`;
            html += `- 0%ã«ãªã‚Šã‚„ã™ã„æ§‹é€ çš„æ¬ é™¥</div>`;
            
            html += `<h4>ğŸ“Š æ¨å¥¨æ”¹å–„ç­–:</h4>`;
            html += `<div class="success"><strong>1. è³ªå•è¨­è¨ˆã®è¦‹ç›´ã—</strong><br>`;
            html += `- å„OSå°‚ç”¨ã®è³ªå•ã‚»ãƒƒãƒˆä½œæˆ<br>`;
            html += `- Engine OS: Q1-Q24 (8æ¬¡å…ƒ Ã— 3å•)<br>`;
            html += `- Interface OS: Q25-Q32 (ç¤¾ä¼šçš„8æ¬¡å…ƒ Ã— 1å•)<br>`;
            html += `- Safe Mode OS: Q33-Q40 (é˜²å¾¡çš„8æ¬¡å…ƒ Ã— 1å•)</div>`;
            
            html += `<div class="success"><strong>2. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°çµ±ä¸€</strong><br>`;
            html += `- å…¨OSã§åŒä¸€ã®8æ¬¡å…ƒä½“ç³»ä½¿ç”¨<br>`;
            html += `- å„æ¬¡å…ƒ-1.0ã€œ+3.0ã®çµ±ä¸€ã‚¹ã‚±ãƒ¼ãƒ«<br>`;
            html += `- è² ã®å€¤ã‚’å«ã‚€è¨­è¨ˆã§å¯¾æ¯”æ˜ç¢ºåŒ–</div>`;
            
            html += `<div class="success"><strong>3. æ­£è¦åŒ–æ”¹å–„</strong><br>`;
            html += `- Z-scoreæ­£è¦åŒ–ã¾ãŸã¯ min-maxæ­£è¦åŒ–<br>`;
            html += `- çµ¶å¯¾è©•ä¾¡å¯èƒ½ãªåŸºæº–å€¤è¨­å®š<br>`;
            html += `- å€‹äººé–“æ¯”è¼ƒå¯èƒ½ãªæ¨™æº–åŒ–</div>`;
            
            document.getElementById('statistical-test').innerHTML = html;
        }

        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.onload = function() {
            const vector = testBuildUserVector();
            const energies = testCalculateTrigramEnergies(vector);
            testInterfaceOSIssue();
            testStatisticalValidation();
            
            console.log("=== æ¤œè¨¼å®Œäº† ===");
            console.log("ä¸»è¦å•é¡Œ:");
            console.log("1. Interface OSç”¨ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ä½“ç³»ãŒæœªå®Ÿè£…");
            console.log("2. 30å•ã§3ã¤ã®OSã‚’åˆ†é›¢ã™ã‚‹ã«ã¯è³ªå•æ•°ä¸è¶³");
            console.log("3. ç›¸å¯¾æ­£è¦åŒ–ã«ã‚ˆã‚Šçµ¶å¯¾è©•ä¾¡å›°é›£");
            console.log("4. Engine OSã®å€¤ã«ä¾å­˜ã—ã¦Interface/Safe ModeãŒæ±ºã¾ã‚‹æ§‹é€ çš„å•é¡Œ");
        };
    </script>
</body>
</html>
EOF < /dev/null