<!DOCTYPE html>
<html>
<head>
    <title>Future Simulator æœ€å°å‹•ä½œãƒ†ã‚¹ãƒˆ</title>
    <meta charset="UTF-8">
    <style>
        body { margin: 20px; font-family: sans-serif; }
        .test-area { padding: 20px; border: 2px solid #007bff; margin: 20px 0; }
        textarea { width: 100%; height: 60px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        #results { margin-top: 20px; padding: 20px; background: #f0f0f0; min-height: 100px; }
        .scenario { margin: 10px 0; padding: 10px; background: white; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <h1>ğŸ” Future Simulator æœ€å°å‹•ä½œãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-area">
        <h2>å®Ÿéš›ã®Future Simulatorã¨åŒã˜æ§‹é€ </h2>
        <textarea id="worryInput" placeholder="10æ–‡å­—ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„">è»¢è·ã‚’æ¤œè¨ã—ã¦ã„ã¾ã™ãŒã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒåˆ†ã‹ã‚‰ãšæ‚©ã‚“ã§ã„ã¾ã™</textarea>
        <br><br>
        <button id="aiGuessBtn">åˆ†æé–‹å§‹</button>
        
        <div id="resultsContainer" style="display: none;">
            <h3>åˆ†æçµæœ</h3>
            <div id="results"></div>
        </div>
    </div>
    
    <div id="log" style="background: #000; color: #0f0; padding: 10px; font-family: monospace; white-space: pre;"></div>
    
    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toISOString().split('T')[1].split('.')[0];
            logDiv.textContent += `[${timestamp}] ${msg}\n`;
            console.log(msg);
        }
        
        log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
        
        // ç°¡æ˜“ç‰ˆã®8ã‚·ãƒŠãƒªã‚ªç”Ÿæˆ
        function generateSimpleScenarios(inputText) {
            log(`8ã‚·ãƒŠãƒªã‚ªç”Ÿæˆé–‹å§‹: "${inputText}"`);
            
            const scenarios = [
                { id: 1, title: 'ç©æ¥µçš„è¡Œå‹•', description: 'ãƒªã‚¹ã‚¯ã‚’å–ã£ã¦å‰é€²ã™ã‚‹', probability: 0.8 },
                { id: 2, title: 'æ…é‡æ¤œè¨', description: 'æƒ…å ±åé›†ã‚’é‡è¦–ã™ã‚‹', probability: 0.7 },
                { id: 3, title: 'å”åŠ›ä¾é ¼', description: 'å‘¨å›²ã®æ”¯æ´ã‚’æ±‚ã‚ã‚‹', probability: 0.6 },
                { id: 4, title: 'ç¾çŠ¶ç¶­æŒ', description: 'æ§˜å­ã‚’è¦‹ã‚‹', probability: 0.5 },
                { id: 5, title: 'éƒ¨åˆ†çš„å¤‰æ›´', description: 'å°ã•ãªå¤‰åŒ–ã‹ã‚‰å§‹ã‚ã‚‹', probability: 0.75 },
                { id: 6, title: 'å…¨é¢æ”¹é©', description: 'å¤§èƒ†ãªè»¢æ›ã‚’å›³ã‚‹', probability: 0.4 },
                { id: 7, title: 'å†…çœé‡è¦–', description: 'è‡ªå·±ç†è§£ã‚’æ·±ã‚ã‚‹', probability: 0.65 },
                { id: 8, title: 'å¤–éƒ¨å§”è¨—', description: 'å°‚é–€å®¶ã«ç›¸è«‡ã™ã‚‹', probability: 0.55 }
            ];
            
            log(`8ã‚·ãƒŠãƒªã‚ªç”Ÿæˆå®Œäº†`);
            return scenarios;
        }
        
        // çµæœè¡¨ç¤º
        function displayResults(scenarios) {
            log('çµæœè¡¨ç¤ºé–‹å§‹');
            
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsDiv = document.getElementById('results');
            
            resultsContainer.style.display = 'block';
            
            let html = '';
            scenarios.forEach(scenario => {
                html += `
                    <div class="scenario">
                        <strong>ã‚·ãƒŠãƒªã‚ª${scenario.id}: ${scenario.title}</strong><br>
                        ${scenario.description}<br>
                        ç¢ºç‡: ${(scenario.probability * 100).toFixed(0)}%
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
            log('çµæœè¡¨ç¤ºå®Œäº†');
        }
        
        // analyzeWorryé–¢æ•°ï¼ˆFuture Simulatorã¨åŒã˜åå‰ï¼‰
        function analyzeWorry(inputText) {
            log(`analyzeWorryå‘¼ã³å‡ºã—: "${inputText}"`);
            
            try {
                // 8ã‚·ãƒŠãƒªã‚ªç”Ÿæˆ
                const scenarios = generateSimpleScenarios(inputText);
                
                // çµæœè¡¨ç¤º
                displayResults(scenarios);
                
                log('åˆ†æå®Œäº†');
                return true;
                
            } catch (error) {
                log(`ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ: ${error.message}`);
                return false;
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        document.addEventListener('DOMContentLoaded', () => {
            log('DOMæº–å‚™å®Œäº†');
            
            const aiGuessBtn = document.getElementById('aiGuessBtn');
            const worryInput = document.getElementById('worryInput');
            
            if (aiGuessBtn && worryInput) {
                aiGuessBtn.addEventListener('click', () => {
                    const inputText = worryInput.value.trim();
                    log(`ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯: "${inputText}" (${inputText.length}æ–‡å­—)`);
                    
                    if (inputText && inputText.length >= 10) {
                        analyzeWorry(inputText);
                    } else {
                        log('å…¥åŠ›ãŒçŸ­ã™ãã¾ã™ï¼ˆ10æ–‡å­—ä»¥ä¸Šå¿…è¦ï¼‰');
                        alert('10æ–‡å­—ä»¥ä¸Šã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    }
                });
                
                log('ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†');
            } else {
                log('ERROR: å¿…è¦ãªè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        });
    </script>
</body>
</html>