<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InteractiveConnectionsVisualizer ãƒ†ã‚¹ãƒˆ</title>
    <link rel="stylesheet" href="public/css/main.css">
    <link rel="stylesheet" href="public/css/components.css">
</head>
<body style="background: #1e293b; color: #f1f5f9; padding: 2rem;">
    <h1>InteractiveConnectionsVisualizer èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</h1>
    
    <div id="test-results" style="margin: 2rem 0;">
        <h2>ãƒ†ã‚¹ãƒˆçµæœ:</h2>
        <div id="load-status"></div>
    </div>
    
    <div id="test-container" style="min-height: 400px; border: 1px solid #374151; border-radius: 8px; margin: 2rem 0;">
        <!-- ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒ†ãƒŠ -->
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ -->
    <script src="public/js/shared/core/BaseComponent.js"></script>
    <script src="public/js/shared/core/DataManager.js"></script>
    <script src="public/js/components/InteractiveConnectionsVisualizer.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusDiv = document.getElementById('load-status');
            
            // InteractiveConnectionsVisualizerãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            if (typeof InteractiveConnectionsVisualizer === 'undefined') {
                statusDiv.innerHTML = `
                    <div style="color: #ef4444; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px;">
                        âŒ InteractiveConnectionsVisualizer ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“
                    </div>
                `;
                return;
            }
            
            statusDiv.innerHTML = `
                <div style="color: #10b981; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    âœ… InteractiveConnectionsVisualizer ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ
                </div>
            `;
            
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ
            console.log('ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
            testFallback();
        });
        
        function testFallback() {
            const container = document.getElementById('test-container');
            
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºã®HTMLï¼ˆTripleOSStrategicView._renderConnectionsFallback ã®å‡ºåŠ›ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
            const mockAnalysisResult = {
                engineOS: { osName: "å‰µé€ åŠ›ã®æ¢æ±‚è€…" },
                interfaceOS: { osName: "å”èª¿æ€§ã®èª¿åœè€…" },
                safeModeOS: { osName: "æ…é‡ãªå®ˆè­·è€…" }
            };
            
            container.innerHTML = `
                <div class="connections-fallback">
                    <div class="fallback-header">
                        <h3 class="connections-title">ğŸ”— 3OSé–“ã®ç›¸äº’ä½œç”¨</h3>
                        <p class="fallback-notice">ç°¡æ˜“è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰</p>
                    </div>
                    
                    <div class="simple-connections-grid">
                        <div class="connection-summary">
                            <div class="os-pair">
                                <span class="os-icon">ğŸ”¥</span>
                                <span class="os-name">${mockAnalysisResult.engineOS.osName}</span>
                                <span class="connection-arrow">â†”</span>
                                <span class="os-icon">ğŸŒ</span>
                                <span class="os-name">${mockAnalysisResult.interfaceOS.osName}</span>
                            </div>
                            <p class="connection-description">
                                æœ¬è³ªçš„ãªä¾¡å€¤è¦³ã¨ç¤¾ä¼šçš„è¡¨ç¾ã®ç›¸äº’ä½œç”¨
                            </p>
                        </div>
                        
                        <div class="connection-summary">
                            <div class="os-pair">
                                <span class="os-icon">ğŸ”¥</span>
                                <span class="os-name">${mockAnalysisResult.engineOS.osName}</span>
                                <span class="connection-arrow">â†”</span>
                                <span class="os-icon">ğŸ›¡ï¸</span>
                                <span class="os-name">${mockAnalysisResult.safeModeOS.osName}</span>
                            </div>
                            <p class="connection-description">
                                ä¾¡å€¤è¦³ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ã®ãƒãƒ©ãƒ³ã‚¹
                            </p>
                        </div>
                        
                        <div class="connection-summary">
                            <div class="os-pair">
                                <span class="os-icon">ğŸŒ</span>
                                <span class="os-name">${mockAnalysisResult.interfaceOS.osName}</span>
                                <span class="connection-arrow">â†”</span>
                                <span class="os-icon">ğŸ›¡ï¸</span>
                                <span class="os-name">${mockAnalysisResult.safeModeOS.osName}</span>
                            </div>
                            <p class="connection-description">
                                ç¤¾ä¼šçš„å½¹å‰²ã¨è‡ªå·±é˜²è¡›ã®é–¢ä¿‚æ€§
                            </p>
                        </div>
                    </div>
                    
                    <div class="fallback-actions">
                        <button id="retry-connections" class="retry-button">
                            ğŸ”„ å¯è¦–åŒ–ã‚’å†è©¦è¡Œ
                        </button>
                        <button id="refresh-page" class="refresh-button">
                            â†» ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°
                        </button>
                    </div>
                </div>
            `;
            
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
            const retryBtn = container.querySelector('#retry-connections');
            const refreshBtn = container.querySelector('#refresh-page');

            if (retryBtn) {
                retryBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('ğŸ”„ å†è©¦è¡Œãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
                    
                    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
                    container.innerHTML = `
                        <div class="connections-loading">
                            <div class="loading-spinner"></div>
                            <p>å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èª­ã¿è¾¼ã¿ä¸­...</p>
                        </div>
                    `;
                    
                    // 3ç§’å¾Œã«å…ƒã«æˆ»ã™
                    setTimeout(() => {
                        testFallback();
                    }, 3000);
                });
            }

            if (refreshBtn) {
                refreshBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('â†» ãƒšãƒ¼ã‚¸æ›´æ–°ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
                    alert('å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãƒšãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¾ã™');
                });
            }
            
            console.log('âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ');
        }
    </script>
</body>
</html>