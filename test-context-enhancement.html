<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŠ¶æ³å¦ç²¾åº¦å‘ä¸Šã‚·ã‚¹ãƒ†ãƒ  - å‹•ä½œãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1f2937;
            color: #f3f4f6;
        }
        .test-container {
            background: #374151;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .test-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #4b5563;
            border-radius: 8px;
            background: #1f2937;
            color: #f3f4f6;
            font-size: 16px;
            margin: 10px 0;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .result-section {
            background: #1f2937;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #3b82f6;
        }
        .enhanced-info {
            background: #065f46;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .hsp-detected {
            background: #7c2d12;
            color: #fed7aa;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .multidimensional {
            background: #581c87;
            color: #e9d5ff;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .confidence-high { color: #10b981; }
        .confidence-medium { color: #f59e0b; }
        .confidence-low { color: #ef4444; }
        .loading {
            display: none;
            color: #3b82f6;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ çŠ¶æ³å¦ç²¾åº¦å‘ä¸Šã‚·ã‚¹ãƒ†ãƒ  - å‹•ä½œãƒ†ã‚¹ãƒˆ</h1>
    <p>å¤šæ¬¡å…ƒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³ã®å‹•ä½œã‚’æ¤œè¨¼ã—ã¾ã™</p>

    <div class="test-container">
        <h2>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: HSPç‰¹æ€§æ¤œå‡ºãƒ†ã‚¹ãƒˆ</h2>
        <textarea class="test-input" id="hspTestInput" placeholder="HSPé–¢é€£ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..." rows="4">ä¸–ã®ä¸­ã«ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šãã¦ã€ä»–äººã®æ„Ÿæƒ…ã‚„å‘¨ã‚Šã®ç©ºæ°—ã«æ•æ„Ÿã«æ„Ÿã˜ã¦å¯¾å¿œã—ã¡ã‚ƒã†ã‚“ã§ã™ã€‚æ°—æŒã¡ã®æµ®ãæ²ˆã¿ãŒå½±éŸ¿ã‚’å—ã‘ã‚„ã™ãã¦ã€ã‚‚ã£ã¨ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã‚’ä¿ã¦ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ç¹Šç´°ã™ãã‚‹è‡ªåˆ†ã®æ€§æ ¼ã‚’ãªã‚“ã¨ã‹ã—ãŸã„ã§ã™ã€‚</textarea>
        <button class="test-button" onclick="testHSPDetection()">HSPç‰¹æ€§åˆ†æãƒ†ã‚¹ãƒˆ</button>
        <div id="hspTestResult" class="result-section" style="display:none;"></div>
    </div>

    <div class="test-container">
        <h2>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: è¤‡åˆå•é¡Œæ¤œå‡ºãƒ†ã‚¹ãƒˆ</h2>
        <textarea class="test-input" id="hybridTestInput" placeholder="è¤‡æ•°ã®é ˜åŸŸã«ã¾ãŸãŒã‚‹å•é¡Œã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..." rows="4">ä»•äº‹ã§ã®ã‚¹ãƒˆãƒ¬ã‚¹ãŒåŸå› ã§å®¶æ—é–¢ä¿‚ãŒã†ã¾ãã„ã‹ãªããªã£ã¦ã€å°†æ¥ã®ã‚­ãƒ£ãƒªã‚¢ã«ã¤ã„ã¦ã‚‚è¿·ã£ã¦ã„ã¾ã™ã€‚æœ€è¿‘ã¯äººç”Ÿã®æ„å‘³ã«ã¤ã„ã¦è€ƒãˆã‚‹ã“ã¨ãŒå¤šãã¦ã€è‡ªåˆ†ã®ä¾¡å€¤è¦³ã¨ç¤¾ä¼šã®æœŸå¾…ã¨ã®é–“ã§æºã‚Œå‹•ã„ã¦ã„ã¾ã™ã€‚æŠ€è¡“çš„ãªã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã‚‚å¿…è¦ã ã¨æ€ã†ã®ã§ã™ãŒã€æ™‚é–“çš„ãªä½™è£•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</textarea>
        <button class="test-button" onclick="testMultidimensionalDetection()">è¤‡åˆå•é¡Œåˆ†æãƒ†ã‚¹ãƒˆ</button>
        <div id="hybridTestResult" class="result-section" style="display:none;"></div>
    </div>

    <div class="test-container">
        <h2>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: æ„å›³ç†è§£ãƒ†ã‚¹ãƒˆ</h2>
        <textarea class="test-input" id="intentionTestInput" placeholder="æ˜ç¢ºãªæ„å›³ã‚’å«ã‚€ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..." rows="4">ã©ã†ã™ã‚Œã°è‡ªåˆ†ã®æ°—æŒã¡ã‚’ã†ã¾ãã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã‹ã€‚ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ãã ã•ã„ã€‚ã“ã‚Œã¾ã§ã®çµŒé¨“ã‚’æŒ¯ã‚Šè¿”ã£ã¦ã¿ã‚‹ã¨ã€æ„Ÿæƒ…çš„ã«ãªã‚Šã‚„ã™ã„å ´é¢ãŒã„ãã¤ã‹ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚ä»Šå¾Œã¯ã‚‚ã£ã¨å†·é™ã«å¯¾å¿œã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚</textarea>
        <button class="test-button" onclick="testIntentionAnalysis()">æ„å›³ç†è§£åˆ†æãƒ†ã‚¹ãƒˆ</button>
        <div id="intentionTestResult" class="result-section" style="display:none;"></div>
    </div>

    <div class="test-container">
        <h2>ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒ</h2>
        <textarea class="test-input" id="comparisonTestInput" placeholder="æ¯”è¼ƒãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..." rows="4">æœ€è¿‘ã€è·å ´ã®äººé–“é–¢ä¿‚ã§æ‚©ã‚“ã§ã„ã¾ã™ã€‚ä¸Šå¸ã¨ã®ç›¸æ€§ãŒæ‚ªãã¦ã€æ¯æ—¥ä»•äº‹ã«è¡Œãã®ãŒæ†‚é¬±ã§ã™ã€‚è»¢è·ã‚‚è€ƒãˆã¦ã„ã¾ã™ãŒã€ä»Šã®çµŒæ¸ˆçŠ¶æ³ã‚’è€ƒãˆã‚‹ã¨ä¸å®‰ã‚‚ã‚ã‚Šã¾ã™ã€‚</textarea>
        <button class="test-button" onclick="testComparison()">å¾“æ¥vsæ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ æ¯”è¼ƒ</button>
        <div id="comparisonTestResult" class="result-section" style="display:none;"></div>
    </div>

    <div class="loading" id="loadingIndicator">
        <p>ğŸ”„ åˆ†æä¸­...</p>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ -->
    <script src="./public/js/pages/future-simulator/MultiDimensionalContextAnalyzer.js"></script>
    
    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let enhancedAnalyzer = null;

        // ENHANCED_CONTEXT_TYPES ã®å®šç¾©ï¼ˆFuture Simulatorã‹ã‚‰æŠœç²‹ï¼‰
        window.ENHANCED_CONTEXT_TYPES = {
            emotion_management: {
                id: 'emotion_management',
                name: 'æ„Ÿæƒ…èª¿æ•´ãƒ»HSP',
                priority: 1,
                keywords: {
                    primary: ['æ„Ÿæƒ…', 'æ•æ„Ÿ', 'ç¹Šç´°', 'HSP', 'æ°—æŒã¡', 'æ„Ÿå—æ€§', 'ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«'],
                    hsp_specific: ['ä¸–ã®ä¸­ã‚¤ãƒ©ã‚¤ãƒ©', 'æ•æ„Ÿã«æ„Ÿã˜', 'å¯¾å¿œã—ã¡ã‚ƒã†', 'æµ®ãæ²ˆã¿ãŒå½±éŸ¿', 'ç¹Šç´°ã™ãã‚‹']
                },
                weight: 1.3,
                confidence_boost: 0.2
            },
            personal: {
                id: 'personal',
                name: 'å€‹äººçš„å•é¡Œ',
                priority: 2,
                keywords: {
                    primary: ['ç§', 'è‡ªåˆ†', 'å€‹äººçš„', 'è‡ªå·±'],
                    secondary: ['ä¸å®‰', 'æ‚©ã¿', 'æ„Ÿã˜ã‚‹', 'æ€ã†', 'å¿ƒé…']
                },
                weight: 1.0,
                confidence_boost: 0.1
            },
            relationship: {
                id: 'relationship',
                name: 'äººé–“é–¢ä¿‚',
                priority: 1,
                keywords: {
                    primary: ['å®¶æ—', 'æ‹äºº', 'å‹äºº', 'å¤«å©¦', 'äººé–“é–¢ä¿‚'],
                    secondary: ['ä¸Šå¸', 'éƒ¨ä¸‹', 'åŒåƒš', 'è·å ´']
                },
                weight: 1.1,
                confidence_boost: 0.12
            },
            business: {
                id: 'business',
                name: 'ãƒ“ã‚¸ãƒã‚¹',
                priority: 1,
                keywords: {
                    primary: ['ä»•äº‹', 'ä¼šç¤¾', 'è·å ´', 'æ¥­å‹™', 'ã‚­ãƒ£ãƒªã‚¢'],
                    secondary: ['è»¢è·', 'æ˜‡é€²', 'çµ¦æ–™', 'ã‚¹ã‚­ãƒ«']
                },
                weight: 1.1,
                confidence_boost: 0.12
            },
            philosophical: {
                id: 'philosophical',
                name: 'å“²å­¦çš„å•é¡Œ',
                priority: 3,
                keywords: {
                    primary: ['äººç”Ÿ', 'ç”Ÿãã‚‹', 'å­˜åœ¨', 'æ„å‘³', 'ä¾¡å€¤è¦³'],
                    secondary: ['å¹¸ã›', 'æˆåŠŸ', 'ç›®çš„', 'å°†æ¥']
                },
                weight: 1.3,
                confidence_boost: 0.2
            }
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            try {
                enhancedAnalyzer = new MultiDimensionalContextAnalyzer(null);
                console.log('âœ… MultiDimensionalContextAnalyzer åˆæœŸåŒ–å®Œäº†');
            } catch (error) {
                console.error('âŒ MultiDimensionalContextAnalyzer åˆæœŸåŒ–å¤±æ•—:', error);
                document.body.innerHTML += '<div style="color: red; background: yellow; padding: 10px; margin: 20px;">âš ï¸ MultiDimensionalContextAnalyzer ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</div>';
            }
        });

        // HSPç‰¹æ€§æ¤œå‡ºãƒ†ã‚¹ãƒˆ
        async function testHSPDetection() {
            const input = document.getElementById('hspTestInput').value;
            const resultDiv = document.getElementById('hspTestResult');
            
            showLoading(true);
            
            try {
                const result = await enhancedAnalyzer.analyzeMultiDimensionalContext(input);
                
                let resultHTML = `
                    <h3>ğŸ§  HSPç‰¹æ€§åˆ†æçµæœ</h3>
                    <div><strong>ä¸»è¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ:</strong> ${result.primaryContext}</div>
                    <div><strong>ä¿¡é ¼åº¦:</strong> <span class="${getConfidenceClass(result.confidence)}">${Math.round(result.confidence * 100)}%</span></div>
                `;
                
                if (result.isHSPCase) {
                    resultHTML += `<div class="hsp-detected">ğŸ’– HSPç‰¹æ€§ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</div>`;
                    resultHTML += `<div>HSPãƒ¬ãƒ™ãƒ«: ${Math.round((result.emotionalProfile?.emotionalProfile?.hspLevel || 0) * 100)}%</div>`;
                    resultHTML += `<div>èª¿æ•´ãƒ‹ãƒ¼ã‚º: ${Math.round((result.emotionalProfile?.emotionalProfile?.adjustmentNeed || 0) * 100)}%</div>`;
                }
                
                if (result.isMultidimensional) {
                    resultHTML += `<div class="multidimensional">ğŸ”„ è¤‡æ•°é ˜åŸŸã®è¤‡åˆå•é¡Œã¨ã—ã¦èªè­˜</div>`;
                }
                
                resultHTML += `
                    <div class="enhanced-info">
                        <h4>è©³ç´°åˆ†æ:</h4>
                        <div>æ„å›³æ˜ç¢ºåº¦: ${Math.round((result?.intentionAnalysis?.intentionClarity || 0) * 100)}%</div>
                        <div>æ„Ÿæƒ…è¤‡é›‘åº¦: ${result?.emotionalProfile?.emotionalComplexity || 0}</div>
                        <div>å‡¦ç†æ™‚é–“: ${Math.round(result?.qualityMetrics?.processingTime || 0)}ms</div>
                    </div>
                `;
                
                resultDiv.innerHTML = resultHTML;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                resultDiv.innerHTML = `<div style="color: red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                resultDiv.style.display = 'block';
            }
            
            showLoading(false);
        }

        // è¤‡åˆå•é¡Œæ¤œå‡ºãƒ†ã‚¹ãƒˆ
        async function testMultidimensionalDetection() {
            const input = document.getElementById('hybridTestInput').value;
            const resultDiv = document.getElementById('hybridTestResult');
            
            showLoading(true);
            
            try {
                const result = await enhancedAnalyzer.analyzeMultiDimensionalContext(input);
                
                let resultHTML = `
                    <h3>ğŸ”„ è¤‡åˆå•é¡Œåˆ†æçµæœ</h3>
                    <div><strong>ä¸»è¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ:</strong> ${result.primaryContext}</div>
                    <div><strong>ä¿¡é ¼åº¦:</strong> <span class="${getConfidenceClass(result.confidence)}">${Math.round(result.confidence * 100)}%</span></div>
                `;
                
                if (result.isMultidimensional) {
                    resultHTML += `<div class="multidimensional">ğŸ”„ è¤‡æ•°é ˜åŸŸã«ã¾ãŸãŒã‚‹è¤‡åˆå•é¡Œã‚’æ¤œå‡º</div>`;
                    if (result.secondaryContexts && result.secondaryContexts.length > 0) {
                        resultHTML += `<div><strong>å‰¯æ¬¡ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ:</strong></div>`;
                        result.secondaryContexts.forEach(ctx => {
                            resultHTML += `<div style="margin-left: 20px;">â€¢ ${ctx.type} (é‡ã¿: ${Math.round(ctx.weight * 100)}%)</div>`;
                        });
                    }
                }
                
                if (result.contextWeights) {
                    resultHTML += `<div class="enhanced-info">
                        <h4>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé‡ã¿åˆ†å¸ƒ:</h4>
                        ${Object.entries(result.contextWeights).map(([context, weight]) => 
                            `<div>${context}: ${Math.round(weight * 100)}%</div>`
                        ).join('')}
                    </div>`;
                }
                
                resultDiv.innerHTML = resultHTML;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                resultDiv.innerHTML = `<div style="color: red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                resultDiv.style.display = 'block';
            }
            
            showLoading(false);
        }

        // æ„å›³ç†è§£ãƒ†ã‚¹ãƒˆ
        async function testIntentionAnalysis() {
            const input = document.getElementById('intentionTestInput').value;
            const resultDiv = document.getElementById('intentionTestResult');
            
            showLoading(true);
            
            try {
                const result = await enhancedAnalyzer.analyzeMultiDimensionalContext(input);
                
                let resultHTML = `
                    <h3>ğŸ¯ æ„å›³ç†è§£åˆ†æçµæœ</h3>
                    <div><strong>ä¸»è¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ:</strong> ${result.primaryContext}</div>
                    <div><strong>ä¿¡é ¼åº¦:</strong> <span class="${getConfidenceClass(result.confidence)}">${Math.round(result.confidence * 100)}%</span></div>
                `;
                
                if (result.intentionAnalysis) {
                    const intention = result.intentionAnalysis;
                    resultHTML += `<div class="enhanced-info">
                        <h4>æ„å›³åˆ†æ:</h4>
                        <div>æ„å›³æ˜ç¢ºåº¦: ${Math.round(intention.intentionClarity * 100)}%</div>`;
                    
                    if (intention.primaryIntention) {
                        resultHTML += `<div>ä¸»è¦æ„å›³: ${intention.primaryIntention.type}</div>`;
                        resultHTML += `<div>æ„å›³ä¿¡é ¼åº¦: ${Math.round(intention.primaryIntention.confidence * 100)}%</div>`;
                    }
                    
                    if (intention.multipleIntentions) {
                        resultHTML += `<div>ğŸ”„ è¤‡æ•°ã®æ„å›³ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</div>`;
                    }
                    
                    resultHTML += `</div>`;
                }
                
                resultDiv.innerHTML = resultHTML;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                resultDiv.innerHTML = `<div style="color: red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                resultDiv.style.display = 'block';
            }
            
            showLoading(false);
        }

        // å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒãƒ†ã‚¹ãƒˆï¼ˆç°¡æ˜“ç‰ˆï¼‰
        async function testComparison() {
            const input = document.getElementById('comparisonTestInput').value;
            const resultDiv = document.getElementById('comparisonTestResult');
            
            showLoading(true);
            
            try {
                // å¾“æ¥æ–¹å¼ã®ç°¡æ˜“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const basicResult = simulateBasicAnalysis(input);
                
                // æ‹¡å¼µæ–¹å¼
                const enhancedResult = await enhancedAnalyzer.analyzeMultiDimensionalContext(input);
                
                let resultHTML = `
                    <h3>ğŸ” å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ  vs æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ æ¯”è¼ƒ</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: #374151; padding: 15px; border-radius: 8px;">
                            <h4>å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ </h4>
                            <div>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ${basicResult.primary}</div>
                            <div>ä¿¡é ¼åº¦: ${Math.round(basicResult.confidence * 100)}%</div>
                            <div>ç‰¹åˆ¥æ©Ÿèƒ½: ãªã—</div>
                        </div>
                        <div style="background: #065f46; padding: 15px; border-radius: 8px;">
                            <h4>æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ ï¼ˆNEW!ï¼‰</h4>
                            <div>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ${enhancedResult.primaryContext}</div>
                            <div>ä¿¡é ¼åº¦: <span class="${getConfidenceClass(enhancedResult.confidence)}">${Math.round(enhancedResult.confidence * 100)}%</span></div>
                            <div>HSPæ¤œå‡º: ${enhancedResult.isHSPCase ? 'âœ…' : 'âŒ'}</div>
                            <div>è¤‡åˆå•é¡Œ: ${enhancedResult.isMultidimensional ? 'âœ…' : 'âŒ'}</div>
                            <div>æ„å›³ç†è§£: ${Math.round((enhancedResult?.intentionAnalysis?.intentionClarity || 0) * 100)}%</div>
                        </div>
                    </div>
                `;
                
                resultDiv.innerHTML = resultHTML;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                resultDiv.innerHTML = `<div style="color: red;">ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
                resultDiv.style.display = 'block';
            }
            
            showLoading(false);
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function simulateBasicAnalysis(text) {
            // å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ ã®ç°¡æ˜“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            if (text.includes('è·å ´') || text.includes('ä»•äº‹')) return { primary: 'business', confidence: 0.7 };
            if (text.includes('äººé–“é–¢ä¿‚') || text.includes('å®¶æ—')) return { primary: 'relationship', confidence: 0.6 };
            if (text.includes('æ‚©ã¿') || text.includes('å¿ƒé…')) return { primary: 'personal', confidence: 0.5 };
            return { primary: 'personal', confidence: 0.4 };
        }

        function getConfidenceClass(confidence) {
            if (confidence >= 0.8) return 'confidence-high';
            if (confidence >= 0.6) return 'confidence-medium';
            return 'confidence-low';
        }

        function showLoading(show) {
            document.getElementById('loadingIndicator').style.display = show ? 'block' : 'none';
        }
    </script>
</body>
</html>