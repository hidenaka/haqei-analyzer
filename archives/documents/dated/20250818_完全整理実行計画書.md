# 完全整理実行計画書

**作成日**: 2025年8月18日  
**目的**: ファイル＋フォルダの統合整理

## 🚨 衝撃的な現状

### ルートディレクトリの惨状
```
JSファイル: 289個（！！！）
- 日付付きmjs: 91個（8/14-16）
- test系: 18個
- cjs: 多数

PNGファイル: 91個
ログ等: 5個以上

合計: 400個以上のファイルがルートに散乱
```

## 📋 統合整理計画

### Step 1: 緊急バックアップ
```bash
# 全体バックアップ（必須）
tar -czf full-backup-$(date +%Y%m%d-%H%M%S).tar.gz .
```

### Step 2: ファイル整理（最優先）

#### A. 日付付きファイル（91個）
```bash
# アーカイブフォルダ作成
mkdir -p archives/dated-files/2025-08-14
mkdir -p archives/dated-files/2025-08-15
mkdir -p archives/dated-files/2025-08-16

# 移動
mv 20250814*.mjs archives/dated-files/2025-08-14/
mv 20250815*.mjs archives/dated-files/2025-08-15/
mv 20250816*.mjs archives/dated-files/2025-08-16/
```

#### B. テストファイル（多数）
```bash
# テストファイル統合
mkdir -p test-all/cjs
mkdir -p test-all/mjs

# 移動
mv test-*.cjs test-all/cjs/
mv test-*.mjs test-all/mjs/
mv test_*.cjs test-all/cjs/
```

#### C. スクリーンショット（91個）
```bash
# スクリーンショット整理
mkdir -p archives/screenshots/test
mkdir -p archives/screenshots/debug

# 移動
mv test*.png archives/screenshots/test/
mv debug*.png archives/screenshots/debug/
mv *.png archives/screenshots/
```

### Step 3: フォルダ整理

#### A. 不要フォルダ削除
```bash
# 緊急ポート（完全に不要）
rm -rf emergency-8084 emergency-8085 emergency-8788

# 古いテスト
rm -rf .visual-behavior-tests  # 8月10日の古いテスト
```

#### B. 統合・移動
```bash
# テスト関連統合
mkdir -p test-consolidated
mv test/* test-consolidated/
mv test-archive/* test-consolidated/archive/
mv test-suites/* test-consolidated/suites/
rmdir test test-archive test-suites

# バックアップ統合
mkdir -p backups
mv backup*.tar.gz backups/
mv backup/* backups/old/
rmdir backup
```

### Step 4: 残存ファイル整理

#### CJSファイル処理
```bash
# デバッグ・検証系
mkdir -p archives/debug-scripts
mv debug*.cjs archives/debug-scripts/
mv verification*.cjs archives/debug-scripts/
mv fix*.cjs archives/debug-scripts/

# その他のcjs
mkdir -p archives/misc-scripts
mv *.cjs archives/misc-scripts/
```

## 🎯 実行スクリプト

```bash
#!/bin/bash
# cleanup-all.sh

echo "=== 完全整理スクリプト ==="
echo "実行前ファイル数: $(ls -la | wc -l)"

# 1. バックアップ
echo "バックアップ作成中..."
tar -czf full-backup-$(date +%Y%m%d-%H%M%S).tar.gz . --exclude=node_modules

# 2. ディレクトリ作成
echo "整理用ディレクトリ作成中..."
mkdir -p archives/{dated-files/{2025-08-14,2025-08-15,2025-08-16},screenshots/{test,debug},debug-scripts,misc-scripts}
mkdir -p test-consolidated/{cjs,mjs,archive,suites}
mkdir -p backups/old

# 3. 日付付きファイル移動
echo "日付付きファイル移動中..."
[ -f 20250814*.mjs ] && mv 20250814*.mjs archives/dated-files/2025-08-14/ 2>/dev/null
[ -f 20250815*.mjs ] && mv 20250815*.mjs archives/dated-files/2025-08-15/ 2>/dev/null
[ -f 20250816*.mjs ] && mv 20250816*.mjs archives/dated-files/2025-08-16/ 2>/dev/null

# 4. テストファイル移動
echo "テストファイル移動中..."
[ -f test-*.cjs ] && mv test-*.cjs test-consolidated/cjs/ 2>/dev/null
[ -f test-*.mjs ] && mv test-*.mjs test-consolidated/mjs/ 2>/dev/null

# 5. スクリーンショット移動
echo "スクリーンショット移動中..."
[ -f *.png ] && mv *.png archives/screenshots/ 2>/dev/null

# 6. 緊急フォルダ削除
echo "不要フォルダ削除中..."
rm -rf emergency-8084 emergency-8085 emergency-8788

# 7. バックアップファイル移動
echo "バックアップ整理中..."
[ -f backup*.tar.gz ] && mv backup*.tar.gz backups/ 2>/dev/null

# 8. CJSファイル移動
echo "スクリプトファイル整理中..."
[ -f debug*.cjs ] && mv debug*.cjs archives/debug-scripts/ 2>/dev/null
[ -f *.cjs ] && mv *.cjs archives/misc-scripts/ 2>/dev/null

echo "実行後ファイル数: $(ls -la | wc -l)"
echo "完了！"
```

## 📊 期待成果

### Before
- ルートファイル: 400個以上
- 容量: 不明（混沌）
- 視認性: 0%

### After
- ルートファイル: 20個以下
- 容量: 70MB以上削減
- 視認性: 1000%向上

### 削減内訳
| 対象 | ファイル数 | 処理 |
|------|-----------|------|
| 日付付きmjs | 91個 | アーカイブ |
| test系 | 18個 | 統合 |
| PNG | 91個 | アーカイブ |
| cjs | 多数 | アーカイブ |
| 緊急フォルダ | 3個 | 削除 |

## ⚠️ 注意事項

### 実行前チェック
- [ ] フルバックアップ作成済み
- [ ] 実行中のプロセスがない
- [ ] 重要ファイルの確認済み

### リスク対策
- バックアップから即復元可能
- 段階的実行で影響確認
- archivesフォルダで一時保管

## 💡 推奨実行順序

1. **フルバックアップ**（必須）
2. **日付付きファイル処理**（低リスク）
3. **PNGファイル処理**（低リスク）
4. **テストファイル統合**（中リスク）
5. **CJSファイル処理**（要確認）
6. **フォルダ削除**（最後に実行）

これで**400個以上のファイル**を**20個以下**に削減できます。