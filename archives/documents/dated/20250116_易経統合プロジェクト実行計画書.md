# æ˜“çµŒçµ±åˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Ÿè¡Œè¨ˆç”»æ›¸
ä½œæˆæ—¥: 2025å¹´1æœˆ16æ—¥

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™
HaQei Triple OSåˆ†æã‚·ã‚¹ãƒ†ãƒ ã«æ˜“çµŒã®å°‚é–€çŸ¥è­˜ã‚’çµ±åˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’ä¿ã¡ãªãŒã‚‰æ·±ã„æ´å¯Ÿã‚’æä¾›ã™ã‚‹å¤šå±¤çš„åˆ†æã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ã‚¹ã‚³ãƒ¼ãƒ—
- ç¾åœ¨ã®çµ±ä¸€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼ˆquestions-unified-complete.jsï¼‰ã‚’åŸºç›¤ã¨ã—ã¦ç¶­æŒ
- æ˜“çµŒå°‚é–€çŸ¥è­˜ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«å±¤ã¨ã—ã¦è¿½åŠ 
- 3æ®µéšã®è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼ˆSimple/Enhanced/Expertï¼‰ã‚’å®Ÿè£…
- æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹

### æˆåŠŸåŸºæº–
1. æ—¢å­˜ã®æ•°å­¦çš„å¥å…¨æ€§ï¼ˆå„è³ªå•6ç‚¹å›ºå®šï¼‰ã‚’ç¶­æŒ
2. æ˜“çµŒè§£é‡ˆã®è¿½åŠ ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ãªã—ï¼ˆ<100msï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã‚’è‡ªç”±ã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
4. å…¨36å•ã«æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆå®Œäº†
5. ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒ¼ãƒˆ0%ã®å®‰å®šç¨¼åƒ

## ğŸš€ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®è¨­è¨ˆã¨å®Ÿè£…ï¼ˆDay 1: 3æ™‚é–“ï¼‰

#### 1.1 ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆï¼ˆ1æ™‚é–“ï¼‰
```javascript
// æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å®šç¾©
const YIJING_METADATA = {
    trigrams: {
        "ä¹¾": { name: "å¤©", nature: "å‰µé€ ", element: "é‡‘", direction: "è¥¿åŒ—", season: "ç§‹æœ«å†¬åˆ" },
        "éœ‡": { name: "é›·", nature: "å‹•", element: "æœ¨", direction: "æ±", season: "æ˜¥" },
        "å": { name: "æ°´", nature: "é™º", element: "æ°´", direction: "åŒ—", season: "å†¬" },
        "è‰®": { name: "å±±", nature: "æ­¢", element: "åœŸ", direction: "æ±åŒ—", season: "å†¬æœ«æ˜¥åˆ" },
        "å¤": { name: "åœ°", nature: "é †", element: "åœŸ", direction: "è¥¿å—", season: "å¤æœ«ç§‹åˆ" },
        "å·½": { name: "é¢¨", nature: "å…¥", element: "æœ¨", direction: "æ±å—", season: "æ˜¥æœ«å¤åˆ" },
        "é›¢": { name: "ç«", nature: "éº—", element: "ç«", direction: "å—", season: "å¤" },
        "å…Œ": { name: "æ²¢", nature: "èª¬", element: "é‡‘", direction: "è¥¿", season: "ç§‹" }
    },
    
    hexagramPrinciples: {
        // 64å¦ã®åŸç†ã¨è§£é‡ˆ
        "1": { name: "ä¹¾ç‚ºå¤©", principle: "ç´”é™½å‰µé€ ", advice: "ç©æ¥µçš„å‰µé€ ã¨é©æ–°" },
        // ... ä»–ã®63å¦
    },
    
    transformationPaths: {
        // å¤‰åŒ–ã®çµŒè·¯ã¨æˆé•·ãƒ‘ã‚¿ãƒ¼ãƒ³
        "å‰µé€ ã‹ã‚‰èª¿å’Œ": ["ä¹¾", "å…Œ", "é›¢"],
        "æ¢æ±‚ã‹ã‚‰å®‰å®š": ["å", "è‰®", "å¤"],
        // ... ä»–ã®ãƒ‘ã‚¹
    }
};
```

#### 1.2 è³ªå•ãƒ‡ãƒ¼ã‚¿ã¸ã®çµ±åˆï¼ˆ1æ™‚é–“ï¼‰
```javascript
// questions-yijing-enhanced.js ã¨ã—ã¦æ–°è¦ä½œæˆ
import { unifiedQuestions } from './questions-unified-complete.js';
import { YIJING_METADATA } from './yijing-metadata.js';

const enhancedQuestions = unifiedQuestions.map(q => ({
    ...q,
    yijing: {
        primaryTrigram: mapCategoryToTrigram(q.category.title),
        deepMeaning: generateDeepMeaning(q),
        interpretations: mapOptionsToYijing(q.options),
        seasonalRelevance: calculateSeasonalAlignment(q)
    }
}));

function mapCategoryToTrigram(category) {
    const mapping = {
        "å‰µé€ æ€§": "ä¹¾",
        "è¡Œå‹•æ€§": "éœ‡", 
        "æ¢æ±‚æ€§": "å",
        "èª¿å’Œæ€§": "å…Œ",
        "è¡¨ç¾æ€§": "é›¢",
        "é©å¿œæ€§": "å·½",
        "å®‰å®šæ€§": "è‰®",
        "å—å®¹æ€§": "å¤"
    };
    return YIJING_METADATA.trigrams[mapping[category]];
}
```

#### 1.3 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ†ã‚¹ãƒˆï¼ˆ1æ™‚é–“ï¼‰
- å…¨36å•ã«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒä»˜ä¸ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°è¨ˆç®—ã¸ã®å½±éŸ¿ãŒãªã„ã“ã¨ã‚’æ¤œè¨¼
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¿½åŠ å‰å¾Œã®æ¯”è¼ƒï¼‰

### Phase 2: çµæœè§£é‡ˆã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µå®Ÿè£…ï¼ˆDay 1-2: 4æ™‚é–“ï¼‰

#### 2.1 è§£é‡ˆã‚¨ãƒ³ã‚¸ãƒ³ã®æ§‹ç¯‰ï¼ˆ2æ™‚é–“ï¼‰
```javascript
// yijing-interpreter.js
class YijingInterpreter {
    constructor() {
        this.interpretationLevels = ['basic', 'enhanced', 'expert'];
    }
    
    interpretResults(tripleOSResults, level = 'basic') {
        switch(level) {
            case 'basic':
                return this.basicInterpretation(tripleOSResults);
            case 'enhanced':
                return this.enhancedInterpretation(tripleOSResults);
            case 'expert':
                return this.expertInterpretation(tripleOSResults);
        }
    }
    
    basicInterpretation(results) {
        return {
            engineOS: {
                trigram: this.getMainTrigram(results.engine_os),
                nature: this.getTrigramNature(results.engine_os),
                element: this.getElement(results.engine_os)
            },
            interfaceOS: {
                trigram: this.getMainTrigram(results.interface_os),
                nature: this.getTrigramNature(results.interface_os),
                element: this.getElement(results.interface_os)
            },
            safeModeOS: {
                trigram: this.getMainTrigram(results.safe_mode_os),
                nature: this.getTrigramNature(results.safe_mode_os),
                element: this.getElement(results.safe_mode_os)
            }
        };
    }
    
    enhancedInterpretation(results) {
        const basic = this.basicInterpretation(results);
        return {
            ...basic,
            hexagram: this.calculateHexagram(results),
            transformingLines: this.findTransformingLines(results),
            balance: {
                yinYang: this.calculateYinYangBalance(results),
                fiveElements: this.analyzeFiveElements(results)
            },
            recommendations: this.generateRecommendations(results)
        };
    }
    
    expertInterpretation(results) {
        const enhanced = this.enhancedInterpretation(results);
        return {
            ...enhanced,
            detailedAnalysis: {
                åºå¦ä¼: this.analyzeSequentialProgression(results),
                æ™‚ä¸­: this.analyzeTimeliness(results),
                å¤‰çˆ»: this.analyzeChangingLines(results),
                äº’å¦: this.analyzeMutualGua(results),
                éŒ¯å¦: this.analyzeOppositeGua(results),
                ç¶œå¦: this.analyzeInverseGua(results)
            },
            philosophicalInsights: this.generatePhilosophicalInsights(results),
            seasonalGuidance: this.provideSeasonalGuidance(results),
            transformationPath: this.suggestTransformationPath(results)
        };
    }
    
    // ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤
    getMainTrigram(osData) {
        // æœ€ã‚‚é«˜ã„ã‚¹ã‚³ã‚¢ã®å…«å¦ã‚’ç‰¹å®š
        const scores = osData.trigram_scores;
        return Object.keys(scores).reduce((a, b) => 
            scores[a] > scores[b] ? a : b
        );
    }
    
    calculateYinYangBalance(results) {
        const yangTrigrams = ['ä¹¾', 'éœ‡', 'å', 'è‰®'];
        const yinTrigrams = ['å¤', 'å·½', 'é›¢', 'å…Œ'];
        
        let yangScore = 0;
        let yinScore = 0;
        
        // å„OSã®é™°é™½ãƒãƒ©ãƒ³ã‚¹ã‚’è¨ˆç®—
        [results.engine_os, results.interface_os, results.safe_mode_os].forEach(os => {
            Object.entries(os.trigram_scores).forEach(([trigram, score]) => {
                if (yangTrigrams.includes(trigram)) yangScore += score;
                if (yinTrigrams.includes(trigram)) yinScore += score;
            });
        });
        
        const total = yangScore + yinScore;
        return {
            yang: (yangScore / total * 100).toFixed(1) + '%',
            yin: (yinScore / total * 100).toFixed(1) + '%',
            harmony: Math.abs(50 - (yangScore / total * 100)) < 10 ? 'èª¿å’Œ' : 'åã‚Š'
        };
    }
    
    generateRecommendations(results) {
        const recommendations = [];
        const balance = this.calculateYinYangBalance(results);
        
        if (balance.harmony === 'åã‚Š') {
            if (parseFloat(balance.yang) > 60) {
                recommendations.push({
                    type: 'é™°ã®è£œå¼·',
                    advice: 'å—å®¹æ€§ã¨æŸ”è»Ÿæ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šèª¿å’Œçš„ãªæˆé•·ãŒæœŸå¾…ã§ãã¾ã™ã€‚',
                    practices: ['ç‘æƒ³', 'å‚¾è´', 'è¦³å¯Ÿ']
                });
            } else if (parseFloat(balance.yin) > 60) {
                recommendations.push({
                    type: 'é™½ã®æ´»æ€§åŒ–',
                    advice: 'ç©æ¥µæ€§ã¨è¡Œå‹•åŠ›ã‚’é«˜ã‚ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå¤§ããªæˆæœãŒæœŸå¾…ã§ãã¾ã™ã€‚',
                    practices: ['æ–°è¦æŒ‘æˆ¦', 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—', 'æ±ºæ–­åŠ›å¼·åŒ–']
                });
            }
        }
        
        return recommendations;
    }
}
```

#### 2.2 çµæœè¡¨ç¤ºã®çµ±åˆï¼ˆ2æ™‚é–“ï¼‰
```javascript
// os-analyzer-main.js ã¸ã®çµ±åˆ
import { YijingInterpreter } from './yijing-interpreter.js';

const yijingInterpreter = new YijingInterpreter();

function enhanceResultsDisplay(results) {
    const currentMode = localStorage.getItem('yijingMode') || 'hidden';
    
    if (currentMode !== 'hidden') {
        const level = mapModeToLevel(currentMode);
        const yijingAnalysis = yijingInterpreter.interpretResults(results, level);
        
        // æ—¢å­˜ã®çµæœè¡¨ç¤ºã‚’æ‹¡å¼µ
        results.yijingAnalysis = yijingAnalysis;
        
        // UIã«åæ˜ 
        displayYijingAnalysis(yijingAnalysis, level);
    }
    
    return results;
}

function displayYijingAnalysis(analysis, level) {
    const container = document.getElementById('yijing-analysis-container');
    if (!container) {
        createYijingContainer();
    }
    
    container.innerHTML = generateYijingHTML(analysis, level);
    container.classList.add('yijing-visible');
}
```

### Phase 3: UIè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ï¼ˆDay 2: 3æ™‚é–“ï¼‰

#### 3.1 UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆï¼ˆ1.5æ™‚é–“ï¼‰
```html
<!-- os_analyzer.html ã¸ã®è¿½åŠ  -->
<div class="yijing-controls">
    <button id="yijing-toggle" class="btn-secondary">
        <span class="icon">â˜¯</span>
        æ˜“çµŒè§£é‡ˆãƒ¢ãƒ¼ãƒ‰
    </button>
    
    <div id="yijing-mode-selector" class="mode-selector hidden">
        <label>
            <input type="radio" name="yijing-mode" value="hidden" checked>
            éè¡¨ç¤º
        </label>
        <label>
            <input type="radio" name="yijing-mode" value="basic">
            åŸºæœ¬è§£é‡ˆ
        </label>
        <label>
            <input type="radio" name="yijing-mode" value="enhanced">
            è©³ç´°è§£é‡ˆ
        </label>
        <label>
            <input type="radio" name="yijing-mode" value="expert">
            å°‚é–€åˆ†æ
        </label>
    </div>
</div>

<div id="yijing-analysis-container" class="yijing-analysis hidden">
    <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹æ˜“çµŒè§£é‡ˆãŒã“ã“ã«è¡¨ç¤º -->
</div>
```

#### 3.2 ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆ0.5æ™‚é–“ï¼‰
```css
/* os-analyzer.css ã¸ã®è¿½åŠ  */
.yijing-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
}

.yijing-analysis {
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
    border: 2px solid #d4af37;
    border-radius: 12px;
    padding: 24px;
    margin: 24px 0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.yijing-analysis.hidden {
    display: none;
}

.yijing-analysis h3 {
    color: #8b4513;
    font-family: 'Noto Serif JP', serif;
    margin-bottom: 16px;
}

.trigram-display {
    display: inline-block;
    font-size: 48px;
    margin: 0 12px;
}

.yijing-basic {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.yijing-enhanced {
    /* è©³ç´°è¡¨ç¤ºç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
}

.yijing-expert {
    /* å°‚é–€åˆ†æè¡¨ç¤ºç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
}

.yin-yang-meter {
    width: 200px;
    height: 20px;
    background: linear-gradient(to right, #000 var(--yang-percent), #fff var(--yin-percent));
    border-radius: 10px;
    border: 1px solid #333;
}
```

#### 3.3 ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè£…ï¼ˆ1æ™‚é–“ï¼‰
```javascript
// yijing-ui-controller.js
class YijingUIController {
    constructor() {
        this.currentMode = localStorage.getItem('yijingMode') || 'hidden';
        this.init();
    }
    
    init() {
        this.setupEventListeners();
        this.applyCurrentMode();
    }
    
    setupEventListeners() {
        const toggle = document.getElementById('yijing-toggle');
        const modeSelectors = document.querySelectorAll('input[name="yijing-mode"]');
        
        toggle?.addEventListener('click', () => this.toggleModeSelector());
        
        modeSelectors.forEach(selector => {
            selector.addEventListener('change', (e) => this.changeMode(e.target.value));
        });
    }
    
    toggleModeSelector() {
        const selector = document.getElementById('yijing-mode-selector');
        selector.classList.toggle('hidden');
    }
    
    changeMode(mode) {
        this.currentMode = mode;
        localStorage.setItem('yijingMode', mode);
        this.applyCurrentMode();
        
        // ç¾åœ¨ã®çµæœã‚’å†è¡¨ç¤º
        if (state.tripleOSResults) {
            enhanceResultsDisplay(state.tripleOSResults);
        }
    }
    
    applyCurrentMode() {
        const container = document.getElementById('yijing-analysis-container');
        const toggle = document.getElementById('yijing-toggle');
        
        if (this.currentMode === 'hidden') {
            container?.classList.add('hidden');
            toggle?.classList.remove('active');
        } else {
            container?.classList.remove('hidden');
            toggle?.classList.add('active');
            
            // ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸã‚¯ãƒ©ã‚¹ã‚’é©ç”¨
            container?.className = `yijing-analysis yijing-${this.currentMode}`;
        }
    }
}

// åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', () => {
    new YijingUIController();
});
```

### Phase 4: ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ï¼ˆDay 2-3: 3æ™‚é–“ï¼‰

#### 4.1 å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆ1æ™‚é–“ï¼‰
```javascript
// tests/yijing-integration.test.js
describe('æ˜“çµŒçµ±åˆãƒ†ã‚¹ãƒˆ', () => {
    describe('ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿çµ±åˆ', () => {
        test('å…¨36å•ã«æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒä»˜ä¸ã•ã‚Œã‚‹', () => {
            enhancedQuestions.forEach(q => {
                expect(q.yijing).toBeDefined();
                expect(q.yijing.primaryTrigram).toBeDefined();
            });
        });
        
        test('ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°è¨ˆç®—ã«å½±éŸ¿ã—ãªã„', () => {
            const originalScore = calculateScore(unifiedQuestions[0]);
            const enhancedScore = calculateScore(enhancedQuestions[0]);
            expect(originalScore).toEqual(enhancedScore);
        });
    });
    
    describe('è§£é‡ˆã‚¨ãƒ³ã‚¸ãƒ³', () => {
        test('3ã¤ã®ãƒ¬ãƒ™ãƒ«ã§ç•°ãªã‚‹è§£é‡ˆã‚’ç”Ÿæˆ', () => {
            const mockResults = getMockTripleOSResults();
            const basic = interpreter.interpretResults(mockResults, 'basic');
            const enhanced = interpreter.interpretResults(mockResults, 'enhanced');
            const expert = interpreter.interpretResults(mockResults, 'expert');
            
            expect(Object.keys(basic)).toHaveLength(3);
            expect(Object.keys(enhanced)).toBeGreaterThan(3);
            expect(Object.keys(expert)).toBeGreaterThan(Object.keys(enhanced).length);
        });
        
        test('é™°é™½ãƒãƒ©ãƒ³ã‚¹è¨ˆç®—ãŒæ­£ç¢º', () => {
            const mockResults = getMockTripleOSResults();
            const balance = interpreter.calculateYinYangBalance(mockResults);
            
            const yangPercent = parseFloat(balance.yang);
            const yinPercent = parseFloat(balance.yin);
            
            expect(yangPercent + yinPercent).toBeCloseTo(100, 1);
        });
    });
    
    describe('UIè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰', () => {
        test('ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆãŒæ­£å¸¸ã«å‹•ä½œ', () => {
            const controller = new YijingUIController();
            
            controller.changeMode('basic');
            expect(localStorage.getItem('yijingMode')).toBe('basic');
            
            controller.changeMode('hidden');
            const container = document.getElementById('yijing-analysis-container');
            expect(container.classList.contains('hidden')).toBe(true);
        });
    });
});
```

#### 4.2 çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ1æ™‚é–“ï¼‰
```javascript
// tests/e2e-yijing.test.js
describe('E2E: æ˜“çµŒçµ±åˆæ©Ÿèƒ½', () => {
    test('å®Œå…¨ãªãƒ•ãƒ­ãƒ¼ãŒå‹•ä½œã™ã‚‹', async () => {
        // 1. è³ªå•ã«å›ç­”
        await answerAllQuestions();
        
        // 2. çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹
        const results = await getTripleOSResults();
        expect(results).toBeDefined();
        
        // 3. æ˜“çµŒãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
        await enableYijingMode('enhanced');
        
        // 4. æ˜“çµŒè§£é‡ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
        const yijingContainer = await page.$('#yijing-analysis-container');
        expect(await yijingContainer.isVisible()).toBe(true);
        
        // 5. è§£é‡ˆå†…å®¹ãŒé©åˆ‡
        const analysisText = await yijingContainer.textContent();
        expect(analysisText).toContain('å¦');
        expect(analysisText).toContain('é™°é™½');
    });
});
```

#### 4.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ1æ™‚é–“ï¼‰
```javascript
// tests/performance.test.js
describe('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ', () => {
    test('æ˜“çµŒè§£é‡ˆã®ç”ŸæˆãŒ100msä»¥å†…', () => {
        const mockResults = getLargeTripleOSResults();
        
        const start = performance.now();
        const interpretation = interpreter.interpretResults(mockResults, 'expert');
        const end = performance.now();
        
        expect(end - start).toBeLessThan(100);
    });
    
    test('UIæ›´æ–°ãŒ60fpsç¶­æŒ', async () => {
        const fps = await measureFPS(() => {
            for (let i = 0; i < 10; i++) {
                displayYijingAnalysis(mockAnalysis, 'expert');
            }
        });
        
        expect(fps).toBeGreaterThan(55);
    });
});
```

### Phase 5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã¨å®Œäº†å ±å‘Šï¼ˆDay 3: 2æ™‚é–“ï¼‰

#### 5.1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ä½œæˆï¼ˆ1æ™‚é–“ï¼‰
```markdown
# æ˜“çµŒè§£é‡ˆæ©Ÿèƒ½ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰

## æ©Ÿèƒ½æ¦‚è¦
HaQei Triple OSåˆ†æã«æ˜“çµŒã®æ·±ã„æ´å¯Ÿã‚’è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

## ä½¿ã„æ–¹
1. é€šå¸¸é€šã‚Š36å•ã«å›ç­”
2. çµæœè¡¨ç¤ºå¾Œã€å³ä¸Šã®ã€Œâ˜¯æ˜“çµŒè§£é‡ˆãƒ¢ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è¡¨ç¤ºãƒ¬ãƒ™ãƒ«ã‚’é¸æŠï¼š
   - **éè¡¨ç¤º**: å¾“æ¥ã®è¡¨ç¤ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
   - **åŸºæœ¬è§£é‡ˆ**: ä¸»è¦ãªå…«å¦ã¨äº”è¡Œã®è¡¨ç¤º
   - **è©³ç´°è§£é‡ˆ**: é™°é™½ãƒãƒ©ãƒ³ã‚¹ã¨å¤‰åŒ–ã®å…†ã—
   - **å°‚é–€åˆ†æ**: åºå¦ä¼ã€æ™‚ä¸­ã€å¤‰çˆ»ã‚’å«ã‚€å®Œå…¨åˆ†æ

## è§£é‡ˆã®è¦‹æ–¹
### åŸºæœ¬è§£é‡ˆ
- å„OSã®ä¸»è¦ãªå…«å¦ï¼ˆä¹¾ãƒ»å¤ãƒ»éœ‡ãƒ»å·½ãƒ»åãƒ»é›¢ãƒ»è‰®ãƒ»å…Œï¼‰
- äº”è¡Œï¼ˆæœ¨ãƒ»ç«ãƒ»åœŸãƒ»é‡‘ãƒ»æ°´ï¼‰ã¨ã®å¯¾å¿œ
- åŸºæœ¬çš„ãªæ€§è³ªï¼ˆå‰µé€ ãƒ»å—å®¹ãƒ»å‹•ãƒ»é™ãªã©ï¼‰

### è©³ç´°è§£é‡ˆ
- é™°é™½ãƒãƒ©ãƒ³ã‚¹ãƒ¡ãƒ¼ã‚¿ãƒ¼
- 64å¦ã§ã®ä½ç½®ã¥ã‘
- æˆé•·ã¸ã®æ¨å¥¨äº‹é …

### å°‚é–€åˆ†æ
- åºå¦ä¼ã«ã‚ˆã‚‹ç™ºå±•æ®µéš
- æ™‚ä¸­ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰ã®åˆ†æ
- å¤‰çˆ»ã«ã‚ˆã‚‹å¤‰åŒ–ã®æ–¹å‘æ€§
- äº’å¦ãƒ»éŒ¯å¦ãƒ»ç¶œå¦ã«ã‚ˆã‚‹å¤šè§’çš„ç†è§£
```

#### 5.2 æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆ0.5æ™‚é–“ï¼‰
```markdown
# æ˜“çµŒçµ±åˆæŠ€è¡“ä»•æ§˜æ›¸

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ï¼šåŸºç›¤å±¤ï¼ˆçµ±ä¸€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼‰+ æ‹¡å¼µå±¤ï¼ˆæ˜“çµŒè§£é‡ˆï¼‰
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†é›¢ï¼šyijing-metadata.js, yijing-interpreter.js, yijing-ui-controller.js
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼š<100ms for expert interpretation

## API
### YijingInterpreter
- interpretResults(results, level): è§£é‡ˆã‚’ç”Ÿæˆ
- calculateYinYangBalance(results): é™°é™½ãƒãƒ©ãƒ³ã‚¹è¨ˆç®—
- generateRecommendations(results): æ¨å¥¨äº‹é …ç”Ÿæˆ

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼šå…«å¦ã€äº”è¡Œã€æ–¹ä½ã€å­£ç¯€
- è§£é‡ˆãƒ¬ãƒ™ãƒ«ï¼šbasic, enhanced, expert
- æ°¸ç¶šåŒ–ï¼šlocalStorageä½¿ç”¨

## æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ
- æ–°ã—ã„è§£é‡ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è¿½åŠ 
- ã‚«ã‚¹ã‚¿ãƒ è¡¨ç¤ºãƒ†ãƒ¼ãƒ
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
```

#### 5.3 å®Œäº†å ±å‘Šæ›¸ä½œæˆï¼ˆ0.5æ™‚é–“ï¼‰
```markdown
# æ˜“çµŒçµ±åˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†å ±å‘Šæ›¸
æ—¥ä»˜: 2025å¹´1æœˆXXæ—¥

## å®Ÿè£…å®Œäº†é …ç›®
âœ… Phase 1: æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®è¨­è¨ˆã¨å®Ÿè£…
âœ… Phase 2: çµæœè§£é‡ˆã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å¼µå®Ÿè£…
âœ… Phase 3: UIè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…
âœ… Phase 4: ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼
âœ… Phase 5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

## æˆæœ
- 36å•å…¨ã¦ã«æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆ
- 3æ®µéšã®è§£é‡ˆãƒ¬ãƒ™ãƒ«ã‚’å®Ÿè£…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™é”æˆï¼ˆ<100msï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒ¼ãƒˆ0%
- ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’ç¶­æŒã—ãªãŒã‚‰å°‚é–€æ€§ã‚’è¿½åŠ 

## ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§
1. AI ã«ã‚ˆã‚‹å€‹åˆ¥è§£é‡ˆã®ç”Ÿæˆ
2. æ™‚ç³»åˆ—å¤‰åŒ–ã®è¿½è·¡
3. PDFãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›æ©Ÿèƒ½
4. ä»–ã®æ±æ´‹å“²å­¦ã¨ã®çµ±åˆ
```

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

| æ—¥ç¨‹ | ãƒ•ã‚§ãƒ¼ã‚º | ä½œæ¥­æ™‚é–“ | æˆæœç‰© |
|------|---------|----------|--------|
| Day 1 AM | Phase 1 | 3æ™‚é–“ | æ˜“çµŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®Œæˆ |
| Day 1 PM | Phase 2 (å‰åŠ) | 2æ™‚é–“ | è§£é‡ˆã‚¨ãƒ³ã‚¸ãƒ³æ§‹ç¯‰ |
| Day 2 AM | Phase 2 (å¾ŒåŠ) | 2æ™‚é–“ | çµæœè¡¨ç¤ºçµ±åˆ |
| Day 2 PM | Phase 3 | 3æ™‚é–“ | UIå®Ÿè£…å®Œäº† |
| Day 3 AM | Phase 4 | 3æ™‚é–“ | ãƒ†ã‚¹ãƒˆå®Œäº† |
| Day 3 PM | Phase 5 | 2æ™‚é–“ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆ |

**ç·ä½œæ¥­æ™‚é–“: 15æ™‚é–“**

## ğŸ¯ ãƒªã‚¹ã‚¯ç®¡ç†

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ | é«˜ | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†é›¢ã€æ®µéšçš„å®Ÿè£… |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ– | ä¸­ | é…å»¶èª­ã¿è¾¼ã¿ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨ |
| UIè¤‡é›‘åŒ– | ä¸­ | ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ã‚¨ãƒ³ãƒãƒ³ã‚¹ãƒ¡ãƒ³ãƒˆ |
| ãƒ†ã‚¹ãƒˆä¸è¶³ | é«˜ | è‡ªå‹•ãƒ†ã‚¹ãƒˆã€æ®µéšçš„ãƒªãƒªãƒ¼ã‚¹ |

## âœ… æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ã“ã®è¨ˆç”»æ›¸ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ‰¿èª
2. Phase 1 ã®å®Ÿè£…é–‹å§‹
3. å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã®ç¢ºèªã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
4. æœ€çµ‚ãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

ã“ã®è¨ˆç”»ã«å¾“ã£ã¦å®Ÿè£…ã‚’é€²ã‚ã‚‹ã“ã¨ã§ã€æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®è‰¯ã•ã‚’ä¿ã¡ãªãŒã‚‰ã€æ˜“çµŒã®æ·±ã„æ´å¯Ÿã‚’æä¾›ã™ã‚‹é«˜å“è³ªãªçµ±åˆãŒå®Ÿç¾ã§ãã¾ã™ã€‚