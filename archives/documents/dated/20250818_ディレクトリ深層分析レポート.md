# ディレクトリ深層分析レポート

**作成日**: 2025年8月18日  
**目的**: 未整理ディレクトリとファイルの徹底調査

## 🔴 重大な発見

### 1. ルートディレクトリの混沌状態
```
問題規模:
- PNGファイル: 91個（スクリーンショット等）
- ログファイル: 5個
- テスト関連: 約50個のファイル・フォルダ
- 合計: 100個以上の未整理ファイル
```

### 2. 巨大な隠しディレクトリ
```
.venv/: 46MB（Python仮想環境）
.swarm/: 676KB（AIスワーム関連）
.kiro/: 296KB（不明）
```

### 3. 緊急ポート系フォルダ
```
emergency-8084/: 古いスクリーンショット
emergency-8085/: 古いスクリーンショット  
emergency-8788/: 古いスクリーンショット
→ 8月10日作成、完全に不要
```

## 📊 詳細分析

### ルートディレクトリ（最も深刻）

#### 🗑️ 即削除可能（容量大）
```bash
# テスト関連（約50MB）
test/               # 49MB - 巨大なテストディレクトリ
test-archive/       # 840KB
test-suites/        # 20KB
test-results/       # 160KB

# バックアップ（約11MB）
backup_20250818.tar.gz              # 6MB
backup-before-cleanup-*.tar.gz      # 4.7MB
backup/                              # 96KB

# スクリーンショット（約10MB）
*.png（91個）                       # 各種テストスクリーンショット
test-*.png
```

#### 🟡 検討必要
```bash
# 隠しディレクトリ
.venv/              # 46MB - Python環境（必要？）
.visual-behavior-tests/  # 76KB - 8月10日
.swarm/             # 676KB - AIスワーム
.kiro/              # 296KB - 用途不明
```

### publicディレクトリ内

#### 🗑️ 削除推奨
```bash
public/__tests__/    # テストファイル
public/js/__tests__/ # JSテスト
```

#### 🔄 移動推奨
```bash
public/dict/         # 辞書データ → /data/へ
public/quick-analyzer/  # → /src/へ
```

## 🎯 整理戦略

### Phase 1: 緊急対応（即実行可能）
**削除対象: 約70MB**

1. **ルートのPNGファイル（91個）**
   ```bash
   mkdir -p archives/screenshots
   mv *.png archives/screenshots/
   ```

2. **テストディレクトリ統合**
   ```bash
   mkdir -p test-consolidated
   mv test/* test-consolidated/
   mv test-* test-consolidated/
   ```

3. **緊急ポートフォルダ削除**
   ```bash
   rm -rf emergency-8084 emergency-8085 emergency-8788
   ```

### Phase 2: バックアップ整理
```bash
mkdir -p backups
mv backup*.tar.gz backups/
mv backup/ backups/old/
```

### Phase 3: 隠しディレクトリ判定
```bash
# .venv確認（Python使用有無）
# .swarm確認（AI機能使用有無）
# .kiro確認（用途調査）
```

## 📈 期待効果

### 容量削減予測
| 対象 | 現在 | 削減可能 |
|------|------|----------|
| test/ | 49MB | 49MB |
| バックアップ | 11MB | 11MB（アーカイブ） |
| PNG | 10MB | 10MB（アーカイブ） |
| .venv | 46MB | 46MB（不要なら） |
| **合計** | **116MB** | **70-116MB** |

### ファイル数削減
- ルートファイル: 100個以上 → 10個以下
- 視認性: 1000%向上

## 🚨 リスク評価

### 高リスク（要確認）
- .venv/: Python依存の機能があるか
- .swarm/: AI機能で使用中か
- .kiro/: 用途不明

### 低リスク（安全）
- emergency-*: 完全に不要
- test関連: 統合可能
- PNG: アーカイブ可能

## 💡 推奨アクション

### 即実行可能（リスク無し）
```bash
# 1. 緊急フォルダ削除
rm -rf emergency-8084 emergency-8085 emergency-8788

# 2. スクリーンショットアーカイブ
mkdir -p archives/screenshots
mv *.png archives/screenshots/

# 3. テストファイル統合
mkdir -p test-all
mv test-*.* test-all/
```

### 要判断
```bash
# Python環境確認
python --version  # 使用中か確認
# 不要なら: rm -rf .venv
```

## 📝 根本原因分析（5WHY）

```
問題: ルートディレクトリが100個以上のファイルで汚染
Why1: なぜ？ → テスト実行時にルートに出力
Why2: なぜ？ → 出力先の設定がない
Why3: なぜ？ → テスト戦略の欠如
Why4: なぜ？ → 開発プロセスの未整備
Why5: なぜ？ → プロジェクト初期の計画不足

対策: 
1. テスト出力先を/test-results/に統一
2. スクリーンショットを/screenshots/に統一
3. .gitignoreで自動除外設定
```

## 結論

**最優先事項**: ルートディレクトリの整理

- 70-116MBの容量削減可能
- 100個以上のファイル削減可能
- プロジェクトの見通しが劇的に改善

特に**test/**（49MB）と**PNGファイル**（91個）の処理が急務。