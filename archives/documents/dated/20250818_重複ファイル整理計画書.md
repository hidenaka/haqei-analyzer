# 重複ファイル整理計画書

**作成日**: 2025年8月18日  
**問題**: 同名ファイルが複数存在し、どれが使用されているか不明

## 🚨 現状の問題

### 1. QuestionManager.js の重複（9個！）
```
/public/js/QuestionManager.js              ← 現在HTMLで読み込み中
/public/js/core/QuestionManager.js         ← 別バージョン
/public/js/ui/QuestionManager.js           ← また別バージョン
/dist/js/core/QuestionManager.js           ← ビルド済み？
/dist/js/ui/QuestionManager.js             ← ビルド済み？
/js/core/QuestionManager.js                ← ソース？
/js/ui/QuestionManager.js                  ← ソース？
/archives/cleanup-20250807/...             ← アーカイブ
/test/archive/...                          ← テスト用
```

### 2. その他の重複
- ScreenManager: 3個
- questions系ファイル: 5個

## 📊 原因分析

### なぜQ.1だけラジオボタンになっているのか
- `/public/js/QuestionManager.js` がラジオボタンを生成
- しかし、他の処理が別のファイルを参照している可能性
- 複数のQuestionManagerが混在して動作している

## 🎯 整理方針

### STEP 1: 使用中ファイルの特定
```bash
# HTMLで実際に読み込まれているファイル
grep -r "<script" public/*.html | grep -v "//"
```

### STEP 2: 削除候補の判定基準
1. **削除可能**
   - `/dist/` 配下（ビルド成果物）
   - `/archives/` 配下（既にアーカイブ済み）
   - `/test/` 配下（テスト用）
   - 未使用のバックアップファイル

2. **要確認**
   - `/js/` 配下（ソースファイル？）
   - `/public/js/core/` と `/public/js/ui/` の重複

3. **保持必須**
   - HTMLから直接参照されているファイル
   - 現在動作に必要なファイル

## 📝 削除候補リスト

### 安全に削除可能（アーカイブ・テスト）
```
/archives/cleanup-20250807/phase2-scripts/test-production-deployment.js
/test/archive/test-production-deployment.js
```

### 要検討（重複の可能性大）
```
/dist/js/core/QuestionManager.js
/dist/js/ui/QuestionManager.js
/js/core/QuestionManager.js
/js/ui/QuestionManager.js
/public/js/ui/QuestionManager.js  （未使用なら）
```

## 🔧 推奨アクション

### 1. 即座に実行可能
```bash
# バックアップ作成
tar -czf backup_before_cleanup_20250818.tar.gz public/js dist js

# アーカイブ・テストファイルの削除
rm -f /archives/cleanup-20250807/phase2-scripts/test-production-deployment.js
rm -f /test/archive/test-production-deployment.js
```

### 2. 確認後に実行
```bash
# distフォルダの削除（ビルド成果物）
rm -rf dist/

# 未使用のjsフォルダ
rm -rf js/  # publicの外にあるjsフォルダ
```

### 3. 最終的な構成
```
/public/
  js/
    QuestionManager.js          # メイン（統一版）
    ScreenManager.js            # メイン
    os-analyzer-main.js         # メインロジック
    core/                       # 削除検討
      QuestionManager.js        # 削除候補
    ui/                         # 削除検討
      QuestionManager.js        # 削除候補
```

## ⚠️ 注意事項

1. **必ずバックアップを取る**
2. **一つずつ削除して動作確認**
3. **git statusで変更を確認**
4. **問題があればgit restoreで復元**

## 🎯 期待される効果

1. **ファイル構成の明確化**
2. **どのファイルが使われているか明確に**
3. **Q.2以降のラジオボタン問題の解決**
4. **メンテナンス性の向上**

---

## 実行コマンド案

```bash
# 1. 現状確認
find . -name "QuestionManager.js" -type f -exec ls -la {} \;

# 2. バックアップ
mkdir -p backup_20250818
cp -r public/js backup_20250818/
cp -r dist backup_20250818/ 2>/dev/null
cp -r js backup_20250818/ 2>/dev/null

# 3. 段階的削除
# まずテスト・アーカイブから
rm -rf archives/cleanup-20250807/
rm -rf test/archive/

# 4. distフォルダ（ビルド成果物）
rm -rf dist/

# 5. 重複jsフォルダ
rm -rf js/  # publicの外

# 6. 動作確認
npm run dev
# ブラウザでテスト
```

## 結論

現在の混乱の原因：
1. **QuestionManagerが9個も存在**
2. **どれが使われているか不明確**
3. **異なる実装が混在**

解決策：
1. **不要ファイルを削除**
2. **public/js/QuestionManager.js を正式版として統一**
3. **他は全て削除またはアーカイブ**