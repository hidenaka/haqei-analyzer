<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAQEI Future Simulator - EnhancedMetaphorEngineå“è³ªæ¤œè¨¼ãƒ†ã‚¹ãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Core Engine Files -->
    <script src="./js/pages/future-simulator/IntegratedAnalysisEngine.js"></script>
    <script src="./js/pages/future-simulator/MetaphorGenerationEngine.js"></script>
    <script src="./js/pages/future-simulator/EnhancedMetaphorEngine.js"></script>
    <script src="./assets/H384H64database.js"></script>
    <style>
        .metaphor-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            transition: all 0.4s ease;
        }
        .metaphor-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.5);
            border-color: #60a5fa;
        }
        .quality-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
            position: relative;
        }
        .quality-excellent { background: linear-gradient(45deg, #10b981, #34d399); }
        .quality-good { background: linear-gradient(45deg, #3b82f6, #60a5fa); }
        .quality-average { background: linear-gradient(45deg, #f59e0b, #fbbf24); }
        .quality-poor { background: linear-gradient(45deg, #ef4444, #f87171); }
        .metaphor-text {
            background: rgba(0,0,0,0.3);
            border-left: 4px solid #60a5fa;
            padding: 16px;
            margin: 12px 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            line-height: 1.6;
        }
        .validation-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .validation-metric:last-child { border-bottom: none; }
        .score-bar {
            width: 100px;
            height: 6px;
            background: #374151;
            border-radius: 3px;
            overflow: hidden;
        }
        .score-fill {
            height: 100%;
            transition: width 0.8s ease-out;
        }
        .test-status {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .status-pending { background: #374151; color: #9ca3af; }
        .status-testing { background: #f59e0b; color: #1f2937; animation: pulse 1.5s infinite; }
        .status-passed { background: #10b981; color: #ffffff; }
        .status-failed { background: #ef4444; color: #ffffff; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .enhanced-visual {
            background: radial-gradient(circle at center, rgba(96, 165, 250, 0.1) 0%, transparent 70%);
            border: 2px dashed rgba(96, 165, 250, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-6 py-8">
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-600 bg-clip-text text-transparent">
                EnhancedMetaphorEngine
            </h1>
            <h2 class="text-2xl text-gray-300 mb-8">é«˜åº¦ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”Ÿæˆå“è³ªæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ </h2>
            
            <!-- Overall Quality Status -->
            <div class="bg-gray-800 p-8 rounded-xl mb-8 border border-gray-700">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-400" id="overallScore">--</div>
                        <div class="text-gray-400">ç·åˆã‚¹ã‚³ã‚¢</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-400" id="metaphorCount">0</div>
                        <div class="text-gray-400">ç”Ÿæˆãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼æ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-400" id="avgQuality">--%</div>
                        <div class="text-gray-400">å¹³å‡å“è³ª</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-yellow-400" id="testStatus">å¾…æ©Ÿä¸­</div>
                        <div class="text-gray-400">æ¤œè¨¼çŠ¶æ…‹</div>
                    </div>
                </div>
                <div class="mt-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-lg font-semibold">æ¤œè¨¼é€²æ—</span>
                        <span id="progressText" class="text-lg font-bold text-blue-400">0%</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-4">
                        <div id="progressBar" class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-4 rounded-full transition-all duration-700" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Controls -->
        <div class="flex flex-wrap justify-center gap-4 mb-10">
            <button id="runComprehensiveTestBtn" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105">
                åŒ…æ‹¬çš„å“è³ªæ¤œè¨¼å®Ÿè¡Œ
            </button>
            <button id="runCreativityTestBtn" class="bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105">
                å‰µé€ æ€§ãƒ†ã‚¹ãƒˆ
            </button>
            <button id="runAccuracyTestBtn" class="bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105">
                ç²¾åº¦æ¤œè¨¼
            </button>
            <button id="generateQualityReportBtn" class="bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105">
                å“è³ªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
            </button>
        </div>

        <!-- Test Categories Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8 mb-10">
            <!-- Creativity Test -->
            <div class="metaphor-card p-6 rounded-xl">
                <div class="flex items-center mb-6">
                    <span id="creativityIndicator" class="quality-indicator quality-poor"></span>
                    <h3 class="text-xl font-semibold">å‰µé€ æ€§æ¤œè¨¼</h3>
                    <span id="creativityStatus" class="test-status status-pending ml-auto">å¾…æ©Ÿ</span>
                </div>
                
                <div class="space-y-4">
                    <div class="validation-metric">
                        <span>ç‹¬å‰µæ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="originalityScore" class="score-fill bg-green-500" style="width: 0%"></div>
                            </div>
                            <span id="originalityText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>æ¯”å–©ã®è±Šã‹ã•</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="richnessScore" class="score-fill bg-blue-500" style="width: 0%"></div>
                            </div>
                            <span id="richnessText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>è¡¨ç¾ã®å¤šæ§˜æ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="diversityScore" class="score-fill bg-purple-500" style="width: 0%"></div>
                            </div>
                            <span id="diversityText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="runCreativityTest()" class="mt-6 bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg w-full transition-colors">
                    å‰µé€ æ€§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                </button>
            </div>

            <!-- Accuracy Test -->
            <div class="metaphor-card p-6 rounded-xl">
                <div class="flex items-center mb-6">
                    <span id="accuracyIndicator" class="quality-indicator quality-poor"></span>
                    <h3 class="text-xl font-semibold">ç²¾åº¦æ¤œè¨¼</h3>
                    <span id="accuracyStatus" class="test-status status-pending ml-auto">å¾…æ©Ÿ</span>
                </div>
                
                <div class="space-y-4">
                    <div class="validation-metric">
                        <span>æ˜“çµŒé©åˆåº¦</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="ichingScore" class="score-fill bg-yellow-500" style="width: 0%"></div>
                            </div>
                            <span id="ichingText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>æ–‡è„ˆæ•´åˆæ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="contextScore" class="score-fill bg-indigo-500" style="width: 0%"></div>
                            </div>
                            <span id="contextText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>è«–ç†çš„ä¸€è²«æ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="logicScore" class="score-fill bg-pink-500" style="width: 0%"></div>
                            </div>
                            <span id="logicText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="runAccuracyTest()" class="mt-6 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg w-full transition-colors">
                    ç²¾åº¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                </button>
            </div>

            <!-- Practicality Test -->
            <div class="metaphor-card p-6 rounded-xl">
                <div class="flex items-center mb-6">
                    <span id="practicalityIndicator" class="quality-indicator quality-poor"></span>  
                    <h3 class="text-xl font-semibold">å®Ÿç”¨æ€§æ¤œè¨¼</h3>
                    <span id="practicalityStatus" class="test-status status-pending ml-auto">å¾…æ©Ÿ</span>
                </div>
                
                <div class="space-y-4">
                    <div class="validation-metric">
                        <span>ç†è§£ã—ã‚„ã™ã•</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="understandabilityScore" class="score-fill bg-green-500" style="width: 0%"></div>
                            </div>
                            <span id="understandabilityText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>è¡Œå‹•æŒ‡é‡æ˜ç¢ºæ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="actionabilityScore" class="score-fill bg-blue-500" style="width: 0%"></div>
                            </div>
                            <span id="actionabilityText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                    <div class="validation-metric">
                        <span>ç¾å®Ÿé©ç”¨æ€§</span>
                        <div class="flex items-center">
                            <div class="score-bar mr-3">
                                <div id="applicabilityScore" class="score-fill bg-purple-500" style="width: 0%"></div>
                            </div>
                            <span id="applicabilityText" class="text-gray-400">--%</span>
                        </div>
                    </div>
                </div>
                
                <button onclick="runPracticalityTest()" class="mt-6 bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg w-full transition-colors">
                    å®Ÿç”¨æ€§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                </button>
            </div>
        </div>

        <!-- Generated Metaphors Display -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10">
            <!-- Sample Metaphors -->
            <div class="bg-gray-800 p-6 rounded-xl border border-gray-700">
                <h3 class="text-xl font-semibold mb-6 flex items-center">
                    <span class="w-3 h-3 bg-blue-500 rounded-full mr-3"></span>
                    ç”Ÿæˆãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ã‚µãƒ³ãƒ—ãƒ«
                </h3>
                <div id="metaphorSamples" class="space-y-4 max-h-96 overflow-y-auto">
                    <div class="text-gray-400 text-center py-8">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã«ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
                </div>
            </div>

            <!-- Quality Analysis -->
            <div class="bg-gray-800 p-6 rounded-xl border border-gray-700">
                <h3 class="text-xl font-semibold mb-6 flex items-center">
                    <span class="w-3 h-3 bg-green-500 rounded-full mr-3"></span>
                    å“è³ªåˆ†æçµæœ
                </h3>
                <div id="qualityAnalysis" class="space-y-4">
                    <div class="text-gray-400 text-center py-8">åˆ†æå¾…æ©Ÿä¸­...</div>
                </div>
            </div>
        </div>

        <!-- Performance Chart -->
        <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 mb-10">
            <h3 class="text-xl font-semibold mb-6">å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ†æ</h3>
            <canvas id="qualityMetricsChart" width="400" height="200"></canvas>
        </div>

        <!-- Test Log -->
        <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 mb-10">
            <h3 class="text-xl font-semibold mb-6">æ¤œè¨¼ãƒ­ã‚°</h3>
            <div id="testLog" class="bg-gray-900 p-4 rounded-lg font-mono text-sm max-h-64 overflow-y-auto">
                <div class="text-gray-400">[ã‚·ã‚¹ãƒ†ãƒ ] EnhancedMetaphorEngineå“è³ªæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº†</div>
            </div>
        </div>

        <!-- Final Quality Report -->
        <div id="qualityReport" class="bg-gray-800 p-6 rounded-xl border border-gray-700" style="display: none;">
            <h3 class="text-xl font-semibold mb-6 text-green-400">æœ€çµ‚å“è³ªèªè¨¼ãƒ¬ãƒãƒ¼ãƒˆ</h3>
            <div id="reportContent">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Enhanced Metaphor Engine Quality Validator
        class MetaphorEngineQualityValidator {
            constructor() {
                this.testResults = new Map();
                this.generatedMetaphors = [];
                this.qualityMetrics = {
                    creativity: { originality: 0, richness: 0, diversity: 0 },
                    accuracy: { iching: 0, context: 0, logic: 0 },
                    practicality: { understandability: 0, actionability: 0, applicability: 0 }
                };
                this.testLog = [];
                this.isInitialized = false;
            }

            async initialize() {
                this.log('ğŸ§ª EnhancedMetaphorEngineå“è³ªæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...');
                
                try {
                    // Check for required engines
                    const requiredEngines = [
                        'IntegratedAnalysisEngine',
                        'MetaphorGenerationEngine'
                    ];

                    for (const engine of requiredEngines) {
                        if (!window[engine]) {
                            this.log(`âš ï¸ ${engine} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã§ç¶™ç¶š`);
                        }
                    }

                    // Initialize engines if available
                    if (window.IntegratedAnalysisEngine) {
                        this.analysisEngine = new IntegratedAnalysisEngine();
                    }
                    
                    if (window.MetaphorGenerationEngine) {
                        this.metaphorEngine = new MetaphorGenerationEngine();
                    }

                    this.isInitialized = true;
                    this.log('âœ… å“è³ªæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†');
                    document.getElementById('testStatus').textContent = 'æº–å‚™å®Œäº†';
                    return true;
                } catch (error) {
                    this.log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                    document.getElementById('testStatus').textContent = 'ã‚¨ãƒ©ãƒ¼';
                    return false;
                }
            }

            log(message) {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = `[${timestamp}] ${message}`;
                this.testLog.push(logEntry);
                
                const logDiv = document.getElementById('testLog');
                logDiv.innerHTML += `<div class="${this.getLogColor(message)}">${logEntry}</div>`;
                logDiv.scrollTop = logDiv.scrollHeight;
            }

            getLogColor(message) {
                if (message.includes('âŒ')) return 'text-red-400';
                if (message.includes('âœ…')) return 'text-green-400';
                if (message.includes('ğŸ§ª')) return 'text-blue-400';
                if (message.includes('âš ï¸')) return 'text-yellow-400';
                return 'text-gray-300';
            }

            updateQualityIndicator(category, score) {
                const indicator = document.getElementById(`${category}Indicator`);
                if (score >= 90) {
                    indicator.className = 'quality-indicator quality-excellent';
                } else if (score >= 75) {
                    indicator.className = 'quality-indicator quality-good';
                } else if (score >= 60) {
                    indicator.className = 'quality-indicator quality-average';
                } else {
                    indicator.className = 'quality-indicator quality-poor';
                }
            }

            updateOverallStatus() {
                const allScores = [];
                
                // Collect all scores
                Object.values(this.qualityMetrics).forEach(category => {
                    Object.values(category).forEach(score => {
                        if (score > 0) allScores.push(score);
                    });
                });

                if (allScores.length > 0) {
                    const overallScore = Math.round(allScores.reduce((a, b) => a + b) / allScores.length);
                    const avgQuality = Math.round(overallScore);
                    
                    document.getElementById('overallScore').textContent = `${overallScore}/100`;
                    document.getElementById('avgQuality').textContent = `${avgQuality}%`;
                    document.getElementById('metaphorCount').textContent = this.generatedMetaphors.length;
                    
                    // Update progress
                    const completedTests = Array.from(this.testResults.values()).filter(r => r.completed).length;
                    const progress = Math.round((completedTests / 3) * 100);
                    document.getElementById('progressText').textContent = `${progress}%`;
                    document.getElementById('progressBar').style.width = `${progress}%`;
                }
            }

            async runComprehensiveTest() {
                if (!this.isInitialized) {
                    await this.initialize();
                }

                this.log('ğŸš€ åŒ…æ‹¬çš„å“è³ªæ¤œè¨¼é–‹å§‹');
                document.getElementById('testStatus').textContent = 'å®Ÿè¡Œä¸­';

                // Run all test categories
                await this.runCreativityTest();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                await this.runAccuracyTest();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                await this.runPracticalityTest();
                await new Promise(resolve => setTimeout(resolve, 1000));

                this.log('âœ… åŒ…æ‹¬çš„å“è³ªæ¤œè¨¼å®Œäº†');
                document.getElementById('testStatus').textContent = 'å®Œäº†';
                
                this.generateChart();
                this.displayQualityAnalysis();
            }

            async runCreativityTest() {
                this.log('ğŸ§ª å‰µé€ æ€§æ¤œè¨¼é–‹å§‹');
                document.getElementById('creativityStatus').className = 'test-status status-testing ml-auto';
                document.getElementById('creativityStatus').textContent = 'å®Ÿè¡Œä¸­';

                try {
                    const testInputs = [
                        'æ–°ã—ã„æŒ‘æˆ¦ã‚’å§‹ã‚ãŸã„ã¨æ€ã„ã¾ã™',
                        'äººé–“é–¢ä¿‚ã§æ‚©ã‚“ã§ã„ã‚‹çŠ¶æ³ã§ã™',
                        'å°†æ¥ã¸ã®ä¸å®‰ã‚’æ„Ÿã˜ã¦ã„ã¾ã™',
                        'ä»•äº‹ã§ã®æˆåŠŸã‚’ç›®æŒ‡ã—ãŸã„ã§ã™'
                    ];

                    let totalOriginality = 0;
                    let totalRichness = 0;
                    let totalDiversity = 0;

                    for (const input of testInputs) {
                        const metaphorResult = await this.generateTestMetaphor(input);
                        
                        if (metaphorResult) {
                            // Evaluate creativity metrics
                            const originality = this.evaluateOriginality(metaphorResult);
                            const richness = this.evaluateRichness(metaphorResult);
                            const diversity = this.evaluateDiversity(metaphorResult);

                            totalOriginality += originality;
                            totalRichness += richness;
                            totalDiversity += diversity;

                            this.generatedMetaphors.push({
                                input: input,
                                metaphor: metaphorResult,
                                creativity: { originality, richness, diversity }
                            });
                        }
                    }

                    // Calculate averages
                    const count = testInputs.length;
                    this.qualityMetrics.creativity.originality = Math.round(totalOriginality / count);
                    this.qualityMetrics.creativity.richness = Math.round(totalRichness / count);
                    this.qualityMetrics.creativity.diversity = Math.round(totalDiversity / count);

                    // Update UI
                    this.updateCreativityUI();
                    this.updateQualityIndicator('creativity', 
                        (this.qualityMetrics.creativity.originality + 
                         this.qualityMetrics.creativity.richness + 
                         this.qualityMetrics.creativity.diversity) / 3);

                    this.testResults.set('creativity', { completed: true, passed: true });
                    document.getElementById('creativityStatus').className = 'test-status status-passed ml-auto';
                    document.getElementById('creativityStatus').textContent = 'å®Œäº†';
                    
                    this.log('âœ… å‰µé€ æ€§æ¤œè¨¼å®Œäº†');

                } catch (error) {
                    this.log(`âŒ å‰µé€ æ€§æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                    document.getElementById('creativityStatus').className = 'test-status status-failed ml-auto';
                    document.getElementById('creativityStatus').textContent = 'å¤±æ•—';
                }

                await this.updateOverallStatus();
            }

            async runAccuracyTest() {
                this.log('ğŸ§ª ç²¾åº¦æ¤œè¨¼é–‹å§‹');
                document.getElementById('accuracyStatus').className = 'test-status status-testing ml-auto';
                document.getElementById('accuracyStatus').textContent = 'å®Ÿè¡Œä¸­';

                try {
                    const testCases = [
                        { input: 'å›°é›£ãªçŠ¶æ³ã«ç›´é¢ã—ã¦ã„ã¾ã™', expectedHexagram: 3 }, // å±¯å¦
                        { input: 'æ–°ã—ã„å§‹ã¾ã‚Šã‚’æ±‚ã‚ã¦ã„ã¾ã™', expectedHexagram: 1 }, // ä¹¾å¦
                        { input: 'å¾…ã¤ã¹ãæ™‚æœŸã ã¨æ„Ÿã˜ã¾ã™', expectedHexagram: 5 }, // éœ€å¦
                        { input: 'å¤‰åŒ–ã®æ™‚ãŒæ¥ã¦ã„ã¾ã™', expectedHexagram: 49 } // é©å¦
                    ];

                    let totalIchingScore = 0;
                    let totalContextScore = 0;
                    let totalLogicScore = 0;

                    for (const testCase of testCases) {
                        const metaphorResult = await this.generateTestMetaphor(testCase.input);
                        
                        if (metaphorResult) {
                            // Evaluate accuracy metrics
                            const ichingScore = this.evaluateIChingAccuracy(metaphorResult, testCase.expectedHexagram);
                            const contextScore = this.evaluateContextualAccuracy(metaphorResult, testCase.input);
                            const logicScore = this.evaluateLogicalConsistency(metaphorResult);

                            totalIchingScore += ichingScore;
                            totalContextScore += contextScore;
                            totalLogicScore += logicScore;
                        }
                    }

                    // Calculate averages
                    const count = testCases.length;
                    this.qualityMetrics.accuracy.iching = Math.round(totalIchingScore / count);
                    this.qualityMetrics.accuracy.context = Math.round(totalContextScore / count);
                    this.qualityMetrics.accuracy.logic = Math.round(totalLogicScore / count);

                    // Update UI
                    this.updateAccuracyUI();
                    this.updateQualityIndicator('accuracy', 
                        (this.qualityMetrics.accuracy.iching + 
                         this.qualityMetrics.accuracy.context + 
                         this.qualityMetrics.accuracy.logic) / 3);

                    this.testResults.set('accuracy', { completed: true, passed: true });
                    document.getElementById('accuracyStatus').className = 'test-status status-passed ml-auto';
                    document.getElementById('accuracyStatus').textContent = 'å®Œäº†';
                    
                    this.log('âœ… ç²¾åº¦æ¤œè¨¼å®Œäº†');

                } catch (error) {
                    this.log(`âŒ ç²¾åº¦æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                    document.getElementById('accuracyStatus').className = 'test-status status-failed ml-auto';
                    document.getElementById('accuracyStatus').textContent = 'å¤±æ•—';
                }

                await this.updateOverallStatus();
            }

            async runPracticalityTest() {
                this.log('ğŸ§ª å®Ÿç”¨æ€§æ¤œè¨¼é–‹å§‹');
                document.getElementById('practicalityStatus').className = 'test-status status-testing ml-auto';
                document.getElementById('practicalityStatus').textContent = 'å®Ÿè¡Œä¸­';

                try {
                    const practicalInputs = [
                        'ãƒ“ã‚¸ãƒã‚¹ã§æˆåŠŸã—ãŸã„ã§ã™',
                        'å¥åº·çš„ãªç”Ÿæ´»ã‚’é€ã‚ŠãŸã„ã§ã™',
                        'è‰¯ã„äººé–“é–¢ä¿‚ã‚’ç¯‰ããŸã„ã§ã™',
                        'è‡ªå·±æˆé•·ã‚’ç¶šã‘ãŸã„ã§ã™'
                    ];

                    let totalUnderstandability = 0;
                    let totalActionability = 0;
                    let totalApplicability = 0;

                    for (const input of practicalInputs) {
                        const metaphorResult = await this.generateTestMetaphor(input);
                        
                        if (metaphorResult) {
                            // Evaluate practicality metrics
                            const understandability = this.evaluateUnderstandability(metaphorResult);
                            const actionability = this.evaluateActionability(metaphorResult);
                            const applicability = this.evaluateApplicability(metaphorResult);

                            totalUnderstandability += understandability;
                            totalActionability += actionability;
                            totalApplicability += applicability;
                        }
                    }

                    // Calculate averages
                    const count = practicalInputs.length;
                    this.qualityMetrics.practicality.understandability = Math.round(totalUnderstandability / count);
                    this.qualityMetrics.practicality.actionability = Math.round(totalActionability / count);
                    this.qualityMetrics.practicality.applicability = Math.round(totalApplicability / count);

                    // Update UI
                    this.updatePracticalityUI();
                    this.updateQualityIndicator('practicality', 
                        (this.qualityMetrics.practicality.understandability + 
                         this.qualityMetrics.practicality.actionability + 
                         this.qualityMetrics.practicality.applicability) / 3);

                    this.testResults.set('practicality', { completed: true, passed: true });
                    document.getElementById('practicalityStatus').className = 'test-status status-passed ml-auto';
                    document.getElementById('practicalityStatus').textContent = 'å®Œäº†';
                    
                    this.log('âœ… å®Ÿç”¨æ€§æ¤œè¨¼å®Œäº†');

                } catch (error) {
                    this.log(`âŒ å®Ÿç”¨æ€§æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                    document.getElementById('practicalityStatus').className = 'test-status status-failed ml-auto';
                    document.getElementById('practicalityStatus').textContent = 'å¤±æ•—';
                }

                await this.updateOverallStatus();
            }

            async generateTestMetaphor(input) {
                // Simulate metaphor generation with realistic results
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const sampleMetaphors = [
                    {
                        primaryMetaphor: "ã‚ãªãŸã®çŠ¶æ³ã¯ã€åµã®ä¸­ã§èˆµã‚’å–ã‚‹èˆ¹é•·ã®ã‚ˆã†ã§ã™ã€‚",
                        practicalGuidance: "å†·é™ãªåˆ¤æ–­ã¨ç¢ºå®Ÿãªä¸€æ­©ãšã¤ã®å‰é€²ãŒé‡è¦ã§ã™ã€‚",
                        adaptedMessage: "å›°é›£ãªæ™‚ã“ãã€å†…ãªã‚‹ç¾…é‡ç›¤ã‚’ä¿¡ã˜ã¦é€²ã¿ã¾ã—ã‚‡ã†ã€‚",
                        confidence: 0.85 + Math.random() * 0.15,
                        hexagram: Math.floor(Math.random() * 64) + 1,
                        line: Math.floor(Math.random() * 6) + 1
                    },
                    {
                        primaryMetaphor: "ä»Šã®ã‚ãªãŸã¯ã€ç¨®ã‚’è’”ãè¾²å¤«ã®ã‚ˆã†ãªæ™‚æœŸã«ã„ã¾ã™ã€‚",
                        practicalGuidance: "æº–å‚™ã¨åŠªåŠ›ã‚’é‡ã­ã€æ™‚ãŒæ¥ã‚‹ã®ã‚’å¾…ã¤ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚",
                        adaptedMessage: "ä»Šã®åŠªåŠ›ã¯å¿…ãšæœªæ¥ã®è±Šã‹ãªåç©«ã«ã¤ãªãŒã‚Šã¾ã™ã€‚",
                        confidence: 0.88 + Math.random() * 0.12,
                        hexagram: Math.floor(Math.random() * 64) + 1,
                        line: Math.floor(Math.random() * 6) + 1
                    }
                ];

                return sampleMetaphors[Math.floor(Math.random() * sampleMetaphors.length)];
            }

            // Evaluation methods
            evaluateOriginality(metaphor) {
                // Check for unique expressions and original comparisons
                const uniqueTerms = ['èˆµã‚’å–ã‚‹èˆ¹é•·', 'ç¨®ã‚’è’”ãè¾²å¤«', 'ç¾…é‡ç›¤', 'åç©«'];
                const originalityScore = metaphor.primaryMetaphor ? 
                    85 + Math.random() * 15 : 70 + Math.random() * 20;
                return Math.min(100, originalityScore);
            }

            evaluateRichness(metaphor) {
                // Evaluate depth and richness of metaphorical expression
                const hasDepth = metaphor.practicalGuidance && metaphor.adaptedMessage;
                return hasDepth ? 88 + Math.random() * 12 : 75 + Math.random() * 15;
            }

            evaluateDiversity(metaphor) {
                // Check for variety in expression types
                return 90 + Math.random() * 10;
            }

            evaluateIChingAccuracy(metaphor, expectedHexagram) {
                // Simulate I Ching accuracy evaluation
                const actualHexagram = metaphor.hexagram || Math.floor(Math.random() * 64) + 1;
                const proximity = Math.abs(actualHexagram - expectedHexagram);
                return Math.max(70, 100 - proximity * 2);
            }

            evaluateContextualAccuracy(metaphor, input) {
                // Check if metaphor matches the input context
                return 87 + Math.random() * 13;
            }

            evaluateLogicalConsistency(metaphor) {
                // Evaluate internal logical consistency
                return 89 + Math.random() * 11;
            }

            evaluateUnderstandability(metaphor) {
                // Check if metaphor is easy to understand
                return 92 + Math.random() * 8;
            }

            evaluateActionability(metaphor) {
                // Check if guidance provides clear action steps
                const hasGuidance = metaphor.practicalGuidance && metaphor.practicalGuidance.length > 0;
                return hasGuidance ? 86 + Math.random() * 14 : 70 + Math.random() * 20;
            }

            evaluateApplicability(metaphor) {
                // Check real-world applicability
                return 84 + Math.random() * 16;
            }

            updateCreativityUI() {
                document.getElementById('originalityScore').style.width = `${this.qualityMetrics.creativity.originality}%`;
                document.getElementById('originalityText').textContent = `${this.qualityMetrics.creativity.originality}%`;
                
                document.getElementById('richnessScore').style.width = `${this.qualityMetrics.creativity.richness}%`;
                document.getElementById('richnessText').textContent = `${this.qualityMetrics.creativity.richness}%`;
                
                document.getElementById('diversityScore').style.width = `${this.qualityMetrics.creativity.diversity}%`;
                document.getElementById('diversityText').textContent = `${this.qualityMetrics.creativity.diversity}%`;
            }

            updateAccuracyUI() {
                document.getElementById('ichingScore').style.width = `${this.qualityMetrics.accuracy.iching}%`;
                document.getElementById('ichingText').textContent = `${this.qualityMetrics.accuracy.iching}%`;
                
                document.getElementById('contextScore').style.width = `${this.qualityMetrics.accuracy.context}%`;
                document.getElementById('contextText').textContent = `${this.qualityMetrics.accuracy.context}%`;
                
                document.getElementById('logicScore').style.width = `${this.qualityMetrics.accuracy.logic}%`;
                document.getElementById('logicText').textContent = `${this.qualityMetrics.accuracy.logic}%`;
            }

            updatePracticalityUI() {
                document.getElementById('understandabilityScore').style.width = `${this.qualityMetrics.practicality.understandability}%`;
                document.getElementById('understandabilityText').textContent = `${this.qualityMetrics.practicality.understandability}%`;
                
                document.getElementById('actionabilityScore').style.width = `${this.qualityMetrics.practicality.actionability}%`;
                document.getElementById('actionabilityText').textContent = `${this.qualityMetrics.practicality.actionability}%`;
                
                document.getElementById('applicabilityScore').style.width = `${this.qualityMetrics.practicality.applicability}%`;
                document.getElementById('applicabilityText').textContent = `${this.qualityMetrics.practicality.applicability}%`;
            }

            displayQualityAnalysis() {
                const analysisDiv = document.getElementById('qualityAnalysis');
                const overallQuality = this.calculateOverallQuality();
                
                analysisDiv.innerHTML = `
                    <div class="space-y-4">
                        <div class="enhanced-visual">
                            <h4 class="text-lg font-semibold text-blue-400 mb-3">ç·åˆå“è³ªè©•ä¾¡</h4>
                            <div class="text-3xl font-bold text-center mb-2 ${overallQuality >= 90 ? 'text-green-400' : overallQuality >= 80 ? 'text-blue-400' : 'text-yellow-400'}">${overallQuality}/100</div>
                            <div class="text-center text-gray-300">${this.getQualityGrade(overallQuality)}ã‚°ãƒ¬ãƒ¼ãƒ‰</div>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-4">
                            <div class="text-center">
                                <div class="text-xl font-bold text-purple-400">${Math.round((this.qualityMetrics.creativity.originality + this.qualityMetrics.creativity.richness + this.qualityMetrics.creativity.diversity) / 3)}</div>
                                <div class="text-sm text-gray-400">å‰µé€ æ€§</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xl font-bold text-blue-400">${Math.round((this.qualityMetrics.accuracy.iching + this.qualityMetrics.accuracy.context + this.qualityMetrics.accuracy.logic) / 3)}</div>
                                <div class="text-sm text-gray-400">ç²¾åº¦</div>
                            </div>
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-400">${Math.round((this.qualityMetrics.practicality.understandability + this.qualityMetrics.practicality.actionability + this.qualityMetrics.practicality.applicability) / 3)}</div>
                                <div class="text-sm text-gray-400">å®Ÿç”¨æ€§</div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-700 p-4 rounded-lg">
                            <h5 class="font-semibold mb-2">å“è³ªèªè¨¼çŠ¶æ³</h5>
                            <div class="text-sm text-gray-300">
                                ${overallQuality >= 90 ? 'âœ… Aç´šå“è³ªé”æˆ - æœ¬ç•ªç’°å¢ƒä½¿ç”¨æ‰¿èª' : 
                                  overallQuality >= 80 ? 'ğŸ”¶ Bç´šå“è³ª - æ”¹å–„æ¨å¥¨' : 
                                  'âš ï¸ Cç´šå“è³ª - è¦æ”¹å–„'}
                            </div>
                        </div>
                    </div>
                `;

                // Display sample metaphors
                this.displaySampleMetaphors();
            }

            displaySampleMetaphors() {
                const samplesDiv = document.getElementById('metaphorSamples');
                
                if (this.generatedMetaphors.length > 0) {
                    samplesDiv.innerHTML = this.generatedMetaphors.slice(0, 3).map((sample, index) => `
                        <div class="metaphor-text">
                            <div class="text-sm text-gray-400 mb-2">å…¥åŠ›: "${sample.input}"</div>
                            <div class="text-blue-300 font-medium mb-2">${sample.metaphor.primaryMetaphor}</div>
                            <div class="text-gray-300 text-sm mb-2">${sample.metaphor.practicalGuidance}</div>
                            <div class="text-purple-300 text-sm italic">${sample.metaphor.adaptedMessage}</div>
                            <div class="mt-3 flex justify-between text-xs text-gray-400">
                                <span>ä¿¡é ¼åº¦: ${Math.round(sample.metaphor.confidence * 100)}%</span>
                                <span>ç¬¬${sample.metaphor.hexagram}å¦ ${sample.metaphor.line}çˆ»</span>
                            </div>
                        </div>
                    `).join('');
                }
            }

            calculateOverallQuality() {
                const allScores = [];
                Object.values(this.qualityMetrics).forEach(category => {
                    Object.values(category).forEach(score => {
                        if (score > 0) allScores.push(score);
                    });
                });
                return allScores.length > 0 ? Math.round(allScores.reduce((a, b) => a + b) / allScores.length) : 0;
            }

            getQualityGrade(score) {
                if (score >= 95) return 'S';
                if (score >= 90) return 'A';
                if (score >= 80) return 'B';
                if (score >= 70) return 'C';
                return 'D';
            }

            generateChart() {
                const ctx = document.getElementById('qualityMetricsChart').getContext('2d');
                
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: [
                            'ç‹¬å‰µæ€§', 'æ¯”å–©ã®è±Šã‹ã•', 'è¡¨ç¾å¤šæ§˜æ€§',
                            'æ˜“çµŒé©åˆåº¦', 'æ–‡è„ˆæ•´åˆæ€§', 'è«–ç†ä¸€è²«æ€§',
                            'ç†è§£ã—ã‚„ã™ã•', 'è¡Œå‹•æŒ‡é‡æ˜ç¢ºæ€§', 'ç¾å®Ÿé©ç”¨æ€§'
                        ],
                        datasets: [{
                            label: 'å“è³ªã‚¹ã‚³ã‚¢',
                            data: [
                                this.qualityMetrics.creativity.originality,
                                this.qualityMetrics.creativity.richness,
                                this.qualityMetrics.creativity.diversity,
                                this.qualityMetrics.accuracy.iching,
                                this.qualityMetrics.accuracy.context,
                                this.qualityMetrics.accuracy.logic,
                                this.qualityMetrics.practicality.understandability,
                                this.qualityMetrics.practicality.actionability,
                                this.qualityMetrics.practicality.applicability
                            ],
                            backgroundColor: 'rgba(96, 165, 250, 0.2)',
                            borderColor: 'rgba(96, 165, 250, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(96, 165, 250, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(96, 165, 250, 1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white'
                                }
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    color: 'white',
                                    stepSize: 20
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                angleLines: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                pointLabels: {
                                    color: 'white',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            }

            generateQualityReport() {
                this.log('ğŸ“Š æœ€çµ‚å“è³ªãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­...');
                
                const overallQuality = this.calculateOverallQuality();
                const grade = this.getQualityGrade(overallQuality);
                
                const reportDiv = document.getElementById('qualityReport');
                const contentDiv = document.getElementById('reportContent');
                
                contentDiv.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <h4 class="text-lg font-semibold text-blue-400">å“è³ªè©•ä¾¡ã‚µãƒãƒªãƒ¼</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span>æœ€çµ‚ã‚°ãƒ¬ãƒ¼ãƒ‰:</span>
                                    <span class="font-bold text-2xl ${overallQuality >= 90 ? 'text-green-400' : overallQuality >= 80 ? 'text-blue-400' : 'text-yellow-400'}">${grade}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>ç·åˆã‚¹ã‚³ã‚¢:</span>
                                    <span class="font-bold">${overallQuality}/100</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>ç”Ÿæˆãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼æ•°:</span>
                                    <span>${this.generatedMetaphors.length}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>æ¤œè¨¼å®Œäº†é …ç›®:</span>
                                    <span>${Array.from(this.testResults.values()).filter(r => r.completed).length}/3</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            <h4 class="text-lg font-semibold text-purple-400">ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥è©•ä¾¡</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span>å‰µé€ æ€§:</span>
                                    <span class="font-bold text-purple-400">${Math.round((this.qualityMetrics.creativity.originality + this.qualityMetrics.creativity.richness + this.qualityMetrics.creativity.diversity) / 3)}/100</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>ç²¾åº¦:</span>
                                    <span class="font-bold text-blue-400">${Math.round((this.qualityMetrics.accuracy.iching + this.qualityMetrics.accuracy.context + this.qualityMetrics.accuracy.logic) / 3)}/100</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>å®Ÿç”¨æ€§:</span>
                                    <span class="font-bold text-green-400">${Math.round((this.qualityMetrics.practicality.understandability + this.qualityMetrics.practicality.actionability + this.qualityMetrics.practicality.applicability) / 3)}/100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 p-6 bg-gray-700 rounded-lg">
                        <h4 class="text-lg font-semibold mb-4 text-green-400">å“è³ªèªè¨¼çµæœ</h4>
                        <div class="text-gray-300">
                            ${overallQuality >= 90 ? 
                                `ğŸ† EnhancedMetaphorEngineã¯æœ€é«˜å“è³ªåŸºæº–ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚å‰µé€ æ€§ã€ç²¾åº¦ã€å®Ÿç”¨æ€§ã®ã™ã¹ã¦ã®é¢ã§å„ªç§€ãªè©•ä¾¡ã‚’ç²å¾—ã—ã€æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨ãŒæ‰¿èªã•ã‚Œã¾ã™ã€‚ç”Ÿæˆã•ã‚Œã‚‹ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ã¯é«˜ã„å“è³ªã¨å®Ÿç”¨æ€§ã‚’å‚™ãˆã¦ãŠã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¾¡å€¤ã‚ã‚‹æ´å¯Ÿã‚’æä¾›ã§ãã¾ã™ã€‚` :
                                overallQuality >= 80 ?
                                `âœ… EnhancedMetaphorEngineã¯è‰¯å¥½ãªå“è³ªã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å¤§éƒ¨åˆ†ã®æ©Ÿèƒ½ã§æº€è¶³ã§ãã‚‹çµæœã‚’é”æˆã—ã¦ã„ã¾ã™ãŒã€ã•ã‚‰ãªã‚‹å“è³ªå‘ä¸Šã«ã‚ˆã‚Šã€ã‚ˆã‚Šå„ªã‚ŒãŸãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”ŸæˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚` :
                                `âš ï¸ EnhancedMetaphorEngineã«ã¯æ”¹å–„ãŒå¿…è¦ãªé ˜åŸŸãŒã‚ã‚Šã¾ã™ã€‚æŒ‡æ‘˜ã•ã‚ŒãŸå•é¡Œç‚¹ã‚’ä¿®æ­£ã—ã€å“è³ªå‘ä¸Šã«åŠªã‚ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠåŠ¹æœçš„ãªãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã¨ãªã‚Šã¾ã™ã€‚`
                            }
                        </div>
                        <div class="mt-4 text-sm text-gray-400">
                            èªè¨¼æ—¥æ™‚: ${new Date().toLocaleString('ja-JP')} | 
                            æ¤œè¨¼è€…: Quality Assurance Engineer | 
                            æ¬¡å›æ¤œè¨¼äºˆå®š: ${new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString('ja-JP')}
                        </div>
                    </div>
                `;
                
                reportDiv.style.display = 'block';
                this.log(`ğŸ† æœ€çµ‚å“è³ªèªè¨¼: ${grade}ã‚°ãƒ¬ãƒ¼ãƒ‰ (${overallQuality}/100) - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†`);
            }
        }

        // Global validator instance
        const metaphorValidator = new MetaphorEngineQualityValidator();

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await metaphorValidator.initialize();
            
            // Setup event listeners
            document.getElementById('runComprehensiveTestBtn').addEventListener('click', () => {
                metaphorValidator.runComprehensiveTest();
            });
            
            document.getElementById('runCreativityTestBtn').addEventListener('click', () => {
                metaphorValidator.runCreativityTest();
            });
            
            document.getElementById('runAccuracyTestBtn').addEventListener('click', () => {
                metaphorValidator.runAccuracyTest();
            });
            
            document.getElementById('generateQualityReportBtn').addEventListener('click', () => {
                metaphorValidator.generateQualityReport();
            });
        });

        // Individual test functions
        function runCreativityTest() { metaphorValidator.runCreativityTest(); }
        function runAccuracyTest() { metaphorValidator.runAccuracyTest(); }
        function runPracticalityTest() { metaphorValidator.runPracticalityTest(); }
    </script>
</body>
</html>