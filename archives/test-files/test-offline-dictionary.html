<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline Dictionary System Test - HAQEI Analyzer</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            margin: 0;\n            padding: 20px;\n            min-height: 100vh;\n        }\n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n        }\n        .header {\n            text-align: center;\n            margin-bottom: 40px;\n        }\n        .test-section {\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 12px;\n            padding: 20px;\n            margin-bottom: 20px;\n            backdrop-filter: blur(10px);\n        }\n        .test-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 20px;\n        }\n        .test-card {\n            background: rgba(255, 255, 255, 0.05);\n            border-radius: 8px;\n            padding: 16px;\n            border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n        .status {\n            display: inline-block;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 12px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n        .status.success { background: #10b981; }\n        .status.error { background: #ef4444; }\n        .status.warning { background: #f59e0b; }\n        .status.info { background: #3b82f6; }\n        .button {\n            background: linear-gradient(135deg, #6366f1, #8b5cf6);\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-weight: 600;\n            margin: 5px;\n        }\n        .button:hover {\n            transform: translateY(-1px);\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n        }\n        .log {\n            background: rgba(0, 0, 0, 0.3);\n            border-radius: 6px;\n            padding: 12px;\n            font-family: 'Monaco', 'Consolas', monospace;\n            font-size: 12px;\n            max-height: 200px;\n            overflow-y: auto;\n            margin-top: 10px;\n        }\n        .progress-bar {\n            background: rgba(255, 255, 255, 0.2);\n            border-radius: 10px;\n            height: 20px;\n            overflow: hidden;\n            margin: 10px 0;\n        }\n        .progress-fill {\n            background: linear-gradient(90deg, #10b981, #059669);\n            height: 100%;\n            transition: width 0.3s ease;\n        }\n        .metrics {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 10px;\n            margin-top: 15px;\n        }\n        .metric {\n            text-align: center;\n            padding: 10px;\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 6px;\n        }\n        .metric-value {\n            font-size: 24px;\n            font-weight: 700;\n            color: #10b981;\n        }\n        .metric-label {\n            font-size: 12px;\n            opacity: 0.8;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>ğŸ§ª ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è¾æ›¸ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ</h1>\n            <p>HAQEI Analyzer - Offline Dictionary Test Suite</p>\n        </div>\n\n        <!-- System Status -->\n        <div class=\"test-section\">\n            <h2>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹</h2>\n            <div class=\"test-grid\">\n                <div class=\"test-card\">\n                    <h3>æ¥ç¶šçŠ¶æ…‹</h3>\n                    <div id=\"connectionStatus\">ãƒã‚§ãƒƒã‚¯ä¸­...</div>\n                    <div class=\"metrics\">\n                        <div class=\"metric\">\n                            <div class=\"metric-value\" id=\"connectionQuality\">-</div>\n                            <div class=\"metric-label\">æ¥ç¶šå“è³ª</div>\n                        </div>\n                        <div class=\"metric\">\n                            <div class=\"metric-value\" id=\"onlineStatus\">-</div>\n                            <div class=\"metric-label\">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³</div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"test-card\">\n                    <h3>è¾æ›¸ã‚·ã‚¹ãƒ†ãƒ </h3>\n                    <div id=\"dictionaryStatus\">åˆæœŸåŒ–ä¸­...</div>\n                    <div class=\"metrics\">\n                        <div class=\"metric\">\n                            <div class=\"metric-value\" id=\"tokenizerType\">-</div>\n                            <div class=\"metric-label\">ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶ãƒ¼</div>\n                        </div>\n                        <div class=\"metric\">\n                            <div class=\"metric-value\" id=\"dictionarySource\">-</div>\n                            <div class=\"metric-label\">è¾æ›¸ã‚½ãƒ¼ã‚¹</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Dictionary Tests -->\n        <div class=\"test-section\">\n            <h2>ğŸ“š è¾æ›¸æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>\n            <div class=\"test-grid\">\n                <div class=\"test-card\">\n                    <h3>ãƒ­ãƒ¼ã‚«ãƒ«è¾æ›¸ãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"testLocalDictionary()\">ãƒ­ãƒ¼ã‚«ãƒ«è¾æ›¸ã‚’ãƒ†ã‚¹ãƒˆ</button>\n                    <div id=\"localDictResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n                <div class=\"test-card\">\n                    <h3>CDNè¾æ›¸ãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"testCDNDictionary()\">CDNè¾æ›¸ã‚’ãƒ†ã‚¹ãƒˆ</button>\n                    <div id=\"cdnDictResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n                <div class=\"test-card\">\n                    <h3>ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"testFallbackSystem()\">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ</button>\n                    <div id=\"fallbackResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n                <div class=\"test-card\">\n                    <h3>ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"simulateOffline()\">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ</button>\n                    <div id=\"offlineResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Performance Tests -->\n        <div class=\"test-section\">\n            <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h2>\n            <div class=\"test-grid\">\n                <div class=\"test-card\">\n                    <h3>åˆæœŸåŒ–é€Ÿåº¦ãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"testInitializationSpeed()\">åˆæœŸåŒ–é€Ÿåº¦ã‚’æ¸¬å®š</button>\n                    <div class=\"progress-bar\">\n                        <div class=\"progress-fill\" id=\"initProgress\" style=\"width: 0%\"></div>\n                    </div>\n                    <div id=\"initSpeedResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n                <div class=\"test-card\">\n                    <h3>ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚ºé€Ÿåº¦ãƒ†ã‚¹ãƒˆ</h3>\n                    <button class=\"button\" onclick=\"testTokenizationSpeed()\">ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚ºé€Ÿåº¦ã‚’æ¸¬å®š</button>\n                    <div class=\"progress-bar\">\n                        <div class=\"progress-fill\" id=\"tokenizeProgress\" style=\"width: 0%\"></div>\n                    </div>\n                    <div id=\"tokenizeSpeedResult\">æœªå®Ÿè¡Œ</div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Text Analysis Test -->\n        <div class=\"test-section\">\n            <h2>ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆè§£æãƒ†ã‚¹ãƒˆ</h2>\n            <div class=\"test-card\">\n                <h3>å®Ÿéš›ã®ãƒ†ã‚­ã‚¹ãƒˆè§£æ</h3>\n                <textarea id=\"testText\" placeholder=\"è§£æã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...\" \n                         style=\"width: 100%; height: 100px; padding: 10px; border-radius: 6px; border: none; background: rgba(255,255,255,0.1); color: white; resize: vertical;\">ç§ã¯ä»Šæ—¥ã€ç¾ã—ã„æ¡œã®èŠ±ã‚’è¦‹ãªãŒã‚‰å…¬åœ’ã‚’æ•£æ­©ã—ã¾ã—ãŸã€‚æ˜¥ã®æš–ã‹ãªé™½æ°—ã«åŒ…ã¾ã‚Œã¦ã€ã¨ã¦ã‚‚å¹¸ã›ãªæ°—åˆ†ã«ãªã‚Šã¾ã—ãŸã€‚</textarea>\n                <button class=\"button\" onclick=\"analyzeTestText()\">ãƒ†ã‚­ã‚¹ãƒˆã‚’è§£æ</button>\n                <div id=\"analysisResult\"></div>\n            </div>\n        </div>\n\n        <!-- System Log -->\n        <div class=\"test-section\">\n            <h2>ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°</h2>\n            <div class=\"log\" id=\"systemLog\"></div>\n            <div style=\"margin-top: 10px;\">\n                <button class=\"button\" onclick=\"clearLog()\">ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢</button>\n                <button class=\"button\" onclick=\"exportLog()\">ãƒ­ã‚°ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Scripts -->\n    <script src=\"./js/core/DictionaryManager.js\"></script>\n    <script src=\"./js/core/OfflineDetector.js\"></script>\n    <script src=\"./js/core/OfflineKuromojiInitializer.js\"></script>\n    <script src=\"./js/core/offline-kuromoji-integration.js\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/kuromoji@0.1.2/build/kuromoji.js\"></script>\n\n    <script>\n        let testResults = {};\n        let offlineDetector = null;\n        let dictionaryManager = null;\n        let offlineInitializer = null;\n\n        // Initialize test environment\n        window.addEventListener('load', async () => {\n            log('ğŸš€ Test environment initializing...');\n            \n            try {\n                // Initialize offline detector\n                if (typeof OfflineDetector !== 'undefined') {\n                    offlineDetector = new OfflineDetector();\n                    log('âœ… OfflineDetector initialized');\n                } else {\n                    log('âŒ OfflineDetector not available');\n                }\n\n                // Initialize dictionary manager\n                if (typeof DictionaryManager !== 'undefined') {\n                    dictionaryManager = new DictionaryManager();\n                    log('âœ… DictionaryManager initialized');\n                } else {\n                    log('âŒ DictionaryManager not available');\n                }\n\n                // Initialize offline kuromoji initializer\n                if (typeof OfflineKuromojiInitializer !== 'undefined') {\n                    offlineInitializer = new OfflineKuromojiInitializer();\n                    log('âœ… OfflineKuromojiInitializer initialized');\n                } else {\n                    log('âŒ OfflineKuromojiInitializer not available');\n                }\n\n                // Update system status\n                updateSystemStatus();\n                \n                log('âœ… Test environment ready');\n            } catch (error) {\n                log(`âŒ Test environment initialization failed: ${error.message}`);\n            }\n        });\n\n        function log(message) {\n            const timestamp = new Date().toLocaleTimeString();\n            const logElement = document.getElementById('systemLog');\n            logElement.innerHTML += `<div>[${timestamp}] ${message}</div>`;\n            logElement.scrollTop = logElement.scrollHeight;\n            console.log(message);\n        }\n\n        function clearLog() {\n            document.getElementById('systemLog').innerHTML = '';\n        }\n\n        function exportLog() {\n            const logContent = document.getElementById('systemLog').textContent;\n            const blob = new Blob([logContent], { type: 'text/plain' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `offline-dictionary-test-${new Date().toISOString().slice(0,19)}.log`;\n            a.click();\n            URL.revokeObjectURL(url);\n        }\n\n        async function updateSystemStatus() {\n            // Update connection status\n            if (offlineDetector) {\n                const status = offlineDetector.getStatus();\n                const statusMsg = offlineDetector.getStatusMessage();\n                \n                document.getElementById('connectionStatus').innerHTML = `\n                    <span class=\"status ${status.isOnline ? 'success' : 'error'}\">\n                        ${status.isOnline ? 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'}\n                    </span>\n                    <p>${statusMsg.message}</p>\n                `;\n                \n                document.getElementById('connectionQuality').textContent = status.connectionQuality || '-';\n                document.getElementById('onlineStatus').textContent = status.isOnline ? 'YES' : 'NO';\n            }\n\n            // Update dictionary status\n            if (offlineInitializer) {\n                const status = offlineInitializer.getStatus();\n                \n                document.getElementById('dictionaryStatus').innerHTML = `\n                    <span class=\"status ${status.isInitialized ? 'success' : 'warning'}\">\n                        ${status.isInitialized ? 'åˆæœŸåŒ–æ¸ˆã¿' : 'æœªåˆæœŸåŒ–'}\n                    </span>\n                `;\n                \n                document.getElementById('tokenizerType').textContent = status.tokenizerSource || '-';\n                document.getElementById('dictionarySource').textContent = status.isLocal ? 'ãƒ­ãƒ¼ã‚«ãƒ«' : 'CDN';\n            }\n        }\n\n        async function testLocalDictionary() {\n            log('ğŸ“ Testing local dictionary...');\n            const resultElement = document.getElementById('localDictResult');\n            \n            try {\n                const startTime = Date.now();\n                \n                if (!dictionaryManager) {\n                    throw new Error('DictionaryManager not available');\n                }\n                \n                const tokenizer = await dictionaryManager.tryLocalDictionary();\n                const duration = Date.now() - startTime;\n                \n                if (tokenizer) {\n                    resultElement.innerHTML = `\n                        <span class=\"status success\">æˆåŠŸ</span>\n                        <p>èª­ã¿è¾¼ã¿æ™‚é–“: ${duration}ms</p>\n                    `;\n                    log(`âœ… Local dictionary test successful (${duration}ms)`);\n                } else {\n                    throw new Error('Local dictionary initialization failed');\n                }\n                \n            } catch (error) {\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Local dictionary test failed: ${error.message}`);\n            }\n        }\n\n        async function testCDNDictionary() {\n            log('ğŸŒ Testing CDN dictionary...');\n            const resultElement = document.getElementById('cdnDictResult');\n            \n            try {\n                const startTime = Date.now();\n                \n                if (!dictionaryManager) {\n                    throw new Error('DictionaryManager not available');\n                }\n                \n                const success = await dictionaryManager.tryCDNDictionary();\n                const duration = Date.now() - startTime;\n                \n                if (success) {\n                    resultElement.innerHTML = `\n                        <span class=\"status success\">æˆåŠŸ</span>\n                        <p>èª­ã¿è¾¼ã¿æ™‚é–“: ${duration}ms</p>\n                    `;\n                    log(`âœ… CDN dictionary test successful (${duration}ms)`);\n                } else {\n                    throw new Error('CDN dictionary initialization failed');\n                }\n                \n            } catch (error) {\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ CDN dictionary test failed: ${error.message}`);\n            }\n        }\n\n        async function testFallbackSystem() {\n            log('ğŸ”„ Testing fallback system...');\n            const resultElement = document.getElementById('fallbackResult');\n            \n            try {\n                const startTime = Date.now();\n                \n                if (!offlineInitializer) {\n                    throw new Error('OfflineKuromojiInitializer not available');\n                }\n                \n                const tokenizer = await offlineInitializer.createEmergencyFallback();\n                const duration = Date.now() - startTime;\n                \n                if (tokenizer && tokenizer.isEmergency) {\n                    resultElement.innerHTML = `\n                        <span class=\"status success\">æˆåŠŸ</span>\n                        <p>ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ™‚é–“: ${duration}ms</p>\n                        <p>ç·Šæ€¥ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶ãƒ¼ä½œæˆå®Œäº†</p>\n                    `;\n                    log(`âœ… Fallback system test successful (${duration}ms)`);\n                } else {\n                    throw new Error('Emergency fallback creation failed');\n                }\n                \n            } catch (error) {\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Fallback system test failed: ${error.message}`);\n            }\n        }\n\n        function simulateOffline() {\n            log('ğŸ“´ Simulating offline mode...');\n            const resultElement = document.getElementById('offlineResult');\n            \n            try {\n                // Simulate offline by overriding navigator.onLine\n                Object.defineProperty(navigator, 'onLine', {\n                    writable: true,\n                    value: false\n                });\n                \n                // Trigger offline event\n                const offlineEvent = new Event('offline');\n                window.dispatchEvent(offlineEvent);\n                \n                setTimeout(() => {\n                    updateSystemStatus();\n                    \n                    resultElement.innerHTML = `\n                        <span class=\"status warning\">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³</span>\n                        <p>ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆä¸­</p>\n                        <button class=\"button\" onclick=\"restoreOnline()\">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«æˆ»ã™</button>\n                    `;\n                    \n                    log('âš ï¸ Offline mode simulated');\n                }, 1000);\n                \n            } catch (error) {\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Offline simulation failed: ${error.message}`);\n            }\n        }\n\n        function restoreOnline() {\n            log('ğŸŒ Restoring online mode...');\n            \n            Object.defineProperty(navigator, 'onLine', {\n                writable: true,\n                value: true\n            });\n            \n            const onlineEvent = new Event('online');\n            window.dispatchEvent(onlineEvent);\n            \n            setTimeout(() => {\n                updateSystemStatus();\n                document.getElementById('offlineResult').innerHTML = `\n                    <span class=\"status success\">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¾©å¸°</span>\n                    <p>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã«å¾©å¸°ã—ã¾ã—ãŸ</p>\n                `;\n                log('âœ… Online mode restored');\n            }, 1000);\n        }\n\n        async function testInitializationSpeed() {\n            log('â±ï¸ Testing initialization speed...');\n            const resultElement = document.getElementById('initSpeedResult');\n            const progressBar = document.getElementById('initProgress');\n            \n            try {\n                progressBar.style.width = '0%';\n                const startTime = Date.now();\n                \n                // Create new initializer for fresh test\n                const testInitializer = new OfflineKuromojiInitializer();\n                \n                // Set progress callback\n                testInitializer.setProgressCallback(({ message, progress }) => {\n                    if (progress !== null) {\n                        progressBar.style.width = `${progress}%`;\n                    }\n                });\n                \n                const tokenizer = await testInitializer.initialize({ showProgress: false });\n                const duration = Date.now() - startTime;\n                \n                progressBar.style.width = '100%';\n                \n                if (tokenizer) {\n                    resultElement.innerHTML = `\n                        <span class=\"status success\">æˆåŠŸ</span>\n                        <p>åˆæœŸåŒ–æ™‚é–“: ${duration}ms</p>\n                        <p>ã‚½ãƒ¼ã‚¹: ${tokenizer.source || 'unknown'}</p>\n                    `;\n                    log(`âœ… Initialization speed test: ${duration}ms`);\n                } else {\n                    throw new Error('Initialization failed');\n                }\n                \n            } catch (error) {\n                progressBar.style.width = '0%';\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Initialization speed test failed: ${error.message}`);\n            }\n        }\n\n        async function testTokenizationSpeed() {\n            log('âš¡ Testing tokenization speed...');\n            const resultElement = document.getElementById('tokenizeSpeedResult');\n            const progressBar = document.getElementById('tokenizeProgress');\n            \n            try {\n                if (!window.kuromojiTokenizer) {\n                    throw new Error('Tokenizer not available');\n                }\n                \n                const testTexts = [\n                    'ç§ã¯ä»Šæ—¥ã€ç¾ã—ã„æ¡œã®èŠ±ã‚’è¦‹ãªãŒã‚‰å…¬åœ’ã‚’æ•£æ­©ã—ã¾ã—ãŸã€‚',\n                    'äººå·¥çŸ¥èƒ½ã®ç™ºé”ã«ã‚ˆã‚Šã€æ§˜ã€…ãªåˆ†é‡ã§è‡ªå‹•åŒ–ãŒé€²ã‚“ã§ã„ã¾ã™ã€‚',\n                    'æ—¥æœ¬ã®ä¼çµ±çš„ãªæ–‡åŒ–ã¨ç¾ä»£æŠ€è¡“ã®èåˆã¯èˆˆå‘³æ·±ã„ç¾è±¡ã§ã™ã€‚',\n                    'ã“ã®æ–‡ç« ã¯æ—¥æœ¬èªã®è‡ªç„¶è¨€èªå‡¦ç†ã®æ€§èƒ½ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚',\n                    'æ©Ÿæ¢°å­¦ç¿’ã¨ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æŠ€è¡“ã¯æ€¥é€Ÿã«é€²æ­©ã—ã¦ã„ã¾ã™ã€‚'\n                ];\n                \n                let totalTime = 0;\n                let totalTokens = 0;\n                \n                for (let i = 0; i < testTexts.length; i++) {\n                    const startTime = Date.now();\n                    const tokens = window.kuromojiTokenizer.tokenize(testTexts[i]);\n                    const duration = Date.now() - startTime;\n                    \n                    totalTime += duration;\n                    totalTokens += tokens.length;\n                    \n                    const progress = ((i + 1) / testTexts.length) * 100;\n                    progressBar.style.width = `${progress}%`;\n                    \n                    await new Promise(resolve => setTimeout(resolve, 50)); // Small delay for UI\n                }\n                \n                const avgTime = totalTime / testTexts.length;\n                const tokensPerSecond = (totalTokens / totalTime) * 1000;\n                \n                resultElement.innerHTML = `\n                    <span class=\"status success\">æˆåŠŸ</span>\n                    <p>å¹³å‡å‡¦ç†æ™‚é–“: ${avgTime.toFixed(2)}ms</p>\n                    <p>ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•°: ${totalTokens}</p>\n                    <p>å‡¦ç†é€Ÿåº¦: ${tokensPerSecond.toFixed(0)} tokens/sec</p>\n                `;\n                \n                log(`âœ… Tokenization speed test: ${avgTime.toFixed(2)}ms avg, ${tokensPerSecond.toFixed(0)} tokens/sec`);\n                \n            } catch (error) {\n                progressBar.style.width = '0%';\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Tokenization speed test failed: ${error.message}`);\n            }\n        }\n\n        async function analyzeTestText() {\n            log('ğŸ“ Analyzing test text...');\n            const resultElement = document.getElementById('analysisResult');\n            const testText = document.getElementById('testText').value;\n            \n            if (!testText.trim()) {\n                alert('ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n                return;\n            }\n            \n            try {\n                if (!window.kuromojiTokenizer) {\n                    throw new Error('Tokenizer not available');\n                }\n                \n                const startTime = Date.now();\n                const tokens = window.kuromojiTokenizer.tokenize(testText);\n                const duration = Date.now() - startTime;\n                \n                const posCount = {};\n                tokens.forEach(token => {\n                    posCount[token.pos] = (posCount[token.pos] || 0) + 1;\n                });\n                \n                const posStats = Object.entries(posCount)\n                    .sort((a, b) => b[1] - a[1])\n                    .slice(0, 5)\n                    .map(([pos, count]) => `${pos}: ${count}å€‹`)\n                    .join(', ');\n                \n                resultElement.innerHTML = `\n                    <div class=\"status success\">è§£æå®Œäº†</div>\n                    <div class=\"metrics\">\n                        <div class=\"metric\">\n                            <div class=\"metric-value\">${tokens.length}</div>\n                            <div class=\"metric-label\">ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•°</div>\n                        </div>\n                        <div class=\"metric\">\n                            <div class=\"metric-value\">${duration}</div>\n                            <div class=\"metric-label\">å‡¦ç†æ™‚é–“(ms)</div>\n                        </div>\n                        <div class=\"metric\">\n                            <div class=\"metric-value\">${Object.keys(posCount).length}</div>\n                            <div class=\"metric-label\">å“è©ç¨®é¡</div>\n                        </div>\n                    </div>\n                    <p><strong>ä¸»è¦å“è©:</strong> ${posStats}</p>\n                    <details>\n                        <summary>è©³ç´°ãªãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±</summary>\n                        <div class=\"log\">\n                            ${tokens.map(token => \n                                `${token.surface_form} (${token.pos}${token.pos_detail_1 !== '*' ? '/' + token.pos_detail_1 : ''})`\n                            ).join(', ')}\n                        </div>\n                    </details>\n                `;\n                \n                log(`âœ… Text analysis completed: ${tokens.length} tokens, ${duration}ms`);\n                \n            } catch (error) {\n                resultElement.innerHTML = `\n                    <span class=\"status error\">å¤±æ•—</span>\n                    <p>${error.message}</p>\n                `;\n                log(`âŒ Text analysis failed: ${error.message}`);\n            }\n        }\n\n        // Auto-update system status every 30 seconds\n        setInterval(updateSystemStatus, 30000);\n    </script>\n</body>\n</html>"