<\!DOCTYPE html>
<html>
<head>
    <title>HAQEI OS Analyzer Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-left: 4px solid #ccc; }
        .pass { border-color: #4CAF50; background: #f1f8e9; }
        .fail { border-color: #f44336; background: #ffebee; }
        .warn { border-color: #ff9800; background: #fff3e0; }
    </style>
</head>
<body>
    <h1>ğŸ§ª HAQEI OS Analyzer ãƒ†ã‚¹ãƒˆçµæœ</h1>
    <div id='test-results'></div>
    
    <script>
        const results = [];
        const log = (type, message, details = '') => {
            results.push({type, message, details});
            console.log(`[${type.toUpperCase()}] ${message}`, details);
        };
        
        // ãƒ†ã‚¹ãƒˆ1: åŸºæœ¬ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
        fetch('/os_analyzer.html')
            .then(response => {
                if (response.ok) {
                    log('pass', 'os_analyzer.html ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã‚ã¾ã™');
                    return response.text();
                } else {
                    log('fail', 'os_analyzer.html ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—', `Status: ${response.status}`);
                    throw new Error('HTML load failed');
                }
            })
            .then(html => {
                // ãƒ†ã‚¹ãƒˆ2: å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã®å­˜åœ¨ç¢ºèª
                const requiredScripts = [
                    'BaseComponent.js',
                    'MicroStorageManager.js', 
                    'BridgeStorageManager.js',
                    'WelcomeScreen.js',
                    'app.js'
                ];
                
                requiredScripts.forEach(script => {
                    if (html.includes(script)) {
                        log('pass', `å¿…é ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ ${script} ãŒå«ã¾ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        log('fail', `å¿…é ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ ${script} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
                    }
                });
                
                // ãƒ†ã‚¹ãƒˆ3: DOMè¦ç´ ã®å­˜åœ¨ç¢ºèª
                const requiredElements = [
                    'welcome-container',
                    'questions-container', 
                    'analysis-container',
                    'results-container'
                ];
                
                requiredElements.forEach(elementId => {
                    if (html.includes(`id="${elementId}"`)) {
                        log('pass', `DOMè¦ç´  ${elementId} ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        log('fail', `DOMè¦ç´  ${elementId} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
                    }
                });
                
                renderResults();
            })
            .catch(error => {
                log('fail', 'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼', error.message);
                renderResults();
            });
        
        function renderResults() {
            const container = document.getElementById('test-results');
            container.innerHTML = results.map(result => 
                `<div class="test-result ${result.type}">
                    <strong>[${result.type.toUpperCase()}]</strong> ${result.message}
                    ${result.details ? `<br><small>${result.details}</small>` : ''}
                </div>`
            ).join('');
        }
    </script>
</body>
</html>
