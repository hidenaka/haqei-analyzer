<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ…æ‹¬çš„å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ - ãƒ†ã‚¹ãƒˆï¼†ãƒ‡ãƒ¢</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .input-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        .input-group h3 {
            margin-top: 0;
            color: #FFD700;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            margin-bottom: 15px;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .results-area {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 400px;
        }
        
        .pattern-card {
            background: rgba(255, 255, 255, 0.1);
            margin: 15px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #FFD700;
        }
        
        .pattern-card.free {
            border-left-color: #4ECDC4;
        }
        
        .pattern-card.premium {
            border-left-color: #FF6B6B;
        }
        
        .pattern-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .pattern-description {
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .pattern-details {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }
        
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #4ECDC4;
        }
        
        .stat-label {
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .console-output {
            background: #000;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .upgrade-notice {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">åŒ…æ‹¬çš„å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³</h1>
            <p class="subtitle">æ˜“çµŒ7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Œå…¨å®Ÿè£… - bunenjinå“²å­¦å¯¾å¿œ</p>
        </div>
        
        <div class="control-panel">
            <div class="input-group">
                <h3>ğŸ¯ åŸºæœ¬è¨­å®š</h3>
                <label for="hexagram">å¦ç•ªå· (1-64):</label>
                <input type="number" id="hexagram" min="1" max="64" value="29" placeholder="29 (åç‚ºæ°´)">
                
                <label for="changingLines">å¤‰çˆ» (1-6, ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š):</label>
                <input type="text" id="changingLines" value="2,5" placeholder="2,5">
                
                <label for="userType">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—:</label>
                <select id="userType">
                    <option value="free">ç„¡æ–™ç‰ˆ (2ãƒ‘ã‚¿ãƒ¼ãƒ³è¡¨ç¤º)</option>
                    <option value="premium">æœ‰æ–™ç‰ˆ (å…¨7ãƒ‘ã‚¿ãƒ¼ãƒ³è¡¨ç¤º)</option>
                </select>
            </div>
            
            <div class="input-group">
                <h3>ğŸ­ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š</h3>
                <label for="situation">çŠ¶æ³:</label>
                <select id="situation">
                    <option value="general">ä¸€èˆ¬çš„</option>
                    <option value="career_challenge">ã‚­ãƒ£ãƒªã‚¢ã®èª²é¡Œ</option>
                    <option value="relationship">äººé–“é–¢ä¿‚</option>
                    <option value="life_change">äººç”Ÿã®å¤‰åŒ–</option>
                    <option value="decision_making">æ„æ€æ±ºå®š</option>
                </select>
                
                <label for="urgency">ç·Šæ€¥åº¦:</label>
                <select id="urgency">
                    <option value="low">ä½</option>
                    <option value="moderate">ä¸­</option>
                    <option value="high">é«˜</option>
                    <option value="critical">ç·Šæ€¥</option>
                </select>
                
                <label for="timeframe">æ™‚é–“æ :</label>
                <select id="timeframe">
                    <option value="immediate">å³åº§</option>
                    <option value="short_term">çŸ­æœŸ</option>
                    <option value="medium_term">ä¸­æœŸ</option>
                    <option value="long_term">é•·æœŸ</option>
                </select>
            </div>
        </div>
        
        <div class="button-group">
            <button onclick="calculatePatterns()" id="calculateBtn">ğŸ¯ 7ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—å®Ÿè¡Œ</button>
            <button onclick="runQuickTest()">âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</button>
            <button onclick="runFullDemo()">ğŸ” ãƒ•ãƒ«ãƒ‡ãƒ¢å®Ÿè¡Œ</button>
            <button onclick="runDiagnostics()">ğŸ©º ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­</button>
            <button onclick="clearResults()">ğŸ—‘ï¸ çµæœã‚¯ãƒªã‚¢</button>
        </div>
        
        <div class="stats-panel" id="statsPanel" style="display: none;">
            <div class="stat-card">
                <div class="stat-value" id="responseTime">--</div>
                <div class="stat-label">å¿œç­”æ™‚é–“ (ms)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="patternsCount">--</div>
                <div class="stat-label">è¨ˆç®—ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="confidence">--</div>
                <div class="stat-label">ä¿¡é ¼åº¦ (%)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="cacheHit">--</div>
                <div class="stat-label">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ</div>
            </div>
        </div>
        
        <div class="results-area" id="resultsArea">
            <h3>ğŸŒŸ è¨ˆç®—çµæœ</h3>
            <p>ä¸Šè¨˜ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨ˆç®—ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
            
            <div id="patterns-container"></div>
            <div id="integration-results"></div>
            <div id="recommendations"></div>
        </div>
        
        <div class="console-output" id="consoleOutput" style="display: none;">
            <h4>ğŸ–¥ï¸ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›</h4>
            <div id="consoleContent"></div>
        </div>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ -->
    <script src="./js/core/IChingTransformationEngine.js"></script>
    <script src="./js/pages/future-simulator/ComprehensiveTransformationPatterns.js"></script>
    <script src="./js/pages/future-simulator/ComprehensiveTransformationPatterns-usage.js"></script>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let transformationEngine = null;
        let consoleMessages = [];
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸš€ åŒ…æ‹¬çš„å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–');
            
            try {
                // ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–
                transformationEngine = new ComprehensiveTransformationPatterns();
                
                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£
                setupConsoleCapture();
                
                // åˆæœŸã‚·ã‚¹ãƒ†ãƒ æƒ…å ±è¡¨ç¤º
                await displaySystemInfo();
                
                console.log('âœ… åˆæœŸåŒ–å®Œäº†');
                
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                showError('åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
            }
        });
        
        // ãƒ¡ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—å®Ÿè¡Œ
        async function calculatePatterns() {
            if (!transformationEngine) {
                showError('ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }
            
            const button = document.getElementById('calculateBtn');
            button.disabled = true;
            button.innerHTML = '<span class="loading"></span> è¨ˆç®—ä¸­...';
            
            try {
                // å…¥åŠ›ãƒ‡ãƒ¼ã‚¿åé›†
                const inputData = {
                    hexagram: parseInt(document.getElementById('hexagram').value),
                    changingLines: document.getElementById('changingLines').value
                        .split(',')
                        .map(s => parseInt(s.trim()))
                        .filter(n => n >= 1 && n <= 6),
                    userType: document.getElementById('userType').value,
                    context: {
                        situation: document.getElementById('situation').value,
                        urgency: document.getElementById('urgency').value,
                        timeframe: document.getElementById('timeframe').value
                    }
                };
                
                console.log('ğŸ“Š å…¥åŠ›ãƒ‡ãƒ¼ã‚¿:', inputData);
                
                // è¨ˆç®—å®Ÿè¡Œ
                const startTime = performance.now();
                const result = await transformationEngine.calculateAllPatterns(inputData);
                const responseTime = performance.now() - startTime;
                
                console.log('âœ… è¨ˆç®—å®Œäº†:', result);
                
                // çµæœè¡¨ç¤º
                displayResults(result, responseTime);
                
                // çµ±è¨ˆæ›´æ–°
                updateStats(result, responseTime);
                
            } catch (error) {
                console.error('âŒ è¨ˆç®—ã‚¨ãƒ©ãƒ¼:', error);
                showError('è¨ˆç®—ã‚¨ãƒ©ãƒ¼: ' + error.message);
            } finally {
                button.disabled = false;
                button.innerHTML = 'ğŸ¯ 7ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—å®Ÿè¡Œ';
            }
        }
        
        // çµæœè¡¨ç¤º
        function displayResults(result, responseTime) {
            const container = document.getElementById('patterns-container');
            container.innerHTML = '';
            
            if (result.error) {
                container.innerHTML = `<div class="pattern-card" style="border-left-color: #FF6B6B;">
                    <div class="pattern-name">âŒ ã‚¨ãƒ©ãƒ¼</div>
                    <div class="pattern-description">${result.message}</div>
                    ${result.fallbackResult ? '<p>ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯çµæœã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>' : ''}
                </div>`;
                return;
            }
            
            // åŸºæœ¬æƒ…å ±è¡¨ç¤º
            container.innerHTML = `
                <div class="pattern-card">
                    <div class="pattern-name">ğŸ“Š è¨ˆç®—æ¦‚è¦</div>
                    <div class="pattern-description">
                        <strong>å…¥åŠ›å¦:</strong> ç¬¬${result.inputHexagram}å¦<br>
                        <strong>å¤‰çˆ»:</strong> ${result.changingLines.join(', ') || 'ãªã—'}<br>
                        <strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—:</strong> ${result.userType}<br>
                        <strong>å¿œç­”æ™‚é–“:</strong> ${responseTime.toFixed(2)}ms<br>
                        <strong>ä¿¡é ¼åº¦:</strong> ${(result.confidence * 100).toFixed(1)}%
                    </div>
                </div>
            `;
            
            // ç„¡æ–™ç‰ˆã®å ´åˆã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ¡ˆå†…
            if (result.userType === 'free' && result.hiddenPatternsCount > 0) {
                container.innerHTML += `
                    <div class="upgrade-notice">
                        ğŸ’ ${result.hiddenPatternsCount}å€‹ã®è¿½åŠ ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæœ‰æ–™ç‰ˆã§åˆ©ç”¨å¯èƒ½ã§ã™<br>
                        ${result.upgradeMessage}
                    </div>
                `;
            }
            
            // ãƒ‘ã‚¿ãƒ¼ãƒ³çµæœè¡¨ç¤º
            if (result.patterns && result.patterns.length > 0) {
                result.patterns.forEach(pattern => {
                    const cardClass = pattern.displayInFree ? 'free' : 'premium';
                    const visibilityIcon = pattern.displayInFree ? 'ğŸ†“' : 'ğŸ’';
                    
                    container.innerHTML += `
                        <div class="pattern-card ${cardClass}">
                            <div class="pattern-name">${visibilityIcon} ${pattern.name} (${pattern.pattern})</div>
                            <div class="pattern-description">${pattern.description}</div>
                            <div class="pattern-details">
                                ${JSON.stringify(pattern, null, 2)}
                            </div>
                        </div>
                    `;
                });
            }
            
            // çµ±åˆçµæœè¡¨ç¤º
            if (result.integration) {
                document.getElementById('integration-results').innerHTML = `
                    <div class="pattern-card">
                        <div class="pattern-name">ğŸ”— çµ±åˆåˆ†æçµæœ</div>
                        <div class="pattern-description">
                            <strong>æ”¯é…çš„ãƒ‘ã‚¿ãƒ¼ãƒ³:</strong> ${result.integration.dominantPattern?.name || 'ãªã—'}<br>
                            <strong>ãƒ‘ã‚¿ãƒ¼ãƒ³èª¿å’Œåº¦:</strong> ${((result.integration.patternHarmony || 0) * 100).toFixed(1)}%
                        </div>
                        <div class="pattern-details">
                            ${JSON.stringify(result.integration, null, 2)}
                        </div>
                    </div>
                `;
            }
            
            // æ¨å¥¨äº‹é …è¡¨ç¤º
            if (result.recommendations && result.recommendations.length > 0) {
                document.getElementById('recommendations').innerHTML = `
                    <div class="pattern-card">
                        <div class="pattern-name">ğŸ’¡ æ¨å¥¨äº‹é …</div>
                        <div class="pattern-description">
                            ${result.recommendations.map(r => `â€¢ ${r}`).join('<br>')}
                        </div>
                    </div>
                `;
            }
        }
        
        // çµ±è¨ˆæƒ…å ±æ›´æ–°
        function updateStats(result, responseTime) {
            document.getElementById('statsPanel').style.display = 'grid';
            document.getElementById('responseTime').textContent = responseTime.toFixed(0);
            document.getElementById('patternsCount').textContent = result.patterns?.length || 0;
            document.getElementById('confidence').textContent = ((result.confidence || 0) * 100).toFixed(0);
            
            // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæƒ…å ±å–å¾—
            if (transformationEngine) {
                const stats = transformationEngine.getStatistics();
                const cacheHitRate = (stats.performance.cacheHitRate * 100).toFixed(0);
                document.getElementById('cacheHit').textContent = cacheHitRate + '%';
            }
        }
        
        // ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runQuickTest() {
            console.log('âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆé–‹å§‹');
            showConsole();
            
            try {
                const result = await quickTest();
                console.log('âœ… ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†:', result);
            } catch (error) {
                console.error('âŒ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // ãƒ•ãƒ«ãƒ‡ãƒ¢å®Ÿè¡Œ
        async function runFullDemo() {
            console.log('ğŸ” ãƒ•ãƒ«ãƒ‡ãƒ¢é–‹å§‹');
            showConsole();
            
            try {
                const demo = new TransformationPatternsDemo();
                await demo.runDemo();
                console.log('âœ… ãƒ•ãƒ«ãƒ‡ãƒ¢å®Œäº†');
            } catch (error) {
                console.error('âŒ ãƒ•ãƒ«ãƒ‡ãƒ¢ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­å®Ÿè¡Œ
        async function runDiagnostics() {
            console.log('ğŸ©º ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­é–‹å§‹');
            showConsole();
            
            try {
                const diagnostics = await transformationEngine.runDiagnostics();
                console.log('è¨ºæ–­çµæœ:', diagnostics);
                
                // è¨ºæ–­çµæœã‚’ç”»é¢ã«è¡¨ç¤º
                const container = document.getElementById('patterns-container');
                container.innerHTML = `
                    <div class="pattern-card">
                        <div class="pattern-name">ğŸ©º ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­çµæœ</div>
                        <div class="pattern-description">
                            <strong>ã‚·ã‚¹ãƒ†ãƒ å¥åº·çŠ¶æ…‹:</strong> ${diagnostics.systemHealth}<br>
                            <strong>å•é¡Œæ•°:</strong> ${diagnostics.issues.length}
                        </div>
                        <div class="pattern-details">
                            ${JSON.stringify(diagnostics, null, 2)}
                        </div>
                    </div>
                `;
                
                console.log('âœ… ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­å®Œäº†');
            } catch (error) {
                console.error('âŒ ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±è¡¨ç¤º
        async function displaySystemInfo() {
            if (!transformationEngine) return;
            
            const stats = transformationEngine.getStatistics();
            console.log('ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±:', stats);
        }
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£
        function setupConsoleCapture() {
            const originalLog = console.log;
            const originalError = console.error;
            const originalWarn = console.warn;
            
            console.log = function(...args) {
                originalLog.apply(console, args);
                addConsoleMessage('log', args.join(' '));
            };
            
            console.error = function(...args) {
                originalError.apply(console, args);
                addConsoleMessage('error', args.join(' '));
            };
            
            console.warn = function(...args) {
                originalWarn.apply(console, args);
                addConsoleMessage('warn', args.join(' '));
            };
        }
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ 
        function addConsoleMessage(type, message) {
            consoleMessages.push({
                type,
                message,
                timestamp: new Date().toLocaleTimeString()
            });
            
            // æœ€æ–°100ä»¶ã«åˆ¶é™
            if (consoleMessages.length > 100) {
                consoleMessages = consoleMessages.slice(-100);
            }
            
            updateConsoleDisplay();
        }
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤ºæ›´æ–°
        function updateConsoleDisplay() {
            const content = document.getElementById('consoleContent');
            if (!content) return;
            
            content.innerHTML = consoleMessages.map(msg => {
                const color = msg.type === 'error' ? '#ff6b6b' : 
                            msg.type === 'warn' ? '#ffa500' : '#00ff00';
                return `<div style="color: ${color};">[${msg.timestamp}] ${msg.message}</div>`;
            }).join('');
            
            content.scrollTop = content.scrollHeight;
        }
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function showConsole() {
            document.getElementById('consoleOutput').style.display = 'block';
        }
        
        // çµæœã‚¯ãƒªã‚¢
        function clearResults() {
            document.getElementById('patterns-container').innerHTML = '';
            document.getElementById('integration-results').innerHTML = '';
            document.getElementById('recommendations').innerHTML = '';
            document.getElementById('statsPanel').style.display = 'none';
            document.getElementById('consoleOutput').style.display = 'none';
            consoleMessages = [];
            
            console.log('ğŸ—‘ï¸ çµæœã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
        }
        
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            const container = document.getElementById('patterns-container');
            container.innerHTML = `
                <div class="pattern-card" style="border-left-color: #FF6B6B;">
                    <div class="pattern-name">âŒ ã‚¨ãƒ©ãƒ¼</div>
                    <div class="pattern-description">${message}</div>
                </div>
            `;
        }
    </script>
</body>
</html>