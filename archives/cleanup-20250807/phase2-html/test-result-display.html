<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
            font-family: 'Inter', sans-serif;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        .os-card {
            margin: 10px;
            padding: 20px;
            background: rgba(99, 102, 241, 0.1);
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 8px;
        }
        .success {
            color: #10b981;
        }
        .error {
            color: #ef4444;
        }
        button {
            padding: 10px 20px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #5558d9;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” HAQEI OS Analyzer - çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š ãƒ†ã‚¹ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h2>
            <button onclick="testTripleOSCalculation()">Triple OSè¨ˆç®—ãƒ†ã‚¹ãƒˆ</button>
            <button onclick="testResultDisplay()">çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ</button>
            <button onclick="testEnergyDisplay()">ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒãƒ†ã‚¹ãƒˆ</button>
            <button onclick="testOSInteraction()">ç›¸äº’é–¢ä¿‚ãƒ†ã‚¹ãƒˆ</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <div id="test-results"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ¯ Triple OSçµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
            <div id="os-cards-container" class="os-cards"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒ</h2>
            <canvas id="energy-chart"></canvas>
        </div>
    </div>

    <!-- å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="/assets/H384H64database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
        const mockAnswers = Array(30).fill(null).map((_, i) => ({
            questionId: i + 1,
            value: Math.floor(Math.random() * 5),
            trigrams: ['ä¹¾', 'å…Œ', 'é›¢'].map((t, j) => j === i % 3 ? t : null).filter(Boolean)
        }));

        // Triple OSè¨ˆç®—ãƒ†ã‚¹ãƒˆ
        function testTripleOSCalculation() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<h3>Triple OSè¨ˆç®—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</h3>';
            
            try {
                // ç°¡æ˜“ç‰ˆã®Triple OSè¨ˆç®—
                const engineOS = {
                    hexagramId: 1,
                    hexagramName: 'ä¹¾ç‚ºå¤©',
                    catchphrase: 'ã€Œå¤©ã®å‰µé€ åŠ›ãã®ã‚‚ã®ã€',
                    description: 'ç´”ç²‹ãªå‰µé€ ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã¤',
                    primaryTrigram: 'ä¹¾',
                    secondaryTrigram: 'ä¹¾',
                    trigramEnergies: { ä¹¾: 80, å…Œ: 60, é›¢: 40, éœ‡: 50, å·½: 30, å: 45, è‰®: 35, å¤: 25 }
                };
                
                const interfaceOS = {
                    hexagramId: 11,
                    hexagramName: 'åœ°å¤©æ³°',
                    catchphrase: 'ã€Œå¤©åœ°ãŒäº¤ã‚ã‚Šå¹³å’Œã‚’ã‚‚ãŸã‚‰ã™ã€',
                    description: 'èª¿å’Œã¨å¹³è¡¡ã‚’é‡è¦–ã™ã‚‹ç¤¾ä¼šçš„ã‚·ã‚¹ãƒ†ãƒ ',
                    upperTrigram: 'å¤',
                    lowerTrigram: 'ä¹¾',
                    trigramEnergies: { ä¹¾: 65, å…Œ: 55, é›¢: 45, éœ‡: 40, å·½: 50, å: 35, è‰®: 40, å¤: 70 }
                };
                
                const safeModeOS = {
                    hexagramId: 2,
                    hexagramName: 'å¤ç‚ºåœ°',
                    catchphrase: 'ã€Œå¤§åœ°ã®åŒ…å®¹åŠ›ã€',
                    description: 'æŸ”è»Ÿã§é©å¿œçš„ãªé˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ',
                    primaryDefense: 'å¤',
                    secondaryDefense: 'å¤',
                    trigramEnergies: { ä¹¾: 20, å…Œ: 30, é›¢: 25, éœ‡: 35, å·½: 40, å: 50, è‰®: 60, å¤: 85 }
                };
                
                results.innerHTML = `
                    <h3 class="success">âœ… Triple OSè¨ˆç®—æˆåŠŸ</h3>
                    <p><strong>Engine OS:</strong> ${engineOS.hexagramName} - ${engineOS.catchphrase}</p>
                    <p><strong>Interface OS:</strong> ${interfaceOS.hexagramName} - ${interfaceOS.catchphrase}</p>
                    <p><strong>SafeMode OS:</strong> ${safeModeOS.hexagramName} - ${safeModeOS.catchphrase}</p>
                `;
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ä¿å­˜
                window.testTripleOS = { engineOS, interfaceOS, safeModeOS };
                
            } catch (error) {
                results.innerHTML = `<h3 class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</h3>`;
            }
        }
        
        // çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        function testResultDisplay() {
            const container = document.getElementById('os-cards-container');
            
            if (!window.testTripleOS) {
                testTripleOSCalculation();
            }
            
            const { engineOS, interfaceOS, safeModeOS } = window.testTripleOS;
            
            // OSã‚«ãƒ¼ãƒ‰ä½œæˆ
            container.innerHTML = `
                <div class="os-card" style="border-color: #6366f1;">
                    <h3>Engine OS</h3>
                    <p><strong>å¦:</strong> ${engineOS.hexagramName}</p>
                    <p><strong>ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º:</strong> ${engineOS.catchphrase}</p>
                    <p><strong>èª¬æ˜:</strong> ${engineOS.description}</p>
                </div>
                <div class="os-card" style="border-color: #8b5cf6;">
                    <h3>Interface OS</h3>
                    <p><strong>å¦:</strong> ${interfaceOS.hexagramName}</p>
                    <p><strong>ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º:</strong> ${interfaceOS.catchphrase}</p>
                    <p><strong>èª¬æ˜:</strong> ${interfaceOS.description}</p>
                </div>
                <div class="os-card" style="border-color: #10b981;">
                    <h3>Safe Mode OS</h3>
                    <p><strong>å¦:</strong> ${safeModeOS.hexagramName}</p>
                    <p><strong>ã‚­ãƒ£ãƒƒãƒãƒ•ãƒ¬ãƒ¼ã‚º:</strong> ${safeModeOS.catchphrase}</p>
                    <p><strong>èª¬æ˜:</strong> ${safeModeOS.description}</p>
                </div>
            `;
            
            const results = document.getElementById('test-results');
            results.innerHTML = '<h3 class="success">âœ… çµæœè¡¨ç¤ºæˆåŠŸ</h3>';
        }
        
        // ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒãƒ†ã‚¹ãƒˆ
        function testEnergyDisplay() {
            if (!window.testTripleOS) {
                testTripleOSCalculation();
            }
            
            const ctx = document.getElementById('energy-chart').getContext('2d');
            
            // æ—¢å­˜ã®ãƒãƒ£ãƒ¼ãƒˆã‚’ç ´æ£„
            if (window.energyChart) {
                window.energyChart.destroy();
            }
            
            const trigramLabels = ['ä¹¾', 'å…Œ', 'é›¢', 'éœ‡', 'å·½', 'å', 'è‰®', 'å¤'];
            const { engineOS, interfaceOS, safeModeOS } = window.testTripleOS;
            
            window.energyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: trigramLabels,
                    datasets: [
                        {
                            label: 'Engine OS',
                            data: trigramLabels.map(t => engineOS.trigramEnergies[t] || 0),
                            backgroundColor: 'rgba(99, 102, 241, 0.6)',
                            borderColor: 'rgba(99, 102, 241, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Interface OS',
                            data: trigramLabels.map(t => interfaceOS.trigramEnergies[t] || 0),
                            backgroundColor: 'rgba(139, 92, 246, 0.6)',
                            borderColor: 'rgba(139, 92, 246, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Safe Mode OS',
                            data: trigramLabels.map(t => safeModeOS.trigramEnergies[t] || 0),
                            backgroundColor: 'rgba(16, 185, 129, 0.6)',
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            const results = document.getElementById('test-results');
            results.innerHTML = '<h3 class="success">âœ… ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒè¡¨ç¤ºæˆåŠŸ</h3>';
        }
        
        // OSç›¸äº’é–¢ä¿‚ãƒ†ã‚¹ãƒˆ
        function testOSInteraction() {
            const results = document.getElementById('test-results');
            
            if (!window.testTripleOS) {
                testTripleOSCalculation();
            }
            
            // ç›¸äº’é–¢ä¿‚ã®è¨ˆç®—ï¼ˆç°¡æ˜“ç‰ˆï¼‰
            const interaction = {
                consistency: 85,
                balance: 72,
                integration: 90,
                dominantOS: 'Engine OS',
                recommendation: '3ã¤ã®OSãŒãƒãƒ©ãƒ³ã‚¹ã‚ˆãæ©Ÿèƒ½ã—ã¦ã„ã¾ã™'
            };
            
            results.innerHTML = `
                <h3 class="success">âœ… OSç›¸äº’é–¢ä¿‚åˆ†ææˆåŠŸ</h3>
                <p><strong>æ•´åˆæ€§ã‚¹ã‚³ã‚¢:</strong> ${interaction.consistency}%</p>
                <p><strong>ãƒãƒ©ãƒ³ã‚¹ã‚¹ã‚³ã‚¢:</strong> ${interaction.balance}%</p>
                <p><strong>çµ±åˆåº¦:</strong> ${interaction.integration}%</p>
                <p><strong>å„ªå‹¢OS:</strong> ${interaction.dominantOS}</p>
                <p><strong>æ¨å¥¨äº‹é …:</strong> ${interaction.recommendation}</p>
            `;
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•å®Ÿè¡Œ
        window.addEventListener('load', () => {
            testTripleOSCalculation();
            testResultDisplay();
        });
    </script>
</body>
</html>