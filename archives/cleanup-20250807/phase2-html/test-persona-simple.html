<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persona Enhancement Test</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: #f1f5f9;
            padding: 2rem;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 1rem 0;
        }
        .virtual-persona-card {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.8));
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1rem 0;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .virtual-persona-card:hover {
            border-color: rgba(99, 102, 241, 0.6);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }
        .persona-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
        }
        .persona-symbol {
            font-size: 2.5rem;
        }
        .persona-name {
            font-size: 1.5rem;
            font-weight: 600;
            color: #a855f7;
            margin: 0;
        }
        .persona-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .persona-metaphor {
            font-style: italic;
            color: #cbd5e1;
            font-size: 1.1rem;
        }
        .persona-catchphrase {
            font-weight: 500;
            color: #6366f1;
            font-size: 1.1rem;
        }
        .persona-traits {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }
        .trait-tag {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
            color: #a855f7;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        .persona-description {
            color: #94a3b8;
            line-height: 1.6;
        }
        .test-button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.3);
        }
        .log {
            background: #0f172a;
            color: #94a3b8;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            margin: 1rem 0;
            max-height: 200px;
            overflow-y: auto;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ­ Persona Enhancement Test</h1>
        
        <div class="test-section">
            <h2>VirtualPersonaEnhancer Status</h2>
            <div id="status-log" class="log">Loading...</div>
            <button class="test-button" onclick="testPersonaEnhancer()">Test Persona Enhancer</button>
        </div>
        
        <div class="test-section">
            <h2>Generated Persona Cards</h2>
            <div id="persona-cards"></div>
        </div>
        
        <div class="test-section">
            <h2>Test Results</h2>
            <div id="test-results" class="log">Ready to test...</div>
        </div>
    </div>
    
    <script>
        // VirtualPersonaEnhancer ã‚¯ãƒ©ã‚¹å®šç¾©ï¼ˆç°¡ç•¥ç‰ˆï¼‰
        class VirtualPersonaEnhancer {
            constructor() {
                this.name = 'VirtualPersonaEnhancer';
                this.version = '1.0.0';
                this.philosophy = 'haqei-persona-enhancement';
                
                this.personas = {
                    engine: {
                        name: "å‰µé€ ã®æ¢æ¤œå®¶",
                        symbol: "ğŸš€",
                        traits: ["å¥½å¥‡å¿ƒæ—ºç››", "é©æ–°çš„", "ãƒãƒ£ãƒ¬ãƒ³ã‚¸ç²¾ç¥"],
                        catchphrase: "æ–°ã—ã„å¯èƒ½æ€§ã‚’åˆ‡ã‚Šé–‹ã",
                        metaphor: "æœªè¸ã®åœ°ã‚’æ¢æ±‚ã™ã‚‹å†’é™ºè€…ã®ã‚ˆã†ã«",
                        hexagramStyle: "ä¹¾ç‚ºå¤©ï¼ˆå‰µé€ åŠ›ã®è±¡å¾´ï¼‰"
                    },
                    interface: {
                        name: "èª¿å’Œã®æ©‹æ¸¡ã—",
                        symbol: "ğŸ¤",
                        traits: ["å…±æ„ŸåŠ›", "å”èª¿æ€§", "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³"],
                        catchphrase: "äººã¨ã®ç¹‹ãŒã‚Šã‚’å¤§åˆ‡ã«ã™ã‚‹",
                        metaphor: "ç•°ãªã‚‹ä¸–ç•Œã‚’ç¹‹ãæ©‹ã®ã‚ˆã†ã«",
                        hexagramStyle: "åœ°å¤©æ³°ï¼ˆèª¿å’Œã®è±¡å¾´ï¼‰"
                    },
                    safemode: {
                        name: "æ…é‡ãªå®ˆè­·è€…",
                        symbol: "ğŸ›¡ï¸",
                        traits: ["åˆ†æåŠ›", "æ…é‡æ€§", "å®‰å…¨å¿—å‘"],
                        catchphrase: "ãƒªã‚¹ã‚¯ã‚’è¦‹æ¥µã‚ã€å®‰å…¨ã‚’ç¢ºä¿ã™ã‚‹",
                        metaphor: "åµã®ä¸­ã§ã‚‚ç¯å°ã®ã‚ˆã†ã«",
                        hexagramStyle: "å±±é›·é ¤ï¼ˆæ…é‡ã•ã®è±¡å¾´ï¼‰"
                    }
                };
                
                this.isInitialized = true;
                console.log('ğŸ­ VirtualPersonaEnhancer initialized');
            }
            
            enhanceOSResult(osResult, osType) {
                const persona = this.personas[osType];
                if (!persona) return osResult;
                
                return {
                    ...osResult,
                    persona: {
                        name: persona.name,
                        symbol: persona.symbol,
                        traits: persona.traits,
                        catchphrase: persona.catchphrase,
                        metaphor: persona.metaphor,
                        hexagramStyle: persona.hexagramStyle,
                        description: `ã‚ãªãŸã®${persona.name}ã¯ã€${persona.metaphor}ã€${persona.catchphrase}ç‰¹å¾´ã‚’æŒã£ã¦ã„ã¾ã™ã€‚`
                    }
                };
            }
            
            generatePersonaCard(osResult, osType) {
                const enhancedResult = this.enhanceOSResult(osResult, osType);
                const persona = enhancedResult.persona;
                
                return `
                    <div class="virtual-persona-card">
                        <div class="persona-header">
                            <span class="persona-symbol">${persona.symbol}</span>
                            <h3 class="persona-name">${persona.name}</h3>
                        </div>
                        <div class="persona-content">
                            <p class="persona-metaphor">${persona.metaphor}</p>
                            <p class="persona-catchphrase">"${persona.catchphrase}"</p>
                            <div class="persona-traits">
                                ${persona.traits.map(trait => `<span class="trait-tag">${trait}</span>`).join('')}
                            </div>
                            <p class="persona-description">${persona.description}</p>
                        </div>
                    </div>
                `;
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆæœŸåŒ–
        let virtualPersonaEnhancer = null;
        
        function logMessage(message, type = 'info') {
            const log = document.getElementById('status-log');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            log.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            log.scrollTop = log.scrollHeight;
        }
        
        function testPersonaEnhancer() {
            try {
                logMessage('ğŸ”§ Testing VirtualPersonaEnhancer...', 'info');
                
                // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
                virtualPersonaEnhancer = new VirtualPersonaEnhancer();
                logMessage('âœ… VirtualPersonaEnhancer created successfully', 'success');
                
                // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
                const testData = {
                    hexagramName: 'ä¹¾ç‚ºå¤©',
                    description: 'ãƒ†ã‚¹ãƒˆç”¨ã®OSåˆ†æçµæœ',
                    trigramEnergies: { 'ä¹¾': 85, 'å…Œ': 70, 'é›¢': 60 }
                };
                
                // å„OSã‚¿ã‚¤ãƒ—ã®ãƒšãƒ«ã‚½ãƒŠã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
                const osTypes = ['engine', 'interface', 'safemode'];
                const personaCardsContainer = document.getElementById('persona-cards');
                personaCardsContainer.innerHTML = '';
                
                osTypes.forEach(osType => {
                    try {
                        const personaCard = virtualPersonaEnhancer.generatePersonaCard(testData, osType);
                        personaCardsContainer.innerHTML += `
                            <div>
                                <h3>${osType.toUpperCase()} OS</h3>
                                ${personaCard}
                            </div>
                        `;
                        logMessage(`âœ… ${osType} persona card generated`, 'success');
                    } catch (error) {
                        logMessage(`âŒ Failed to generate ${osType} persona: ${error.message}`, 'error');
                    }
                });
                
                // çµæœãƒ¬ãƒãƒ¼ãƒˆ
                const testResults = document.getElementById('test-results');
                testResults.innerHTML = `Test Completed at ${new Date().toLocaleTimeString()}\n`;
                testResults.innerHTML += `âœ… VirtualPersonaEnhancer: Working\n`;
                testResults.innerHTML += `âœ… Persona Cards Generated: ${osTypes.length}\n`;
                testResults.innerHTML += `âœ… Traits Display: Working\n`;
                testResults.innerHTML += `âœ… Metaphors & Catchphrases: Working\n`;
                testResults.innerHTML += `ğŸ¯ Overall Status: SUCCESS\n`;
                
                logMessage('ğŸ¯ All tests completed successfully!', 'success');
                
            } catch (error) {
                logMessage(`âŒ Test failed: ${error.message}`, 'error');
                
                const testResults = document.getElementById('test-results');
                testResults.innerHTML = `Test Failed at ${new Date().toLocaleTimeString()}\n`;
                testResults.innerHTML += `âŒ Error: ${error.message}\n`;
                testResults.innerHTML += `ğŸš¨ Overall Status: FAILED\n`;
            }
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            logMessage('ğŸš€ Persona Enhancement Test initialized', 'info');
            logMessage('ğŸ“‹ Click "Test Persona Enhancer" to run tests', 'info');
        });
    </script>
</body>
</html>