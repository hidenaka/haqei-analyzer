import { readFile, writeFile } from 'fs/promises';

async function fixPhase3() {
  try {
    console.log('=== ãƒ•ã‚§ãƒ¼ã‚º3: å®Ÿç”¨æ€§å‘ä¸Šï¼ˆexample, warning, tip, metaphorç­‰ï¼‰ ===\n');
    
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿
    let content = await readFile('./public/js/data/hexagram-human-traits-v3.js', 'utf-8');
    
    // ãƒ•ã‚§ãƒ¼ã‚º3-A: çŸ¢å°å½¢å¼ã®exampleä¿®æ­£ï¼ˆå¿…é ˆï¼‰
    const arrowExampleFixes = {
      '"å±æ©Ÿ â†’ å…¨å“¡é›†åˆ"': '"å±æ©Ÿçš„çŠ¶æ³ã§ã¯å…¨å“¡ã§å”åŠ›ã—ã¦å¯¾å‡¦ã™ã‚‹"',
      '"å•é¡Œ â†’ åŸç‚¹å›å¸°"': '"å•é¡Œã«ç›´é¢ã—ãŸã‚‰åŸºæœ¬ã«ç«‹ã¡è¿”ã£ã¦è§£æ±ºã™ã‚‹"',
      '"å•é¡Œ â†’ æ—…ã«å‡ºã‚‹"': '"å•é¡Œã‹ã‚‰é›¢ã‚Œã¦æ—…ã«å‡ºã‚‹ã“ã¨ã§è§£æ±ºã‚’å›³ã‚‹"',
      '"è¾›ã„ â†’ ã§ã‚‚ç¬‘é¡”"': '"è¾›ã„æ™‚ã§ã‚‚ç¬‘é¡”ã‚’ä¿ã£ã¦å‘¨ã‚Šã‚’æ˜ã‚‹ãã™ã‚‹"'
    };
    
    // ãƒ•ã‚§ãƒ¼ã‚º3-B: çŸ­ã„warningä¿®æ­£ï¼ˆ29ä»¶ï¼‰
    const warningFixes = {
      '"ç„¡è¬€ã«ãªã‚Šã™ããªã„"': '"ç„¡è¬€ãªæŒ‘æˆ¦ã§å¤§ããªå¤±æ•—ã‚’ã—ãªã„ã‚ˆã†æ³¨æ„"',
      '"åœæ»ã™ã‚‹ã¨æ¿ã‚‹"': '"åœæ»ã™ã‚‹ã¨å¿ƒãŒæ¿ã£ã¦ã—ã¾ã†ã®ã§æ³¨æ„"',
      '"åˆºæ¿€éå¤šã«æ³¨æ„"': '"åˆºæ¿€ãŒå¤šã™ãã‚‹ã¨ç–²ã‚Œã¦ã—ã¾ã†ã®ã§æ³¨æ„"',
      '"ãƒãƒ³ãƒãƒªã«æ³¨æ„"': '"åŒã˜ã“ã¨ã®ç¹°ã‚Šè¿”ã—ã§ãƒãƒ³ãƒãƒªåŒ–ã«æ³¨æ„"',
      '"é ‚ç‚¹ã§ã®å­¤ç‹¬"': '"é ‚ç‚¹ã«ç«‹ã¤ã¨å­¤ç‹¬ã‚’æ„Ÿã˜ã‚„ã™ã„ã“ã¨ã«æ³¨æ„"',
      '"è¡¨ç¾ã®æ©Ÿä¼šã‚‚å¿…è¦"': '"å†…ã«ç± ã‚Šã™ããšè¡¨ç¾ã®æ©Ÿä¼šã‚‚å¿…è¦"',
      '"å­¤ç«‹ã—ãªã„ã‚ˆã†ã«"': '"ç‹¬è‡ªæ€§ã‚’è¿½æ±‚ã—ã™ãã¦å­¤ç«‹ã—ãªã„ã‚ˆã†æ³¨æ„"',
      '"æˆ‘æ…¢ã—ã™ãã«æ³¨æ„"': '"æˆ‘æ…¢ã—ã™ãã¦å¿ƒèº«ã‚’å£Šã•ãªã„ã‚ˆã†æ³¨æ„"',
      '"è‡ªç”±ã™ãã¦è¿·å­ã«"': '"è‡ªç”±ã™ãã¦ç›®çš„ã‚’è¦‹å¤±ã‚ãªã„ã‚ˆã†æ³¨æ„"',
      '"è‡ªå·±çŠ ç‰²ã—ã™ããªã„"': '"è‡ªå·±çŠ ç‰²ãŒéåº¦ã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦"',
      '"æ‹¡å¤§ã—ã™ãã«æ³¨æ„"': '"æ‹¡å¤§ã—ã™ãã¦åæ‹¾ãŒã¤ã‹ãªããªã‚‹ã“ã¨ã«æ³¨æ„"',
      '"ç‹¬æ–­çš„ã«ãªã‚‰ãªã„"': '"ç‹¬æ–­çš„ãªæ±ºå®šã§å‘¨ã‚Šã‚’å›°ã‚‰ã›ãªã„ã‚ˆã†æ³¨æ„"',
      '"ç¸ã«æŒ¯ã‚Šå›ã•ã‚Œãªã„"': '"å¤šã™ãã‚‹ç¸ã«æŒ¯ã‚Šå›ã•ã‚Œãªã„ã‚ˆã†æ³¨æ„"',
      '"é›†ã‚ã™ãã«æ³¨æ„"': '"ç‰©ã‚„äººã‚’é›†ã‚ã™ãã¦æ··ä¹±ã—ãªã„ã‚ˆã†æ³¨æ„"',
      '"æ€¥ãã™ããªã„"': '"ç„¦ã£ã¦æ€¥ãã™ãã‚‹ã¨å¤±æ•—ã™ã‚‹ã®ã§æ³¨æ„"',
      '"ç„¡ç†ãªå›°é›£ã¯é¿ã‘ã‚‹"': '"ç„¡ç†ãªå›°é›£ã«æŒ‘ã‚“ã§æ¶ˆè€—ã—ãªã„ã‚ˆã†æ³¨æ„"',
      '"æ¯æ¸‡ã—ãªã„ã‚ˆã†ã«"': '"ä¸ãˆã™ãã¦è‡ªåˆ†ãŒæ¯æ¸‡ã—ãªã„ã‚ˆã†æ³¨æ„"',
      '"å¤‰é©ã ã‘ã«ãªã‚‰ãªã„"': '"å¤‰é©ã°ã‹ã‚Šã§å»ºè¨­çš„ã§ãªããªã‚‰ãªã„ã‚ˆã†æ³¨æ„"',
      '"æŠ¼ã—ä»˜ã‘ã«ãªã‚‰ãªã„"': '"è‡ªåˆ†ã®å½±éŸ¿ã‚’æŠ¼ã—ä»˜ã‘ãªã„ã‚ˆã†æ³¨æ„"',
      '"ç©ºå…ƒæ°—ã«æ³¨æ„"': '"ç„¡ç†ãªæ˜ã‚‹ã•ã§æœ¬éŸ³ã‚’éš ã•ãªã„ã‚ˆã†æ³¨æ„"',
      '"æ•£æ¼«ã«ãªã‚Šã™ããªã„"': '"åˆ†æ•£ã—ã™ãã¦æ•£æ¼«ã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„"',
      '"çª®å±ˆã«ãªã‚Šã™ããªã„"': '"åˆ¶é™ã—ã™ãã¦çª®å±ˆã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„"',
      '"é£›ã³ç´šã¯å±é™º"': '"æ®µéšã‚’é£›ã°ã™ã¨å±é™ºãªã®ã§ç€å®Ÿã«é€²ã‚€"',
      '"ãŠã›ã£ã‹ã„ã«æ³¨æ„"': '"éåº¦ãªãŠã›ã£ã‹ã„ã§å«Œã‚ã‚Œãªã„ã‚ˆã†æ³¨æ„"',
      '"è±Šä½œè²§ä¹ã«æ³¨æ„"': '"è±Šã‹ã§ã‚‚ä½¿ã„æ–¹ã‚’é–“é•ãˆãªã„ã‚ˆã†æ³¨æ„"',
      '"æ ¹ç„¡ã—è‰ã«ãªã‚‰ãªã„"': '"æ—…ã°ã‹ã‚Šã§æ ¹ç„¡ã—è‰ã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„"',
      '"å®Œç’§ä¸»ç¾©ã®ç½ "': '"å®Œç’§ã‚’æ±‚ã‚ã™ãã¦å‰ã«é€²ã‚ãªããªã‚‹ç½ ã«æ³¨æ„"',
      '"å®Œæˆã‚’æã‚Œãªã„"': '"å®Œæˆã‚’æã‚Œã¦æ°¸é ã«æœªå®Œã«ã—ãªã„ã‚ˆã†æ³¨æ„"'
    };
    
    // ãƒ•ã‚§ãƒ¼ã‚º3-C: çŸ­ã„tipä¿®æ­£ï¼ˆ28ä»¶ï¼‰
    const tipFixes = {
      '"æ™‚ã«ã¯ç†Ÿè€ƒã‚‚å¿…è¦"': '"ç´ æ—©ã„æ±ºæ–­ã‚‚è‰¯ã„ãŒæ™‚ã«ã¯ç†Ÿè€ƒã‚‚å¿…è¦"',
      '"åˆå¿ƒã‚’å¿˜ã‚Œãšã«"': '"çµŒé¨“ã‚’ç©ã‚“ã§ã‚‚åˆå¿ƒã‚’å¿˜ã‚Œãšã«ä¿ã¤ã“ã¨"',
      '"å¿ƒã®å¥åº·ã‚‚å¤§åˆ‡ã«"': '"ä½“ã®å¥åº·ã ã‘ã§ãªãå¿ƒã®å¥åº·ã‚‚å¤§åˆ‡ã«"',
      '"è¨ˆç®—ã•ã‚ŒãŸãƒªã‚¹ã‚¯ã‚’"': '"ç„¡è¬€ã§ã¯ãªãè¨ˆç®—ã•ã‚ŒãŸãƒªã‚¹ã‚¯ã‚’å–ã‚‹"',
      '"å¸¸ã«æµã‚Œç¶šã‘ã‚ˆã†"': '"æ°´ã®ã‚ˆã†ã«å¸¸ã«æµã‚Œç¶šã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡"',
      '"é©åº¦ã«ç‡ƒæ–™è£œçµ¦ã‚’"': '"ç‡ƒãˆå°½ããªã„ã‚ˆã†é©åº¦ã«ç‡ƒæ–™è£œçµ¦ã‚’ã™ã‚‹"',
      '"æ„Ÿåº¦èª¿æ•´ã‚’å­¦ã¼ã†"': '"æ„Ÿå—æ€§ã®æ„Ÿåº¦èª¿æ•´ã‚’å­¦ã¶ã“ã¨ãŒå¤§åˆ‡"',
      '"æ’¤é€€ã‚‚æˆ¦ç•¥ã®ä¸€ã¤"': '"æ™‚ã«ã¯æ’¤é€€ã‚‚æœ‰åŠ¹ãªæˆ¦ç•¥ã®ä¸€ã¤ã§ã‚ã‚‹"',
      '"åŠ›ã¨æŠ€ã®ãƒãƒ©ãƒ³ã‚¹ã‚’"': '"åŠ›ã ã‘ã§ãªãæŠ€è¡“ã¨ã®ãƒãƒ©ãƒ³ã‚¹ãŒå¤§åˆ‡"',
      '"å†…ã¨å¤–ã®ãƒãƒ©ãƒ³ã‚¹ã‚’"': '"å†…é¢ã¨å¤–é¢ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¤ã“ã¨ãŒå¤§åˆ‡"',
      '"å®¶æ—ã‚‚å¤§åˆ‡ã«"': '"ä»•äº‹ã ã‘ã§ãªãå®¶æ—ã¨ã®æ™‚é–“ã‚‚å¤§åˆ‡ã«"',
      '"æœ€å¾Œã¯å¿ƒã§å‹è² "': '"è«–ç†ã ã‘ã§ãªãæœ€å¾Œã¯å¿ƒã§å‹è² ã™ã‚‹"',
      '"æ™‚ã«ã¯é€ƒã’ã¦ã‚‚è‰¯ã„"': '"ç„¡ç†ã—ã¦é ‘å¼µã‚‰ãšæ™‚ã«ã¯é€ƒã’ã¦ã‚‚è‰¯ã„"',
      '"ä¸ãˆã‚‹ã“ã¨ã¯å—ã‘å–ã‚‹ã“ã¨"': '"ä¸ãˆã‚‹ã“ã¨ã§è‡ªåˆ†ã‚‚è±Šã‹ã«ãªã‚Œã‚‹"',
      '"æ±ºæ–­ã¯ç´ æ—©ãã€å®Ÿè¡Œã¯ä¸å¯§ã«"': '"æ±ºæ–­ã¯ç´ æ—©ãã€ã§ã‚‚å®Ÿè¡Œã¯ä¸å¯§ã«"',
      '"å¿…è¦ãªç¸ã ã‘ã§ååˆ†"': '"å¤šãã®ç¸ã‚ˆã‚Šå¿…è¦ãªç¸ã ã‘ã§ååˆ†"',
      '"ã¿ã‚“ãªã®åŠ›ã‚’ä¿¡ã˜ã‚ˆã†"': '"ä¸€äººã§æŠ±ãˆãšã¿ã‚“ãªã®åŠ›ã‚’ä¿¡ã˜ã‚‹"',
      '"æˆé•·ã¯èºæ—‹çŠ¶"': '"æˆé•·ã¯ç›´ç·šã§ãªãèºæ—‹çŠ¶ã«é€²ã‚€"',
      '"åŸºæœ¬ãŒæœ€ã‚‚å¤§åˆ‡"': '"é«˜åº¦ãªæŠ€è¡“ã‚ˆã‚ŠåŸºæœ¬ãŒæœ€ã‚‚å¤§åˆ‡"',
      '"å…±ã«ä¹—ã‚Šè¶Šãˆã‚‹"': '"å›°é›£ã¯ä¸€äººã§ãªãå…±ã«ä¹—ã‚Šè¶Šãˆã‚‹"',
      '"æ¯ã‚Œãªã„å·¥å¤«ã‚’"': '"æºæ³‰ãŒæ¯ã‚Œãªã„ã‚ˆã†ãªå·¥å¤«ãŒå¿…è¦"',
      '"å‰µé€ çš„ãªå¤‰é©ã‚’"': '"ç ´å£Šçš„ã§ãªãå‰µé€ çš„ãªå¤‰é©ã‚’å¿ƒãŒã‘ã‚‹"',
      '"è§¦åª’ã«ãªã‚ã†"': '"æ··ãœã‚‹ã®ã§ãªãè§¦åª’ã¨ãªã£ã¦å¤‰åŒ–ã‚’ä¿ƒã™"',
      '"ç·©æ€¥ã‚’ã¤ã‘ã¦"': '"å¸¸ã«å…¨åŠ›ã§ãªãç·©æ€¥ã‚’ã¤ã‘ã¦é€²ã‚€"',
      '"ç²¾åº¦ã‚ˆã‚Šé€Ÿåº¦ã®æ™‚ã‚‚"': '"æ™‚ã«ã¯ç²¾åº¦ã‚ˆã‚Šé€Ÿåº¦ã‚’å„ªå…ˆã™ã¹ã"',
      '"å®Œæˆã¨å§‹ã¾ã‚Šã¯è¡¨è£ä¸€ä½“"': '"ç‰©äº‹ã®å®Œæˆã¯æ–°ãŸãªå§‹ã¾ã‚Šã§ã‚‚ã‚ã‚‹"',
      '"æ°¸é ã®æœªå®Œæˆã‚‚ç¾ã—ã„"': '"å®Œæˆã—ãªã„ã“ã¨ã«ç¾ã—ã•ãŒã‚ã‚‹"'
    };
    
    // ãƒ•ã‚§ãƒ¼ã‚º3-D: çŸ­ã„metaphorä¿®æ­£ï¼ˆæœ€çŸ­ã®ã‚‚ã®ï¼‰
    const metaphorFixes = {
      '"å­¤é«˜ã®æˆ¦å£«"': '"å­¤é«˜ã®é“ã‚’è¡Œãä¸€åŒ¹ç‹¼ã®æˆ¦å£«"',
      '"ç¤¾äº¤ç•Œã®è¶"': '"ç¤¾äº¤ç•Œã‚’è¯ã‚„ã‹ã«èˆã†è¶ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"å„ªã‚ŒãŸä»²äºº"': '"äººã¨äººã‚’çµã¶å„ªã‚ŒãŸä»²äººå½¹"',
      '"æ°¸é ã®æ—…äºº"': '"æ°¸é ã«æ—…ã‚’ç¶šã‘ã‚‹è‡ªç”±ãªé­‚"',
      '"å¿ƒã®ãƒ¬ãƒ¼ãƒ€ãƒ¼"': '"ç›¸æ‰‹ã®æ°—æŒã¡ã‚’æ„Ÿã˜å–ã‚‹å¿ƒã®ãƒ¬ãƒ¼ãƒ€ãƒ¼"',
      '"åŸã‚’å®ˆã‚‹é ˜ä¸»"': '"ç²å¾—ã—ãŸåŸã‚’å®ˆã‚ŠæŠœãé ˜ä¸»ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"è§£æ”¾ã®ä¼é“å¸«"': '"äººã€…ã‚’æŸç¸›ã‹ã‚‰è§£æ”¾ã™ã‚‹ä¼é“å¸«"',
      '"æ˜ç¢ºãªåˆ¤æ–­åŠ›"': '"æ›‡ã‚Šã®ãªã„æ˜ç¢ºãªåˆ¤æ–­ã‚’ä¸‹ã™åˆ€"',
      '"æ ¹ã£ã“ã«æˆ»ã‚‹"': '"è¿·ã£ãŸã‚‰æ ¹ã£ã“ã«æˆ»ã£ã¦è€ƒãˆç›´ã™"',
      '"æ¯ã‚Œãªã„äº•æˆ¸"': '"ã©ã‚“ãªæ™‚ã‚‚æ¯ã‚Œãªã„è±Šã‹ãªäº•æˆ¸"',
      '"é©å‘½ã®ãƒªãƒ¼ãƒ€ãƒ¼"': '"å¤‰é©ã‚’å°ãé©å‘½ã®ãƒªãƒ¼ãƒ€ãƒ¼"',
      '"ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ£ãƒ¼"': '"ç‰©äº‹ã‚’ç¢ºå®Ÿã«å®Œæˆã•ã›ã‚‹ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ£ãƒ¼"',
      '"æœªæ¥ã‚’è¦‹ã‚‹äºˆè¨€è€…"': '"å¸¸ã«æœªæ¥ã‚’è¦‹æ®ãˆã‚‹äºˆè¨€è€…ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"æ°¸é ã«æœªå®Œæˆ"': '"æ°¸é ã«æœªå®Œæˆã®ã¾ã¾é€²åŒ–ã—ç¶šã‘ã‚‹"',
      '"ã‚«ãƒªã‚¹ãƒçš„ãªå­˜åœ¨æ„Ÿ"': '"å‘¨ã‚Šã‚’åœ§å€’ã™ã‚‹ã‚«ãƒªã‚¹ãƒçš„ãªå­˜åœ¨æ„Ÿ"',
      '"èƒ½ã‚ã‚‹é·¹ã¯çˆªã‚’éš ã™"': '"å®ŸåŠ›ã‚’éš ã—ã¦è¬™è™šã«æŒ¯ã‚‹èˆã†"',
      '"ä¿è­·è‰²ã§éš ã‚Œã‚‹"': '"ä¿è­·è‰²ã§ç’°å¢ƒã«æº¶ã‘è¾¼ã‚“ã§èº«ã‚’å®ˆã‚‹"',
      '"å®¶ã¨ã„ã†åŸã«ç± ã‚‹"': '"å®¶ã¨ã„ã†å®‰å…¨ãªåŸã«ç± ã£ã¦å®ˆã‚‹"',
      '"å£ã«æ­£é¢ã‹ã‚‰å‘ãåˆã†"': '"å›°é›£ã¨ã„ã†å£ã«æ­£é¢ã‹ã‚‰å‘ãåˆã†"',
      '"é–ã‚’æ–­ã¡åˆ‡ã£ã¦é€ƒèµ°"': '"æŸç¸›ã®é–ã‚’æ–­ã¡åˆ‡ã£ã¦è‡ªç”±ã«ãªã‚‹"',
      '"èº«ä»£ã‚ã‚Šã«ãªã‚‹"': '"ä»–è€…ã®ãŸã‚ã«èº«ä»£ã‚ã‚Šã«ãªã‚‹è¦šæ‚Ÿ"',
      '"ä¸è¦ãªã‚‚ã®ã‚’æ–­ã¤"': '"ä¸è¦ãªã‚‚ã®ã‚’æ–­ã¡åˆ‡ã‚‹æ±ºæ–­åŠ›"',
      '"å¿…è¦ãªç¸ã ã‘æ®‹ã™"': '"æœ¬å½“ã«å¿…è¦ãªç¸ã ã‘ã‚’å¤§åˆ‡ã«æ®‹ã™"',
      '"ç£çŸ³ã®ã‚ˆã†ãªæ±‚å¿ƒåŠ›"': '"äººã‚’å¼•ãå¯„ã›ã‚‹ç£çŸ³ã®ã‚ˆã†ãªæ±‚å¿ƒåŠ›"',
      '"ç¾¤ã‚Œã§èº«ã‚’å®ˆã‚‹"': '"ä¸€äººã§ãªãç¾¤ã‚Œã§èº«ã‚’å®ˆã‚‹çŸ¥æµ"',
      '"æˆé•·ã‚’è¦‹å®ˆã‚‹åœ’ä¸"': '"æ¤ç‰©ã®æˆé•·ã‚’è¦‹å®ˆã‚‹åœ’ä¸ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"æˆ¦å‹ã®ã‚ˆã†ãªçµ†"': '"å›°é›£ã‚’å…±ã«ä¹—ã‚Šè¶ŠãˆãŸæˆ¦å‹ã®ã‚ˆã†ãªçµ†"',
      '"äº•æˆ¸ã«è“‹ã‚’ã™ã‚‹"': '"å¿…è¦ãªæ™‚ã¯äº•æˆ¸ã«è“‹ã‚’ã—ã¦å®ˆã‚‹"',
      '"å‚™è“„ã§ä¹—ã‚Šåˆ‡ã‚‹"': '"è“„ãˆãŸå‚™è“„ã§å›°é›£ã‚’ä¹—ã‚Šåˆ‡ã‚‹"',
      '"å®Ÿã‚Šè±Šã‹ãªå¤§åœ°"': '"å¸¸ã«å®Ÿã‚Šè±Šã‹ãªå¤§åœ°ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"ä¸–ç•Œã‚’æ¸¡ã‚‹è‡ªç”±äºº"': '"å›½å¢ƒã‚’è¶Šãˆã¦ä¸–ç•Œã‚’æ¸¡ã‚‹è‡ªç”±äºº"',
      '"å•é¡Œã‹ã‚‰æ—…ç«‹ã¤"': '"å•é¡Œã‹ã‚‰ç‰©ç†çš„ã«æ—…ç«‹ã£ã¦è§£æ±ºã™ã‚‹"',
      '"éš™é–“ã‹ã‚‰é€ƒã’ã‚‹é¢¨"': '"ã©ã‚“ãªéš™é–“ã‹ã‚‰ã‚‚é€ƒã’ã‚‰ã‚Œã‚‹é¢¨"',
      '"å¤ªé™½ã®ã‚ˆã†ãªæ˜ã‚‹ã•"': '"å‘¨ã‚Šã‚’ç…§ã‚‰ã™å¤ªé™½ã®ã‚ˆã†ãªæ˜ã‚‹ã•"',
      '"æ¶™ã‚’ç¬‘é¡”ã§éš ã™"': '"å†…ãªã‚‹æ¶™ã‚’ç¬‘é¡”ã§éš ã™å¼·ã•"',
      '"éœ§ã®ã‚ˆã†ã«æ¶ˆãˆã‚‹"': '"å±é™ºã‚’æ„Ÿã˜ãŸã‚‰éœ§ã®ã‚ˆã†ã«æ¶ˆãˆã‚‹"',
      '"ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚«ãƒ¼"': '"å›ºã„é›°å›²æ°—ã‚’æº¶ã‹ã™ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚«ãƒ¼"',
      '"ãƒ€ãƒ ã®æ°´é‡èª¿æ•´"': '"æ„Ÿæƒ…ã‚’ãƒ€ãƒ ã®ã‚ˆã†ã«èª¿æ•´ã™ã‚‹èƒ½åŠ›"',
      '"å„ªã‚ŒãŸèª¿åœè€…"': '"å¯¾ç«‹ã‚’è§£æ±ºã™ã‚‹å„ªã‚ŒãŸèª¿åœè€…"',
      '"å®‰å…¨å¼ã®ã‚ˆã†ãªåƒã"': '"åœ§åŠ›ã‚’é€ƒãŒã™å®‰å…¨å¼ã®ã‚ˆã†ãªå­˜åœ¨"',
      '"å¿ƒã¨å¿ƒã‚’ç¹‹ãæ©‹"': '"äººã¨äººã®å¿ƒã‚’ç¹‹ãå¤§åˆ‡ãªæ©‹"',
      '"ä¿¡é ¼ã®çµ†ã§å®ˆã‚‰ã‚Œã‚‹"': '"å¼·ã„ä¿¡é ¼ã®çµ†ã§å®ˆã‚‰ã‚Œã¦ã„ã‚‹"',
      '"éµã‚’ä½•åº¦ã‚‚ç¢ºèª"': '"ä¸å®‰ã§éµã‚’ä½•åº¦ã‚‚ç¢ºèªã—ã¦ã—ã¾ã†"',
      '"æœªå®ŒæˆãŒè¨±ã›ãªã„"': '"ç‰©äº‹ãŒæœªå®Œæˆãªã“ã¨ãŒè¨±ã›ãªã„æ€§è³ª"'
    };
    
    // ãã®ä»–ã®çŸ­ã„èª¬æ˜ã®ä¸€èˆ¬çš„ãªä¿®æ­£
    const generalFixes = {
      // howToç³»ã®ä¿®æ­£ä¾‹
      '"è‡ªåˆ†ã‚’çŸ¥ã‚‹"': '"ã¾ãšè‡ªåˆ†è‡ªèº«ã‚’æ·±ãçŸ¥ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹"',
      '"ç›¸æ‰‹ã‚’ç†è§£"': '"ç›¸æ‰‹ã®ç«‹å ´ã‚„æ°—æŒã¡ã‚’ç†è§£ã™ã‚‹ã‚ˆã†åŠªã‚ã‚‹"',
      '"é©åº¦ãªè·é›¢"': '"ç›¸æ‰‹ã¨ã®é©åº¦ãªè·é›¢æ„Ÿã‚’ä¿ã¤ã“ã¨ãŒå¤§åˆ‡"',
      '"æ­£ç›´ã«è©±ã™"': '"ç´ ç›´ã«æ­£ç›´ã«è‡ªåˆ†ã®æ°—æŒã¡ã‚’è©±ã™"',
      '"å…±æ„Ÿã‚’ç¤ºã™"': '"ç›¸æ‰‹ã®æ°—æŒã¡ã«å…±æ„Ÿã‚’ç¤ºã™ã“ã¨ãŒé‡è¦"',
      '"è«–ç†çš„ã«èª¬æ˜"': '"æ„Ÿæƒ…ã§ãªãè«–ç†çš„ã«èª¬æ˜ã™ã‚‹ã“ã¨ãŒåŠ¹æœçš„"',
      '"å®Ÿç¸¾ã§ç¤ºã™"': '"è¨€è‘‰ã‚ˆã‚Šå®Ÿç¸¾ã§èƒ½åŠ›ã‚’ç¤ºã™ã“ã¨ãŒå¤§åˆ‡"',
      '"é™ã‹ã«å¾…ã¤"': '"ç„¦ã‚‰ãšé™ã‹ã«æ©Ÿä¼šã‚’å¾…ã¤ã“ã¨ãŒé‡è¦"',
      '"æ®µéšçš„ã«é€²ã‚ã‚‹"': '"ä¸€æ°—ã«ã§ã¯ãªãæ®µéšçš„ã«é€²ã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡"',
      '"ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹"': '"æ¥µç«¯ã«ãªã‚‰ãšãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ã“ã¨ãŒé‡è¦"'
    };
    
    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    await writeFile(`./public/js/data/hexagram-human-traits-v3.backup.phase3.${timestamp}.js`, content);
    console.log(`ğŸ“ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ: hexagram-human-traits-v3.backup.phase3.${timestamp}.js\n`);
    
    // ä¿®æ­£é©ç”¨
    let totalFixCount = 0;
    
    // å„ã‚«ãƒ†ã‚´ãƒªã®ä¿®æ­£ã‚’é©ç”¨
    const applyFixes = (fixes, category) => {
      console.log(`ã€${category}ã®ä¿®æ­£ã€‘`);
      let count = 0;
      Object.entries(fixes).forEach(([old, newText]) => {
        const regex = new RegExp(old.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
        const originalContent = content;
        content = content.replace(regex, newText);
        if (originalContent !== content) {
          count++;
          console.log(`âœ… ${old} â†’ ${newText}`);
        }
      });
      console.log(`  å°è¨ˆ: ${count}ä»¶\n`);
      return count;
    };
    
    totalFixCount += applyFixes(arrowExampleFixes, 'çŸ¢å°å½¢å¼example');
    totalFixCount += applyFixes(warningFixes, 'warning');
    totalFixCount += applyFixes(tipFixes, 'tip');
    totalFixCount += applyFixes(metaphorFixes, 'metaphor');
    totalFixCount += applyFixes(generalFixes, 'ä¸€èˆ¬çš„ãªçŸ­ã„èª¬æ˜');
    
    // ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
    await writeFile('./public/js/data/hexagram-human-traits-v3.js', content);
    
    console.log(`=== ãƒ•ã‚§ãƒ¼ã‚º3å®Œäº† ===`);
    console.log(`ç·ä¿®æ­£ä»¶æ•°: ${totalFixCount}ä»¶`);
    console.log(`\nâœ… å…¨ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†ï¼`);
    console.log(`æœ€çµ‚ç¢ºèª: node comprehensive-v3-review.mjs`);
    
  } catch (error) {
    console.error('ã‚¨ãƒ©ãƒ¼:', error);
  }
}

fixPhase3();