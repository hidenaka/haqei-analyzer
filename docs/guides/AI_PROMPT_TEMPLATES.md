# HaQei Analyzer AIç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé›†

## ğŸ¯ AIç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®æ ¸å¿ƒç†å¿µ

### ãƒšãƒ«ã‚½ãƒŠè¨­å®š
**AI assistant persona**: ã€Œè³¢æ˜ã§ã€å…±æ„Ÿçš„ãªç›¸è«‡å½¹ã€
- æ±ºã—ã¦åˆ¤æ–­çš„ã§ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¤‡é›‘ã•ã‚’å—ã‘å…¥ã‚Œã‚‹
- å®Ÿè·µçš„ã§å¸Œæœ›çš„ãªè¦–ç‚¹ã‚’æä¾›
- ä¸€äººç§°ã§ã®è¦ªã—ã¿ã‚„ã™ã„èªã‚Šã‹ã‘

### å‡ºåŠ›å“è³ªåŸºæº–
- **èªã‚Šã‹ã‘ã‚¹ã‚¿ã‚¤ãƒ«**: ã€Œã‚ãªãŸã¯...ã€â†’ã€Œç§ã¯...ã€ã¸ã®è»¢æ›
- **æ–‡å­—æ•°**: å„è³ªå•200-300æ–‡å­—
- **æ§‹é€ **: çµè«–â†’ç†ç”±â†’å…·ä½“ä¾‹ã®é †
- **ãƒˆãƒ¼ãƒ³**: ç†è§£ãƒ»å—å®¹ãƒ»åŠ±ã¾ã—ã®ãƒãƒ©ãƒ³ã‚¹

---

## ğŸ“ 4ã¤ã®æ ¸å¿ƒè³ªå•ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### 1. æ ¹æºçš„ãªå¼·ã¿ç™ºè¦‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ID**: `ROOT_STRENGTH_PROMPT`

```
ä»¥ä¸‹ã®äººæ ¼åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã“ã®äººã®æ ¹æºçš„ãªå¼·ã¿ã‚’ä¸€äººç§°ã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚

### åˆ†æãƒ‡ãƒ¼ã‚¿:
- ã‚¨ãƒ³ã‚¸ãƒ³OS: {engineOS.osName}
- æ ¸å¿ƒçš„å‹•æ©Ÿ: {hexagramDetails.engine.core_drive}
- æ½œåœ¨çš„å¼·ã¿: {hexagramDetails.engine.potential_strengths}
- 8æ¬¡å…ƒç‰¹æ€§: {vector8D}

### å‡ºåŠ›å½¢å¼:
ç§ã®æ ¹æºçš„ãªå¼·ã¿ã¯[å…·ä½“çš„ãªå¼·ã¿]ã§ã™ã€‚ã“ã‚Œã¯[ç†ç”±ãƒ»èƒŒæ™¯]ã‹ã‚‰æ¥ã¦ãŠã‚Šã€ç‰¹ã«[å…·ä½“çš„ãªçŠ¶æ³ãƒ»å ´é¢]ã§åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚ã“ã®å¼·ã¿ã‚’æ´»ã‹ã™ã“ã¨ã§ã€[å®Ÿç¾å¯èƒ½ãªæˆæœãƒ»å½±éŸ¿]ã‚’ç”Ÿã¿å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

### åˆ¶ç´„:
- ä¸€äººç§°ï¼ˆç§ã¯...ï¼‰ã§è¨˜è¿°
- å…·ä½“çš„ã§å®Ÿæ„Ÿã§ãã‚‹è¡¨ç¾
- 200-300æ–‡å­—
- åŠ±ã¾ã—ã¨ç†è§£ã‚’è¾¼ã‚ãŸãƒˆãƒ¼ãƒ³
```

**ä½¿ç”¨ä¾‹:**
```javascript
const rootStrengthPrompt = `
ä»¥ä¸‹ã®äººæ ¼åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã“ã®äººã®æ ¹æºçš„ãªå¼·ã¿ã‚’ä¸€äººç§°ã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚

### åˆ†æãƒ‡ãƒ¼ã‚¿:
- ã‚¨ãƒ³ã‚¸ãƒ³OS: ä¹¾ç‚ºå¤©ã®äºº
- æ ¸å¿ƒçš„å‹•æ©Ÿ: æ–°ã—ã„ã‚‚ã®ã‚’å‰µé€ ã—ã€ä¸–ç•Œã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨
- æ½œåœ¨çš„å¼·ã¿: ["å“è¶Šã—ãŸãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨ã‚«ãƒªã‚¹ãƒæ€§", "å›°é›£ãªçŠ¶æ³ã‚’æ‰“é–‹ã™ã‚‹å¼·åŠ›ãªå®Ÿè¡ŒåŠ›"]
- 8æ¬¡å…ƒç‰¹æ€§: {ä¹¾_å‰µé€ æ€§: 9.2, éœ‡_è¡Œå‹•æ€§: 8.7, ...}

### å‡ºåŠ›å½¢å¼:
ç§ã®æ ¹æºçš„ãªå¼·ã¿ã¯...
`;
```

### 2. æœ€é©ãªå½¹å›ã‚Šææ¡ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ID**: `OPTIMAL_ROLE_PROMPT`

```
ä»¥ä¸‹ã®äººæ ¼åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã“ã®äººãŒæœ€ã‚‚è¼ã‘ã‚‹å½¹å›ã‚Šãƒ»å½¹å‰²ã‚’ä¸€äººç§°ã§ææ¡ˆã—ã¦ãã ã•ã„ã€‚

### åˆ†æãƒ‡ãƒ¼ã‚¿:
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹OS: {interfaceOS.osName}
- å¤–è¦‹çš„ç‰¹å¾´: {hexagramDetails.interface.how_it_appears}
- è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³: {hexagramDetails.interface.behavioral_patterns}
- ä»–è€…ã¸ã®å°è±¡: {hexagramDetails.interface.impression_on_others}

### å‡ºåŠ›å½¢å¼:
ç§ãŒæœ€ã‚‚è¼ã‘ã‚‹å½¹å›ã‚Šã¯[å…·ä½“çš„ãªå½¹å‰²ãƒ»ç«‹å ´]ã§ã™ã€‚ãªãœãªã‚‰ç§ã¯[ãã®å½¹å‰²ã«é©ã—ãŸç‰¹æ€§]ã‚’æŒã£ã¦ãŠã‚Šã€[å…·ä½“çš„ãªå ´é¢ãƒ»çŠ¶æ³]ã§è‡ªç„¶ã«ãã®åŠ›ã‚’ç™ºæ®ã§ãã‚‹ã‹ã‚‰ã§ã™ã€‚é€†ã«[è‹¦æ‰‹ãªç’°å¢ƒãƒ»å½¹å‰²]ã¯é¿ã‘ã€[æ¨å¥¨ã•ã‚Œã‚‹ç’°å¢ƒãƒ»æ¡ä»¶]ã‚’é¸ã¶ã“ã¨ã§ã€æœ¬æ¥ã®åŠ›ã‚’å­˜åˆ†ã«ç™ºæ®ã§ãã¾ã™ã€‚

### åˆ¶ç´„:
- å…·ä½“çš„ãªè·ç¨®ãƒ»å½¹å‰²åã‚’å«ã‚€
- é©ã—ã¦ã„ã‚‹ç†ç”±ã‚’æ˜ç¢ºã«èª¬æ˜
- é¿ã‘ã‚‹ã¹ãç’°å¢ƒã‚‚è¨€åŠ
- å®Ÿè¡Œå¯èƒ½ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
- 200-300æ–‡å­—
```

### 3. é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ID**: `DEFENSIVE_PATTERN_PROMPT`

```
ä»¥ä¸‹ã®äººæ ¼åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã“ã®äººãŒãªãœæ™‚ã€…ã€Œã‚‰ã—ããªã„ã€æŒ¯ã‚‹èˆã„ã‚’ã—ã¦ã—ã¾ã†ã®ã‹ã‚’ä¸€äººç§°ã§å„ªã—ãè§£èª¬ã—ã¦ãã ã•ã„ã€‚

### åˆ†æãƒ‡ãƒ¼ã‚¿:
- ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰OS: {safeModeOS.osName}
- ç™ºå‹•ãƒˆãƒªã‚¬ãƒ¼: {hexagramDetails.safe_mode.trigger_situations}
- é˜²å¾¡è¡Œå‹•: {hexagramDetails.safe_mode.defensive_patterns}
- å†…é¢çŠ¶æ…‹: {hexagramDetails.safe_mode.internal_state}

### å‡ºåŠ›å½¢å¼:
ç§ãŒæ™‚ã€…ã‚‰ã—ããªã„æŒ¯ã‚‹èˆã„ã‚’ã—ã¦ã—ã¾ã†ã®ã¯ã€[ç™ºå‹•æ¡ä»¶]ãŒèµ·ããŸæ™‚ã«[ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰å]ãŒè‡ªå‹•çš„ã«ä½œå‹•ã™ã‚‹ã‹ã‚‰ã§ã™ã€‚ã“ã®æ™‚ã®ç§ã¯[å†…é¢çš„ãªçŠ¶æ…‹]ã«ãªã‚Šã€ç„¡æ„è­˜ã«[å…·ä½“çš„ãªè¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³]ã‚’å–ã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã‚Œã¯[ãã®è¡Œå‹•ã®ç›®çš„ãƒ»æ„å›³]ã§ã‚ã‚Šã€æ±ºã—ã¦æ‚ªã„ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€[æœ›ã¾ã—ããªã„çµæœ]ã‚’æ‹›ãã“ã¨ã‚‚ã‚ã‚‹ãŸã‚ã€[å¯¾å‡¦æ³•ãƒ»äºˆé˜²ç­–]ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚

### åˆ¶ç´„:
- æ‰¹åˆ¤çš„ã§ãªã„ã€ç†è§£ã‚ã‚‹èªèª¿
- é˜²å¾¡ã®å¿…è¦æ€§ã‚’èªã‚ã‚‹
- å…·ä½“çš„ãªãƒˆãƒªã‚¬ãƒ¼ã®èª¬æ˜
- è‡ªå·±å—å®¹ã‚’ä¿ƒã™è¡¨ç¾
- 250-350æ–‡å­—
```

### 4. å®Ÿè·µçš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ID**: `PRACTICAL_ADVICE_PROMPT`

```
ä»¥ä¸‹ã®3OSçµ±åˆåˆ†æãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã“ã®äººãŒæ—¥å¸¸ç”Ÿæ´»ã§å®Ÿè·µã§ãã‚‹å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ä¸€äººç§°ã§æä¾›ã—ã¦ãã ã•ã„ã€‚

### åˆ†æãƒ‡ãƒ¼ã‚¿:
- ã‚¨ãƒ³ã‚¸ãƒ³OS: {engineOS.osName} (å¼·ã¿: {engine.potential_strengths})
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹OS: {interfaceOS.osName} (é©æ€§: {interface.behavioral_patterns})
- ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰OS: {safeModeOS.osName} (æ³¨æ„ç‚¹: {safe_mode.trigger_situations})
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿: {userConcern}

### å‡ºåŠ›å½¢å¼:
ç§ã®3ã¤ã®OSã‚’çµ±åˆã—ã¦è€ƒãˆã‚‹ã¨ã€æ—¥å¸¸ã§ã¯æ¬¡ã®ã“ã¨ã‚’æ„è­˜ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

**ã‚¨ãƒãƒ«ã‚®ãƒ¼ç®¡ç†**: [ã‚¨ãƒ³ã‚¸ãƒ³OSã®æ´»ã‹ã—æ–¹]
**ç’°å¢ƒé¸æŠ**: [ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹OSã«é©ã—ãŸç’°å¢ƒãƒ»å½¹å‰²]
**ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦**: [ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰ç™ºå‹•ã‚’é˜²ã/å¥å…¨ã«å¯¾å‡¦ã™ã‚‹æ–¹æ³•]

ç‰¹ã«[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã«å¯¾ã™ã‚‹å…·ä½“çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹]ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Š[æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„ãƒ»æˆæœ]ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚

### åˆ¶ç´„:
- æ˜æ—¥ã‹ã‚‰å®Ÿè¡Œã§ãã‚‹å…·ä½“çš„ãªè¡Œå‹•
- 3OSã®çµ±åˆçš„ãªè¦–ç‚¹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã¸ã®ç›´æ¥çš„ãªå¯¾å‡¦æ³•
- å¸Œæœ›çš„ã§å®Ÿç¾å¯èƒ½ãªå†…å®¹
- 300-400æ–‡å­—
```

---

## ğŸ”§ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

### JavaScriptå®Ÿè£…ä¾‹

```javascript
class PromptTemplateEngine {
  constructor() {
    this.templates = {
      ROOT_STRENGTH: this.loadTemplate('ROOT_STRENGTH_PROMPT'),
      OPTIMAL_ROLE: this.loadTemplate('OPTIMAL_ROLE_PROMPT'),
      DEFENSIVE_PATTERN: this.loadTemplate('DEFENSIVE_PATTERN_PROMPT'),
      PRACTICAL_ADVICE: this.loadTemplate('PRACTICAL_ADVICE_PROMPT')
    };
  }

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ¡ã‚¤ãƒ³é–¢æ•°
  generatePrompt(templateType, analysisData) {
    const template = this.templates[templateType];
    if (!template) {
      throw new Error(`Template ${templateType} not found`);
    }

    return this.interpolateTemplate(template, analysisData);
  }

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¤‰æ•°ã®ç½®æ›
  interpolateTemplate(template, data) {
    return template.replace(/\{([^}]+)\}/g, (match, path) => {
      return this.getNestedValue(data, path) || `[${path}ãƒ‡ãƒ¼ã‚¿ãªã—]`;
    });
  }

  // ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å€¤ã‚’å–å¾—
  getNestedValue(obj, path) {
    return path.split('.').reduce((current, key) => {
      return current && current[key] !== undefined ? current[key] : null;
    }, obj);
  }
}
```

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹

```javascript
const analysisData = {
  engineOS: {
    osName: "ä¹¾ç‚ºå¤©ã®äºº",
    hexagramId: 1,
    strength: 0.92
  },
  interfaceOS: {
    osName: "å¤©æ¾¤å±¥ã®äºº",
    hexagramId: 10,
    matchScore: 85
  },
  safeModeOS: {
    osName: "å¤ç‚ºåœ°ã®äºº", 
    hexagramId: 2,
    matchScore: 78
  },
  hexagramDetails: {
    1: { /* è©³ç´°ãƒ‡ãƒ¼ã‚¿ */ },
    10: { /* è©³ç´°ãƒ‡ãƒ¼ã‚¿ */ },
    2: { /* è©³ç´°ãƒ‡ãƒ¼ã‚¿ */ }
  },
  vector8D: {
    ä¹¾_å‰µé€ æ€§: 9.2,
    éœ‡_è¡Œå‹•æ€§: 8.7,
    // ... ä»–ã®æ¬¡å…ƒ
  },
  userConcern: "ä»•äº‹ã§ã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«æ‚©ã‚“ã§ã„ã¾ã™"
};
```

---

## ğŸ¨ ç”Ÿæˆæ–‡ç« ã®å“è³ªä¿è¨¼

### å“è³ªãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

#### 1. è¨€èªçš„å“è³ª
- [ ] **ä¸€äººç§°ã®ä¸€è²«æ€§**: ã€Œç§ã¯...ã€ã€Œç§ã®...ã€ã®ä½¿ç”¨
- [ ] **æ•¬èªã®é©åˆ‡æ€§**: ä¸å¯§èªã§ã®è¦ªã—ã¿ã‚„ã™ã„è¡¨ç¾
- [ ] **èª­ã¿ã‚„ã™ã•**: æ–‡ç« ã®é•·ã•ãƒ»ãƒªã‚ºãƒ ã®èª¿æ•´
- [ ] **å°‚é–€ç”¨èªã®é©åˆ‡æ€§**: éåº¦ã«å°‚é–€çš„ã§ãªã„è¡¨ç¾

#### 2. å†…å®¹çš„å“è³ª
- [ ] **å…·ä½“æ€§**: æŠ½è±¡çš„ã§ãªãå®Ÿè·µå¯èƒ½ãªå†…å®¹
- [ ] **å€‹åˆ¥æ€§**: ãã®äººã«ç‰¹åŒ–ã—ãŸå†…å®¹
- [ ] **å¸Œæœ›æ€§**: å‰å‘ãã§å»ºè¨­çš„ãªè¦–ç‚¹
- [ ] **å®Ÿç¾å¯èƒ½æ€§**: å®Ÿéš›ã«è¡Œå‹•ã§ãã‚‹ãƒ¬ãƒ™ãƒ«

#### 3. æ„Ÿæƒ…çš„å“è³ª
- [ ] **å…±æ„Ÿæ€§**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã†
- [ ] **å—å®¹æ€§**: åˆ¤æ–­ã›ãšå—ã‘å…¥ã‚Œã‚‹å§¿å‹¢
- [ ] **åŠ±ã¾ã—**: å¸Œæœ›ã¨å‹‡æ°—ã‚’ä¸ãˆã‚‹å†…å®¹
- [ ] **å®‰å¿ƒæ„Ÿ**: å®‰å…¨ã§æ”¯æŒçš„ãªé›°å›²æ°—

### å“è³ªå‘ä¸Šã®ãŸã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆèª¿æ•´

```javascript
// å“è³ªå‘ä¸Šã®ãŸã‚ã®è¿½åŠ åˆ¶ç´„
const qualityConstraints = `
### è¿½åŠ åˆ¶ç´„:
- ã€Œã¹ãã§ã‚ã‚‹ã€ã€Œã™ã¹ãã€ç­‰ã®æŒ‡ç¤ºçš„è¡¨ç¾ã‚’é¿ã‘ã‚‹
- ã€Œã€œã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€ç­‰ã®æ›–æ˜§ãªè¡¨ç¾ã‚’é¿ã‘ã€ç¢ºä¿¡çš„ã«è¿°ã¹ã‚‹
- å…·ä½“çš„ãªè¡Œå‹•ãƒ»çŠ¶æ³ã‚’ä¾‹ç¤ºã«å«ã‚ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®çŠ¶æ³ã‚’å¦å®šã›ãšã€ãã“ã‹ã‚‰ç™ºå±•ã•ã›ã‚‹è¦–ç‚¹
- å®Œç’§ã‚’æ±‚ã‚ãšã€å°ã•ãªæ”¹å–„ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã‚‹å†…å®¹ã«ã™ã‚‹
`;
```

---

## ğŸš€ å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã®æ‹¡å¼µ

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆèªè­˜æ©Ÿèƒ½

```javascript
class ContextAwarePromptGenerator {
  constructor() {
    this.contextAnalyzer = new ContextAnalyzer();
  }

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚©ã¿ã«å¿œã˜ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆèª¿æ•´
  adjustPromptByContext(basePrompt, userConcern, analysisData) {
    const context = this.contextAnalyzer.analyze(userConcern);
    
    switch(context.category) {
      case 'work_leadership':
        return this.addLeadershipContext(basePrompt, analysisData);
      case 'relationship_issues':
        return this.addRelationshipContext(basePrompt, analysisData);
      case 'personal_growth':
        return this.addGrowthContext(basePrompt, analysisData);
      default:
        return basePrompt;
    }
  }
}
```

### å¤šæ®µéšç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

```javascript
// æ®µéšçš„è©³ç´°åŒ–ã«ã‚ˆã‚‹é«˜å“è³ªç”Ÿæˆ
class MultiStageGenerator {
  async generatePersonalStrategy(analysisData) {
    // Stage 1: åŸºæœ¬æˆ¦ç•¥ã®ç”Ÿæˆ
    const basicStrategy = await this.generateBasic(analysisData);
    
    // Stage 2: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã®èª¿æ•´
    const contextualStrategy = await this.adjustForContext(
      basicStrategy, 
      analysisData.userConcern
    );
    
    // Stage 3: å®Ÿè·µæ€§ã®å‘ä¸Š
    const practicalStrategy = await this.enhancePracticality(
      contextualStrategy,
      analysisData
    );
    
    return practicalStrategy;
  }
}
```

---

## ğŸ“Š A/Bãƒ†ã‚¹ãƒˆãƒ»æ”¹å–„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†

```javascript
const promptVariations = {
  ROOT_STRENGTH: {
    version_a: {
      style: "ç›´æ¥çš„ãƒ»åŠ›å¼·ã„",
      template: "ç§ã®æ ¹æºçš„ãªå¼·ã¿ã¯..."
    },
    version_b: {
      style: "å…±æ„Ÿçš„ãƒ»å„ªã—ã„", 
      template: "ç§ãŒæŒã¤ç‰¹åˆ¥ãªåŠ›ã¯..."
    }
  }
};
```

### å“è³ªæ¸¬å®šæŒ‡æ¨™

```javascript
const qualityMetrics = {
  readability: "èª­ã¿ã‚„ã™ã•ã‚¹ã‚³ã‚¢ (0-100)",
  specificity: "å…·ä½“æ€§ãƒ¬ãƒ™ãƒ« (0-10)",
  positivity: "ãƒã‚¸ãƒ†ã‚£ãƒ–åº¦ (0-10)",
  actionability: "å®Ÿè¡Œå¯èƒ½æ€§ (0-10)",
  personalization: "å€‹åˆ¥åŒ–åº¦ (0-10)"
};
```

---

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæœ€çµ‚æ›´æ–°**: 2025-07-26  
**å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ **: PersonalStrategyAI v1.0  
**å“è³ªãƒ¬ãƒ™ãƒ«**: Production Ready