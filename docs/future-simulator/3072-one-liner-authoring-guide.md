# Future Simulator 一行要約（3072通り）作成ガイド v1.0

目的: 64卦×6爻×8パターン=3,072通りの「未来パターン提示」を、一行の日本語でわかりやすく提示する。助言・評価・指示は含めず、三段階の“流れ”だけを短く伝える。専門語は本文に出さない（必要ならヘルプに集約）。

最終アウトプット（UI表示）
- 各カード（JJJ〜HHH）で本文は「一行要約」のみ。
- 例（固定表現ではなく、各組み合わせで丁寧に作ること）:
  - 「準備を重ねて評価が高まり、飛躍前の見極めへ進む」
  - 「一度視点を変えたのち、その新しい流れでさらに深まる」

対象ファイル
- 入力: `public/data/authoring/narratives_chain_complete_final.json`
- 参照: `public/assets/H384H64database.js`（`H384_DATA`, `H64_DATA`）
- 出力（差分推奨）:
  - `public/data/authoring/narratives_chain_one_liners.json`（キー→one_liner, path_code, metadata）
  - マージ版: `public/data/authoring/narratives_chain_complete_final.merged.json`

キー定義
- 形式: "卦名 爻 | TRIAD"（例: `乾為天 初九 | HJH`）
- TRIAD: `JJJ, JJH, JHJ, JHH, HJJ, HJH, HHJ, HHH`
- 進行の意味（本文には出さない）:
  - J=進爻（同じやり方の継続）、H=変爻（やり方の切替）

一行要約の要件
- 長さ: 35〜70字（±10字許容、最大80字）。句読点は2回まで（読点「、」のみ）。
- 内容: 三段階の流れが“1文で”自然につながる。助言/評価/命令は禁止。
- 語彙: 非専門の日本語（やり方/流れ/段階/切り替え/進む/移る/整える/深める 等）。
- 差別化: 起点×TRIADごとに固有の文面。コピペ禁止。

スタイルの指針
- なるべく具体的な動きの言葉を使い、抽象語を避ける（例: 「整う」「広がる」「行き詰まる」「開ける」「見極める」）。
- 難読語・専門語は使わない。必要なら平易語に言い換える（例: 訟→争い）。

作業の流れ（1組み合わせ）
1) 行き先計算
   - 起点: narratives の `start.hex`（卦名）→ 卦番号に解決、`start.pos`（0始まり）→ 爻位（1〜6）へ。
   - TRIAD に従い3段階の到達先を決定（J: 爻+1／H: H64変換）。
2) 骨子抽出（本文に直接貼らない）
   - 各段の H384 から「キーワード（2語まで）」「要約（1文）」を参照して骨子を言い換え（例: 原点回帰/結束/慎重/転機）。
3) 一文化
   - 文型の例（必要に応じて調整。テンプレ貼付は不可）
     - A: 現在の路線を深め→中盤で［骨子］が現れ→終盤［骨子］へ移る
     - B: 小さく積み上げ→視点を変え→新しいまとまりへ落ち着く
     - C: 一度切替→そのまま進行→最後に軽く整える
     - D: 連続して切替→不安定を経て→進行へ移す
   - 常体、もしくは名詞止め。絵文字/感嘆符/専門語は不可。
4) 自己チェック
   - 一読で三段が想像できる／助言なし／同起点・別TRIADと被らない／文字数・句読点OK。

レビュー票（抜粋）
- 連続性が一文で伝わる（はい/いいえ）
- 助言・評価表現なし（はい/いいえ）
- 起点固有のニュアンス反映（はい/いいえ）
- 同起点・別TRIADと被らない（はい/いいえ）
- 文字数・句読点ルール遵守（はい/いいえ）

保存スキーマ（差分ファイル）
```jsonc
{
  "乾為天 初九 | JJJ": {
    "one_liner": "準備を重ねて評価が高まり、飛躍前の見極めへ進む",
    "path_code": "進→進→進",
    "version": "v1.0",
    "generated_at": "2025-09-05T12:00:00Z"
  },
  "乾為天 初九 | HJH": {
    "one_liner": "文脈を移して一段進め、最後に軽く切り替えて整える",
    "path_code": "変→進→変",
    "version": "v1.0",
    "generated_at": "2025-09-05T12:00:00Z"
  }
}
```

コマンド（補助ツール）
- 準備: 起点ごとの下書き素材を出力（到達先×3段のH384要約/キーワードを並べる）
  - `node scripts/prepare-one-liner-work-items.cjs --hex 乾為天` → `public/data/authoring/one_liner_work/乾為天.json`
- マージ: 差分ファイルを既存DBにマージ
  - `node scripts/merge-one-liners.cjs public/data/authoring/narratives_chain_one_liners.json`

UI適用
- Triadカードは one_liner を本文として表示（path_codeは任意で小さく）。
- chain_long/特徴/主体性/リスク/揺れは非表示（当面）。

ロールアウト
1) バッチ単位で作成（1卦ごとに48本）。
2) 差分ファイルへ追記 → 自動検証 → 相互レビュー → マージ生成。
3) Loaderの参照先を merged に切替 → スモークテスト（8枚表示確認）。

注意
- “型の説明”を徹底（助言や評価は書かない）。
- 単語の被りは最小に（同一起点の8本、triad間で言い換えを入れる）。
- 直感理解を最優先し、専門語は本文に出さない。
