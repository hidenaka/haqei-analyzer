# HAQEI開発体制 使い方ガイド

## 🚀 クイックスタート

### 1. 新規開発時
```bash
# 通常のClaude Code起動
npm run mcp:claude:unsafe

# Swarmで高速開発（タスク名を指定）
npm run dev:swarm --task="ユーザー認証機能実装"

# エージェント数を指定したい場合
npm run dev:swarm --task="API設計" --agents=5
```

### 2. 継続開発時
```bash
# セッション再開
npm run mcp:resume:unsafe

# 前回の続きから開発継続
npm run dev:swarm --task="ユーザー認証機能実装（続き）" --resume=true
```

## 📋 タスクタイプ別の使い方

### 要件定義・設計フェーズ
```bash
# 要件定義専用Swarm（3-4エージェント）
npm run dev:swarm --task="新機能の要件定義" --type=requirements

# 自動で以下が起動:
# - haqei-requirements-analyst
# - haqei-cto
# - researcher
# - 要件壁打ちテンプレート
```

### 開発・実装フェーズ
```bash
# 開発専用Swarm（8エージェント並列）
npm run dev:swarm --task="REST API実装"

# 自動で以下が起動:
# - system-architect
# - coder × 2
# - backend-dev
# - tester
# - task-orchestrator
# - エージェントオーケストレーション運用ガイド
```

### テストフェーズ
```bash
# テスト専用Swarm（5エージェント）
npm run dev:swarm --task="統合テスト実施" --type=testing

# 自動で以下が起動:
# - tester
# - haqei-qa-tester
# - performance-benchmarker
# - code-analyzer
# - 即時テスト実行フロー（Playwright必須）
```

### 品質保証フェーズ
```bash
# 品質チェック専用Swarm（4エージェント）
npm run dev:swarm --task="コードレビューと品質チェック" --type=quality

# 自動で以下が起動:
# - reviewer
# - code-analyzer
# - security-manager
# - documenter
# - タスク完了チェックリスト
```

## 🎯 プリセット構成

### HaQei哲学準拠開発
```bash
npm run dev:swarm --task="易経統合機能" --type=HaQei

# HaQei哲学に特化したエージェント構成
```

### フルスタック開発
```bash
npm run dev:swarm --task="新サービス全体開発" --type=fullstack --agents=10

# 最大10エージェントでの大規模並列開発
```

## 📊 開発フロー例

### 完全な新機能開発フロー
```bash
# 1. 要件定義
npm run mcp:claude:unsafe
npm run dev:swarm --task="決済機能の要件定義" --type=requirements

# 2. 設計・実装
npm run dev:swarm --task="決済機能の実装" --agents=8

# 3. テスト
npm run dev:swarm --task="決済機能のテスト" --type=testing

# 4. 品質保証
npm run dev:swarm --task="決済機能の最終チェック" --type=quality

# 5. 報告書生成（自動）
# 最終報告書テンプレートに基づいて自動生成
```

## 🔧 高度な使い方

### メモリ機能の活用
```bash
# 前回の作業内容を確認
npx claude-flow@alpha memory retrieve --key "haqei/development/progress"

# テンプレートの確認
npx claude-flow@alpha memory retrieve --key "haqei/template/requirements"
```

### カスタムSwarm構成
```bash
# .claude-flow-config.jsonを編集して独自構成を追加
# その後、以下で利用:
npm run dev:swarm --task="特殊タスク" --type=custom
```

### 並列度の調整
```bash
# 軽いタスク（3エージェント）
npm run dev:swarm --task="バグ修正" --agents=3

# 重いタスク（10エージェント）
npm run dev:swarm --task="大規模リファクタリング" --agents=10
```

## ⚠️ 注意事項

1. **Playwright必須**: テストは必ずPlaywrightを使用（localhost禁止）
2. **日付形式**: すべてのドキュメントはYYYYMMDD形式
3. **並列実行**: TodoWriteは必ず5個以上を一括で
4. **エージェント選択**: タスクタイプは自動判別されるが、明示的指定を推奨

## 🆘 トラブルシューティング

### Swarmが起動しない
```bash
# MCP環境の再セットアップ
npm run mcp:setup

# メモリのクリア
npx claude-flow@alpha memory clear --namespace "haqei"
```

### エージェントが応答しない
```bash
# ステータス確認
npx claude-flow@alpha status

# 強制終了と再起動
npm run dev:swarm --task="同じタスク" --force-restart
```

## 📝 開発体制ドキュメント一覧

1. [要件壁打ちテンプレート](./01_要件壁打ちテンプレート.md)
2. [エージェントオーケストレーション運用ガイド](./02_エージェントオーケストレーション運用ガイド.md)
3. [即時テスト実行フロー](./03_即時テスト実行フロー.md)
4. [並列開発タスク管理システム](./04_並列開発タスク管理システム.md)
5. [日本語ドキュメントテンプレート](./05_日本語ドキュメントテンプレート.md)
6. [タスク完了チェックリスト自動化設計](./06_タスク完了チェックリスト自動化設計.md)
7. [最終報告書テンプレート](./07_最終報告書テンプレート.md)

---

この開発体制により、高品質・高安定性・高効率な開発を実現します。