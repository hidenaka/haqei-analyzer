# HAQEI Analyzer 緊急修正システム設計書

**作成日**: 2025年8月6日  
**設計方針**: 最小限の複雑さで最大限の機能

## 1. 簡素化アーキテクチャ

### 単一HTMLファイル構造
```
┌─────────────────────────────────────┐
│           Single HTML File          │
│  ┌─────────────────────────────────┐ │
│  │     Embedded CSS (Critical)     │ │
│  └─────────────────────────────────┘ │
│  ┌─────────────────────────────────┐ │
│  │    Embedded JavaScript (Core)   │ │
│  └─────────────────────────────────┘ │
│  ┌─────────────────────────────────┐ │
│  │      JSON Data (Inline)        │ │
│  └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

## 2. データ構造設計

### インライン化された必須データ
```javascript
const HAQEI_DATA = {
  questions: [...30の質問データ],
  hexagrams: [...64卦の基本データ],  
  osTypes: {
    engine: {...},
    interface: {...},
    safemode: {...}
  }
};
```

## 3. コンポーネント設計

### Vanilla JavaScript コンポーネント
- WelcomeScreen: ウェルカム画面
- QuestionFlow: 質問フロー
- ResultDisplay: 結果表示
- ErrorHandler: エラー処理

## 4. フォールバック戦略

### エラー時の段階的縮退
1. 完全機能 → 基本機能 → 最小限機能
2. ネットワークエラー → ローカル機能のみ
3. JavaScript無効 → 静的HTML表示

24時間実装を想定した現実的な設計です。