# AI開発アシスタント用ルール for "HaQei アナライザー"

## 1. プロジェクトの最優先事項

- **目的:** 古代の易経と現代のテクノロジーが融合した、革新的な自己洞察分析システムを提供する。
- **技術スタックの遵守:** モダンなES6 JavaScript、カスタムCSS、Chart.js 3.9.1を使用したコンポーネントベースアーキテクチャ。
- **実装品質の確保:** セキュリティを重視した防御的開発、モジュラー設計、レスポンシブUI実装。

---

## 2. 技術スタック (Technology Stack)

- **フロントエンド:** `HTML5`, `ES6 JavaScript` (モジュールシステム)
- **スタイリング:** カスタムCSS (コンポーネントベース設計)
- **データ可視化:** `Chart.js 3.9.1` (CDN経由)
- **アーキテクチャ:** モジュラーコンポーネント設計
- **品質管理:** ESLint設定済み
- **セキュリティ:** 防御的セキュリティ重視
- **禁止事項:** ビルドツール不使用、純粋なJavaScript環境を維持。

---

## 3. プロジェクト構造 (Project Structure)

### ディレクトリ構成

```
haqei-analyzer/
├── public/                      # Webアプリケーション
│   ├── os_analyzer.html         # メイン分析ページ
│   ├── results.html             # 結果表示ページ
│   ├── css/                     # スタイルシート群
│   ├── js/                      # JavaScript モジュール群
│   └── assets/                  # データベースファイル
├── docs/                        # ドキュメント管理
│   ├── development/             # 開発関連ドキュメント
│   ├── requirements/            # 要件書
│   └── code-explanations/       # 実装解説書
├── data/                        # データソース管理
├── scripts/                     # ユーティリティスクリプト
└── archives/                    # アーカイブ
```

### コンポーネントアーキテクチャ

- **コアシステム:** `js/core/` (Engine, DataManager, Calculator等)
- **UIコンポーネント:** `js/components/` (画面・機能別コンポーネント)
- **ユーティリティ:** `js/utils/` (共通機能・ヘルパー)
- **データレイヤー:** `js/data/` (データ定義・設定)

---

## 4. 開発ガイドライン (Development Guidelines)

### セキュリティ重視
- **防御的セキュリティタスクのみ**: 悪意のあるコード作成・改良は拒否
- **許可範囲**: セキュリティ分析、検出ルール、脆弱性説明、防御ツール、セキュリティドキュメント
- **秘密情報保護**: APIキー、秘密鍵の露出・ログ出力禁止

### コーディングスタイル
- **ES6+準拠**: `const`/`let`使用、`var`禁止
- **モジュラー設計**: クラスベース、コンポーネント分離
- **エラーハンドリング**: 適切な例外処理とフォールバック実装
- **命名規則**: 機能が推測しやすい英語名（camelCase）
- **コメント**: 複雑なロジックには必須、セキュリティ関連箇所は特に詳細に

### 品質保証
- **ESLint準拠**: 設定済みルールに従う
- **レスポンシブ対応**: モバイル・デスクトップ両対応
- **パフォーマンス**: 軽量・高速動作を重視

---
