# SNS文章生成による386爻学習データ構築 要件定義書

## 📋 基本情報
- **作成日**: 2025年8月1日
- **対象システム**: Future Simulator 動的分析機能
- **目的**: 386爻（64卦×6爻 + 乾為天の用九 + 坤為地の用六）すべての状況を識別可能な学習データセット構築
- **目標生成数**: 4000万パターン以上

## 🎯 背景と目的

### 現状の課題
- 現在の簡易キーワードマッピングでは386の状況を適切に識別できない
- 実際のユーザー入力データが不足しており、学習に必要なサンプル数が確保できない
- 易経の解釈文からでは、ユーザーの「生の言葉」の特徴を捉えられない

### 解決アプローチ
AIを活用してSNS風の文章を大量生成し、実際のユーザー入力に近い学習データを構築する

## 📊 データ生成仕様

### 1. 生成パターン構成
```
総生成数: 38,600,000パターン以上
内訳: 386爻 × 100,000バリエーション/爻
```

### 2. 文章生成の基本構造

#### 各爻の本質的特徴定義
```javascript
{
  卦番号: 29,
  爻番号: 3,
  本質的状況: {
    困難の種類: "繰り返される障害",
    主体性レベル: "能動的だが効果なし",
    感情状態: ["焦燥感", "無力感", "疲労感"],
    時間的特徴: "停滞期・ループ状態",
    人間関係: "周囲からの理解不足"
  },
  キーフレーズ: [
    "何度やっても",
    "また同じ",
    "繰り返し",
    "デジャブ"
  ]
}
```

#### SNS文章の構成要素
1. **感情表現**
   - 直接的: "もう疲れた"、"マジでやばい"
   - 間接的: "...。"、"はぁ"、"なんか"

2. **SNS特有要素**
   - 絵文字: 😔😅💦🤔
   - 略語: "マジ"、"ヤバい"、"ムリ"
   - 話し言葉: "〜かな"、"〜だよね"、"〜じゃん"

3. **具体的状況描写**
   - 人物: "Aさん"、"上司"、"友達"
   - 場所: "会社"、"学校"、"家"
   - 時間: "今日も"、"3回目"、"いつも"

### 3. バリエーション生成戦略

#### ペルソナ設定（各20%）
1. **若年層（18-25歳）**
   - カジュアルな表現多用
   - 絵文字・顔文字多め
   - 略語使用頻度高

2. **社会人層（26-35歳）**
   - 仕事関連の悩み中心
   - やや丁寧な表現
   - 具体的な状況説明

3. **中年層（36-45歳）**
   - 家族・キャリアの悩み
   - 落ち着いた表現
   - 深い洞察を含む

4. **シニア層（46-60歳）**
   - 人生経験を反映
   - 丁寧な言葉遣い
   - 哲学的な要素

5. **性別不特定**
   - 中性的な表現
   - 普遍的な悩み

#### 感情強度レベル
- **低（30%）**: 冷静な状態での記述
- **中（50%）**: 一般的な感情表現
- **高（20%）**: 強い感情が表れた表現

#### 文章長
- **短文（30%）**: 20文字以下
- **中文（50%）**: 21-100文字
- **長文（20%）**: 101-200文字

### 4. 生成例（29卦3爻）

```
短文例:
- "また同じミスした😔"
- "何回目だよこれ..."
- "デジャブすぎて笑える"

中文例:
- "今日も昨日と同じところでつまずいた。もう3回目。学習能力ないのかな私😅"
- "毎回同じパターンで失敗してる気がする。なんでこう上手くいかないんだろう"
- "またあの人と同じ言い争いしちゃった...いつになったら成長できるんだろ"

長文例:
- "プロジェクトの進め方、また同じ問題にぶつかってる。前回も前々回も同じところで止まって、そのたびに違う方法試してるのに結局元に戻っちゃう。もう疲れたよ...誰か助けて😔"
```

## 🔧 技術実装要件

### 1. クラス構成

#### SNSTextGenerator
```javascript
class SNSTextGenerator {
  /**
   * SNS風文章の生成を制御するメインクラス
   * 
   * 目的：
   * - 384爻それぞれに対して10万パターンの文章生成
   * - ペルソナ・感情強度・文章長のバランス管理
   * - 生成品質の一貫性確保
   * 
   * 主要メソッド：
   * - generateForHexagram(hexNum, lineNum, count)
   * - validateGeneratedText(text, hexNum, lineNum)
   * - exportToDataset()
   */
}
```

#### HexagramPatternTemplates
```javascript
class HexagramPatternTemplates {
  /**
   * 384爻の本質的特徴テンプレート管理
   * 
   * 目的：
   * - 各爻の状況パターン定義
   * - キーフレーズ・感情マッピング
   * - 生成ルールの一元管理
   * 
   * データ構造：
   * - templates[hexNum][lineNum] = {...特徴定義}
   */
}
```

#### TextVariationEngine
```javascript
class TextVariationEngine {
  /**
   * テキストバリエーション生成エンジン
   * 
   * 目的：
   * - 同じ意味を持つ多様な表現生成
   * - SNS特有要素の自然な組み込み
   * - ペルソナに応じた文体調整
   * 
   * 主要機能：
   * - 同義語・類語変換
   * - 感情表現の強弱調整
   * - 絵文字・記号の適切な配置
   */
}
```

### 2. データ品質保証

#### 生成文章の妥当性検証
1. **構造チェック**
   - 爻の本質的特徴との一致度
   - 感情表現の適切性
   - 文法的自然さ

2. **多様性チェック**
   - 重複率5%以下
   - ペルソナ分布の均等性
   - 表現パターンの豊富さ

3. **現実性チェック**
   - 実際のSNS投稿との類似度
   - 不自然な表現の検出
   - 文化的適切性

### 3. 出力形式

#### JSONデータセット
```json
{
  "hexagram": 29,
  "line": 3,
  "texts": [
    {
      "id": "29_3_00001",
      "text": "また同じミスした😔",
      "persona": "young",
      "emotion_level": "high",
      "length": "short",
      "keywords": ["同じ", "ミス", "繰り返し"],
      "emotion_tags": ["frustration", "self_blame"],
      "confidence": 0.92
    }
  ]
}
```

## 📈 成功指標

### 定量指標
- **生成完了率**: 100%（38,400,000件）
- **品質合格率**: 95%以上
- **重複率**: 5%以下
- **処理時間**: 72時間以内

### 定性指標
- **自然さ**: 実際のSNS投稿と区別がつかないレベル
- **多様性**: 同じ爻でも豊富なバリエーション
- **的確性**: 各爻の本質を正確に反映

## 🚀 実装フェーズ

### Phase 1: 基盤構築（1週間）
1. HexagramPatternTemplatesの完全定義
2. 基本的な生成エンジン実装
3. 小規模テスト（1爻1000件）

### Phase 2: 大規模生成（2週間）
1. 全384爻の生成実行
2. 並列処理による高速化
3. 品質モニタリング

### Phase 3: 検証と最適化（1週間）
1. 生成データの品質検証
2. 不適切データの修正
3. 最終データセット作成

## ⚠️ リスクと対策

### 技術的リスク
- **メモリ不足**: 分割処理とストリーミング出力
- **処理時間超過**: 並列処理とGPU活用
- **品質のばらつき**: 定期的な品質チェックポイント

### 内容的リスク
- **偏りの発生**: ペルソナ・感情レベルの監視
- **不適切表現**: フィルタリングシステム導入
- **文化的配慮**: 多様性チェックリスト

---

この要件に基づき、実際のユーザー入力に近い大規模学習データセットを構築し、384爻すべての状況を高精度で識別可能なシステムを実現します。