# 結果画面要件定義書
## HAQEI OS Analyzer - Result Display Requirements
作成日: 2025年8月7日  
バージョン: 1.0

---

## 1. 概要
30問の診断完了後に表示される結果画面の要件を定義する。

## 2. 機能要件

### 2.1 基本編（Basic Layer）
#### 2.1.1 Triple OS結果表示
- **必須**: Engine OS、Interface OS、Safe Mode OSの3つの結果カード
- **表示内容**:
  - OS名称
  - 卦番号と卦名（例：1番 乾為天）
  - キャッチフレーズ（「」で囲む）
  - 説明文（description）
  - 上爻・下爻の表示

#### 2.1.2 エネルギー分布
- **必須**: 8つの三爻エネルギーの分布表示
- **表示形式**: 横棒グラフまたは円グラフ
- **エネルギー種類**:
  - 乾（天）
  - 兌（沢）
  - 離（火）
  - 震（雷）
  - 巽（風）
  - 坎（水）
  - 艮（山）
  - 坤（地）

#### 2.1.3 Triple OS相互関係
- **必須**: 3つのOS間の関係性を可視化
- **表示内容**:
  - OS間のバランス
  - 優勢なOS
  - 補完関係

### 2.2 詳細編（Detailed Layer）
#### 2.2.1 8次元ベクトル分析
- **必須**: レーダーチャート表示
- **次元**:
  - 外向_主導性
  - 外向_調和性
  - 外向_表現性
  - 外向_行動性
  - 内向_適応性
  - 内向_分析性
  - 内向_安定性
  - 内向_支援性

#### 2.2.2 三爻エネルギー詳細
- **必須**: 各三爻の詳細分析
- **表示内容**:
  - エネルギー値（%）
  - 主導OS
  - 特性説明

### 2.3 専門編（Expert Layer）
#### 2.3.1 易経的解釈
- **必須**: 易経原典に基づく解釈
- **表示内容**:
  - 卦辞
  - 爻辞（該当する爻）
  - 大象伝の解釈

#### 2.3.2 変卦分析
- **必須**: 変化の可能性分析
- **表示内容**:
  - 現在の卦
  - 変化可能な卦
  - 変化の条件

### 2.4 統合編（Integrated Layer）
#### 2.4.1 総合分析
- **必須**: 全体的な傾向分析
- **表示内容**:
  - 強み・弱み分析
  - 改善提案
  - 行動指針

#### 2.4.2 パーソナライズ提案
- **必須**: 個人に最適化された提案
- **表示内容**:
  - 具体的アクション
  - 注意点
  - 成長の方向性

## 3. 非機能要件

### 3.1 パフォーマンス
- 結果表示まで3秒以内
- スムーズなアニメーション（60fps）
- レスポンシブデザイン

### 3.2 ユーザビリティ
- レイヤー切り替えがスムーズ
- 上下両方にナビゲーション配置
- モバイル対応

### 3.3 アクセシビリティ
- WCAG 2.1 AA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応

## 4. データ要件

### 4.1 入力データ
- 30問の回答データ（answers配列）
- タイムスタンプ
- セッションID

### 4.2 出力データ
- Triple OS結果オブジェクト
- エネルギー分布データ
- 分析結果テキスト

### 4.3 データベース連携
- HEXAGRAMS（64卦データベース）から情報取得
- キャッチフレーズ、説明文は必ずDBから取得

## 5. 制約事項
- JavaScriptのみで実装（サーバーサイド処理なし）
- ローカルストレージ使用（5MB以内）
- IE11は非対応

## 6. 品質基準
- 結果の正確性: 100%（計算エラーなし）
- 表示完全性: 100%（全項目表示）
- ユーザー満足度: 80%以上

## 7. 削除すべき要素
- 「品質: 要改善」などの内部デバッグ表示
- 「より慎重に回答してください」などの開発者向けメッセージ
- console.logの本番環境での出力

---

**承認**:
- 要件定義: ✅
- 技術レビュー: 保留
- 実装開始: 保留