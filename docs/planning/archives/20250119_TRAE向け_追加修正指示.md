# ã€ç·Šæ€¥ã€‘TRAEå‘ã‘è¿½åŠ ä¿®æ­£æŒ‡ç¤º - ç”»é¢è¡¨ç¤ºã®å®Ÿè£…

## ğŸš¨ å•é¡Œã®æ¦‚è¦

å‰å›ã®æŒ‡ç¤ºã§ãƒ‡ãƒ¼ã‚¿å–å¾—éƒ¨åˆ†ã¯å®Œæˆã—ã¾ã—ãŸãŒã€**ç”»é¢ã«è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ãŒæœªå®Ÿè£…**ã§ã™ã€‚
ç¾åœ¨ã€ç”»é¢ãŒçœŸã£ç™½ã«ãªã£ã¦ã„ã¾ã™ã€‚

## ğŸ“ è¿½åŠ å®Ÿè£…ãŒå¿…è¦ãªå†…å®¹

### 1. BasicResultsTabã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‡¦ç†ã‚’å®Œæˆã•ã›ã‚‹

**ãƒ•ã‚¡ã‚¤ãƒ«:** `/public/js/components/tabs/BasicResultsTab.js` ï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ï¼‰

```javascript
class BasicResultsTab extends BaseTabView {
    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...

    /**
     * ãƒ‡ãƒ¼ã‚¿è¨­å®šæ™‚ã«è‡ªå‹•çš„ã«æç”»ã‚’å®Ÿè¡Œ
     */
    setData(data) {
        this.analysisData = data;
        
        // OSã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠãŒå­˜åœ¨ã™ã‚Œã°æç”»
        const container = document.getElementById('osCardsContainer');
        if (container) {
            this.renderOSCards();
        }
        
        // ã‚µãƒãƒªãƒ¼ã‚‚æ›´æ–°
        this.renderSummary();
    }

    /**
     * OSã‚«ãƒ¼ãƒ‰ã‚’å®Ÿéš›ã«æç”»
     */
    renderOSCards() {
        const container = document.getElementById('osCardsContainer');
        if (!container || !this.analysisData) return;

        const osTypes = [
            { key: 'engineOS', label: 'Engine OS', icon: 'âš¡' },
            { key: 'interfaceOS', label: 'Interface OS', icon: 'ğŸ”„' },
            { key: 'safeModeOS', label: 'Safe Mode OS', icon: 'ğŸ›¡ï¸' }
        ];

        const cardsHTML = osTypes.map(os => {
            const osData = this.analysisData[os.key];
            if (!osData) return '';
            
            return this.createOSCardHTML(os, osData);
        }).join('');

        container.innerHTML = cardsHTML;
    }

    /**
     * å€‹åˆ¥ã®OSã‚«ãƒ¼ãƒ‰HTMLã‚’ç”Ÿæˆ
     */
    createOSCardHTML(osInfo, osData) {
        // H384ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è©³ç´°æƒ…å ±ã‚’å–å¾—
        const hexagramDetail = this.hexagramExtractor?.getHexagramDataByName(osData.hexagram.name);
        const scoreInterpretation = this.getScoreInterpretation(osData.score);
        
        // æœ€åˆã®3ã¤ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾—
        const topKeywords = hexagramDetail && hexagramDetail.length > 0 
            ? hexagramDetail[0]['ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰'].slice(0, 5)
            : osData.traits || [];
        
        // æ˜“å¦ã®è§£é‡ˆã‚’å–å¾—
        const hexagramInterpretation = hexagramDetail && hexagramDetail.length > 0
            ? hexagramDetail[0]['ç¾ä»£è§£é‡ˆã®è¦ç´„']
            : osData.description;

        return `
            <div class="os-card ${osInfo.key}">
                <!-- OSãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="os-card-header">
                    <div class="os-title-section">
                        <span class="os-icon">${osInfo.icon}</span>
                        <h3 class="os-title">${osInfo.label}</h3>
                    </div>
                    <div class="os-score-section">
                        <span class="os-score-value">${Math.round(osData.score)}</span>
                        <span class="score-level ${scoreInterpretation.class}">${scoreInterpretation.level}</span>
                    </div>
                </div>

                <!-- ã‚¹ã‚³ã‚¢ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
                <div class="score-progress-container">
                    <div class="progress-bar" style="width: ${osData.score}%; background-color: ${scoreInterpretation.color}"></div>
                </div>
                <p class="score-message">${scoreInterpretation.message}</p>

                <!-- æ˜“å¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="hexagram-section">
                    <div class="hexagram-header">
                        <span class="hexagram-symbol">${osData.hexagram.symbol}</span>
                        <div class="hexagram-info">
                            <div class="hexagram-name">${osData.hexagram.name}</div>
                            <div class="hexagram-meaning">${this.getHexagramMeaning(osData.hexagram.name)}</div>
                        </div>
                    </div>
                    
                    <div class="hexagram-interpretation">
                        <p>${hexagramInterpretation}</p>
                    </div>

                    <!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¿ã‚° -->
                    <div class="keyword-tags">
                        ${topKeywords.map(keyword => 
                            `<span class="keyword-tag">${keyword}</span>`
                        ).join('')}
                    </div>

                    <!-- ã‚¢ãƒ‰ãƒã‚¤ã‚¹ -->
                    <div class="hexagram-advice">
                        <p class="advice-label">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹</p>
                        <p class="advice-text">${this.getHexagramAdvice(osData.hexagram.name)}</p>
                    </div>
                </div>
            </div>
        `;
    }

    /**
     * ã‚¹ã‚³ã‚¢è§£é‡ˆã‚’å–å¾—
     */
    getScoreInterpretation(score) {
        if (score >= 80) {
            return {
                level: 'éå¸¸ã«é«˜ã„',
                class: 'very-high',
                color: '#10B981',
                message: 'ã“ã®ç‰¹æ€§ãŒéå¸¸ã«å¼·ãç™ºæ®ã•ã‚Œã¦ã„ã¾ã™'
            };
        } else if (score >= 70) {
            return {
                level: 'é«˜ã„',
                class: 'high',
                color: '#3B82F6',
                message: 'ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæ©Ÿèƒ½ã—ã¦ã„ã¾ã™'
            };
        } else if (score >= 60) {
            return {
                level: 'æ¨™æº–',
                class: 'normal',
                color: '#6B7280',
                message: 'å¹³å‡çš„ãªå¼·ã•ã§ã™'
            };
        } else {
            return {
                level: 'ã‚„ã‚„ä½ã„',
                class: 'low',
                color: '#F59E0B',
                message: 'æˆé•·ã®æ©Ÿä¼šãŒã‚ã‚Šã¾ã™'
            };
        }
    }

    /**
     * æ˜“å¦ã®æ„å‘³ã‚’å–å¾—
     */
    getHexagramMeaning(hexagramName) {
        const meanings = {
            'ä¹¾ç‚ºå¤©': 'å¤©ã®å‰µé€ åŠ›',
            'å¤ç‚ºåœ°': 'å¤§åœ°ã®åŒ…å®¹åŠ›',
            'æ°´é›·å±¯': 'å§‹ã¾ã‚Šã®å›°é›£',
            'å±±æ°´è’™': 'å­¦ã³ã¨æˆé•·',
            'æ°´å¤©éœ€': 'å¾…ã¤æ™‚',
            'å¤©æ°´è¨Ÿ': 'äº‰ã„ã¨èª¿åœ',
            'åœ°æ°´å¸«': 'çµ„ç¹”ã¨çµ±ç‡',
            'æ°´åœ°æ¯”': 'è¦ªå’Œã¨å”åŠ›',
            // ä»–ã®å¦ã‚‚è¿½åŠ 
        };
        return meanings[hexagramName] || 'è‡ªç„¶ã®æ‘‚ç†';
    }

    /**
     * æ˜“å¦ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—
     */
    getHexagramAdvice(hexagramName) {
        const advices = {
            'ä¹¾ç‚ºå¤©': 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã€æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†',
            'å¤ç‚ºåœ°': 'å—ã‘å…¥ã‚Œã‚‹å¿ƒã‚’æŒã¡ã€ç€å®Ÿã«åŸºç›¤ã‚’ç¯‰ãã¾ã—ã‚‡ã†',
            'æ°´é›·å±¯': 'å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹æº–å‚™ã‚’ã—ã¾ã—ã‚‡ã†',
            'å±±æ°´è’™': 'è¬™è™šã«å­¦ã³ã€æˆé•·ã—ã¦ã„ãã¾ã—ã‚‡ã†',
            'æ°´å¤©éœ€': 'ç„¦ã‚‰ãšé©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’å¾…ã¡ã¾ã—ã‚‡ã†',
            'å¤©æ°´è¨Ÿ': 'å¯¾ç«‹ã‚’é¿ã‘ã€èª¿å’Œã‚’æ±‚ã‚ã¾ã—ã‚‡ã†',
            'åœ°æ°´å¸«': 'ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å¤§åˆ‡ã«ã—ã¾ã—ã‚‡ã†',
            'æ°´åœ°æ¯”': 'ä¿¡é ¼é–¢ä¿‚ã‚’ç¯‰ã„ã¦ã„ãã¾ã—ã‚‡ã†',
            // ä»–ã®å¦ã‚‚è¿½åŠ 
        };
        return advices[hexagramName] || 'ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰å‰é€²ã—ã¾ã—ã‚‡ã†';
    }

    /**
     * ã‚µãƒãƒªãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æç”»
     */
    renderSummary() {
        const container = document.getElementById('summaryContent');
        if (!container || !this.analysisData) return;

        const totalScore = Math.round(
            (this.analysisData.engineOS.score + 
             this.analysisData.interfaceOS.score + 
             this.analysisData.safeModeOS.score) / 3
        );

        container.innerHTML = `
            <div class="summary-card">
                <div class="total-score-section">
                    <span class="total-score-label">ç·åˆã‚¹ã‚³ã‚¢</span>
                    <span class="total-score-value">${totalScore}</span>
                </div>
                <div class="summary-message">
                    <p>ã‚ãªãŸã®Triple OSã¯å…¨ä½“çš„ã«${this.getOverallAssessment(totalScore)}çŠ¶æ…‹ã§ã™ã€‚</p>
                    <p>${this.getBalanceMessage()}</p>
                </div>
            </div>
        `;
    }

    /**
     * ç·åˆè©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
     */
    getOverallAssessment(score) {
        if (score >= 80) return 'å„ªã‚ŒãŸ';
        if (score >= 70) return 'ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸ';
        if (score >= 60) return 'æ¨™æº–çš„ãª';
        return 'æˆé•·éç¨‹ã®';
    }

    /**
     * ãƒãƒ©ãƒ³ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
     */
    getBalanceMessage() {
        const scores = [
            this.analysisData.engineOS.score,
            this.analysisData.interfaceOS.score,
            this.analysisData.safeModeOS.score
        ];
        
        const max = Math.max(...scores);
        const min = Math.min(...scores);
        const diff = max - min;
        
        if (diff < 10) {
            return '3ã¤ã®OSãŒèª¿å’Œã—ã¦æ©Ÿèƒ½ã—ã¦ã„ã¾ã™ã€‚';
        } else if (diff < 20) {
            return 'OSãƒãƒ©ãƒ³ã‚¹ã¯è‰¯å¥½ã§ã™ãŒã€ã•ã‚‰ãªã‚‹èª¿å’Œã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚';
        } else {
            return 'OSãƒãƒ©ãƒ³ã‚¹ã«åã‚ŠãŒã‚ã‚Šã¾ã™ã€‚å¼±ã„OSã‚’æ„è­˜çš„ã«å¼·åŒ–ã—ã¾ã—ã‚‡ã†ã€‚';
        }
    }
}
```

### 2. results.htmlã®åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¿®æ­£

**ãƒ•ã‚¡ã‚¤ãƒ«:** `/public/results.html` ã®åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆéƒ¨åˆ†

```javascript
// BasicResultsTabã®åˆæœŸåŒ–éƒ¨åˆ†ã‚’ä¿®æ­£
if (typeof BasicResultsTab !== 'undefined') {
    const basicResultsTab = new BasicResultsTab();
    basicResultsTab.setData(analysisResult);  // ã“ã“ã§setDataã‚’å‘¼ã¶ã¨è‡ªå‹•çš„ã«æç”»ã•ã‚Œã‚‹
    
    // TabNavigatorã«ã‚‚ç™»éŒ²
    if (tabNavigator) {
        tabNavigator.registerTab('basic', basicResultsTab);
    }
    
    console.log('âœ… BasicResultsTab initialized and rendered');
}
```

### 3. CSSã®è¿½åŠ ï¼ˆã¾ã è¿½åŠ ã—ã¦ã„ãªã„å ´åˆï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«:** `/public/css/results.css` ã«è¿½åŠ 

```css
/* OSã‚«ãƒ¼ãƒ‰ */
.os-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
    margin: 32px 0;
}

.os-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    border: 2px solid #E5E7EB;
    transition: all 0.3s ease;
}

.os-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(59, 130, 246, 0.15);
    border-color: #3B82F6;
}

.os-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.os-title-section {
    display: flex;
    align-items: center;
    gap: 8px;
}

.os-icon {
    font-size: 24px;
}

.os-title {
    font-size: 20px;
    font-weight: 600;
    color: #1E293B;
    margin: 0;
}

.os-score-section {
    display: flex;
    align-items: baseline;
    gap: 8px;
}

.os-score-value {
    font-size: 32px;
    font-weight: 700;
    color: #1E293B;
}

.score-level {
    font-size: 12px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 12px;
}

.score-level.very-high {
    background: #D1FAE5;
    color: #065F46;
}

.score-level.high {
    background: #DBEAFE;
    color: #1E40AF;
}

.score-level.normal {
    background: #F3F4F6;
    color: #374151;
}

.score-level.low {
    background: #FEF3C7;
    color: #92400E;
}

/* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
.score-progress-container {
    width: 100%;
    height: 8px;
    background: #E5E7EB;
    border-radius: 4px;
    overflow: hidden;
    margin: 8px 0;
}

.progress-bar {
    height: 100%;
    transition: width 0.6s ease;
    border-radius: 4px;
}

.score-message {
    font-size: 13px;
    color: #6B7280;
    margin: 8px 0 16px;
}

/* æ˜“å¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.hexagram-section {
    background: linear-gradient(135deg, #F9FAFB 0%, #F3F4F6 100%);
    border-radius: 12px;
    padding: 16px;
    margin-top: 16px;
}

.hexagram-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 12px;
}

.hexagram-symbol {
    font-size: 48px;
    color: #1E293B;
}

.hexagram-info {
    flex: 1;
}

.hexagram-name {
    font-size: 18px;
    font-weight: 600;
    color: #1E293B;
}

.hexagram-meaning {
    font-size: 14px;
    color: #6B7280;
    margin-top: 4px;
}

.hexagram-interpretation {
    background: white;
    padding: 12px;
    border-radius: 8px;
    margin: 12px 0;
    border-left: 4px solid #3B82F6;
}

.hexagram-interpretation p {
    margin: 0;
    font-size: 14px;
    line-height: 1.6;
    color: #4B5563;
}

/* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¿ã‚° */
.keyword-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 12px 0;
}

.keyword-tag {
    padding: 6px 12px;
    background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
    color: white;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* ã‚¢ãƒ‰ãƒã‚¤ã‚¹ */
.hexagram-advice {
    background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    padding: 12px;
    border-radius: 8px;
    margin-top: 12px;
}

.advice-label {
    font-size: 12px;
    font-weight: 600;
    color: #92400E;
    margin: 0 0 4px;
}

.advice-text {
    font-size: 14px;
    color: #78350F;
    margin: 0;
    line-height: 1.5;
}

/* ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ */
.summary-card {
    background: white;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.total-score-section {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
}

.total-score-label {
    font-size: 16px;
    color: #6B7280;
}

.total-score-value {
    font-size: 48px;
    font-weight: 700;
    color: #1E293B;
}

.summary-message p {
    margin: 8px 0;
    font-size: 15px;
    line-height: 1.6;
    color: #4B5563;
}
```

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

1. **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ç¢ºèª**
   - `BasicResultsTab.js`ã¯`/public/js/components/tabs/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
   - results.htmlã§ã®èª­ã¿è¾¼ã¿ãƒ‘ã‚¹ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèª

2. **å®Ÿè¡Œé †åº**
   - H384ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå…ˆã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨
   - HexagramExtractorãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã“ã¨
   - ãã®å¾Œã§BasicResultsTabã‚’åˆæœŸåŒ–ã™ã‚‹ã“ã¨

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤º
   - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ã®ç¢ºèª

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹çµæœ

ã“ã®ä¿®æ­£ã«ã‚ˆã‚Šï¼š
1. **3ã¤ã®OSã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
2. **å„ã‚«ãƒ¼ãƒ‰ã«æ˜“å¦ã®è©³ç´°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
3. **ã‚¹ã‚³ã‚¢ãŒãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã¨ãƒ¬ãƒ™ãƒ«ã§è¡¨ç¤ºã•ã‚Œã‚‹**
4. **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¿ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
5. **ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹**

## ç¢ºèªæ–¹æ³•

```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python3 -m http.server 8012

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
http://localhost:8012/public/results.html
```

OSã‚«ãƒ¼ãƒ‰ãŒ3ã¤ä¸¦ã‚“ã§è¡¨ç¤ºã•ã‚Œã€ãã‚Œãã‚Œã«æ˜“å¦æƒ…å ±ã¨ã‚¹ã‚³ã‚¢è§£é‡ˆãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã§ã™ã€‚