# ğŸ“‹ TRAEå®Ÿè£…æŒ‡ç¤ºæ›¸ - é«˜åº¦åˆ†ææ©Ÿèƒ½ã®ç”»é¢å®Ÿè£…

## ğŸ¯ å®Ÿè£…ç›®çš„

HAQEIã‚’å˜ãªã‚‹è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‹ã‚‰ã€Œ**æ·±å±¤å¿ƒç†ã®å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ **ã€ã¸é€²åŒ–ã•ã›ã‚‹ã€‚å›ç­”ã®ç›¸é–¢ã€æ™‚ç³»åˆ—å¤‰åŒ–ã€çˆ»ä½ã®æ®µéšçš„ç™ºå±•ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹å½¢ã§ç”»é¢ã«è¡¨ç¤ºã™ã‚‹ã€‚

## ğŸ–¼ï¸ ç”»é¢è¡¨ç¤ºã®å…¨ä½“åƒ

### æ–°ã—ã„ã‚¿ãƒ–æ§‹æˆ
```
[åŸºæœ¬çµæœ] [è©³ç´°åˆ†æ] [ç›¸é–¢ãƒãƒƒãƒ—ğŸ†•] [æˆé•·è»Œè·¡ğŸ†•] [ç™ºå±•æ®µéšğŸ†•] [æ´å¯Ÿ] [ã‚·ãƒŠãƒªã‚ª] [ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]
```

## ğŸ“Š æ©Ÿèƒ½1: å›ç­”ç›¸é–¢åˆ†æã‚·ã‚¹ãƒ†ãƒ 

### 1.1 ç”»é¢è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸

```html
<!-- ç›¸é–¢ãƒãƒƒãƒ—ã‚¿ãƒ–ã®è¡¨ç¤º -->
<div class="correlation-map-container">
    <!-- ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—è¡¨ç¤º -->
    <div class="correlation-heatmap">
        <canvas id="correlationCanvas"></canvas>
        <div class="correlation-legend">
            <span class="strong-positive">å¼·ã„æ­£ã®ç›¸é–¢</span>
            <span class="weak-positive">å¼±ã„æ­£ã®ç›¸é–¢</span>
            <span class="neutral">ç›¸é–¢ãªã—</span>
            <span class="weak-negative">å¼±ã„è² ã®ç›¸é–¢</span>
            <span class="strong-negative">å¼·ã„è² ã®ç›¸é–¢</span>
        </div>
    </div>
    
    <!-- ç™ºè¦‹ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ -->
    <div class="discovered-patterns">
        <h3>ã‚ãªãŸã®å›ç­”ã‹ã‚‰è¦‹ã¤ã‹ã£ãŸç‰¹å¾´çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
        <div class="pattern-cards">
            <div class="pattern-card highlight">
                <span class="pattern-icon">ğŸ”„</span>
                <h4>å†…å¤–ä¸€è‡´å‹</h4>
                <p>å†…çš„å‹•æ©Ÿï¼ˆQ1-8ï¼‰ã¨å¤–çš„è¡¨ç¾ï¼ˆQ9-16ï¼‰ãŒå¼·ãé€£å‹•</p>
                <div class="correlation-strength">ç›¸é–¢ä¿‚æ•°: 0.85</div>
            </div>
        </div>
    </div>
    
    <!-- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè©³ç´°è¡¨ç¤º -->
    <div class="correlation-details" id="correlationDetails">
        <!-- ã‚¯ãƒªãƒƒã‚¯ã—ãŸè³ªå•ãƒšã‚¢ã®è©³ç´°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
    </div>
</div>
```

### 1.2 å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/components/tabs/CorrelationMapTab.js`

```javascript
/**
 * ç›¸é–¢ãƒãƒƒãƒ—ã‚¿ãƒ– - è³ªå•é–“ã®é–¢é€£æ€§ã‚’å¯è¦–åŒ–
 */
class CorrelationMapTab extends BaseTabView {
    constructor(tabId) {
        super(tabId);
        this.correlationMatrix = null;
        this.patterns = [];
        this.heatmapChart = null;
    }

    /**
     * ç›¸é–¢è¡Œåˆ—ã‚’è¨ˆç®—
     */
    calculateCorrelationMatrix(answers) {
        const n = answers.length;
        const matrix = Array(n).fill(null).map(() => Array(n).fill(0));
        
        for (let i = 0; i < n; i++) {
            for (let j = 0; j < n; j++) {
                if (i === j) {
                    matrix[i][j] = 1; // è‡ªå·±ç›¸é–¢ã¯1
                } else {
                    matrix[i][j] = this.pearsonCorrelation(
                        answers.slice(0, 24).map(a => a[i]),
                        answers.slice(0, 24).map(a => a[j])
                    );
                }
            }
        }
        
        return matrix;
    }

    /**
     * ãƒ”ã‚¢ã‚½ãƒ³ç›¸é–¢ä¿‚æ•°ã®è¨ˆç®—
     */
    pearsonCorrelation(x, y) {
        const n = x.length;
        const sumX = x.reduce((a, b) => a + b, 0);
        const sumY = y.reduce((a, b) => a + b, 0);
        const sumXY = x.reduce((total, xi, i) => total + xi * y[i], 0);
        const sumX2 = x.reduce((total, xi) => total + xi * xi, 0);
        const sumY2 = y.reduce((total, yi) => total + yi * yi, 0);
        
        const correlation = (n * sumXY - sumX * sumY) / 
            Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));
        
        return isNaN(correlation) ? 0 : correlation;
    }

    /**
     * ç‰¹å¾´çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œå‡º
     */
    detectPatterns(matrix, answers) {
        const patterns = [];
        
        // ãƒ‘ã‚¿ãƒ¼ãƒ³1: å†…å¤–ä¸€è‡´æ€§
        const innerOuter = this.calculateGroupCorrelation(
            matrix, 
            [0, 1, 2, 3, 4, 5, 6, 7],    // Q1-8: å†…çš„å‹•æ©Ÿ
            [8, 9, 10, 11, 12, 13, 14, 15] // Q9-16: å¤–çš„è¡¨ç¾
        );
        
        if (Math.abs(innerOuter) > 0.6) {
            patterns.push({
                type: 'inner-outer-consistency',
                name: innerOuter > 0 ? 'å†…å¤–ä¸€è‡´å‹' : 'å†…å¤–åˆ†é›¢å‹',
                description: innerOuter > 0 
                    ? 'å†…é¢ã®æ€ã„ã¨å¤–ã§ã®æŒ¯ã‚‹èˆã„ãŒä¸€è‡´ã—ã¦ã„ã¾ã™'
                    : 'å†…é¢ã¨å¤–é¢ã§ç•°ãªã‚‹è‡ªåˆ†ã‚’ä½¿ã„åˆ†ã‘ã¦ã„ã¾ã™',
                strength: Math.abs(innerOuter),
                icon: innerOuter > 0 ? 'ğŸ”„' : 'ğŸ”€',
                details: this.generateConsistencyDetails(answers, innerOuter)
            });
        }
        
        // ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒªã‚¹ã‚¯-å®‰å®šãƒãƒ©ãƒ³ã‚¹
        const riskStability = this.calculateGroupCorrelation(
            matrix,
            [4, 5, 6, 7],      // Q5-8: ãƒªã‚¹ã‚¯å¿—å‘
            [19, 20, 21, 22, 23] // Q20-24: å®‰å®šå¿—å‘
        );
        
        if (Math.abs(riskStability) > 0.5) {
            patterns.push({
                type: 'risk-stability',
                name: riskStability < -0.5 ? 'å†’é™ºå®¶å‹' : 'å®‰å®šé‡è¦–å‹',
                description: riskStability < -0.5
                    ? 'ãƒªã‚¹ã‚¯ã‚’æã‚Œãšæ–°ã—ã„æŒ‘æˆ¦ã‚’æ±‚ã‚ã¾ã™'
                    : 'å®‰å®šã¨ç¢ºå®Ÿæ€§ã‚’é‡è¦–ã—ã¦è¡Œå‹•ã—ã¾ã™',
                strength: Math.abs(riskStability),
                icon: riskStability < -0.5 ? 'ğŸš€' : 'âš–ï¸',
                details: this.generateRiskDetails(answers, riskStability)
            });
        }
        
        // ãƒ‘ã‚¿ãƒ¼ãƒ³3: è«–ç†-æ„Ÿæƒ…ãƒãƒ©ãƒ³ã‚¹
        const logicEmotion = this.detectLogicEmotionBalance(matrix, answers);
        if (logicEmotion) {
            patterns.push(logicEmotion);
        }
        
        // ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—å‚¾å‘
        const leadership = this.detectLeadershipPattern(matrix, answers);
        if (leadership) {
            patterns.push(leadership);
        }
        
        return patterns.sort((a, b) => b.strength - a.strength);
    }

    /**
     * ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’æç”»
     */
    renderHeatmap(container) {
        const canvas = document.getElementById('correlationCanvas');
        const ctx = canvas.getContext('2d');
        
        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºè¨­å®š
        const size = Math.min(container.clientWidth - 100, 600);
        canvas.width = size;
        canvas.height = size;
        
        const cellSize = size / 24;
        
        // ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—æç”»
        for (let i = 0; i < 24; i++) {
            for (let j = 0; j < 24; j++) {
                const correlation = this.correlationMatrix[i][j];
                ctx.fillStyle = this.getHeatmapColor(correlation);
                ctx.fillRect(i * cellSize, j * cellSize, cellSize - 1, cellSize - 1);
            }
        }
        
        // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ 
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const i = Math.floor(x / cellSize);
            const j = Math.floor(y / cellSize);
            
            if (i >= 0 && i < 24 && j >= 0 && j < 24) {
                this.showCorrelationDetail(i, j);
            }
        });
        
        // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const i = Math.floor(x / cellSize);
            const j = Math.floor(y / cellSize);
            
            if (i >= 0 && i < 24 && j >= 0 && j < 24) {
                this.showTooltip(e.pageX, e.pageY, i, j);
            }
        });
    }

    /**
     * ç›¸é–¢ã®å¼·ã•ã«å¿œã˜ãŸè‰²ã‚’å–å¾—
     */
    getHeatmapColor(correlation) {
        if (correlation > 0.7) return '#22C55E';      // å¼·ã„æ­£ã®ç›¸é–¢ï¼šç·‘
        if (correlation > 0.3) return '#86EFAC';      // å¼±ã„æ­£ã®ç›¸é–¢ï¼šè–„ç·‘
        if (correlation > -0.3) return '#F3F4F6';     // ç›¸é–¢ãªã—ï¼šã‚°ãƒ¬ãƒ¼
        if (correlation > -0.7) return '#FCA5A5';     // å¼±ã„è² ã®ç›¸é–¢ï¼šè–„èµ¤
        return '#EF4444';                             // å¼·ã„è² ã®ç›¸é–¢ï¼šèµ¤
    }

    /**
     * ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
     */
    renderPatternCards() {
        const container = document.querySelector('.pattern-cards');
        
        const cardsHTML = this.patterns.map((pattern, index) => `
            <div class="pattern-card ${index === 0 ? 'highlight' : ''}" 
                 data-pattern-type="${pattern.type}">
                <span class="pattern-icon">${pattern.icon}</span>
                <h4>${pattern.name}</h4>
                <p class="pattern-description">${pattern.description}</p>
                <div class="correlation-strength">
                    <div class="strength-bar">
                        <div class="strength-fill" style="width: ${pattern.strength * 100}%"></div>
                    </div>
                    <span class="strength-value">ç›¸é–¢ã®å¼·ã•: ${(pattern.strength * 100).toFixed(0)}%</span>
                </div>
                <button class="detail-btn" onclick="showPatternDetail('${pattern.type}')">
                    è©³ç´°ã‚’è¦‹ã‚‹
                </button>
            </div>
        `).join('');
        
        container.innerHTML = cardsHTML;
    }

    /**
     * ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸç›¸é–¢ã®è©³ç´°ã‚’è¡¨ç¤º
     */
    showCorrelationDetail(i, j) {
        const detailContainer = document.getElementById('correlationDetails');
        const correlation = this.correlationMatrix[i][j];
        const questions = this.getQuestions();
        
        const detailHTML = `
            <div class="correlation-detail-card">
                <h4>è³ªå•${i + 1}ã¨è³ªå•${j + 1}ã®é–¢ä¿‚</h4>
                <div class="question-pair">
                    <div class="question-item">
                        <span class="question-number">Q${i + 1}</span>
                        <p class="question-text">${questions[i].text}</p>
                        <span class="answer-value">ã‚ãªãŸã®å›ç­”: ${this.userAnswers[i]}</span>
                    </div>
                    <div class="correlation-indicator">
                        <span class="correlation-value" style="color: ${this.getHeatmapColor(correlation)}">
                            ${correlation > 0 ? 'æ­£' : 'è² '}ã®ç›¸é–¢
                            ${Math.abs(correlation * 100).toFixed(0)}%
                        </span>
                    </div>
                    <div class="question-item">
                        <span class="question-number">Q${j + 1}</span>
                        <p class="question-text">${questions[j].text}</p>
                        <span class="answer-value">ã‚ãªãŸã®å›ç­”: ${this.userAnswers[j]}</span>
                    </div>
                </div>
                <div class="correlation-interpretation">
                    <h5>ã“ã®ç›¸é–¢ãŒæ„å‘³ã™ã‚‹ã“ã¨</h5>
                    <p>${this.interpretCorrelation(i, j, correlation)}</p>
                </div>
            </div>
        `;
        
        detailContainer.innerHTML = detailHTML;
        detailContainer.scrollIntoView({ behavior: 'smooth' });
    }

    /**
     * ç›¸é–¢ã®è§£é‡ˆã‚’ç”Ÿæˆ
     */
    interpretCorrelation(i, j, correlation) {
        const strength = Math.abs(correlation);
        const direction = correlation > 0 ? 'positive' : 'negative';
        
        // è³ªå•ã®ã‚«ãƒ†ã‚´ãƒªã‚’åˆ¤å®š
        const categoryI = this.getQuestionCategory(i);
        const categoryJ = this.getQuestionCategory(j);
        
        if (strength > 0.7) {
            if (direction === 'positive') {
                return `${categoryI}ã¨${categoryJ}ãŒå¼·ãé€£å‹•ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ãŒé«˜ã¾ã‚‹ã¨ã€ã‚‚ã†ä¸€æ–¹ã‚‚é«˜ã¾ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã‚ãªãŸã®æ€è€ƒã¨è¡Œå‹•ã«ä¸€è²«æ€§ãŒã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚`;
            } else {
                return `${categoryI}ã¨${categoryJ}ãŒç›¸åã™ã‚‹é–¢ä¿‚ã«ã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã‚’é‡è¦–ã™ã‚‹ã¨ã€ã‚‚ã†ä¸€æ–¹ãŒæŠ‘åˆ¶ã•ã‚Œã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚ã†ã¨ã™ã‚‹å¿ƒç†çš„ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®ç¾ã‚Œã§ã™ã€‚`;
            }
        } else if (strength > 0.3) {
            return `${categoryI}ã¨${categoryJ}ã«ã¯ç·©ã‚„ã‹ãªé–¢é€£æ€§ãŒã‚ã‚Šã¾ã™ã€‚çŠ¶æ³ã«ã‚ˆã£ã¦å½±éŸ¿ã—åˆã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`;
        } else {
            return `${categoryI}ã¨${categoryJ}ã¯ç‹¬ç«‹ã—ã¦æ©Ÿèƒ½ã—ã¦ã„ã¾ã™ã€‚ãã‚Œãã‚ŒãŒç•°ãªã‚‹å´é¢ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚`;
        }
    }
}
```

## ğŸ“ˆ æ©Ÿèƒ½2: æ™‚ç³»åˆ—åˆ†ææ©Ÿèƒ½

### 2.1 ç”»é¢è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸

```html
<!-- æˆé•·è»Œè·¡ã‚¿ãƒ–ã®è¡¨ç¤º -->
<div class="temporal-analysis-container">
    <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º -->
    <div class="timeline-view">
        <div class="timeline-header">
            <h3>ã‚ãªãŸã®æˆé•·ã¨å¤‰åŒ–ã®è»Œè·¡</h3>
            <div class="time-range-selector">
                <button class="range-btn active" data-range="1month">1ãƒ¶æœˆ</button>
                <button class="range-btn" data-range="3months">3ãƒ¶æœˆ</button>
                <button class="range-btn" data-range="6months">6ãƒ¶æœˆ</button>
                <button class="range-btn" data-range="1year">1å¹´</button>
            </div>
        </div>
        
        <!-- OSã‚¹ã‚³ã‚¢ã®æ¨ç§»ã‚°ãƒ©ãƒ• -->
        <div class="score-evolution-chart">
            <canvas id="evolutionChart"></canvas>
        </div>
        
        <!-- å¦ã®å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ -->
        <div class="hexagram-transitions">
            <h4>æ˜“å¦ã®å¤‰é·</h4>
            <div class="transition-flow">
                <div class="hexagram-node past">
                    <span class="date">2024/10/19</span>
                    <span class="hexagram">ä¹¾ä¸ºå¤©</span>
                    <span class="score">75</span>
                </div>
                <div class="transition-arrow">â†’</div>
                <div class="hexagram-node current">
                    <span class="date">2025/01/19</span>
                    <span class="hexagram">å¤©ç«åŒäºº</span>
                    <span class="score">82</span>
                </div>
            </div>
        </div>
        
        <!-- å®‰å®švså¤‰åŒ–ã®åˆ†æ -->
        <div class="stability-analysis">
            <div class="stable-traits">
                <h4>ğŸ’ å®‰å®šã—ã¦ã„ã‚‹ç‰¹æ€§</h4>
                <ul>
                    <li>å‰µé€ æ€§ã¸ã®å¿—å‘ï¼ˆä¸€è²«ã—ã¦é«˜ã„ï¼‰</li>
                    <li>å”èª¿æ€§ï¼ˆå®‰å®šã—ã¦ä¸­ç¨‹åº¦ï¼‰</li>
                </ul>
            </div>
            <div class="changing-traits">
                <h4>ğŸŒŠ å¤‰åŒ–ã—ã¦ã„ã‚‹ç‰¹æ€§</h4>
                <ul>
                    <li>ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ï¼ˆä¸Šæ˜‡å‚¾å‘ï¼‰â†‘</li>
                    <li>ãƒªã‚¹ã‚¯å›é¿ï¼ˆæ¸›å°‘å‚¾å‘ï¼‰â†“</li>
                </ul>
            </div>
        </div>
    </div>
</div>
```

### 2.2 å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/components/tabs/TemporalAnalysisTab.js`

```javascript
/**
 * æ™‚ç³»åˆ—åˆ†æã‚¿ãƒ– - æˆé•·ã¨å¤‰åŒ–ã‚’å¯è¦–åŒ–
 */
class TemporalAnalysisTab extends BaseTabView {
    constructor(tabId) {
        super(tabId);
        this.analysisHistory = [];
        this.evolutionChart = null;
        this.timeRange = '3months';
    }

    /**
     * åˆ†æå±¥æ­´ã‚’èª­ã¿è¾¼ã¿
     */
    loadAnalysisHistory() {
        const history = this.storageManager.getItem('analysisHistory') || [];
        
        // ç¾åœ¨ã®åˆ†æã‚’è¿½åŠ 
        const currentAnalysis = {
            timestamp: Date.now(),
            engineOS: this.analysisData.engineOS,
            interfaceOS: this.analysisData.interfaceOS,
            safeModeOS: this.analysisData.safeModeOS,
            answers: this.storageManager.getAnswers()
        };
        
        // é‡è¤‡ã‚’é¿ã‘ã¦è¿½åŠ 
        if (!this.isDuplicateAnalysis(history, currentAnalysis)) {
            history.push(currentAnalysis);
            this.storageManager.setItem('analysisHistory', history);
        }
        
        return history;
    }

    /**
     * ã‚¹ã‚³ã‚¢ã®å¤‰åŒ–ã‚’åˆ†æ
     */
    analyzeScoreEvolution(history) {
        const evolution = {
            engineOS: [],
            interfaceOS: [],
            safeModeOS: []
        };
        
        history.forEach(record => {
            evolution.engineOS.push({
                x: new Date(record.timestamp),
                y: record.engineOS.score,
                hexagram: record.engineOS.hexagram.name
            });
            evolution.interfaceOS.push({
                x: new Date(record.timestamp),
                y: record.interfaceOS.score,
                hexagram: record.interfaceOS.hexagram.name
            });
            evolution.safeModeOS.push({
                x: new Date(record.timestamp),
                y: record.safeModeOS.score,
                hexagram: record.safeModeOS.hexagram.name
            });
        });
        
        return evolution;
    }

    /**
     * æ¨ç§»ã‚°ãƒ©ãƒ•ã‚’æç”»
     */
    renderEvolutionChart() {
        const canvas = document.getElementById('evolutionChart');
        const ctx = canvas.getContext('2d');
        
        if (this.evolutionChart) {
            this.evolutionChart.destroy();
        }
        
        this.evolutionChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [
                    {
                        label: 'Engine OSï¼ˆå†…çš„å‹•æ©Ÿï¼‰',
                        data: this.evolution.engineOS,
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Interface OSï¼ˆç¤¾ä¼šæ€§ï¼‰',
                        data: this.evolution.interfaceOS,
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'SafeMode OSï¼ˆå®‰å®šæ€§ï¼‰',
                        data: this.evolution.safeModeOS,
                        borderColor: '#F59E0B',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'day',
                            displayFormats: {
                                day: 'MM/DD'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'ã‚¹ã‚³ã‚¢'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            afterLabel: function(context) {
                                const point = context.raw;
                                return `æ˜“å¦: ${point.hexagram}`;
                            }
                        }
                    },
                    annotation: {
                        annotations: this.generateMilestoneAnnotations()
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false
                }
            }
        });
    }

    /**
     * å¦ã®å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æ
     */
    analyzeHexagramTransitions(history) {
        const transitions = {
            engineOS: [],
            interfaceOS: [],
            safeModeOS: []
        };
        
        for (let i = 1; i < history.length; i++) {
            const prev = history[i - 1];
            const curr = history[i];
            
            // Engine OSã®å¤‰åŒ–
            if (prev.engineOS.hexagram.name !== curr.engineOS.hexagram.name) {
                transitions.engineOS.push({
                    from: prev.engineOS.hexagram.name,
                    to: curr.engineOS.hexagram.name,
                    date: new Date(curr.timestamp),
                    interpretation: this.interpretTransition(
                        prev.engineOS.hexagram.name,
                        curr.engineOS.hexagram.name
                    )
                });
            }
        }
        
        return transitions;
    }

    /**
     * å¤‰åŒ–ã®è§£é‡ˆã‚’ç”Ÿæˆ
     */
    interpretTransition(fromHexagram, toHexagram) {
        // æ˜“çµŒã®å¤‰çˆ»ç†è«–ã«åŸºã¥ãè§£é‡ˆ
        const transitionMap = {
            'ä¹¾ä¸ºå¤©â†’å¤©ç«åŒäºº': 'å€‹äººã®åŠ›ã‹ã‚‰å”åƒã®åŠ›ã¸ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒæˆç†Ÿã—ã€ä»–è€…ã¨ã®å”åŠ›ã‚’é‡è¦–ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚',
            'å¤ä¸ºåœ°â†’åœ°å¤©æ³°': 'å—å®¹ã‹ã‚‰èª¿å’Œã¸ã€‚å—ã‘èº«ã ã£ãŸå§¿å‹¢ãŒã€ç©æ¥µçš„ãªèª¿å’Œå‰µé€ ã¸ã¨ç™ºå±•ã—ã¾ã—ãŸã€‚',
            // ... ä»–ã®çµ„ã¿åˆã‚ã›
        };
        
        const key = `${fromHexagram}â†’${toHexagram}`;
        return transitionMap[key] || this.generateGenericTransition(fromHexagram, toHexagram);
    }

    /**
     * å®‰å®šç‰¹æ€§ã¨å¤‰åŒ–ç‰¹æ€§ã‚’è­˜åˆ¥
     */
    identifyStabilityPatterns(history) {
        if (history.length < 2) {
            return { stable: [], changing: [] };
        }
        
        const traits = this.extractTraits(history);
        const stable = [];
        const changing = [];
        
        Object.entries(traits).forEach(([trait, values]) => {
            const variance = this.calculateVariance(values);
            const trend = this.calculateTrend(values);
            
            if (variance < 0.1) {
                stable.push({
                    name: trait,
                    averageValue: this.average(values),
                    consistency: (1 - variance) * 100
                });
            } else {
                changing.push({
                    name: trait,
                    direction: trend > 0 ? 'up' : 'down',
                    changeRate: Math.abs(trend),
                    currentValue: values[values.length - 1]
                });
            }
        });
        
        return { stable, changing };
    }

    /**
     * ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆ
     */
    generateMilestoneAnnotations() {
        const annotations = [];
        
        // é‡è¦ãªå¤‰åŒ–ç‚¹ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
        this.analysisHistory.forEach((record, index) => {
            if (this.isSignificantChange(record, index)) {
                annotations.push({
                    type: 'line',
                    xMin: record.timestamp,
                    xMax: record.timestamp,
                    borderColor: 'rgba(255, 99, 132, 0.5)',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    label: {
                        content: 'é‡è¦ãªå¤‰åŒ–',
                        enabled: true,
                        position: 'top'
                    }
                });
            }
        });
        
        return annotations;
    }

    /**
     * é‡è¦ãªå¤‰åŒ–ã‹ã©ã†ã‹ã‚’åˆ¤å®š
     */
    isSignificantChange(record, index) {
        if (index === 0) return false;
        
        const prev = this.analysisHistory[index - 1];
        const scoreDiff = Math.abs(record.engineOS.score - prev.engineOS.score) +
                         Math.abs(record.interfaceOS.score - prev.interfaceOS.score) +
                         Math.abs(record.safeModeOS.score - prev.safeModeOS.score);
        
        return scoreDiff > 15; // åˆè¨ˆ15ãƒã‚¤ãƒ³ãƒˆä»¥ä¸Šã®å¤‰åŒ–
    }
}
```

## ğŸ­ æ©Ÿèƒ½3: çˆ»ä½ã«ã‚ˆã‚‹æ·±å±¤åˆ†æ

### 3.1 ç”»é¢è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸

```html
<!-- ç™ºå±•æ®µéšã‚¿ãƒ–ã®è¡¨ç¤º -->
<div class="yao-analysis-container">
    <!-- 6æ®µéšã®ç™ºå±•æ®µéš -->
    <div class="development-stages">
        <h3>ã‚ãªãŸã®ç™ºå±•æ®µéš</h3>
        
        <!-- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãªæ®µéšè¡¨ç¤º -->
        <div class="stage-pyramid">
            <div class="stage level-6 ${activeStage === 6 ? 'active' : ''}" data-stage="6">
                <div class="stage-content">
                    <span class="stage-number">ç¬¬å…­çˆ»</span>
                    <span class="stage-name">ç©¶æ¥µ</span>
                    <span class="stage-score">${stages[5].score}%</span>
                </div>
                <div class="stage-tooltip">
                    å®Œæˆã•ã‚ŒãŸçŠ¶æ…‹ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ¬ãƒ™ãƒ«
                </div>
            </div>
            
            <div class="stage level-5 ${activeStage === 5 ? 'active' : ''}" data-stage="5">
                <div class="stage-content">
                    <span class="stage-number">ç¬¬äº”çˆ»</span>
                    <span class="stage-name">çµ±ç‡</span>
                    <span class="stage-score">${stages[4].score}%</span>
                </div>
            </div>
            
            <div class="stage level-4 ${activeStage === 4 ? 'active' : ''}" data-stage="4">
                <div class="stage-content">
                    <span class="stage-number">ç¬¬å››çˆ»</span>
                    <span class="stage-name">ç¤¾ä¼š</span>
                    <span class="stage-score">${stages[3].score}%</span>
                </div>
            </div>
            
            <div class="stage level-3 ${activeStage === 3 ? 'active' : ''}" data-stage="3">
                <div class="stage-content">
                    <span class="stage-number">ç¬¬ä¸‰çˆ»</span>
                    <span class="stage-name">ç§»è¡Œ</span>
                    <span class="stage-score">${stages[2].score}%</span>
                </div>
            </div>
            
            <div class="stage level-2 ${activeStage === 2 ? 'active' : ''}" data-stage="2">
                <div class="stage-content">
                    <span class="stage-number">ç¬¬äºŒçˆ»</span>
                    <span class="stage-name">å†…çš„</span>
                    <span class="stage-score">${stages[1].score}%</span>
                </div>
            </div>
            
            <div class="stage level-1 ${activeStage === 1 ? 'active' : ''}" data-stage="1">
                <div class="stage-content">
                    <span class="stage-number">åˆçˆ»</span>
                    <span class="stage-name">æ½œåœ¨</span>
                    <span class="stage-score">${stages[0].score}%</span>
                </div>
            </div>
        </div>
        
        <!-- ç¾åœ¨ã®æ®µéšã®è©³ç´° -->
        <div class="current-stage-detail">
            <h4>ç¾åœ¨ã‚ãªãŸã¯ã€Œ${currentStage.name}ã€ã®æ®µéšã«ã„ã¾ã™</h4>
            <p class="stage-description">${currentStage.description}</p>
            
            <div class="stage-characteristics">
                <div class="characteristic-card">
                    <h5>ã“ã®æ®µéšã®ç‰¹å¾´</h5>
                    <ul>
                        ${currentStage.characteristics.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="characteristic-card">
                    <h5>æ¬¡ã®æ®µéšã¸é€²ã‚€ã«ã¯</h5>
                    <ul>
                        ${currentStage.nextStepHints.map(h => `<li>${h}</li>`).join('')}
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- å„OSã”ã¨ã®çˆ»åˆ†æ -->
        <div class="os-yao-analysis">
            <div class="os-yao-card">
                <h4>Engine OS - å†…çš„å‹•æ©Ÿã®ç™ºå±•</h4>
                <div class="yao-distribution">
                    ${this.renderYaoDistribution('engineOS')}
                </div>
            </div>
            
            <div class="os-yao-card">
                <h4>Interface OS - ç¤¾ä¼šæ€§ã®ç™ºå±•</h4>
                <div class="yao-distribution">
                    ${this.renderYaoDistribution('interfaceOS')}
                </div>
            </div>
            
            <div class="os-yao-card">
                <h4>SafeMode OS - å®‰å®šæ€§ã®ç™ºå±•</h4>
                <div class="yao-distribution">
                    ${this.renderYaoDistribution('safeModeOS')}
                </div>
            </div>
        </div>
    </div>
</div>
```

### 3.2 å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/components/tabs/YaoAnalysisTab.js`

```javascript
/**
 * çˆ»ä½åˆ†æã‚¿ãƒ– - 6æ®µéšã®ç™ºå±•æ®µéšã‚’å¯è¦–åŒ–
 */
class YaoAnalysisTab extends BaseTabView {
    constructor(tabId) {
        super(tabId);
        this.stages = [];
        this.currentStage = null;
        this.hexagramExtractor = new HexagramExtractor();
    }

    /**
     * çˆ»ä½ã«ã‚ˆã‚‹æ®µéšåˆ†æ
     */
    analyzeYaoStages(osData) {
        const stages = [];
        
        // å„OSã®H384ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const engineData = this.hexagramExtractor.getHexagramDataByName(
            osData.engineOS.hexagram.name
        );
        const interfaceData = this.hexagramExtractor.getHexagramDataByName(
            osData.interfaceOS.hexagram.name
        );
        const safeModeData = this.hexagramExtractor.getHexagramDataByName(
            osData.safeModeOS.hexagram.name
        );
        
        // 6ã¤ã®çˆ»ãã‚Œãã‚Œã‚’åˆ†æ
        for (let i = 0; i < 6; i++) {
            const stage = {
                position: i + 1,
                name: this.getStageName(i),
                engineScore: this.extractYaoScore(engineData, i),
                interfaceScore: this.extractYaoScore(interfaceData, i),
                safeModeScore: this.extractYaoScore(safeModeData, i),
                keywords: this.extractYaoKeywords(engineData, interfaceData, safeModeData, i),
                interpretation: this.generateStageInterpretation(i)
            };
            
            // ç·åˆã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
            stage.totalScore = (stage.engineScore + stage.interfaceScore + stage.safeModeScore) / 3;
            stages.push(stage);
        }
        
        return stages;
    }

    /**
     * æ®µéšã®åå‰ã‚’å–å¾—
     */
    getStageName(position) {
        const names = [
            'æ½œåœ¨çš„è³‡è³ª',  // åˆçˆ»
            'å†…çš„æ´»å‹•',    // äºŒçˆ»
            'ç§»è¡ŒæœŸ',      // ä¸‰çˆ»
            'ç¤¾ä¼šçš„ä½ç½®',  // å››çˆ»
            'çµ±ç‡åŠ›',      // äº”çˆ»
            'ç©¶æ¥µã®å¢ƒåœ°'   // ä¸Šçˆ»
        ];
        return names[position];
    }

    /**
     * çˆ»ã®ã‚¹ã‚³ã‚¢ã‚’æŠ½å‡º
     */
    extractYaoScore(hexagramData, position) {
        if (!hexagramData || hexagramData.length <= position) {
            return 50; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
        }
        
        const yao = hexagramData[position];
        // ã‚¹ã‚³ã‚¢ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹å ´åˆã¯ãã‚Œã‚’ä½¿ç”¨
        if (yao['ã‚¹ã‚³ã‚¢']) {
            return yao['ã‚¹ã‚³ã‚¢'];
        }
        
        // ãªã‘ã‚Œã°ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ•°ã‚„é‡è¦åº¦ã‹ã‚‰æ¨å®š
        const keywords = (yao['ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰'] || '').split('ãƒ»');
        return Math.min(100, 40 + keywords.length * 10);
    }

    /**
     * ç¾åœ¨ã®ç™ºå±•æ®µéšã‚’ç‰¹å®š
     */
    identifyCurrentStage(stages, userAnswers) {
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰æœ€ã‚‚æ´»æ€§åŒ–ã—ã¦ã„ã‚‹æ®µéšã‚’ç‰¹å®š
        let maxScore = 0;
        let currentStage = null;
        
        stages.forEach((stage, index) => {
            // å›ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®ç›¸é–¢ã‚’è¨ˆç®—
            const correlation = this.calculateStageCorrelation(stage, userAnswers);
            const weightedScore = stage.totalScore * correlation;
            
            if (weightedScore > maxScore) {
                maxScore = weightedScore;
                currentStage = {
                    ...stage,
                    index: index,
                    dominance: weightedScore
                };
            }
        });
        
        return currentStage;
    }

    /**
     * ãƒ”ãƒ©ãƒŸãƒƒãƒ‰å‹ã®æ®µéšè¡¨ç¤ºã‚’ç”Ÿæˆ
     */
    renderStagePyramid() {
        const container = document.querySelector('.stage-pyramid');
        
        const pyramidHTML = this.stages.reverse().map((stage, index) => {
            const level = 6 - index;
            const isActive = this.currentStage && this.currentStage.position === stage.position;
            const width = 50 + (index * 15); // ä¸Šã«è¡Œãã»ã©ç‹­ã
            
            return `
                <div class="stage level-${level} ${isActive ? 'active' : ''}" 
                     data-stage="${stage.position}"
                     style="width: ${width}%">
                    <div class="stage-content">
                        <span class="stage-number">ç¬¬${this.toChineseNumber(stage.position)}çˆ»</span>
                        <span class="stage-name">${stage.name}</span>
                        <div class="stage-score-bar">
                            <div class="score-fill" style="width: ${stage.totalScore}%"></div>
                            <span class="score-text">${Math.round(stage.totalScore)}%</span>
                        </div>
                    </div>
                    <div class="stage-hover-detail">
                        <h5>${stage.name}ã®è©³ç´°</h5>
                        <p>${stage.interpretation}</p>
                        <div class="stage-keywords">
                            ${stage.keywords.map(kw => `<span class="keyword">${kw}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
        }).join('');
        
        container.innerHTML = pyramidHTML;
        
        // ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ 
        this.addPyramidInteractions();
    }

    /**
     * å„OSã®çˆ»åˆ†å¸ƒã‚’å¯è¦–åŒ–
     */
    renderYaoDistribution(osType) {
        const osData = this.analysisData[osType];
        const hexagramData = this.hexagramExtractor.getHexagramDataByName(
            osData.hexagram.name
        );
        
        // æ¨ªæ£’ã‚°ãƒ©ãƒ•å½¢å¼ã§çˆ»ã”ã¨ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼åˆ†å¸ƒã‚’è¡¨ç¤º
        const distributionHTML = `
            <div class="yao-bars">
                ${hexagramData.map((yao, index) => {
                    const score = this.extractYaoScore([yao], 0);
                    const isYang = this.isYangYao(osData.hexagram.binary, index);
                    
                    return `
                        <div class="yao-bar-container">
                            <span class="yao-label">
                                ${this.toChineseNumber(index + 1)}çˆ»
                                <span class="yao-type">${isYang ? 'é™½' : 'é™°'}</span>
                            </span>
                            <div class="yao-bar">
                                <div class="yao-fill ${isYang ? 'yang' : 'yin'}" 
                                     style="width: ${score}%"></div>
                            </div>
                            <span class="yao-score">${score}%</span>
                            <div class="yao-keywords">
                                ${(yao['ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰'] || '').split('ãƒ»').slice(0, 2).join('ãƒ»')}
                            </div>
                        </div>
                    `;
                }).join('')}
            </div>
        `;
        
        return distributionHTML;
    }

    /**
     * æ®µéšã®è§£é‡ˆã‚’ç”Ÿæˆ
     */
    generateStageInterpretation(position) {
        const interpretations = [
            // åˆçˆ»
            'ã‚ãªãŸã®æœ€ã‚‚åŸºç¤çš„ãªè³‡è³ªã€‚ã¾ã è¡¨é¢åŒ–ã—ã¦ã„ãªã„æ½œåœ¨èƒ½åŠ›ã‚’è¡¨ã—ã¾ã™ã€‚ã“ã®æ®µéšã§ã¯ã€å†…ãªã‚‹å¯èƒ½æ€§ãŒçœ ã£ã¦ã„ã¾ã™ã€‚',
            // äºŒçˆ»
            'å†…é¢ã§æ´»ç™ºã«åƒã„ã¦ã„ã‚‹è¦ç´ ã€‚è‡ªå·±èªè­˜ã¨å†…çš„ãªæˆé•·ãŒèµ·ãã¦ã„ã‚‹æ®µéšã§ã™ã€‚',
            // ä¸‰çˆ»
            'å†…ã‹ã‚‰å¤–ã¸å‘ã‹ã†ç§»è¡ŒæœŸã€‚å†…é¢ã®è³‡è³ªãŒå¤–ç•Œã¨ã®æ¥è§¦ã‚’å§‹ã‚ã‚‹é‡è¦ãªè»¢æ›ç‚¹ã§ã™ã€‚',
            // å››çˆ»
            'ç¤¾ä¼šçš„ãªç«‹å ´ã‚„å½¹å‰²ã€‚ä»–è€…ã¨ã®é–¢ä¿‚æ€§ã®ä¸­ã§è‡ªåˆ†ã®ä½ç½®ã‚’ç¢ºç«‹ã™ã‚‹æ®µéšã§ã™ã€‚',
            // äº”çˆ»
            'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨å½±éŸ¿åŠ›ã€‚æˆç†Ÿã—ãŸèƒ½åŠ›ã‚’ç™ºæ®ã—ã€å‘¨å›²ã‚’å°ãæ®µéšã§ã™ã€‚',
            // ä¸Šçˆ»
            'ç©¶æ¥µã®åˆ°é”ç‚¹ã€‚ãã®é ˜åŸŸã«ãŠã‘ã‚‹å®Œæˆå½¢ã§ã‚ã‚Šã€æ¬¡ã®å¾ªç’°ã¸ã®æº–å‚™æ®µéšã§ã‚‚ã‚ã‚Šã¾ã™ã€‚'
        ];
        
        return interpretations[position];
    }

    /**
     * æ¬¡ã®æ®µéšã¸ã®ç™ºå±•ãƒ’ãƒ³ãƒˆã‚’ç”Ÿæˆ
     */
    generateDevelopmentPath(currentStage, stages) {
        const current = currentStage.position;
        const next = Math.min(current + 1, 6);
        
        if (current === 6) {
            return {
                message: 'ã‚ãªãŸã¯æ—¢ã«æœ€é«˜æ®µéšã«åˆ°é”ã—ã¦ã„ã¾ã™',
                hints: ['ã“ã®å¢ƒåœ°ã‚’ç¶­æŒã—ã€æ·±ã‚ã¦ã„ã', 'ä»–ã®é ˜åŸŸã§ã®æˆé•·ã«ç›®ã‚’å‘ã‘ã‚‹', 'å¾—ãŸçŸ¥æµã‚’ä»–è€…ã¨å…±æœ‰ã™ã‚‹']
            };
        }
        
        const nextStage = stages[next - 1];
        const gap = nextStage.totalScore - currentStage.totalScore;
        
        return {
            message: `æ¬¡ã¯ã€Œ${nextStage.name}ã€ã®æ®µéšã§ã™`,
            hints: this.generateTransitionHints(current, next, gap),
            requiredGrowth: Math.max(0, gap),
            estimatedTime: this.estimateGrowthTime(gap)
        };
    }

    /**
     * æ•°å­—ã‚’æ¼¢æ•°å­—ã«å¤‰æ›
     */
    toChineseNumber(num) {
        const numbers = ['åˆ', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'ä¸Š'];
        return numbers[num - 1] || num;
    }

    /**
     * é™½çˆ»ã‹é™°çˆ»ã‹ã‚’åˆ¤å®š
     */
    isYangYao(binary, position) {
        // binaryã¯6æ¡ã®2é€²æ•°æ–‡å­—åˆ—ï¼ˆä¾‹: "111111"ï¼‰
        return binary && binary[5 - position] === '1';
    }

    /**
     * ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ 
     */
    addPyramidInteractions() {
        document.querySelectorAll('.stage').forEach(stage => {
            stage.addEventListener('click', (e) => {
                const stageNum = parseInt(e.currentTarget.dataset.stage);
                this.showStageDetail(stageNum);
            });
            
            stage.addEventListener('mouseenter', (e) => {
                this.highlightRelatedElements(e.currentTarget.dataset.stage);
            });
            
            stage.addEventListener('mouseleave', () => {
                this.clearHighlights();
            });
        });
    }

    /**
     * æ®µéšã®è©³ç´°ã‚’è¡¨ç¤º
     */
    showStageDetail(stageNumber) {
        const stage = this.stages.find(s => s.position === stageNumber);
        const detailContainer = document.querySelector('.current-stage-detail');
        
        const detailHTML = `
            <h4>${stage.name}ã®è©³ç´°åˆ†æ</h4>
            <div class="stage-detail-content">
                <div class="detail-section">
                    <h5>ã“ã®æ®µéšã®æ„å‘³</h5>
                    <p>${stage.interpretation}</p>
                </div>
                
                <div class="detail-section">
                    <h5>3ã¤ã®OSã§ã®ç¾ã‚Œæ–¹</h5>
                    <ul>
                        <li>Engine OS: ${stage.engineScore}% - å†…çš„ãª${stage.name}ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼</li>
                        <li>Interface OS: ${stage.interfaceScore}% - ç¤¾ä¼šçš„ãª${stage.name}ã®è¡¨ç¾</li>
                        <li>SafeMode OS: ${stage.safeModeScore}% - å®‰å®šé¢ã§ã®${stage.name}ã®åƒã</li>
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h5>é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</h5>
                    <div class="keyword-cloud">
                        ${stage.keywords.map(kw => 
                            `<span class="keyword-tag">${kw}</span>`
                        ).join('')}
                    </div>
                </div>
            </div>
        `;
        
        detailContainer.innerHTML = detailHTML;
        detailContainer.scrollIntoView({ behavior: 'smooth' });
    }
}
```

## ğŸ¨ CSSè¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/css/advanced-analysis.css`

```css
/* ç›¸é–¢ãƒãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.correlation-map-container {
    padding: 20px;
}

.correlation-heatmap {
    position: relative;
    margin: 20px 0;
}

#correlationCanvas {
    border: 1px solid #E5E7EB;
    border-radius: 8px;
    cursor: crosshair;
}

.correlation-legend {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
    font-size: 12px;
}

.strong-positive { color: #22C55E; }
.weak-positive { color: #86EFAC; }
.neutral { color: #9CA3AF; }
.weak-negative { color: #FCA5A5; }
.strong-negative { color: #EF4444; }

.pattern-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.pattern-card {
    background: white;
    border: 1px solid #E5E7EB;
    border-radius: 12px;
    padding: 20px;
    transition: all 0.3s;
}

.pattern-card.highlight {
    border-color: #3B82F6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.pattern-icon {
    font-size: 32px;
    display: block;
    margin-bottom: 10px;
}

.correlation-strength {
    margin-top: 15px;
}

.strength-bar {
    height: 8px;
    background: #F3F4F6;
    border-radius: 4px;
    overflow: hidden;
}

.strength-fill {
    height: 100%;
    background: linear-gradient(90deg, #3B82F6, #8B5CF6);
    transition: width 0.3s;
}

/* æ™‚ç³»åˆ—åˆ†æã®ã‚¹ã‚¿ã‚¤ãƒ« */
.timeline-view {
    padding: 20px;
}

.time-range-selector {
    display: flex;
    gap: 10px;
    margin: 20px 0;
}

.range-btn {
    padding: 8px 16px;
    background: white;
    border: 1px solid #E5E7EB;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.range-btn.active {
    background: #3B82F6;
    color: white;
    border-color: #3B82F6;
}

.score-evolution-chart {
    height: 400px;
    margin: 30px 0;
}

.hexagram-transitions {
    margin: 30px 0;
}

.transition-flow {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 20px;
    background: #F9FAFB;
    border-radius: 12px;
}

.hexagram-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    background: white;
    border: 2px solid #E5E7EB;
    border-radius: 8px;
}

.hexagram-node.current {
    border-color: #3B82F6;
    background: #EFF6FF;
}

.transition-arrow {
    font-size: 24px;
    color: #6B7280;
}

.stability-analysis {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 30px 0;
}

.stable-traits,
.changing-traits {
    padding: 20px;
    background: white;
    border: 1px solid #E5E7EB;
    border-radius: 12px;
}

.stable-traits h4 {
    color: #059669;
}

.changing-traits h4 {
    color: #DC2626;
}

/* çˆ»ä½åˆ†æã®ã‚¹ã‚¿ã‚¤ãƒ« */
.stage-pyramid {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 40px 0;
    position: relative;
}

.stage {
    margin: 5px 0;
    padding: 20px;
    background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
    border: 2px solid #D1D5DB;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
}

.stage.active {
    background: linear-gradient(135deg, #DBEAFE, #BFDBFE);
    border-color: #3B82F6;
    transform: scale(1.05);
    box-shadow: 0 10px 25px rgba(59, 130, 246, 0.2);
}

.stage:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.stage-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
}

.stage-number {
    font-weight: 600;
    color: #374151;
}

.stage-name {
    font-size: 18px;
    font-weight: 500;
    color: #1F2937;
}

.stage-score-bar {
    width: 100px;
    height: 20px;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

.score-fill {
    height: 100%;
    background: linear-gradient(90deg, #3B82F6, #8B5CF6);
}

.score-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 12px;
    font-weight: 600;
}

.stage-hover-detail {
    display: none;
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 1px solid #D1D5DB;
    border-radius: 8px;
    padding: 15px;
    margin-top: 10px;
    width: 300px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    z-index: 1000;
}

.stage:hover .stage-hover-detail {
    display: block;
}

.yao-distribution {
    margin: 20px 0;
}

.yao-bar-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
}

.yao-label {
    width: 80px;
    font-size: 14px;
    font-weight: 500;
}

.yao-type {
    font-size: 12px;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 5px;
}

.yao-type:contains('é™½') {
    background: #FEF3C7;
    color: #92400E;
}

.yao-type:contains('é™°') {
    background: #E0E7FF;
    color: #3730A3;
}

.yao-bar {
    flex: 1;
    height: 24px;
    background: #F3F4F6;
    border-radius: 12px;
    overflow: hidden;
}

.yao-fill {
    height: 100%;
    transition: width 0.5s ease;
}

.yao-fill.yang {
    background: linear-gradient(90deg, #FCD34D, #F59E0B);
}

.yao-fill.yin {
    background: linear-gradient(90deg, #93C5FD, #3B82F6);
}

.yao-score {
    width: 50px;
    text-align: right;
    font-weight: 600;
}

.yao-keywords {
    font-size: 12px;
    color: #6B7280;
    margin-left: 10px;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 768px) {
    .pattern-cards {
        grid-template-columns: 1fr;
    }
    
    .stability-analysis {
        grid-template-columns: 1fr;
    }
    
    .stage-pyramid {
        padding: 0 10px;
    }
    
    .stage {
        width: 100% !important;
    }
}
```

## ğŸ“ å®Ÿè£…æ‰‹é †

### Step 1: ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®æ›´æ–°
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/results.html`

```html
<!-- æ—¢å­˜ã®ã‚¿ãƒ–ã«æ–°ã—ã„ã‚¿ãƒ–ã‚’è¿½åŠ  -->
<div class="tab-navigation">
    <button class="tab-btn active" data-tab="basic">åŸºæœ¬çµæœ</button>
    <button class="tab-btn" data-tab="detailed">è©³ç´°åˆ†æ</button>
    <button class="tab-btn" data-tab="correlation">ç›¸é–¢ãƒãƒƒãƒ—</button> <!-- æ–°è¦ -->
    <button class="tab-btn" data-tab="temporal">æˆé•·è»Œè·¡</button> <!-- æ–°è¦ -->
    <button class="tab-btn" data-tab="yao">ç™ºå±•æ®µéš</button> <!-- æ–°è¦ -->
    <button class="tab-btn" data-tab="insights">æ´å¯Ÿ</button>
    <button class="tab-btn" data-tab="scenarios">ã‚·ãƒŠãƒªã‚ª</button>
    <button class="tab-btn" data-tab="export">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
</div>
```

### Step 2: ã‚¿ãƒ–ã‚¯ãƒ©ã‚¹ã®ç™»éŒ²
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/pages/results.js`

```javascript
// æ–°ã—ã„ã‚¿ãƒ–ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import CorrelationMapTab from '../components/tabs/CorrelationMapTab.js';
import TemporalAnalysisTab from '../components/tabs/TemporalAnalysisTab.js';
import YaoAnalysisTab from '../components/tabs/YaoAnalysisTab.js';

// ã‚¿ãƒ–ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ç™»éŒ²
this.tabs = {
    basic: new BasicResultsTab('basic'),
    detailed: new DetailedAnalysisTab('detailed'),
    correlation: new CorrelationMapTab('correlation'), // æ–°è¦
    temporal: new TemporalAnalysisTab('temporal'),     // æ–°è¦
    yao: new YaoAnalysisTab('yao'),                    // æ–°è¦
    insights: new InsightsTab('insights'),
    scenarios: new ScenariosTab('scenarios'),
    export: new ExportTab('export')
};
```

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å¿…é ˆå®Ÿè£…
- [ ] CorrelationMapTab.jsã®ä½œæˆ
- [ ] TemporalAnalysisTab.jsã®ä½œæˆ
- [ ] YaoAnalysisTab.jsã®ä½œæˆ
- [ ] advanced-analysis.cssã®ä½œæˆ
- [ ] results.htmlã®ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
- [ ] results.jsã§ã®ã‚¿ãƒ–ç™»éŒ²

### æ©Ÿèƒ½ç¢ºèª
- [ ] ç›¸é–¢ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ãŒæ­£ã—ãæç”»ã•ã‚Œã‚‹
- [ ] ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ãŒå‹•ä½œã™ã‚‹
- [ ] çˆ»ä½ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹

### ãƒ‡ãƒ¼ã‚¿é€£æº
- [ ] H384ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®é€£æº
- [ ] StorageManagerã‹ã‚‰ã®å±¥æ­´å–å¾—
- [ ] Chart.jsã®å‹•ä½œç¢ºèª

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š
1. **æ·±ã„è‡ªå·±ç†è§£** - å›ç­”ã®ç›¸é–¢ã‹ã‚‰éš ã‚ŒãŸå‚¾å‘ã‚’ç™ºè¦‹
2. **æˆé•·ã®å¯è¦–åŒ–** - æ™‚ç³»åˆ—ã§è‡ªåˆ†ã®å¤‰åŒ–ã‚’ç¢ºèª
3. **ç™ºå±•æ®µéšã®æŠŠæ¡** - ç¾åœ¨ä½ç½®ã¨æ¬¡ã®ç›®æ¨™ãŒæ˜ç¢ºã«

### å·®åˆ¥åŒ–è¦å› 
- å˜ãªã‚‹è¨ºæ–­ã‹ã‚‰ã€Œ**æ·±å±¤å¿ƒç†ã®å¯è¦–åŒ–ã‚·ã‚¹ãƒ†ãƒ **ã€ã¸
- ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³ã§ç§‘å­¦çš„ãªåˆ†æ
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã§æ¢ç´¢çš„ãªä½“é¨“

ã“ã‚Œã«ã‚ˆã‚Šã€HAQEIã¯ã€Œ**ã‚ãªãŸã®å¿ƒç†ã‚’å¤šè§’çš„ã«è§£æ˜ã™ã‚‹æœ€å…ˆç«¯ã®åˆ†æãƒ„ãƒ¼ãƒ«**ã€ã¨ã—ã¦å®Œæˆã—ã¾ã™ã€‚