# TRAEå‘ã‘ ä¹å®®æ§‹æˆå®Ÿè£…ä½œæ¥­æŒ‡ç¤ºæ›¸

**ä½œæˆæ—¥**: 2025å¹´8æœˆ21æ—¥  
**ä½œæ¥­ç›®çš„**: è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’10é …ç›®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‹ã‚‰ä¹å®®æ§‹æˆï¼ˆ9é …ç›®ï¼‹çµ±åˆï¼‰ã«å¤‰æ›´  
**ä½œæ¥­ç¯„å›²**: BasicResultsTab.jsã€SummaryGenerator.jsã€é–¢é€£CSS  

---

## ğŸ“‹ ä½œæ¥­æ¦‚è¦

36å•ã®è³ªå•ã«ç­”ãˆã¦ã‚‚ã‚‰ã£ãŸä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹ãŸã‚ã€è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆã‚’ã€Œä¹å®®æ§‹æˆã€ã«å¤‰æ›´ã—ã¾ã™ã€‚

### å¤‰æ›´å‰å¾Œã®æ¯”è¼ƒ
- **ç¾çŠ¶**: 10é …ç›®ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å¼è©³ç´°åˆ†æ
- **å¤‰æ›´å¾Œ**: 9é …ç›®ï¼ˆ3Ã—3ã‚°ãƒªãƒƒãƒ‰ï¼‰ï¼‹çµ±åˆåˆ†æ

---

## ğŸ—‘ï¸ Phase 1: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤

### Task 1.1: ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³é–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰ã®å‰Šé™¤
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/tabs/BasicResultsTab.js`

å‰Šé™¤å¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆè¡Œç•ªå·ã¯ç›®å®‰ï¼‰:
```javascript
// ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Œå…¨å‰Šé™¤
- renderDetailedAnalysisSection() // ç´„831-859è¡Œ
- renderAccordionItem() // ç´„885-908è¡Œ
- renderScoreExplanations() // ç´„910-952è¡Œ
- setupAccordionInteractions() // ï¼ˆã‚‚ã—å­˜åœ¨ã™ã‚Œã°ï¼‰
```

### Task 1.2: è©³ç´°åˆ†æç”Ÿæˆãƒ¡ã‚½ãƒƒãƒ‰ã®å‰Šé™¤
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/core/SummaryGenerator.js`

å‰Šé™¤å¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆè¡Œç•ªå·ã¯ç›®å®‰ï¼‰:
```javascript
// ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Œå…¨å‰Šé™¤
- generateDetailedSummary() // ç´„56-87è¡Œ
- generateOverview() // ç´„176-186è¡Œ
- generateEngineAnalysis() // ç´„188-204è¡Œ
- generateInterfaceAnalysis() // ç´„206-222è¡Œ
- generateSafeModeAnalysis() // ç´„224-240è¡Œ
- analyzeOSInteractions() // ç´„242-267è¡Œ
- generateRecommendations() // ç´„269-289è¡Œ
- extractStrengths() // ç´„291-310è¡Œ
- identifyGrowthAreas() // ç´„312-334è¡Œ
- generateActionItems() // ç´„336-359è¡Œ
- generateConclusion() // ç´„361-372è¡Œ
- getFallbackDetailedSummary() // ç´„374-390è¡Œ
```

### Task 1.3: ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³CSSã®å‰Šé™¤
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/css/results.css` ã¾ãŸã¯ `/public/css/haqei-unified-design.css`

å‰Šé™¤å¯¾è±¡CSS:
```css
/* ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ */
.accordion-container { ... }
.accordion-item { ... }
.accordion-header { ... }
.accordion-content { ... }
.accordion-icon { ... }
.accordion-item.active { ... }
/* ãã®ä»– accordion- ã§å§‹ã¾ã‚‹å…¨ã¦ã®ã‚¯ãƒ©ã‚¹ */
```

### Task 1.4: å‰Šé™¤ç¢ºèªãƒ†ã‚¹ãƒˆ
```bash
# å‰Šé™¤å¾Œã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã“ã¨ã‚’ç¢ºèª
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§results.htmlã‚’é–‹ã
2. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
3. æ—¢å­˜ã®4è¡Œè¦ç´„ã¨Triple OSã‚«ãƒ¼ãƒ‰ãŒæ­£å¸¸è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

---

## ğŸ—ï¸ Phase 2: ä¹å®®æ§‹æˆã®å®Ÿè£…

### Task 2.1: ä¹å®®åˆ†æç”Ÿæˆãƒ¡ã‚½ãƒƒãƒ‰ã®è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/core/SummaryGenerator.js`

è¿½åŠ ä½ç½®: `generateFourLineSummary()`ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾Œï¼ˆç´„54è¡Œç›®ä»¥é™ï¼‰

```javascript
/**
 * ä¹å®®æ§‹æˆã«ã‚ˆã‚‹è©³ç´°åˆ†æã‚’ç”Ÿæˆ
 * @param {Object} analysisData - åˆ†æãƒ‡ãƒ¼ã‚¿
 * @returns {Object} ä¹å®®åˆ†æçµæœ
 */
generateNinePhaseAnalysis(analysisData) {
    if (!analysisData) {
        return this.getFallbackNinePhaseAnalysis();
    }
    
    try {
        const { engineOS, interfaceOS, safeModeOS } = analysisData;
        
        // V3ãƒ‡ãƒ¼ã‚¿å–å¾—
        const engineV3 = this.getV3DataForOS(engineOS.hexagramName, 'engineOS');
        const interfaceV3 = this.getV3DataForOS(interfaceOS.hexagramName, 'interfaceOS');
        const safeModeV3 = this.getV3DataForOS(safeModeOS.hexagramName, 'safeModeOS');
        
        return {
            // Engine OS 3å´é¢
            engineDrive: {
                title: 'åŸå‹•åŠ›',
                icon: 'âš¡',
                score: engineOS.score,
                content: engineV3?.profile?.type || 'å‰µé€ çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼',
                description: engineV3?.profile?.description || 'ã‚ãªãŸã®å†…ãªã‚‹åŸå‹•åŠ›ã®æºæ³‰',
                detail: engineV3?.normalState?.whatHappens || 'ç©æ¥µçš„ã«æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹'
            },
            engineCreativity: {
                title: 'å‰µé€ æ€§',
                icon: 'ğŸ’¡',
                score: this.calculateSubScore(engineOS.score, 'creativity'),
                content: engineV3?.normalState?.example || 'ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ¬¡ã€…ã¨æ¹§ã„ã¦ãã‚‹',
                description: 'æ–°ã—ã„ã‚‚ã®ã‚’ç”Ÿã¿å‡ºã™åŠ›',
                detail: this.extractCreativityPattern(engineV3)
            },
            enginePropulsion: {
                title: 'æ¨é€²åŠ›',
                icon: 'ğŸš€',
                score: this.calculateSubScore(engineOS.score, 'propulsion'),
                content: engineV3?.maintenance?.tip || 'å®šæœŸçš„ã«æ–°ã—ã„åˆºæ¿€ã‚’å–ã‚Šå…¥ã‚Œã‚‹',
                description: 'ç‰©äº‹ã‚’å‰ã«é€²ã‚ã‚‹åŠ›',
                detail: this.extractPropulsionPattern(engineV3)
            },
            
            // Interface OS 3å´é¢
            interfaceSocial: {
                title: 'ç¤¾ä¼šæ€§',
                icon: 'ğŸ¤',
                score: interfaceOS.score,
                content: interfaceV3?.profile?.type || 'èª¿å’Œå‹',
                description: interfaceV3?.profile?.description || 'å‘¨å›²ã¨èª¿å’Œçš„ãªé–¢ä¿‚ã‚’ç¯‰ã',
                detail: interfaceV3?.howToTalk?.style || 'ç›¸æ‰‹ã«é…æ…®ã—ãŸè©±ã—æ–¹'
            },
            interfaceEmpathy: {
                title: 'å…±æ„ŸåŠ›',
                icon: 'ğŸ’–',
                score: this.calculateSubScore(interfaceOS.score, 'empathy'),
                content: interfaceV3?.relationshipTips?.empathy || 'ç›¸æ‰‹ã®æ°—æŒã¡ã‚’ç†è§£ã™ã‚‹',
                description: 'ä»–è€…ã‚’ç†è§£ã—å¯„ã‚Šæ·»ã†åŠ›',
                detail: this.extractEmpathyPattern(interfaceV3)
            },
            interfaceInfluence: {
                title: 'å½±éŸ¿åŠ›',
                icon: 'âœ¨',
                score: this.calculateSubScore(interfaceOS.score, 'influence'),
                content: interfaceV3?.bestEnvironment?.impact || 'å‘¨å›²ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹',
                description: 'å‘¨ã‚Šã«ä¸ãˆã‚‹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ',
                detail: this.extractInfluencePattern(interfaceV3)
            },
            
            // SafeMode OS 3å´é¢
            safeModeStability: {
                title: 'å®‰å®šæ€§',
                icon: 'âš–ï¸',
                score: safeModeOS.score,
                content: safeModeV3?.profile?.type || 'å …å®Ÿå‹',
                description: safeModeV3?.profile?.description || 'ä¸€è²«æ€§ã®ã‚ã‚‹å®‰å®šã—ãŸåŸºç›¤',
                detail: safeModeV3?.normalState?.whatHappens || 'å†·é™ã«çŠ¶æ³ã‚’è¦‹æ¥µã‚ã‚‹'
            },
            safeModeDefense: {
                title: 'é˜²å¾¡åŠ›',
                icon: 'ğŸ›¡ï¸',
                score: this.calculateSubScore(safeModeOS.score, 'defense'),
                content: safeModeV3?.stressResponse?.whatYouDo || 'ã‚¹ãƒˆãƒ¬ã‚¹ã‹ã‚‰è‡ªåˆ†ã‚’å®ˆã‚‹',
                description: 'ãƒªã‚¹ã‚¯ã‹ã‚‰èº«ã‚’å®ˆã‚‹åŠ›',
                detail: this.extractDefensePattern(safeModeV3)
            },
            safeModeRecovery: {
                title: 'å›å¾©åŠ›',
                icon: 'ğŸŒ±',
                score: this.calculateSubScore(safeModeOS.score, 'recovery'),
                content: safeModeV3?.howToRecover?.bestWay || 'ååˆ†ãªä¼‘æ¯ã‚’å–ã‚‹',
                description: 'ç«‹ã¡ç›´ã‚‹åŠ›ã¨æ–¹æ³•',
                detail: this.extractRecoveryPattern(safeModeV3)
            },
            
            // çµ±åˆåˆ†æ
            integration: this.calculateIntegration(engineOS, interfaceOS, safeModeOS)
        };
    } catch (error) {
        console.error('âŒ ä¹å®®åˆ†æç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
        return this.getFallbackNinePhaseAnalysis();
    }
}

/**
 * ã‚µãƒ–ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
 */
calculateSubScore(baseScore, aspect) {
    // ãƒ™ãƒ¼ã‚¹ã‚¹ã‚³ã‚¢ã‹ã‚‰å´é¢åˆ¥ã®ã‚¹ã‚³ã‚¢ã‚’ç®—å‡º
    const variation = {
        creativity: 0.9,
        propulsion: 1.1,
        empathy: 0.95,
        influence: 1.05,
        defense: 0.85,
        recovery: 1.15
    };
    
    return Math.round(baseScore * (variation[aspect] || 1));
}

/**
 * å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠ½å‡ºãƒ¡ã‚½ãƒƒãƒ‰ç¾¤
 */
extractCreativityPattern(v3Data) {
    if (!v3Data) return 'å‰µé€ çš„ãªæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒã¤';
    return v3Data.normalState?.example || v3Data.profile?.metaphor || 'æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç”Ÿã¿å‡ºã™';
}

extractPropulsionPattern(v3Data) {
    if (!v3Data) return 'ç€å®Ÿã«å‰é€²ã™ã‚‹åŠ›ã‚’æŒã¤';
    return v3Data.maintenance?.warning || v3Data.normalState?.whatHappens || 'ç›®æ¨™ã«å‘ã‹ã£ã¦æ¨é€²ã™ã‚‹';
}

extractEmpathyPattern(v3Data) {
    if (!v3Data) return 'ä»–è€…ã®æ„Ÿæƒ…ã‚’ç†è§£ã™ã‚‹';
    return v3Data.relationshipTips?.advice || v3Data.howToTalk?.example || 'ç›¸æ‰‹ã®ç«‹å ´ã§è€ƒãˆã‚‹';
}

extractInfluencePattern(v3Data) {
    if (!v3Data) return 'å‘¨å›²ã«è‰¯ã„å½±éŸ¿ã‚’ä¸ãˆã‚‹';
    return v3Data.bestEnvironment?.where || v3Data.profile?.description || 'ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå¤‰åŒ–ã‚’èµ·ã“ã™';
}

extractDefensePattern(v3Data) {
    if (!v3Data) return 'è‡ªåˆ†ã‚’å®ˆã‚‹è¡“ã‚’çŸ¥ã£ã¦ã„ã‚‹';
    return v3Data.stressResponse?.example || v3Data.emergencyMode?.whatHappens || 'å†·é™ã«å¯¾å‡¦ã™ã‚‹';
}

extractRecoveryPattern(v3Data) {
    if (!v3Data) return 'è‡ªç„¶ã«å›å¾©ã™ã‚‹åŠ›ãŒã‚ã‚‹';
    return v3Data.howToRecover?.example || v3Data.howToRecover?.bestWay || 'æ™‚é–“ã‚’ã‹ã‘ã¦ç«‹ã¡ç›´ã‚‹';
}

/**
 * çµ±åˆåˆ†æã‚’è¨ˆç®—
 */
calculateIntegration(engineOS, interfaceOS, safeModeOS) {
    // äººæ ¼å¦ã®ç®—å‡º
    const personalHexagram = this.derivePersonalHexagram(engineOS, interfaceOS, safeModeOS);
    
    // ãƒãƒ©ãƒ³ã‚¹åº¦ã®è¨ˆç®—
    const scores = [engineOS.score, interfaceOS.score, safeModeOS.score];
    const maxScore = Math.max(...scores);
    const minScore = Math.min(...scores);
    const balance = 100 - (maxScore - minScore);
    
    // èª¿å’Œåº¦ã®è¨ˆç®—
    const average = scores.reduce((a, b) => a + b, 0) / 3;
    const variance = scores.reduce((sum, score) => sum + Math.pow(score - average, 2), 0) / 3;
    const harmony = Math.round(100 - Math.sqrt(variance));
    
    // ã‚·ãƒŠã‚¸ãƒ¼åº¦ã®è¨ˆç®—
    const synergy = this.calculateSynergy(engineOS, interfaceOS, safeModeOS);
    
    return {
        hexagram: personalHexagram.name,
        hexagramDescription: personalHexagram.description,
        balance: balance,
        harmony: harmony,
        synergy: synergy,
        overallScore: Math.round((balance + harmony + synergy) / 3),
        message: this.generateIntegrationMessage(personalHexagram, balance, harmony, synergy)
    };
}

/**
 * äººæ ¼å¦ã‚’å°å‡º
 */
derivePersonalHexagram(engineOS, interfaceOS, safeModeOS) {
    // ç°¡æ˜“ç‰ˆï¼šæœ€ã‚‚é«˜ã„ã‚¹ã‚³ã‚¢ã®OSã®å¦ã‚’åŸºæº–ã«é¸å®š
    const dominant = [engineOS, interfaceOS, safeModeOS].reduce((max, os) => 
        os.score > max.score ? os : max
    );
    
    // å®Ÿéš›ã¯ã‚‚ã£ã¨è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã§64å¦ã‹ã‚‰é¸å®š
    return {
        name: dominant.hexagramName,
        description: `${dominant.hexagramName}ã®ç‰¹æ€§ãŒå¼·ãè¡¨ã‚Œã¦ã„ã¾ã™`
    };
}

/**
 * ã‚·ãƒŠã‚¸ãƒ¼ã‚’è¨ˆç®—
 */
calculateSynergy(engineOS, interfaceOS, safeModeOS) {
    // OSé–“ã®ç›¸æ€§ã‚’è¨ˆç®—ï¼ˆç°¡æ˜“ç‰ˆï¼‰
    const engineInterface = this.calculatePairSynergy(engineOS, interfaceOS);
    const interfaceSafeMode = this.calculatePairSynergy(interfaceOS, safeModeOS);
    const safeModeEngine = this.calculatePairSynergy(safeModeOS, engineOS);
    
    return Math.round((engineInterface + interfaceSafeMode + safeModeEngine) / 3);
}

/**
 * ãƒšã‚¢é–“ã®ã‚·ãƒŠã‚¸ãƒ¼ã‚’è¨ˆç®—
 */
calculatePairSynergy(os1, os2) {
    // ã‚¹ã‚³ã‚¢ã®å·®ãŒå°ã•ã„ã»ã©ã‚·ãƒŠã‚¸ãƒ¼ãŒé«˜ã„
    const diff = Math.abs(os1.score - os2.score);
    return Math.max(0, 100 - diff * 2);
}

/**
 * çµ±åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆ
 */
generateIntegrationMessage(hexagram, balance, harmony, synergy) {
    let message = `ã‚ãªãŸã®äººæ ¼ã¯ã€Œ${hexagram.name}ã€çš„ãªç‰¹æ€§ã‚’æŒã¡ã¾ã™ã€‚`;
    
    if (balance >= 80) {
        message += '3ã¤ã®OSãŒéå¸¸ã«ãƒãƒ©ãƒ³ã‚¹è‰¯ãç™ºé”ã—ã¦ã„ã¾ã™ã€‚';
    } else if (harmony >= 80) {
        message += 'å†…é¢çš„ãªèª¿å’ŒãŒå–ã‚ŒãŸå®‰å®šã—ãŸäººæ ¼ã§ã™ã€‚';
    } else if (synergy >= 80) {
        message += 'å„è¦ç´ ãŒç›¸ä¹—åŠ¹æœã‚’ç”Ÿã¿å‡ºã™å„ªã‚ŒãŸçµ±åˆæ€§ãŒã‚ã‚Šã¾ã™ã€‚';
    } else {
        message += 'å€‹æ€§çš„ãªå¼·ã¿ã‚’æŒã¤ç‹¬è‡ªã®äººæ ¼æ§‹é€ ã§ã™ã€‚';
    }
    
    return message;
}

/**
 * ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ã®ä¹å®®åˆ†æ
 */
getFallbackNinePhaseAnalysis() {
    return {
        engineDrive: {
            title: 'åŸå‹•åŠ›',
            icon: 'âš¡',
            score: 70,
            content: 'å‰µé€ çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼',
            description: 'ã‚ãªãŸã®å†…ãªã‚‹åŸå‹•åŠ›',
            detail: 'æ–°ã—ã„ã“ã¨ã¸ã®æŒ‘æˆ¦ã‚’æ¥½ã—ã‚€'
        },
        // ... ä»–ã®8é …ç›®ã‚‚åŒæ§˜ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’è¨­å®š
        integration: {
            hexagram: 'ä¹¾ç‚ºå¤©',
            hexagramDescription: 'å‰µé€ çš„ãªåŠ›ã«æº€ã¡ã¦ã„ã¾ã™',
            balance: 75,
            harmony: 70,
            synergy: 72,
            overallScore: 72,
            message: 'ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸäººæ ¼æ§‹é€ ã§ã™'
        }
    };
}
```

### Task 2.2: UIè¡¨ç¤ºãƒ¡ã‚½ãƒƒãƒ‰ã®è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/tabs/BasicResultsTab.js`

è¿½åŠ ä½ç½®: `renderSummarySection()`ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾Œï¼ˆç´„825è¡Œç›®ä»¥é™ï¼‰

```javascript
/**
 * ä¹å®®åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
 * @returns {string} HTMLæ–‡å­—åˆ—
 */
renderNinePhaseSection() {
    if (!this.summaryGenerator || !this.analysisData) {
        return '<div class="nine-phase-placeholder">åˆ†ææº–å‚™ä¸­...</div>';
    }
    
    const analysis = this.summaryGenerator.generateNinePhaseAnalysis(this.analysisData);
    
    return `
        <div class="nine-phase-section">
            <div class="nine-phase-header">
                <h2>ğŸ“Š ä¹å®®ã«ã‚ˆã‚‹äººæ ¼æ·±å±¤åˆ†æ</h2>
                <p class="nine-phase-subtitle">36å•ã®å›ç­”ã‹ã‚‰å°ãå‡ºã•ã‚ŒãŸ9ã¤ã®å´é¢</p>
            </div>
            
            <div class="nine-phase-grid">
                <!-- Engine OS åˆ— -->
                <div class="phase-column engine-column">
                    <div class="column-header">
                        <h3>âš™ï¸ Engine OS</h3>
                        <p>å†…ãªã‚‹åŸå‹•åŠ›</p>
                    </div>
                    ${this.renderPhaseCard(analysis.engineDrive, 'engine')}
                    ${this.renderPhaseCard(analysis.engineCreativity, 'engine')}
                    ${this.renderPhaseCard(analysis.enginePropulsion, 'engine')}
                </div>
                
                <!-- Interface OS åˆ— -->
                <div class="phase-column interface-column">
                    <div class="column-header">
                        <h3>ğŸ”„ Interface OS</h3>
                        <p>ç¤¾ä¼šã¨ã®é–¢ã‚ã‚Š</p>
                    </div>
                    ${this.renderPhaseCard(analysis.interfaceSocial, 'interface')}
                    ${this.renderPhaseCard(analysis.interfaceEmpathy, 'interface')}
                    ${this.renderPhaseCard(analysis.interfaceInfluence, 'interface')}
                </div>
                
                <!-- SafeMode OS åˆ— -->
                <div class="phase-column safemode-column">
                    <div class="column-header">
                        <h3>ğŸ›¡ï¸ SafeMode OS</h3>
                        <p>å®ˆã‚Šã¨å›å¾©</p>
                    </div>
                    ${this.renderPhaseCard(analysis.safeModeStability, 'safemode')}
                    ${this.renderPhaseCard(analysis.safeModeDefense, 'safemode')}
                    ${this.renderPhaseCard(analysis.safeModeRecovery, 'safemode')}
                </div>
            </div>
            
            ${this.renderIntegrationPanel(analysis.integration)}
        </div>
    `;
}

/**
 * å„ãƒ•ã‚§ãƒ¼ã‚ºã‚«ãƒ¼ãƒ‰ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
 */
renderPhaseCard(phaseData, osType) {
    if (!phaseData) return '';
    
    const scoreClass = this.getScoreClass(phaseData.score);
    
    return `
        <div class="phase-card phase-card-${osType}" data-score="${phaseData.score}">
            <div class="phase-card-header">
                <span class="phase-icon">${phaseData.icon}</span>
                <h4 class="phase-title">${phaseData.title}</h4>
                <span class="phase-score ${scoreClass}">${phaseData.score}pts</span>
            </div>
            <div class="phase-card-content">
                <p class="phase-main">${phaseData.content}</p>
                <p class="phase-description">${phaseData.description}</p>
            </div>
            <div class="phase-card-detail">
                <p>${phaseData.detail}</p>
            </div>
        </div>
    `;
}

/**
 * çµ±åˆãƒ‘ãƒãƒ«ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
 */
renderIntegrationPanel(integration) {
    if (!integration) return '';
    
    return `
        <div class="integration-panel">
            <div class="integration-header">
                <h3>ğŸŒŸ çµ±åˆåˆ†æ - ã‚ãªãŸã®äººæ ¼å¦</h3>
            </div>
            <div class="integration-content">
                <div class="hexagram-display">
                    <h4 class="hexagram-name">${integration.hexagram}</h4>
                    <p class="hexagram-description">${integration.hexagramDescription}</p>
                </div>
                
                <div class="integration-metrics">
                    <div class="metric-item">
                        <span class="metric-label">ãƒãƒ©ãƒ³ã‚¹</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${integration.balance}%"></div>
                        </div>
                        <span class="metric-value">${integration.balance}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">èª¿å’Œ</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${integration.harmony}%"></div>
                        </div>
                        <span class="metric-value">${integration.harmony}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">ã‚·ãƒŠã‚¸ãƒ¼</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${integration.synergy}%"></div>
                        </div>
                        <span class="metric-value">${integration.synergy}%</span>
                    </div>
                </div>
                
                <div class="integration-message">
                    <p>${integration.message}</p>
                    <div class="overall-score">
                        <span>ç·åˆã‚¹ã‚³ã‚¢</span>
                        <strong>${integration.overallScore}</strong>
                        <span>/ 100</span>
                    </div>
                </div>
            </div>
        </div>
    `;
}

/**
 * ã‚¹ã‚³ã‚¢ã«åŸºã¥ãã‚¯ãƒ©ã‚¹ã‚’å–å¾—
 */
getScoreClass(score) {
    if (score >= 80) return 'score-excellent';
    if (score >= 60) return 'score-good';
    if (score >= 40) return 'score-moderate';
    return 'score-low';
}
```

### Task 2.3: renderTripleOSCardså†…ã§ã®å‘¼ã³å‡ºã—ä¿®æ­£
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/js/tabs/BasicResultsTab.js`

`renderTripleOSCards()`ãƒ¡ã‚½ãƒƒãƒ‰å†…ï¼ˆç´„231è¡Œç›®ä»˜è¿‘ï¼‰ã‚’ä¿®æ­£:

```javascript
// å¤‰æ›´å‰
container.innerHTML = `
    ${fourLineSummary ? this.renderSummarySection(fourLineSummary) : ''}
    <div class="os-cards-wrapper">
        ${this.renderEngineOSCard(engineOS)}
        ${this.renderInterfaceOSCard(interfaceOS)}
        ${this.renderSafeModeOSCard(safeModeOS)}
    </div>
    ${this.renderDetailedAnalysisSection()}  // â† ã“ã®è¡Œã‚’å¤‰æ›´
`;

// å¤‰æ›´å¾Œ
container.innerHTML = `
    ${fourLineSummary ? this.renderSummarySection(fourLineSummary) : ''}
    <div class="os-cards-wrapper">
        ${this.renderEngineOSCard(engineOS)}
        ${this.renderInterfaceOSCard(interfaceOS)}
        ${this.renderSafeModeOSCard(safeModeOS)}
    </div>
    ${this.renderNinePhaseSection()}  // â† ä¹å®®åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å¤‰æ›´
`;
```

### Task 2.4: CSSã‚¹ã‚¿ã‚¤ãƒ«ã®è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `/public/css/results.css` ã¾ãŸã¯ `/public/css/haqei-unified-design.css`

è¿½åŠ ä½ç½®: ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œ

```css
/* ========== ä¹å®®åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ ========== */
.nine-phase-section {
    margin-top: 3rem;
    padding: 2rem;
    background: #f8f9fa;
    border-radius: 12px;
}

.nine-phase-header {
    text-align: center;
    margin-bottom: 2rem;
}

.nine-phase-header h2 {
    color: #2c3e50;
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
}

.nine-phase-subtitle {
    color: #6c757d;
    font-size: 0.95rem;
}

/* ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.nine-phase-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
}

/* åˆ—ãƒ˜ãƒƒãƒ€ãƒ¼ */
.phase-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.column-header {
    text-align: center;
    padding: 0.75rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.column-header h3 {
    font-size: 1.1rem;
    margin: 0 0 0.25rem 0;
}

.column-header p {
    font-size: 0.85rem;
    color: #6c757d;
    margin: 0;
}

/* ãƒ•ã‚§ãƒ¼ã‚ºã‚«ãƒ¼ãƒ‰ */
.phase-card {
    background: white;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    border-left: 4px solid;
}

.phase-card-engine {
    border-left-color: #FF6B6B;
}

.phase-card-interface {
    border-left-color: #4ECDC4;
}

.phase-card-safemode {
    border-left-color: #95E77E;
}

.phase-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.12);
}

.phase-card-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.phase-icon {
    font-size: 1.2rem;
}

.phase-title {
    flex: 1;
    font-size: 0.95rem;
    font-weight: 600;
    margin: 0;
}

.phase-score {
    font-size: 0.85rem;
    font-weight: bold;
    padding: 0.15rem 0.5rem;
    border-radius: 12px;
    background: #f0f0f0;
}

.score-excellent {
    background: #d4edda;
    color: #155724;
}

.score-good {
    background: #cce5ff;
    color: #004085;
}

.score-moderate {
    background: #fff3cd;
    color: #856404;
}

.score-low {
    background: #f8d7da;
    color: #721c24;
}

.phase-card-content {
    margin-bottom: 0.5rem;
}

.phase-main {
    font-size: 0.9rem;
    font-weight: 500;
    color: #2c3e50;
    margin: 0 0 0.25rem 0;
}

.phase-description {
    font-size: 0.85rem;
    color: #6c757d;
    margin: 0;
}

.phase-card-detail {
    padding-top: 0.5rem;
    border-top: 1px solid #e9ecef;
}

.phase-card-detail p {
    font-size: 0.85rem;
    color: #495057;
    margin: 0;
    line-height: 1.4;
}

/* çµ±åˆãƒ‘ãƒãƒ« */
.integration-panel {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
    padding: 2rem;
    margin-top: 2rem;
}

.integration-header h3 {
    text-align: center;
    font-size: 1.4rem;
    margin: 0 0 1.5rem 0;
}

.hexagram-display {
    text-align: center;
    margin-bottom: 1.5rem;
}

.hexagram-name {
    font-size: 1.8rem;
    margin: 0 0 0.5rem 0;
}

.hexagram-description {
    font-size: 1rem;
    opacity: 0.95;
    margin: 0;
}

.integration-metrics {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.metric-item {
    text-align: center;
}

.metric-label {
    display: block;
    font-size: 0.85rem;
    margin-bottom: 0.5rem;
    opacity: 0.9;
}

.metric-bar {
    height: 8px;
    background: rgba(255,255,255,0.3);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.25rem;
}

.metric-fill {
    height: 100%;
    background: white;
    border-radius: 4px;
    transition: width 1s ease;
}

.metric-value {
    font-size: 1.1rem;
    font-weight: bold;
}

.integration-message {
    text-align: center;
    padding-top: 1rem;
    border-top: 1px solid rgba(255,255,255,0.3);
}

.integration-message p {
    font-size: 1rem;
    line-height: 1.5;
    margin: 0 0 1rem 0;
}

.overall-score {
    display: inline-flex;
    align-items: baseline;
    gap: 0.5rem;
    font-size: 1rem;
}

.overall-score strong {
    font-size: 2rem;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 768px) {
    .nine-phase-grid {
        grid-template-columns: 1fr;
    }
    
    .integration-metrics {
        grid-template-columns: 1fr;
    }
    
    .phase-column {
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 1rem;
        margin-bottom: 1rem;
    }
    
    .phase-column:last-child {
        border-bottom: none;
    }
}

@media (max-width: 480px) {
    .nine-phase-section {
        padding: 1rem;
    }
    
    .phase-card {
        padding: 0.75rem;
    }
    
    .integration-panel {
        padding: 1.5rem 1rem;
    }
}
```

---

## ğŸ§ª Phase 3: ãƒ†ã‚¹ãƒˆã¨ç¢ºèª

### Task 3.1: åŸºæœ¬å‹•ä½œç¢ºèª
```bash
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§results.htmlã‚’é–‹ã
2. é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã
3. ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª
```

### Task 3.2: è¡¨ç¤ºç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] 4è¡Œè¦ç´„ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Triple OSã‚«ãƒ¼ãƒ‰ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¹å®®åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] 9ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚«ãƒ¼ãƒ‰ãŒ3Ã—3ã§é…ç½®ã•ã‚Œã‚‹
- [ ] å„ã‚«ãƒ¼ãƒ‰ã«ã‚¢ã‚¤ã‚³ãƒ³ã€ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] çµ±åˆãƒ‘ãƒãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] äººæ ¼å¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒãƒ©ãƒ³ã‚¹ã€èª¿å’Œã€ã‚·ãƒŠã‚¸ãƒ¼ã®ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### Task 3.3: ãƒ‡ãƒ¼ã‚¿é€£æºç¢ºèª
```javascript
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
console.log(window.basicResultsTab.summaryGenerator.generateNinePhaseAnalysis(
    window.basicResultsTab.analysisData
));
```
- [ ] 9ã¤ã®é …ç›®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹
- [ ] çµ±åˆãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹
- [ ] V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰æ­£ã—ããƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã•ã‚Œã¦ã„ã‚‹

### Task 3.4: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç¢ºèª
- [ ] PCè¡¨ç¤ºï¼ˆ1024pxä»¥ä¸Šï¼‰: 3åˆ—ã‚°ãƒªãƒƒãƒ‰
- [ ] ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆè¡¨ç¤ºï¼ˆ768pxï¼‰: 1åˆ—è¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
- [ ] ã‚¹ãƒãƒ›è¡¨ç¤ºï¼ˆ480pxä»¥ä¸‹ï¼‰: ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ã•ã‚Œã‚‹

### Task 3.5: ã‚¹ã‚³ã‚¢è¡¨ç¤ºç¢ºèª
- [ ] 80ç‚¹ä»¥ä¸Š: ç·‘è‰²èƒŒæ™¯ï¼ˆexcellentï¼‰
- [ ] 60-79ç‚¹: é’è‰²èƒŒæ™¯ï¼ˆgoodï¼‰
- [ ] 40-59ç‚¹: é»„è‰²èƒŒæ™¯ï¼ˆmoderateï¼‰
- [ ] 39ç‚¹ä»¥ä¸‹: èµ¤è‰²èƒŒæ™¯ï¼ˆlowï¼‰

---

## ğŸ“ æ³¨æ„äº‹é …

### é‡è¦ãªç¢ºèªãƒã‚¤ãƒ³ãƒˆ
1. **V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã® null ãƒã‚§ãƒƒã‚¯**
   - å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã« `?.` ã‚’ä½¿ç”¨
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’å¿…ãšè¨­å®š

2. **æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿**
   - 4è¡Œè¦ç´„ã¯å¤‰æ›´ã—ãªã„
   - Triple OSã‚«ãƒ¼ãƒ‰ã¯å¤‰æ›´ã—ãªã„
   - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ãŒã‚ã‚‹å ´åˆã¯åˆ¥é€”å¯¾å¿œ

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - 9é …ç›®ã®è¨ˆç®—ã¯éåŒæœŸã«ã—ãªã„ï¼ˆã™ãã«è¡¨ç¤ºï¼‰
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯è»½é‡ã«ä¿ã¤

### ã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦
1. `generateNinePhaseAnalysis is not a function`
   â†’ SummaryGenerator.jsã¸ã®è¿½åŠ æ¼ã‚Œ
   
2. `Cannot read properties of undefined`
   â†’ V3ãƒ‡ãƒ¼ã‚¿ã®nullãƒã‚§ãƒƒã‚¯ä¸è¶³
   
3. CSSãŒé©ç”¨ã•ã‚Œãªã„
   â†’ CSSãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿é †åºã‚’ç¢ºèª

---

## ğŸ¯ å®Œäº†æ¡ä»¶

ä»¥ä¸‹ãŒã™ã¹ã¦ç¢ºèªã§ããŸã‚‰ä½œæ¥­å®Œäº†:
1. ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å¼ã®è©³ç´°åˆ†æãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
2. ä¹å®®åˆ†æï¼ˆ9é …ç›®ï¼‰ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
3. çµ±åˆãƒ‘ãƒãƒ«ã§äººæ ¼å¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãªã„
5. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ä¸æ˜ç‚¹ã‚„å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ä»¥ä¸‹ã®æƒ…å ±ã¨ã¨ã‚‚ã«å ±å‘Šã—ã¦ãã ã•ã„:
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼‰
- è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã¨è¡Œç•ªå·
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

ä½œæ¥­ãŠç–²ã‚Œæ§˜ã§ã™ï¼ä¸å¯§ã«å®Ÿè£…ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ä¾¡å€¤ã®é«˜ã„åˆ†æãƒ¬ãƒãƒ¼ãƒˆãŒå®Œæˆã—ã¾ã™ã€‚