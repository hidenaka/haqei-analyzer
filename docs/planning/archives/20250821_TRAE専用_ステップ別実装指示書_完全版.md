# 🚨 TRAE専用 - ステップ別実装指示書（完全版）

**作成日時**: 2025-08-21  
**対象**: TRAE（実装担当）  
**優先度**: 最高  
**推定作業時間**: 15分（1ステップ3分×5ステップ）

---

## ⚠️ 最初に必ず読んでください

**この指示書は5つのステップに分かれています。**  
**必ず順番通りに実行してください。**  
**各ステップ完了後、チェックボックスに✓を付けてください。**

---

# 📌 STEP 1: results.htmlのスクリプト削除（3分）

## 対象ファイル
```
/Users/hideakimacbookair/Desktop/haqei-analyzer/public/results.html
```

## 作業内容

### 1-1. ファイルを開く
VSCodeまたはテキストエディタで上記ファイルを開く

### 1-2. 83行目に移動する
**方法1**: 行番号をクリック  
**方法2**: Ctrl+G（Windows）またはCmd+G（Mac）→「83」と入力→Enter

### 1-3. 現在のコードを確認
**83～87行目に以下の5行があることを確認：**
```html
    <script src="js/components/tabs/DetailedAnalysisTab.js"></script>
    <script src="js/components/tabs/InsightsTab.js"></script>
    <script src="js/components/tabs/ScenariosTab.js"></script>
    <script src="js/components/tabs/ExportTab.js"></script>
    <script src="js/components/tabs/SettingsTab.js"></script>
```

### 1-4. コメントアウトする
**以下のコードをそのままコピーして、83～87行目を置き換えてください：**

```html
    <!-- 不要なタブを削除（基本結果のみ使用）
    <script src="js/components/tabs/DetailedAnalysisTab.js"></script>
    <script src="js/components/tabs/InsightsTab.js"></script>
    <script src="js/components/tabs/ScenariosTab.js"></script>
    <script src="js/components/tabs/ExportTab.js"></script>
    <script src="js/components/tabs/SettingsTab.js"></script>
    -->
```

### 1-5. 保存する
**Ctrl+S**（Windows）または **Cmd+S**（Mac）

## ✅ STEP 1 完了チェック
- [ ] ファイルを開いた
- [ ] 83行目を見つけた
- [ ] コメントアウトした（`<!--` と `-->`で囲んだ）
- [ ] ファイルを保存した

---

# 📌 STEP 2: results.htmlのタブ登録削除（3分）

## 対象ファイル
**同じファイルです**（results.htmlのまま続けます）

## 作業内容

### 2-1. 182行目に移動する
**Ctrl+G**（Windows）または**Cmd+G**（Mac）→「182」と入力→Enter

### 2-2. 現在のコードを確認
**182行目から始まる以下のようなコードを確認：**
```javascript
                if (typeof DetailedAnalysisTab !== 'undefined') {
                    const detailedTab = new DetailedAnalysisTab();
                    detailedTab.setData(analysisResult);
                    window.tabNavigator.registerTab('detailed', detailedTab);
                    console.log('✅ DetailedAnalysisTabを登録');
                }
```

### 2-3. 181行目の最後（180行目の閉じ括弧 `}` の後）に以下を追加
**この2行をコピーして181行目に貼り付け：**
```javascript
                // 不要なタブは削除（基本結果のみ使用）
                /*
```

### 2-4. 215行目の最後（SettingsTabの閉じ括弧 `}` の後）に以下を追加
**この1行をコピーして216行目に貼り付け：**
```javascript
                */
```

### 2-5. 完成形の確認
**181～216行目がこのようになっていることを確認：**
```javascript
                // 不要なタブは削除（基本結果のみ使用）
                /*
                if (typeof DetailedAnalysisTab !== 'undefined') {
                    const detailedTab = new DetailedAnalysisTab();
                    detailedTab.setData(analysisResult);
                    window.tabNavigator.registerTab('detailed', detailedTab);
                    console.log('✅ DetailedAnalysisTabを登録');
                }
                
                if (typeof InsightsTab !== 'undefined') {
                    const insightsTab = new InsightsTab();
                    insightsTab.setData(analysisResult);
                    window.tabNavigator.registerTab('insights', insightsTab);
                    console.log('✅ InsightsTabを登録');
                }
                
                if (typeof ScenariosTab !== 'undefined') {
                    const scenariosTab = new ScenariosTab();
                    scenariosTab.setData(analysisResult);
                    window.tabNavigator.registerTab('scenarios', scenariosTab);
                    console.log('✅ ScenariosTabを登録');
                }
                
                if (typeof ExportTab !== 'undefined') {
                    const exportTab = new ExportTab();
                    exportTab.setData(analysisResult);
                    window.tabNavigator.registerTab('export', exportTab);
                    console.log('✅ ExportTabを登録');
                }
                
                if (typeof SettingsTab !== 'undefined') {
                    const settingsTab = new SettingsTab();
                    settingsTab.setData(analysisResult);
                    window.tabNavigator.registerTab('settings', settingsTab);
                    console.log('✅ SettingsTabを登録');
                }
                */
```

### 2-6. 保存する
**Ctrl+S**（Windows）または **Cmd+S**（Mac）

## ✅ STEP 2 完了チェック
- [ ] 182行目を見つけた
- [ ] 181行目に `/*` を追加した
- [ ] 216行目に `*/` を追加した
- [ ] ファイルを保存した

---

# 📌 STEP 3: TabNavigator.jsの修正（3分）

## 対象ファイル
```
/Users/hideakimacbookair/Desktop/haqei-analyzer/public/js/components/TabNavigator.js
```

## 作業内容

### 3-1. ファイルを開く
新しくTabNavigator.jsファイルを開く

### 3-2. renderTabButtons()メソッドを探す
**Ctrl+F**（Windows）または**Cmd+F**（Mac）→「renderTabButtons」と入力→Enter

### 3-3. メソッドの最初の部分を確認
**以下のようなコードを見つける：**
```javascript
    renderTabButtons() {
        const tabButtons = document.createElement('div');
        tabButtons.className = 'tab-buttons';
        
        // ここから下に既存のコードが続く
```

### 3-4. 新しいコードを追加
**3行目の後（`tabButtons.className = 'tab-buttons';` の次の行）に以下を追加：**

```javascript
        
        // タブが1つだけの場合はボタンを非表示
        if (Object.keys(this.tabs).length <= 1) {
            tabButtons.style.display = 'none';
            return tabButtons;
        }
```

### 3-5. 完成形の確認
**メソッドの最初がこうなっていることを確認：**
```javascript
    renderTabButtons() {
        const tabButtons = document.createElement('div');
        tabButtons.className = 'tab-buttons';
        
        // タブが1つだけの場合はボタンを非表示
        if (Object.keys(this.tabs).length <= 1) {
            tabButtons.style.display = 'none';
            return tabButtons;
        }
        
        // 既存のコードが続く...
```

### 3-6. 保存する
**Ctrl+S**（Windows）または **Cmd+S**（Mac）

## ✅ STEP 3 完了チェック
- [ ] TabNavigator.jsを開いた
- [ ] renderTabButtons()メソッドを見つけた
- [ ] タブ1つの場合の処理を追加した
- [ ] ファイルを保存した

---

# 📌 STEP 4: ブラウザで動作確認（3分）

## 作業内容

### 4-1. ブラウザを開く
Google ChromeまたはFirefoxを起動

### 4-2. ページを開く
アドレスバーに以下を入力してEnter：
```
http://localhost:8080/results.html
```

### 4-3. 強制リロード（超重要！）
**必ずキャッシュをクリアしてリロード：**
- Windows: **Ctrl + Shift + R**
- Mac: **Cmd + Shift + R**

### 4-4. 開発者ツールを開く
- Windows: **F12**
- Mac: **Cmd + Option + I**

### 4-5. Consoleタブを確認
**以下のエラーが出ていないことを確認：**
- ❌ DetailedAnalysisTab is not defined
- ❌ InsightsTab is not defined
- ❌ ScenariosTab is not defined
- ❌ ExportTab is not defined
- ❌ SettingsTab is not defined

## ✅ STEP 4 完了チェック
- [ ] ブラウザでページを開いた
- [ ] 強制リロードした
- [ ] コンソールにタブ関連のエラーがない
- [ ] タブボタンが消えた（または「基本結果」のみ）

---

# 📌 STEP 5: 最終確認（3分）

## 確認項目

### 5-1. 画面の確認
**以下を目視で確認：**
- タブボタンが表示されていない（または「基本結果」のみ）
- エラーメッセージが表示されていない
- 開発モードパネルが正常に動作する

### 5-2. コンソールログの確認
**開発者ツールのConsoleで以下を確認：**
```
✅ BasicResultsTabを登録
✅ TabNavigator初期化完了
```

**以下が表示されていないことを確認：**
```
✅ DetailedAnalysisTabを登録  ← これが出ていたら失敗
✅ InsightsTabを登録         ← これが出ていたら失敗
✅ ScenariosTabを登録        ← これが出ていたら失敗
✅ ExportTabを登録           ← これが出ていたら失敗
✅ SettingsTabを登録         ← これが出ていたら失敗
```

### 5-3. Triple OSカードの表示確認
**開発モードで「プロファイル適用」ボタンをクリック**
- バランス型を選択
- プロファイル適用をクリック
- ページをリロード

## ✅ STEP 5 完了チェック
- [ ] タブボタンが消えた
- [ ] コンソールエラーがない
- [ ] 不要なタブの登録ログが出ていない
- [ ] 開発モードが正常動作

---

# 🎯 全体完了チェックリスト

## ファイル修正
- [ ] results.html 83-87行目をコメントアウト
- [ ] results.html 181-216行目をコメントアウト  
- [ ] TabNavigator.js にタブ1つの処理を追加
- [ ] すべてのファイルを保存

## 動作確認
- [ ] ブラウザで強制リロード実行
- [ ] コンソールにエラーなし
- [ ] タブが1つだけ（または非表示）
- [ ] 全体的に正常動作

---

# 🆘 もし失敗したら

## Q: まだ6つのタブが表示される
**A**: STEP 1とSTEP 2をもう一度確認
- コメントアウトの記号が正しいか（`<!-- -->`と`/* */`）
- 保存し忘れていないか
- ブラウザで強制リロードしたか

## Q: エラーが出る
**A**: エラーメッセージをそのままコピーして報告

## Q: 画面が真っ白
**A**: コンソールのエラーを確認して報告

---

# 📞 完了報告

**すべて完了したら、以下を報告してください：**

1. 全体完了チェックリストがすべて✓
2. スクリーンショット（可能なら）
3. 問題があった場合はその内容

---

**作業時間**: 合計15分  
**難易度**: 簡単（コピペがメイン）

**必ず順番通りに実行してください！**