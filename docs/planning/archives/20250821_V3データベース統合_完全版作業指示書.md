# ğŸš¨ V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆ - å®Œå…¨ç‰ˆä½œæ¥­æŒ‡ç¤ºæ›¸

**ä½œæˆæ—¥**: 2025å¹´08æœˆ21æ—¥  
**å¯¾è±¡**: TRAEï¼ˆå®Ÿè£…æ‹…å½“ï¼‰  
**å„ªå…ˆåº¦**: **æœ€é«˜** - ã“ã‚ŒãŒæœ¬æ¥ã®ç›®çš„  
**æ¨å®šä½œæ¥­æ™‚é–“**: 2-3æ™‚é–“  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: 3ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆæ„æ¸ˆã¿

---

## ğŸ“Š ç¾çŠ¶ã¨å•é¡Œã®å®Œå…¨ç†è§£

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“å›³
```
[OS Analyzer (36å•)]
    â†“ 
[åˆ†æå‡¦ç† â†’ å¦åæ±ºå®š]
    â†“
[localStorageä¿å­˜ (StorageManager)]
    â†“
[results.htmlèµ·å‹•]
    â†“
[BasicResultsTabèª­ã¿è¾¼ã¿]
    â†“
âŒ [æ±ç”¨çš„ãªè¡¨ç¤º] â† ç¾åœ¨ã“ã“ï¼ˆå•é¡Œï¼‰
âœ… [V3ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º] â† ç›®æ¨™
```

### å®Ÿéš›ã®localStorageãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```javascript
// ã‚­ãƒ¼: haqei_analyzer_analysis_result
{
  "engineOS": {
    "hexagram": {
      "name": "ä¹¾ç‚ºå¤©",    // ã“ã®å¦åã§V3ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢
      "number": 1,
      "lines": [1,1,1,1,1,1]
    },
    "score": 85,
    "characteristics": ["é©æ–°æ€§", "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—"]
  },
  "interfaceOS": {
    "hexagram": {
      "name": "å¤ç‚ºåœ°",    // ã“ã®å¦åã§V3ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢
      "number": 2,
      "lines": [0,0,0,0,0,0]
    },
    "score": 78
  },
  "safeModeOS": {
    "hexagram": {
      "name": "æ°´é›·å±¯",    // ã“ã®å¦åã§V3ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢
      "number": 3,
      "lines": [0,1,0,0,0,1]
    },
    "score": 72
  },
  "timestamp": 1724234567890,
  "version": "2025.08.21"
}
```

### V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 
```javascript
// window.HexagramHumanTraitsV3ã®å®Ÿéš›ã®æ§‹é€ 
{
  "ä¹¾ç‚ºå¤©": {
    "asEngineOS": {
      "profile": {
        "type": "é©æ–°è¿½æ±‚ã‚¨ãƒ³ã‚¸ãƒ³",
        "description": "å¸¸ã«ã€ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ã¯ãªã„ã‹ï¼Ÿã€ã‚’è¿½ã„æ±‚ã‚ã‚‹"
      },
      "normalState": {
        "example": "ä¼šè­°ä¸­ã‚‚ã€ã“ã®ä»•çµ„ã¿ã€æ ¹æœ¬ã‹ã‚‰å¤‰ãˆã‚‰ã‚Œãªã„ã‹ã€ã¨è€ƒãˆã‚‹",
        "energyLevel": "é«˜ã‚¨ãƒãƒ«ã‚®ãƒ¼ - å¸¸ã«æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ¹§ãå‡ºã‚‹"
      },
      "maintenance": {
        "tip": "æ™‚ã«ã¯ç«‹ã¡æ­¢ã¾ã£ã¦ã€æ—¢å­˜ã®è‰¯ã•ã‚‚èªã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡"
      }
    },
    "asInterfaceOS": {
      "profile": {
        "type": "ãƒ“ã‚¸ãƒ§ãƒŠãƒªãƒ¼ãƒªãƒ¼ãƒ€ãƒ¼å‹",
        "description": "ã€ã“ã¡ã‚‰ã«å‘ã‹ãŠã†ã€ã¨æ˜ç¢ºãªæ–¹å‘æ€§ã‚’ç¤ºã™ã‚¿ã‚¤ãƒ—"
      }
      // ... ä»¥ä¸‹åŒæ§˜
    },
    "asSafeModeOS": {
      // ... åŒæ§˜ã®æ§‹é€ 
    }
  },
  // ... ä»–ã®63å¦ã‚‚åŒæ§˜
}
```

---

## ğŸ“ å®Ÿè£…ã‚¿ã‚¹ã‚¯è©³ç´°

### STEP 1: BasicResultsTab.jsã®ä¿®æ­£æº–å‚™ï¼ˆ10åˆ†ï¼‰

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
```
/Users/hideakimacbookair/Desktop/haqei-analyzer/public/js/tabs/BasicResultsTab.js
```

#### 1-1. ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ä¿®æ­£ï¼ˆ16-30è¡Œç›®ä»˜è¿‘ï¼‰

**ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰**
```javascript
constructor() {
    console.log('ğŸ“Š BasicResultsTabåˆæœŸåŒ–ä¸­...');
    super('basic-results');
    this.id = 'basic-results';
    this.label = 'åŸºæœ¬çµæœ';
    this.icon = 'ğŸ“Š';
    this.analysisData = null;
}
```

**æ–°ã—ã„ã‚³ãƒ¼ãƒ‰ï¼ˆå®Œå…¨ç½®ãæ›ãˆï¼‰**
```javascript
constructor() {
    console.log('ğŸ“Š BasicResultsTabåˆæœŸåŒ–ä¸­...');
    super('basic-results');
    this.id = 'basic-results';
    this.label = 'åŸºæœ¬çµæœ';
    this.icon = 'ğŸ“Š';
    this.analysisData = null;
    
    // V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‚ç…§ã‚’ä¿æŒ
    this.v3Database = null;
    this.initializeV3Database();
}

/**
 * V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–
 */
initializeV3Database() {
    if (typeof window !== 'undefined' && window.HexagramHumanTraitsV3) {
        this.v3Database = window.HexagramHumanTraitsV3;
        console.log('âœ… V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿æˆåŠŸ:', Object.keys(this.v3Database).length, 'å¦');
    } else {
        console.error('âŒ V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿å¤±æ•— - window.HexagramHumanTraitsV3ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
    }
}
```

---

### STEP 2: V3ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰ã®è¿½åŠ ï¼ˆ15åˆ†ï¼‰

#### 2-1. æ–°ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ï¼ˆ200è¡Œç›®ä»˜è¿‘ã€renderEngineOSCardã®å‰ã«è¿½åŠ ï¼‰

```javascript
/**
 * V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å¦åã«å¯¾å¿œã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
 * @param {string} hexagramName - å¦åï¼ˆä¾‹: "ä¹¾ç‚ºå¤©"ï¼‰
 * @returns {Object|null} V3ãƒ‡ãƒ¼ã‚¿ã¾ãŸã¯null
 */
getV3DataForHexagram(hexagramName) {
    // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    if (!hexagramName || hexagramName === 'ãƒ‡ãƒ¼ã‚¿ãªã—' || hexagramName === '') {
        console.warn('âš ï¸ å¦åãŒç„¡åŠ¹ã§ã™:', hexagramName);
        return null;
    }
    
    // V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å­˜åœ¨ç¢ºèª
    if (!this.v3Database) {
        console.error('âŒ V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
        return null;
    }
    
    // å¦åã®æ­£è¦åŒ–ï¼ˆä¸­å›½æ¼¢å­—â†’æ—¥æœ¬æ¼¢å­—å¤‰æ›ï¼‰
    const normalizedName = this.normalizeHexagramName(hexagramName);
    
    // ãƒ‡ãƒ¼ã‚¿å–å¾—
    const v3Data = this.v3Database[normalizedName];
    
    if (!v3Data) {
        console.warn(`âš ï¸ V3ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${normalizedName} (å…ƒ: ${hexagramName})`);
        return null;
    }
    
    console.log(`âœ… V3ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ: ${normalizedName}`);
    return v3Data;
}

/**
 * å¦åã®æ­£è¦åŒ–ï¼ˆè¡¨è¨˜ã‚†ã‚Œå¯¾å¿œï¼‰
 * @param {string} name - å…ƒã®å¦å
 * @returns {string} æ­£è¦åŒ–ã•ã‚ŒãŸå¦å
 */
normalizeHexagramName(name) {
    // ä¸­å›½æ¼¢å­—â†’æ—¥æœ¬æ¼¢å­—å¤‰æ›ãƒãƒƒãƒ—
    const replacements = {
        'ä¸º': 'ç‚º',
        'æ³½': 'æ¾¤',
        'è®¼': 'è¨Ÿ',
        'å¸ˆ': 'å¸«',
        'è´²': 'è³',
        'å‰¥': 'å‰',
        'å¤': 'å¾©',
        'é£': 'é¢¨'
    };
    
    let normalized = name;
    for (const [chinese, japanese] of Object.entries(replacements)) {
        normalized = normalized.replace(new RegExp(chinese, 'g'), japanese);
    }
    
    return normalized;
}

/**
 * OSã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸV3ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
 * @param {string} hexagramName - å¦å
 * @param {string} osType - OSã‚¿ã‚¤ãƒ—ï¼ˆengineOS/interfaceOS/safeModeOSï¼‰
 * @returns {Object|null} è©²å½“ã™ã‚‹OSã®V3ãƒ‡ãƒ¼ã‚¿
 */
getV3DataForOS(hexagramName, osType) {
    const v3Data = this.getV3DataForHexagram(hexagramName);
    
    if (!v3Data) {
        return null;
    }
    
    // OSã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
    switch(osType) {
        case 'engineOS':
            return v3Data.asEngineOS || null;
        case 'interfaceOS':
            return v3Data.asInterfaceOS || null;
        case 'safeModeOS':
            return v3Data.asSafeModeOS || null;
        default:
            console.error('âŒ ä¸æ˜ãªOSã‚¿ã‚¤ãƒ—:', osType);
            return null;
    }
}
```

---

### STEP 3: Engine OSã‚«ãƒ¼ãƒ‰ã®å®Œå…¨ä¿®æ­£ï¼ˆ20åˆ†ï¼‰

#### 3-1. renderEngineOSCard()ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Œå…¨ç½®ãæ›ãˆï¼ˆ203-246è¡Œç›®ï¼‰

```javascript
renderEngineOSCard(osData) {
    // ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    if (!osData) {
        return this.renderErrorCard('Engine OS', 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
    
    // å¦åã®å–å¾—ï¼ˆè¤‡æ•°ã®å ´æ‰€ã‹ã‚‰è©¦è¡Œï¼‰
    const hexagramName = this.extractHexagramName(osData);
    
    if (!hexagramName) {
        return this.renderFallbackCard('Engine OS', osData, 'âš™ï¸', 'å†…ãªã‚‹åŸå‹•åŠ›');
    }
    
    // V3ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    const v3Data = this.getV3DataForOS(hexagramName, 'engineOS');
    
    // V3ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯è©³ç´°è¡¨ç¤º
    if (v3Data && v3Data.profile) {
        return `
            <div class="os-card os-card-engine">
                <div class="os-card-header">
                    <div class="os-icon">âš™ï¸</div>
                    <div class="os-title">
                        <h3>Engine OS</h3>
                        <p class="os-subtitle">å†…ãªã‚‹åŸå‹•åŠ›</p>
                    </div>
                    <div class="os-score">
                        <div class="score-value">${osData.score || 0}</div>
                        <div class="score-label">pts</div>
                    </div>
                </div>
                
                <div class="hexagram-info">
                    <span class="hexagram-symbol">${osData.hexagram?.symbol || ''}</span>
                    <span class="hexagram-name">${hexagramName}</span>
                </div>
                
                <div class="os-v3-content">
                    <div class="v3-type">
                        <span class="v3-label">ã‚¿ã‚¤ãƒ—:</span>
                        <span class="v3-value">${v3Data.profile.type}</span>
                    </div>
                    
                    <div class="v3-description">
                        <p>${v3Data.profile.description}</p>
                    </div>
                    
                    ${v3Data.normalState ? `
                        <div class="v3-example">
                            <span class="v3-label">ä¾‹:</span>
                            <p>${v3Data.normalState.example}</p>
                        </div>
                        
                        <div class="v3-energy">
                            <span class="v3-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼:</span>
                            <span>${v3Data.normalState.energyLevel}</span>
                        </div>
                    ` : ''}
                    
                    ${v3Data.maintenance ? `
                        <div class="v3-advice">
                            <span class="v3-label">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</span>
                            <p>${v3Data.maintenance.tip}</p>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    }
    
    // V3ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯æœªå®Ÿè£…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    return this.renderNotImplementedCard('Engine OS', hexagramName, osData);
}

/**
 * å¦åã‚’æ§˜ã€…ãªå ´æ‰€ã‹ã‚‰æŠ½å‡º
 */
extractHexagramName(osData) {
    // ãƒ‘ã‚¿ãƒ¼ãƒ³1: hexagram.name
    if (osData.hexagram?.name) {
        return osData.hexagram.name;
    }
    
    // ãƒ‘ã‚¿ãƒ¼ãƒ³2: hexagramName
    if (osData.hexagramName) {
        return osData.hexagramName;
    }
    
    // ãƒ‘ã‚¿ãƒ¼ãƒ³3: name
    if (osData.name && osData.name !== 'Engine OS') {
        return osData.name;
    }
    
    return null;
}

/**
 * ã‚¨ãƒ©ãƒ¼ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
 */
renderErrorCard(osType, message) {
    return `
        <div class="os-card os-card-error">
            <h3>${osType}</h3>
            <p class="error-message">âŒ ${message}</p>
        </div>
    `;
}

/**
 * æœªå®Ÿè£…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰
 */
renderNotImplementedCard(osType, hexagramName, osData) {
    return `
        <div class="os-card os-card-not-implemented">
            <div class="os-card-header">
                <div class="os-icon">âš™ï¸</div>
                <div class="os-title">
                    <h3>${osType}</h3>
                    <p class="os-subtitle">ãƒ‡ãƒ¼ã‚¿æº–å‚™ä¸­</p>
                </div>
                <div class="os-score">
                    <div class="score-value">${osData.score || 0}</div>
                    <div class="score-label">pts</div>
                </div>
            </div>
            
            <div class="hexagram-info">
                <span class="hexagram-name">${hexagramName}</span>
            </div>
            
            <div class="not-implemented-message">
                <p>ğŸš§ ã¾ã å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ - ä»Šå¾Œå®Ÿè£…äºˆå®šã§ã™</p>
                <p class="small-text">V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è©²å½“ãƒ‡ãƒ¼ã‚¿ãŒæº–å‚™ä¸­ã§ã™</p>
            </div>
        </div>
    `;
}
```

---

### STEP 4: Interface OSã¨SafeMode OSã‚«ãƒ¼ãƒ‰ã‚‚åŒæ§˜ã«ä¿®æ­£ï¼ˆ20åˆ†ï¼‰

#### 4-1. renderInterfaceOSCard()ã®ä¿®æ­£ï¼ˆ247-290è¡Œç›®ï¼‰

```javascript
renderInterfaceOSCard(osData) {
    if (!osData) {
        return this.renderErrorCard('Interface OS', 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
    
    const hexagramName = this.extractHexagramName(osData);
    
    if (!hexagramName) {
        return this.renderFallbackCard('Interface OS', osData, 'ğŸŒ', 'ç¤¾ä¼šã¨ã®æ¥ç‚¹');
    }
    
    const v3Data = this.getV3DataForOS(hexagramName, 'interfaceOS');
    
    if (v3Data && v3Data.profile) {
        return `
            <div class="os-card os-card-interface">
                <div class="os-card-header">
                    <div class="os-icon">ğŸŒ</div>
                    <div class="os-title">
                        <h3>Interface OS</h3>
                        <p class="os-subtitle">ç¤¾ä¼šã¨ã®æ¥ç‚¹</p>
                    </div>
                    <div class="os-score">
                        <div class="score-value">${osData.score || 0}</div>
                        <div class="score-label">pts</div>
                    </div>
                </div>
                
                <div class="hexagram-info">
                    <span class="hexagram-symbol">${osData.hexagram?.symbol || ''}</span>
                    <span class="hexagram-name">${hexagramName}</span>
                </div>
                
                <div class="os-v3-content">
                    <div class="v3-type">
                        <span class="v3-label">ã‚¿ã‚¤ãƒ—:</span>
                        <span class="v3-value">${v3Data.profile.type}</span>
                    </div>
                    
                    <div class="v3-description">
                        <p>${v3Data.profile.description}</p>
                    </div>
                    
                    ${v3Data.normalState ? `
                        <div class="v3-example">
                            <span class="v3-label">ä¾‹:</span>
                            <p>${v3Data.normalState.example}</p>
                        </div>
                        
                        <div class="v3-energy">
                            <span class="v3-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼:</span>
                            <span>${v3Data.normalState.energyLevel}</span>
                        </div>
                    ` : ''}
                    
                    ${v3Data.maintenance ? `
                        <div class="v3-advice">
                            <span class="v3-label">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</span>
                            <p>${v3Data.maintenance.tip}</p>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    }
    
    return this.renderNotImplementedCard('Interface OS', hexagramName, osData);
}
```

#### 4-2. renderSafeModeOSCard()ã®ä¿®æ­£ï¼ˆ291-334è¡Œç›®ï¼‰

```javascript
renderSafeModeOSCard(osData) {
    if (!osData) {
        return this.renderErrorCard('SafeMode OS', 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    }
    
    const hexagramName = this.extractHexagramName(osData);
    
    if (!hexagramName) {
        return this.renderFallbackCard('SafeMode OS', osData, 'ğŸ›¡ï¸', 'å¿ƒã®é˜²å¾¡æ©Ÿæ§‹');
    }
    
    const v3Data = this.getV3DataForOS(hexagramName, 'safeModeOS');
    
    if (v3Data && v3Data.profile) {
        return `
            <div class="os-card os-card-safemode">
                <div class="os-card-header">
                    <div class="os-icon">ğŸ›¡ï¸</div>
                    <div class="os-title">
                        <h3>SafeMode OS</h3>
                        <p class="os-subtitle">å¿ƒã®é˜²å¾¡æ©Ÿæ§‹</p>
                    </div>
                    <div class="os-score">
                        <div class="score-value">${osData.score || 0}</div>
                        <div class="score-label">pts</div>
                    </div>
                </div>
                
                <div class="hexagram-info">
                    <span class="hexagram-symbol">${osData.hexagram?.symbol || ''}</span>
                    <span class="hexagram-name">${hexagramName}</span>
                </div>
                
                <div class="os-v3-content">
                    <div class="v3-type">
                        <span class="v3-label">ã‚¿ã‚¤ãƒ—:</span>
                        <span class="v3-value">${v3Data.profile.type}</span>
                    </div>
                    
                    <div class="v3-description">
                        <p>${v3Data.profile.description}</p>
                    </div>
                    
                    ${v3Data.normalState ? `
                        <div class="v3-example">
                            <span class="v3-label">ä¾‹:</span>
                            <p>${v3Data.normalState.example}</p>
                        </div>
                        
                        <div class="v3-energy">
                            <span class="v3-label">ã‚¨ãƒãƒ«ã‚®ãƒ¼:</span>
                            <span>${v3Data.normalState.energyLevel}</span>
                        </div>
                    ` : ''}
                    
                    ${v3Data.maintenance ? `
                        <div class="v3-advice">
                            <span class="v3-label">ğŸ’¡ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</span>
                            <p>${v3Data.maintenance.tip}</p>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    }
    
    return this.renderNotImplementedCard('SafeMode OS', hexagramName, osData);
}
```

---

### STEP 5: CSSè¿½åŠ ï¼ˆ10åˆ†ï¼‰

#### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
```
/Users/hideakimacbookair/Desktop/haqei-analyzer/public/css/results.css
```

#### 5-1. V3ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºç”¨ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«è¿½åŠ ï¼‰

```css
/* ============================================
   V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¡¨ç¤ºç”¨ã‚¹ã‚¿ã‚¤ãƒ«
   ============================================ */

.os-v3-content {
    padding: 20px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 8px;
    margin-top: 15px;
}

.v3-type {
    font-size: 18px;
    font-weight: bold;
    color: #2196F3;
    margin-bottom: 15px;
    padding: 10px;
    background: white;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.v3-label {
    font-weight: bold;
    color: #333;
    margin-right: 8px;
}

.v3-value {
    color: #1976D2;
}

.v3-description {
    color: #555;
    line-height: 1.8;
    margin-bottom: 15px;
    padding: 15px;
    background: white;
    border-radius: 5px;
}

.v3-example {
    background: #fffbf0;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
    border-left: 4px solid #FFA726;
}

.v3-example p {
    margin: 0;
    color: #6a4c2a;
    font-style: italic;
}

.v3-energy {
    padding: 10px 15px;
    background: #e8f5e9;
    border-radius: 5px;
    margin-bottom: 15px;
    color: #2e7d32;
}

.v3-advice {
    background: #e3f2fd;
    padding: 15px;
    border-radius: 5px;
    border-left: 4px solid #2196F3;
    margin-top: 15px;
}

.v3-advice p {
    margin: 0;
    color: #0d47a1;
    line-height: 1.6;
}

/* æœªå®Ÿè£…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.os-card-not-implemented {
    opacity: 0.8;
    border: 2px dashed #FFA726;
}

.not-implemented-message {
    padding: 20px;
    text-align: center;
    background: #fff3e0;
    border-radius: 5px;
    margin: 15px;
}

.not-implemented-message p {
    margin: 10px 0;
    color: #e65100;
}

.not-implemented-message .small-text {
    font-size: 12px;
    color: #bf360c;
}

/* ã‚¨ãƒ©ãƒ¼ã‚«ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.os-card-error {
    background: #ffebee;
    border: 2px solid #f44336;
    padding: 20px;
    text-align: center;
}

.error-message {
    color: #c62828;
    font-weight: bold;
}
```

---

## ğŸ§ª å‹•ä½œç¢ºèªæ‰‹é †

### 1. ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
```bash
# Playwrightã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã—ã¦ç¢ºèª
npx playwright test --headed
```

### 2. æ‰‹å‹•ãƒ†ã‚¹ãƒˆæ‰‹é †
1. Chrome DevToolsã‚’é–‹ãï¼ˆF12ï¼‰
2. Applicationã‚¿ãƒ– â†’ Local Storage â†’ Clear All
3. `http://localhost:8080/os_analyzer.html` ã‚’é–‹ã
4. 36å•ã®è³ªå•ã«å›ç­”
5. çµæœç”»é¢ã§ä»¥ä¸‹ã‚’ç¢ºèªï¼š
   - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€Œâœ… V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿æˆåŠŸ: 64 å¦ã€
   - å„OSã‚«ãƒ¼ãƒ‰ã«V3ãƒ‡ãƒ¼ã‚¿ã®è©³ç´°è¡¨ç¤º
   - ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨

### 3. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ç¢ºèª
```javascript
// æœŸå¾…ã•ã‚Œã‚‹ãƒ­ã‚°
âœ… V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿æˆåŠŸ: 64 å¦
âœ… V3ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ: ä¹¾ç‚ºå¤©
âœ… V3ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ: å¤ç‚ºåœ°
âœ… V3ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ: æ°´é›·å±¯
ğŸ“Š Triple OSã‚«ãƒ¼ãƒ‰æç”»å®Œäº†
```

### 4. ãƒ‡ãƒ¼ã‚¿ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```javascript
// DevToolsã®Consoleã§å®Ÿè¡Œ
const storageData = localStorage.getItem('haqei_analyzer_analysis_result');
console.log('StorageData:', JSON.parse(storageData));

const v3Data = window.HexagramHumanTraitsV3;
console.log('V3 Database Keys:', Object.keys(v3Data));
```

---

## âš ï¸ ã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦

### V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„å ´åˆ
1. `results.html`ã‚’ç¢ºèªã—ã€ä»¥ä¸‹ã®scriptã‚¿ã‚°ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š
```html
<script src="js/data/hexagram-human-traits-v3.js"></script>
```

### å¦åãŒå–å¾—ã§ããªã„å ´åˆ
1. StorageManagerã®`getAnalysisResult()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¢ºèª
2. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒæƒ³å®šã¨ç•°ãªã‚‹å ´åˆã¯`extractHexagramName()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª¿æ•´

### è¡¨ç¤ºãŒå´©ã‚Œã‚‹å ´åˆ
1. CSSãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿é †åºã‚’ç¢ºèª
2. `results.css`ãŒæœ€å¾Œã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] BasicResultsTab.jsã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ä¿®æ­£
- [ ] V3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] getV3DataForHexagram()ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] normalizeHexagramName()ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] getV3DataForOS()ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] renderEngineOSCard()ã®å®Œå…¨ä¿®æ­£
- [ ] renderInterfaceOSCard()ã®å®Œå…¨ä¿®æ­£
- [ ] renderSafeModeOSCard()ã®å®Œå…¨ä¿®æ­£
- [ ] extractHexagramName()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] renderNotImplementedCard()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] CSSè¿½åŠ ï¼ˆresults.cssï¼‰
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
- [ ] å‹•ä½œç¢ºèªï¼ˆ36å•â†’çµæœè¡¨ç¤ºï¼‰
- [ ] ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹çµæœ

### Beforeï¼ˆç¾åœ¨ï¼‰
- Engine OS: ã€Œå‰µé€ çš„ã€ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€ï¼ˆæ±ç”¨çš„ï¼‰
- Interface OS: ã€Œå”èª¿çš„ã€ã€Œã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ï¼ˆæ±ç”¨çš„ï¼‰
- SafeMode OS: ã€Œå®‰å®šå¿—å‘ã€ã€Œæ…é‡ã€ï¼ˆæ±ç”¨çš„ï¼‰

### Afterï¼ˆå®Ÿè£…å¾Œï¼‰
- Engine OS: **é©æ–°è¿½æ±‚ã‚¨ãƒ³ã‚¸ãƒ³** - å¸¸ã«ã€ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ã¯ãªã„ã‹ï¼Ÿã€ã‚’è¿½ã„æ±‚ã‚ã‚‹
- Interface OS: **ãƒ“ã‚¸ãƒ§ãƒŠãƒªãƒ¼ãƒªãƒ¼ãƒ€ãƒ¼å‹** - ã€ã“ã¡ã‚‰ã«å‘ã‹ãŠã†ã€ã¨æ˜ç¢ºãªæ–¹å‘æ€§ã‚’ç¤ºã™ã‚¿ã‚¤ãƒ—
- SafeMode OS: **å®Œç’§ä¸»ç¾©ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³** - ã€ã¾ã æº–å‚™ãŒè¶³ã‚Šãªã„ã€ã¨æ…é‡ã«ç‰©äº‹ã‚’é€²ã‚ã‚‹

---

**ã“ã®ä½œæ¥­æŒ‡ç¤ºæ›¸ã¯3ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµŒã¦ã€æ›–æ˜§ã•ã‚’æ’é™¤ã—ãŸå®Œå…¨ç‰ˆã§ã™ã€‚**