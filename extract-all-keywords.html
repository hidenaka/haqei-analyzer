<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>64卦キーワード完全抽出・分析</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff; 
            line-height: 1.6;
        }
        .analysis-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: rgba(0,0,0,0.3);
        }
        .keyword-category {
            margin: 10px 0;
            padding: 10px;
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
        }
        .keyword-list {
            color: #22d3ee;
            font-weight: bold;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>🔍 64卦キーワード完全抽出・分析</h1>
    <p>実際のhardcoded特性から全キーワードを抽出し、4軸で分類</p>
    
    <button onclick="extractAllKeywords()">🎯 全キーワード抽出・分析</button>
    
    <div id="results"></div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script>
        function extractAllKeywords() {
            const results = document.getElementById('results');
            results.innerHTML = '<div>🔄 64卦キーワード分析中...</div>';
            
            try {
                const analyzer = new TripleOSInteractionAnalyzer();
                
                // 全キーワード収集
                const allKeywords = new Set();
                const hexagramData = [];
                
                for (let i = 1; i <= 64; i++) {
                    const char = analyzer.getHexagramCharacteristics(i);
                    if (char && char.keywords) {
                        char.keywords.forEach(keyword => allKeywords.add(keyword));
                        hexagramData.push({
                            id: i,
                            name: char.name,
                            keywords: char.keywords,
                            strength: char.strength,
                            weakness: char.weakness,
                            energy: char.energy
                        });
                    }
                }
                
                const sortedKeywords = Array.from(allKeywords).sort();
                
                // 4軸での分類（手動だが実データ基準）
                const speedAxisAnalysis = analyzeSpeedAxis(hexagramData);
                const valueAxisAnalysis = analyzeValueAxis(hexagramData);
                const timeAxisAnalysis = analyzeTimeAxis(hexagramData);
                const directionAxisAnalysis = analyzeDirectionAxis(hexagramData);
                
                let html = `
                    <div class="analysis-section">
                        <h2>📊 全64卦から抽出された全キーワード</h2>
                        <p><strong>総キーワード数:</strong> ${sortedKeywords.length}</p>
                        <div class="keyword-list">[${sortedKeywords.join(', ')}]</div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>⚡ スピード軸分析</h2>
                        <div class="keyword-category">
                            <h4>高速・積極的キーワード (${speedAxisAnalysis.fast.length}個)</h4>
                            <div class="keyword-list">${speedAxisAnalysis.fast.join(', ')}</div>
                        </div>
                        <div class="keyword-category">
                            <h4>慎重・段階的キーワード (${speedAxisAnalysis.slow.length}個)</h4>
                            <div class="keyword-list">${speedAxisAnalysis.slow.join(', ')}</div>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>💭 価値観軸分析</h2>
                        <div class="keyword-category">
                            <h4>個人主義・独立キーワード (${valueAxisAnalysis.individual.length}個)</h4>
                            <div class="keyword-list">${valueAxisAnalysis.individual.join(', ')}</div>
                        </div>
                        <div class="keyword-category">
                            <h4>集団主義・協調キーワード (${valueAxisAnalysis.group.length}個)</h4>
                            <div class="keyword-list">${valueAxisAnalysis.group.join(', ')}</div>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>⏰ 時間軸分析</h2>
                        <div class="keyword-category">
                            <h4>変革・革新キーワード (${timeAxisAnalysis.change.length}個)</h4>
                            <div class="keyword-list">${timeAxisAnalysis.change.join(', ')}</div>
                        </div>
                        <div class="keyword-category">
                            <h4>安定・継続キーワード (${timeAxisAnalysis.stable.length}個)</h4>
                            <div class="keyword-list">${timeAxisAnalysis.stable.join(', ')}</div>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>🎯 方向性軸分析</h2>
                        <div class="keyword-category">
                            <h4>拡張・外向キーワード (${directionAxisAnalysis.expand.length}個)</h4>
                            <div class="keyword-list">${directionAxisAnalysis.expand.join(', ')}</div>
                        </div>
                        <div class="keyword-category">
                            <h4>内向・収束キーワード (${directionAxisAnalysis.contract.length}個)</h4>
                            <div class="keyword-list">${directionAxisAnalysis.contract.join(', ')}</div>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>🔧 生成されるJavaScript配列</h2>
                        <pre style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 4px; color: #10b981;">
// 実データ基準のキーワード衝突検出配列
const SPEED_FAST = ${JSON.stringify(speedAxisAnalysis.fast, null, 2)};
const SPEED_SLOW = ${JSON.stringify(speedAxisAnalysis.slow, null, 2)};
const VALUE_INDIVIDUAL = ${JSON.stringify(valueAxisAnalysis.individual, null, 2)};
const VALUE_GROUP = ${JSON.stringify(valueAxisAnalysis.group, null, 2)};
const TIME_CHANGE = ${JSON.stringify(timeAxisAnalysis.change, null, 2)};
const TIME_STABLE = ${JSON.stringify(timeAxisAnalysis.stable, null, 2)};
const DIRECTION_EXPAND = ${JSON.stringify(directionAxisAnalysis.expand, null, 2)};
const DIRECTION_CONTRACT = ${JSON.stringify(directionAxisAnalysis.contract, null, 2)};
                        </pre>
                    </div>
                `;
                
                results.innerHTML = html;
                
            } catch (error) {
                results.innerHTML = `
                    <div style="color: #ef4444; padding: 20px;">
                        ❌ 分析エラー: ${error.message}
                        <br>スタック: ${error.stack}
                    </div>
                `;
                console.error('キーワード抽出エラー:', error);
            }
        }
        
        // スピード軸の分析
        function analyzeSpeedAxis(hexagramData) {
            const fast = [];
            const slow = [];
            
            hexagramData.forEach(hex => {
                hex.keywords.forEach(keyword => {
                    // 高速・積極的な概念
                    if (['強大', '威力', '積極性', '勇猛', '衝撃', '活気', '決断', '処断', '雷', '電撃', '勇敢', '攻撃', '突進', '爆発', '瞬間', '即断', '果敢'].includes(keyword)) {
                        if (!fast.includes(keyword)) fast.push(keyword);
                    }
                    // 慎重・段階的な概念  
                    if (['穏健', '慎重', '節制', '内省', '瞑想', '静観', '忍耐', '待機', '準備', '観察', '洞察', '謙遜', '段階的', '着実', '漸進', '深い洞察', '小さな蓄積'].includes(keyword)) {
                        if (!slow.includes(keyword)) slow.push(keyword);
                    }
                });
            });
            
            return { fast, slow };
        }
        
        // 価値観軸の分析
        function analyzeValueAxis(hexagramData) {
            const individual = [];
            const group = [];
            
            hexagramData.forEach(hex => {
                hex.keywords.forEach(keyword => {
                    // 個人主義・独立の概念
                    if (['創造力', 'リーダーシップ', '独立', '自由', '創造', '自立', '主導', '独創性', '自己主張', '主体性'].includes(keyword)) {
                        if (!individual.includes(keyword)) individual.push(keyword);
                    }
                    // 集団主義・協調の概念
                    if (['団結', '協調', '統合', '調和', '集合', '結集', '親和', '協力', '同志', '和解', '包容', '受容性', '包容力', '柔軟性', '組織'].includes(keyword)) {
                        if (!group.includes(keyword)) group.push(keyword);
                    }
                });
            });
            
            return { individual, group };
        }
        
        // 時間軸の分析
        function analyzeTimeAxis(hexagramData) {
            const change = [];
            const stable = [];
            
            hexagramData.forEach(hex => {
                hex.keywords.forEach(keyword => {
                    // 変革・革新の概念
                    if (['革新', '変革', '刷新', '改革', '腐敗', '再生', '変化対応', '改革力', '新秩序', '再編', '覚醒', '変化', '進歩'].includes(keyword)) {
                        if (!change.includes(keyword)) change.push(keyword);
                    }
                    // 安定・継続の概念
                    if (['安定', '維持', '恒常', '永続', '持続', '継続', '不変', '保守', '現状維持', '忍耐', '堅実', '持続的', '永続的'].includes(keyword)) {
                        if (!stable.includes(keyword)) stable.push(keyword);
                    }
                });
            });
            
            return { change, stable };
        }
        
        // 方向性軸の分析
        function analyzeDirectionAxis(hexagramData) {
            const expand = [];
            const contract = [];
            
            hexagramData.forEach(hex => {
                hex.keywords.forEach(keyword => {
                    // 拡張・外向の概念
                    if (['上昇', '発展', '向上', '進歩', '発達', '成長', '昇進', '拡散', '解放', '散開', '明晰性', '照明', '外向', '豊かさ', '繁栄'].includes(keyword)) {
                        if (!expand.includes(keyword)) expand.push(keyword);
                    }
                    // 内向・収束の概念
                    if (['潜伏', '退避', '内向', '収束', '戦略的撤退', '保身', '隠遁', '内省', '深い洞察', '深層', '閉塞', '断絶', '節制', '制限'].includes(keyword)) {
                        if (!contract.includes(keyword)) contract.push(keyword);
                    }
                });
            });
            
            return { expand, contract };
        }
    </script>
</body>
</html>