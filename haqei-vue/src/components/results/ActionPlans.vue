<template>
  <div class="action-plans">
    <div class="plans-intro">
      <p>ã‚ãªãŸã®åˆ†æçµæœã«åŸºã¥ã„ãŸã€å…·ä½“çš„ãªè¡Œå‹•ææ¡ˆã§ã™ã€‚</p>
    </div>

    <div class="plans-grid">
      <!-- Short-term Actions -->
      <div class="plan-section short-term">
        <div class="section-header">
          <h4>çŸ­æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1-2é€±é–“ï¼‰</h4>
          <span class="section-icon">ğŸ¯</span>
        </div>
        <div class="action-items">
          <div 
            v-for="(action, index) in shortTermActions" 
            :key="`short-${index}`"
            class="action-item"
          >
            <span class="action-number">{{ index + 1 }}</span>
            <div class="action-content">
              <h5>{{ action.title }}</h5>
              <p>{{ action.description }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Medium-term Actions -->
      <div class="plan-section medium-term">
        <div class="section-header">
          <h4>ä¸­æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1-3ãƒ¶æœˆï¼‰</h4>
          <span class="section-icon">ğŸ“ˆ</span>
        </div>
        <div class="action-items">
          <div 
            v-for="(action, index) in mediumTermActions" 
            :key="`medium-${index}`"
            class="action-item"
          >
            <span class="action-number">{{ index + 1 }}</span>
            <div class="action-content">
              <h5>{{ action.title }}</h5>
              <p>{{ action.description }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Long-term Actions -->
      <div class="plan-section long-term">
        <div class="section-header">
          <h4>é•·æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ3ãƒ¶æœˆä»¥ä¸Šï¼‰</h4>
          <span class="section-icon">ğŸš€</span>
        </div>
        <div class="action-items">
          <div 
            v-for="(action, index) in longTermActions" 
            :key="`long-${index}`"
            class="action-item"
          >
            <span class="action-number">{{ index + 1 }}</span>
            <div class="action-content">
              <h5>{{ action.title }}</h5>
              <p>{{ action.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="action-tips">
      <h4>å®Ÿè¡Œã®ãƒ’ãƒ³ãƒˆ</h4>
      <ul>
        <li>ã¾ãšã¯çŸ­æœŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†</li>
        <li>ç„¡ç†ã›ãšã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é€²ã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™</li>
        <li>å®šæœŸçš„ã«æŒ¯ã‚Šè¿”ã‚Šã€å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ã—ã¾ã—ã‚‡ã†</li>
        <li>å°ã•ãªæˆåŠŸã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ã§ã€å¤§ããªå¤‰åŒ–ã«ã¤ãªãŒã‚Šã¾ã™</li>
      </ul>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, type PropType } from 'vue'

// Props
const props = defineProps({
  engineOS: {
    type: Object as PropType<{
      hexagramId: number
      hexagramName: string
      primaryTrigram: string
      secondaryTrigram: string
    }>,
    required: true
  },
  consistencyScore: {
    type: Number,
    required: true
  }
})

// Computed actions based on analysis
const shortTermActions = computed(() => {
  const actions = []
  
  // Based on primary trigram
  if (props.engineOS.primaryTrigram === 'ä¹¾') {
    actions.push({
      title: 'æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹',
      description: 'ã‚ãªãŸã®å‰µé€ æ€§ã‚’æ´»ã‹ã›ã‚‹å°ã•ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
    })
  } else if (props.engineOS.primaryTrigram === 'å¤') {
    actions.push({
      title: 'ã‚µãƒãƒ¼ãƒˆæ´»å‹•ã¸ã®å‚åŠ ',
      description: 'ä»–è€…ã‚’æ”¯æ´ã™ã‚‹æ´»å‹•ã«å‚åŠ ã—ã€å—å®¹æ€§ã‚’æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚'
    })
  }
  
  // Based on consistency score
  if (props.consistencyScore < 60) {
    actions.push({
      title: 'è‡ªå·±è¦³å¯Ÿæ—¥è¨˜ã®é–‹å§‹',
      description: 'å†…é¢ã¨å¤–é¢ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’è¦³å¯Ÿã™ã‚‹æ—¥è¨˜ã‚’ã¤ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
    })
  }
  
  // Default action
  actions.push({
    title: 'æ¯æ—¥ã®æŒ¯ã‚Šè¿”ã‚Šæ™‚é–“',
    description: '1æ—¥10åˆ†ã€ä»Šæ—¥ã®è¡Œå‹•ã¨æ„Ÿæƒ…ã‚’æŒ¯ã‚Šè¿”ã‚‹æ™‚é–“ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚'
  })
  
  return actions.slice(0, 3)
})

const mediumTermActions = computed(() => {
  const actions = []
  
  if (props.engineOS.secondaryTrigram === 'éœ‡') {
    actions.push({
      title: 'è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ€é©åŒ–',
      description: 'è‡ªåˆ†ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã€ã‚ˆã‚ŠåŠ¹æœçš„ãªæ–¹æ³•ã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ã€‚'
    })
  } else if (props.engineOS.secondaryTrigram === 'è‰®') {
    actions.push({
      title: 'å®‰å®šåŸºç›¤ã®æ§‹ç¯‰',
      description: 'æ—¥å¸¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚’è¦‹ç›´ã—ã€å®‰å®šã—ãŸåŸºç›¤ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚'
    })
  }
  
  actions.push({
    title: 'ã‚¹ã‚­ãƒ«å‘ä¸Šè¨ˆç”»',
    description: 'ã‚ãªãŸã®å¼·ã¿ã‚’æ´»ã‹ã›ã‚‹ã‚¹ã‚­ãƒ«ã‚’è¨ˆç”»çš„ã«å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚'
  })
  
  actions.push({
    title: 'äººé–“é–¢ä¿‚ã®æ·±åŒ–',
    description: 'é‡è¦ãªäººé–“é–¢ä¿‚ã‚’ã‚ˆã‚Šæ·±ã‚ã€ç›¸äº’ç†è§£ã‚’ä¿ƒé€²ã—ã¾ã—ã‚‡ã†ã€‚'
  })
  
  return actions.slice(0, 3)
})

const longTermActions = computed(() => {
  return [
    {
      title: 'ãƒ©ã‚¤ãƒ•ãƒ“ã‚¸ãƒ§ãƒ³ã®æ˜ç¢ºåŒ–',
      description: 'ã‚ãªãŸã®ä¾¡å€¤è¦³ã«åŸºã¥ã„ãŸé•·æœŸçš„ãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æãã¾ã—ã‚‡ã†ã€‚'
    },
    {
      title: 'Triple OSã®çµ±åˆ',
      description: '3ã¤ã®OSã‚’ã‚ˆã‚Šèª¿å’Œã•ã›ã€çµ±åˆã•ã‚ŒãŸè‡ªå·±ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚'
    },
    {
      title: 'ç¶™ç¶šçš„ãªæˆé•·ã‚·ã‚¹ãƒ†ãƒ ',
      description: 'å®šæœŸçš„ãªè‡ªå·±åˆ†æã¨æ”¹å–„ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¢ºç«‹ã—ã¾ã—ã‚‡ã†ã€‚'
    }
  ]
})
</script>

<style scoped>
.action-plans {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.plans-intro {
  text-align: center;
  color: var(--text-secondary);
  font-size: 1.1rem;
}

/* Plans Grid */
.plans-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.plan-section {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 1.5rem;
  border-top: 3px solid transparent;
}

.short-term {
  border-top-color: #4ECDC4;
}

.medium-term {
  border-top-color: #FFD93D;
}

.long-term {
  border-top-color: #6C5CE7;
}

/* Section Header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.section-header h4 {
  margin: 0;
  color: var(--text-primary);
}

.section-icon {
  font-size: 1.5rem;
}

/* Action Items */
.action-items {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.action-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background: var(--bg-primary);
  border-radius: 6px;
  transition: transform 0.2s ease;
}

.action-item:hover {
  transform: translateX(4px);
}

.action-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.action-content {
  flex: 1;
}

.action-content h5 {
  margin: 0 0 0.5rem 0;
  color: var(--text-primary);
  font-size: 1rem;
}

.action-content p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.4;
}

/* Tips */
.action-tips {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 1.5rem;
  border-left: 4px solid var(--primary-color);
}

.action-tips h4 {
  margin: 0 0 1rem 0;
  color: var(--text-primary);
}

.action-tips ul {
  margin: 0;
  padding-left: 1.5rem;
  color: var(--text-secondary);
}

.action-tips li {
  margin-bottom: 0.5rem;
  line-height: 1.5;
}

.action-tips li:last-child {
  margin-bottom: 0;
}

/* Responsive */
@media (max-width: 768px) {
  .plans-grid {
    grid-template-columns: 1fr;
  }
}
</style>