# 実装計画

- [x] 1. ES6 モジュール構文の緊急修正

  - RelationshipVisualizationEngine.js と CompatibilityDataLoader.js の import/export 文を削除し、グローバル変数による依存関係に変更する
  - 各ファイルでグローバルスコープでのクラス定義に修正する
  - 依存関係を手動で管理するためのコメントを追加する
  - _要件: 1.1, 1.2, 1.3_

- [x] 2. データファイル読み込みパスの修正

  - analyzer.html での data_box.js の正しいパス設定を行う
  - 不足しているデータファイル（questions.js, vectors.js, hexagram_details.js）のスクリプトタグを追加する
  - データファイルの読み込み順序を依存関係に基づいて調整する
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 3. フォールバックデータシステムの実装

  - 必須データが読み込まれない場合の緊急フォールバックデータを作成する
  - HAQEI_DATA、WORLDVIEW_QUESTIONS、SCENARIO_QUESTIONS、H64_8D_VECTORS の最小限データ構造を定義する
  - データ読み込み失敗時の自動フォールバック処理を実装する
  - _要件: 3.5_

- [x] 4. スクリプト読み込み順序の最適化

  - analyzer.html のスクリプトタグの順序を依存関係に基づいて再配置する
  - 基底クラス → データファイル → コアクラス → エンジンクラス → UI コンポーネント → アプリケーションの順序に修正する
  - 各スクリプトグループにコメントで説明を追加する
  - _要件: 4.1, 4.2, 4.3_

- [x] 5. エラーハンドリングシステムの強化

  - スクリプト読み込みエラーの詳細ログ出力機能を実装する
  - データ読み込み失敗時の具体的なエラーメッセージを追加する
  - 読み込みタイムアウト時の未読み込み要素詳細表示を改善する
  - 初期化完了時の統計情報表示を実装する
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 6. 読み込み確認システムの改善

  - checkDataLoadingComplete 関数の効率化を行う
  - 読み込み確認間隔の動的調整機能を実装する
  - 読み込み完了後の不要なチェック処理停止機能を追加する
  - _要件: 6.3, 6.4_

- [x] 7. MIME タイプエラーの解決

  - ローカル開発環境での MIME タイプ設定ガイドを作成する
  - スクリプトファイルのパス検証機能を実装する
  - 404 エラーや MIME タイプエラーの検出と報告機能を追加する
  - _要件: 2.1, 2.2, 2.3_

- [x] 8. パフォーマンス監視機能の実装

  - スクリプト読み込み時間の測定機能を追加する
  - 初期化プロセス全体の時間測定を実装する
  - メモリ使用量の監視機能を追加する
  - パフォーマンス統計の表示機能を実装する
  - _要件: 6.1, 6.2_

- [x] 9. 統合テストの実装

  - 完全な起動シーケンスのテストケースを作成する
  - エラー状況での回復動作のテストを実装する
  - 各種ブラウザでの互換性テストを実行する
  - _要件: すべての要件の検証_

- [x] 10. ドキュメントとガイドの作成
  - 開発者向けのトラブルシューティングガイドを作成する
  - スクリプト読み込み順序の説明ドキュメントを作成する
  - エラーメッセージの対処法ガイドを作成する
  - パフォーマンス最適化のベストプラクティスを文書化する
  - _要件: 5.1, 5.2, 5.3, 5.4_
