<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>T102 HAQEI ç·Šæ€¥è³ªå•ãƒ•ãƒ­ãƒ¼ - 30å•å®Œå…¨å®Ÿè£…</title>
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:;">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Shippori+Mincho:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* T102 Emergency HAQEI Styles - 30å•è³ªå•ãƒ•ãƒ­ãƒ¼å°‚ç”¨ */
    :root {
      --primary-900: #0f172a;
      --primary-800: #1e293b;
      --primary-700: #334155;
      --primary-600: #475569;
      --primary-500: #64748b;
      --primary-400: #94a3b8;
      --primary-300: #cbd5e1;
      --primary-200: #e2e8f0;
      --primary-100: #f1f5f9;
      --primary-50: #f8fafc;
      --accent-500: #6366f1;
      --accent-400: #8b5cf6;
      --success-500: #10b981;
      --error-500: #ef4444;
      --warning-500: #f59e0b;
      --font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
      --font-jp: "Shippori Mincho", serif;
      --space-xs: 0.5rem;
      --space-sm: 0.75rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --radius-sm: 0.375rem;
      --radius-md: 0.5rem;
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
      --transition-fast: 150ms ease;
      --transition-normal: 300ms ease;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }
    
    /* Reset */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: var(--font-family);
      background: linear-gradient(135deg, var(--primary-900) 0%, var(--primary-800) 50%, var(--primary-700) 100%);
      background-attachment: fixed;
      color: var(--primary-100);
      min-height: 100vh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* App Container */
    .app-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-md);
    }
    
    /* Question Flow Container */
    .question-flow {
      width: 100%;
      max-width: 800px;
      background: rgba(15, 23, 42, 0.95);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(99, 102, 241, 0.2);
      backdrop-filter: blur(20px);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
    }
    
    /* Progress Bar */
    .progress-container {
      height: 4px;
      background: var(--primary-700);
      position: relative;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-500), var(--accent-400));
      width: var(--progress, 0%);
      transition: width var(--transition-normal);
      border-radius: 2px;
    }
    
    /* Header */
    .question-header {
      padding: var(--space-xl);
      border-bottom: 1px solid rgba(99, 102, 241, 0.1);
      text-align: center;
    }
    
    .question-counter {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: var(--radius-lg);
      padding: var(--space-sm) var(--space-lg);
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--accent-400);
      margin-bottom: var(--space-lg);
    }
    
    .progress-text {
      font-size: 0.75rem;
      color: var(--primary-400);
      margin-top: var(--space-sm);
    }
    
    .question-instruction {
      color: var(--primary-300);
      font-size: 0.875rem;
      margin-bottom: var(--space-lg);
    }
    
    /* Question Card */
    .question-card {
      padding: var(--space-xl);
    }
    
    .question-text {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--primary-100);
      margin-bottom: var(--space-xl);
      line-height: 1.5;
      text-align: center;
    }
    
    /* Options */
    .question-options {
      display: grid;
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }
    
    .option-item {
      position: relative;
    }
    
    .option-input {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .option-label {
      display: block;
      background: rgba(30, 41, 59, 0.5);
      border: 2px solid transparent;
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      cursor: pointer;
      transition: all var(--transition-normal);
      position: relative;
      min-height: 80px;
    }
    
    .option-label:hover {
      background: rgba(30, 41, 59, 0.8);
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .option-input:checked + .option-label {
      background: rgba(99, 102, 241, 0.1);
      border-color: var(--accent-400);
      box-shadow: 0 0 0 1px var(--accent-400);
    }
    
    .option-content {
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
    }
    
    .option-value {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: var(--primary-600);
      border-radius: 50%;
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--primary-200);
      flex-shrink: 0;
    }
    
    .option-input:checked + .option-label .option-value {
      background: var(--accent-500);
      color: white;
    }
    
    .option-text {
      flex: 1;
      color: var(--primary-200);
      line-height: 1.5;
      font-size: 0.9rem;
    }
    
    .option-input:checked + .option-label .option-text {
      color: var(--primary-100);
      font-weight: 500;
    }
    
    /* Navigation */
    .question-navigation {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-xl);
      border-top: 1px solid rgba(99, 102, 241, 0.1);
      background: rgba(15, 23, 42, 0.5);
    }
    
    .nav-button {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-md) var(--space-lg);
      background: linear-gradient(135deg, var(--accent-500), var(--accent-400));
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-normal);
      min-width: 120px;
      justify-content: center;
    }
    
    .nav-button:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }
    
    .nav-button:active:not(:disabled) {
      transform: translateY(0) scale(0.98);
    }
    
    .nav-button:disabled {
      background: var(--primary-600);
      color: var(--primary-400);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .nav-button.secondary {
      background: transparent;
      border: 1px solid var(--primary-500);
      color: var(--primary-300);
    }
    
    .nav-button.secondary:hover:not(:disabled) {
      background: rgba(99, 102, 241, 0.1);
      border-color: var(--accent-400);
      color: var(--accent-400);
    }
    
    .nav-info {
      text-align: center;
      color: var(--primary-400);
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    /* Validation Message */
    .validation-message {
      padding: var(--space-md) var(--space-xl);
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: var(--radius-md);
      color: #fca5a5;
      font-size: 0.875rem;
      margin: var(--space-md) var(--space-xl);
      display: none;
      animation: fadeIn var(--transition-normal) ease;
    }
    
    .validation-message.visible {
      display: block;
    }
    
    /* Category Headers */
    .category-header {
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-xl);
      text-align: center;
    }
    
    .category-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--accent-400);
      margin-bottom: var(--space-sm);
      font-family: var(--font-jp);
    }
    
    .category-description {
      font-size: 0.875rem;
      color: var(--primary-300);
      line-height: 1.5;
    }
    
    /* Results Button */
    .results-button {
      background: linear-gradient(135deg, var(--success-500), #059669);
      padding: var(--space-lg) var(--space-2xl);
      font-size: 1.125rem;
      font-weight: 700;
      min-width: 180px;
    }
    
    /* Loading State */
    .loading {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
    }
    
    .loading::after {
      content: "";
      width: 16px;
      height: 16px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .animate-fadeIn {
      animation: fadeIn var(--transition-normal) ease;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .app-container {
        padding: var(--space-sm);
      }
      
      .question-header,
      .question-card,
      .question-navigation {
        padding: var(--space-lg);
      }
      
      .question-text {
        font-size: 1.125rem;
      }
      
      .question-navigation {
        flex-direction: column;
        gap: var(--space-md);
      }
      
      .nav-button {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .app-container {
        padding: var(--space-xs);
      }
      
      .question-header,
      .question-card,
      .question-navigation {
        padding: var(--space-md);
      }
      
      .option-content {
        flex-direction: column;
        gap: var(--space-sm);
      }
      
      .option-value {
        width: 28px;
        height: 28px;
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="question-flow" id="question-flow">
      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      
      <!-- Content will be rendered here -->
      <div id="question-content">
        <!-- Loading state -->
        <div class="question-header">
          <div class="loading">è³ªå•ã‚’èª­ã¿è¾¼ã¿ä¸­</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Validation Message -->
  <div id="validation-message" class="validation-message">
    <span id="validation-text"></span>
  </div>

  <script>
    /**
     * T102 Emergency HAQEI Question Flow - Complete 30 Question Implementation
     * ç·Šæ€¥è³ªå•ãƒ•ãƒ­ãƒ¼ - 30å•å®Œå…¨å®Ÿè£…
     */
    
    class EmergencyHAQEIFlow {
      constructor() {
        this.currentQuestionIndex = 0;
        this.answers = {};
        this.isLoading = false;
        this.isCompleted = false;
        
        // 30å•ã®è³ªå•ãƒ‡ãƒ¼ã‚¿ - questions.tsã‹ã‚‰å¤‰æ›
        this.questions = this.initializeQuestions();
        
        // DOMè¦ç´ ã®å‚ç…§
        this.questionContent = document.getElementById('question-content');
        this.progressFill = document.getElementById('progress-fill');
        this.validationMessage = document.getElementById('validation-message');
        this.validationText = document.getElementById('validation-text');
        
        this.init();
      }
      
      /**
       * 30å•è³ªå•ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–ï¼ˆquestions.tsãƒ™ãƒ¼ã‚¹ï¼‰
       */
      initializeQuestions() {
        return [
          // Q1-Q3: ä¹¾_å‰µé€ æ€§
          {
            id: "q1",
            text: "æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„å–ã‚Šçµ„ã¿ã‚’å§‹ã‚ã‚‹ã¨ãã€ã‚ãªãŸãŒæœ€ã‚‚é‡è¦–ã™ã‚‹ã“ã¨ã¯ï¼Ÿ",
            category: { title: "å‰µé€ æ€§ã®æ¬¡å…ƒ", description: "æ–°ã—ã„ç‰©äº‹ã¸ã®å–ã‚Šçµ„ã¿æ–¹ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "èª°ã‚‚ã‚„ã£ãŸã“ã¨ã®ãªã„é©æ–°çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è©¦ã™" },
              { value: "B", text: "æ—¢å­˜ã®æ–¹æ³•ã‚’æ”¹è‰¯ã—ã¦ã‚ˆã‚Šè‰¯ã„ã‚‚ã®ã«ã™ã‚‹" },
              { value: "C", text: "ã¿ã‚“ãªã§è©±ã—åˆã£ã¦æœ€é©ãªæ–¹æ³•ã‚’è¦‹ã¤ã‘ã‚‹" },
              { value: "D", text: "éå»ã®æˆåŠŸä¾‹ã‚’å‚è€ƒã«ã—ã¦ç¢ºå®Ÿã«é€²ã‚ã‚‹" },
              { value: "E", text: "çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«æ–¹æ³•ã‚’èª¿æ•´ã™ã‚‹" }
            ]
          },
          {
            id: "q2", 
            text: "ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæµ®ã‹ã‚“ã ã¨ãã€ã‚ãªãŸã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ã™ãã«æ–°ã—ã„å½¢ã¨ã—ã¦å…·ç¾åŒ–ã—ã¦ã¿ãŸããªã‚‹" },
              { value: "B", text: "ã¾ãšè©³ã—ãèª¿ã¹ã¦ã‹ã‚‰å®Ÿè¡Œã«ç§»ã™" },
              { value: "C", text: "å‘¨ã‚Šã®äººã¨ç›¸è«‡ã—ã¦æ„è¦‹ã‚’èã" },
              { value: "D", text: "å®Ÿç¾å¯èƒ½æ€§ã‚’æ…é‡ã«æ¤œè¨ã™ã‚‹" },
              { value: "E", text: "ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¦‹è¨ˆã‚‰ã£ã¦æœ€é©ãªæ™‚ã«å®Ÿè¡Œã™ã‚‹" }
            ]
          },
          {
            id: "q3",
            text: "ã€Œå‰µé€ ã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã«ã¤ã„ã¦ã€ã‚ãªãŸã®è€ƒãˆã«æœ€ã‚‚è¿‘ã„ã®ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ä½•ã‚‚ãªã„ã¨ã“ã‚ã‹ã‚‰å…¨ãæ–°ã—ã„ã‚‚ã®ã‚’ç”Ÿã¿å‡ºã™ã“ã¨" },
              { value: "B", text: "ã¿ã‚“ãªã§å”åŠ›ã—ã¦ç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã‚’ä½œã‚Šä¸Šã’ã‚‹ã“ã¨" },
              { value: "C", text: "æ·±ãç ”ç©¶ã—ã¦æ–°ã—ã„ç™ºè¦‹ã‚’ã™ã‚‹ã“ã¨" },
              { value: "D", text: "ç€å®Ÿã«ç©ã¿é‡ã­ã¦ä¾¡å€¤ã‚ã‚‹ã‚‚ã®ã‚’ç¯‰ãã“ã¨" },
              { value: "E", text: "çŠ¶æ³ã«åˆã‚ã›ã¦æœ€é©ãªè§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨" }
            ]
          },
          
          // Q4-Q6: éœ‡_è¡Œå‹•æ€§
          {
            id: "q4",
            text: "ã‚„ã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹ã¨ãã€ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ",
            category: { title: "è¡Œå‹•æ€§ã®æ¬¡å…ƒ", description: "è¡Œå‹•ã¸ã®å–ã‚Šçµ„ã¿æ–¹ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "ã™ãã«è¡Œå‹•ã‚’èµ·ã“ã—ã¦å‹¢ã„ã§é€²ã‚ã‚‹" },
              { value: "B", text: "è¨ˆç”»ã‚’ç«‹ã¦ã¦ã‹ã‚‰ç€å®Ÿã«å®Ÿè¡Œã™ã‚‹" },
              { value: "C", text: "å‘¨ã‚Šã¨å”åŠ›ã—ã¦ãƒãƒ¼ãƒ ã§é€²ã‚ã‚‹" },
              { value: "D", text: "çŠ¶æ³ã‚’è¦‹æ¥µã‚ã¦ã‹ã‚‰æœ€é©ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å‹•ã" },
              { value: "E", text: "è‡ªåˆ†ã®æ„Ÿè¦šã‚’ä¿¡ã˜ã¦ç›´æ„Ÿçš„ã«é€²ã‚ã‚‹" }
            ]
          },
          {
            id: "q5",
            text: "ã‚¹ãƒˆãƒ¬ã‚¹ã‚„å›°é›£ãªçŠ¶æ³ã«ç›´é¢ã—ãŸã¨ãã€ã‚ãªãŸã®ç¬¬ä¸€åå¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "å³åº§ã«å•é¡Œè§£æ±ºã«å‘ã‘ã¦å‹•ãå‡ºã™" },
              { value: "B", text: "å†·é™ã«çŠ¶æ³ã‚’åˆ†æã—ã¦åŸå› ã‚’æ¢ã‚‹" },
              { value: "C", text: "ä¿¡é ¼ã§ãã‚‹äººã«ç›¸è«‡ã—ã¦æ”¯ãˆã‚’æ±‚ã‚ã‚‹" },
              { value: "D", text: "è½ã¡ç€ã„ã¦çŠ¶æ³ãŒå¥½è»¢ã™ã‚‹ã®ã‚’å¾…ã¤" },
              { value: "E", text: "æŸ”è»Ÿã«å¯¾å¿œã—ãªãŒã‚‰æœ€å–„ã®é“ã‚’æ¢ã‚‹" }
            ]
          },
          {
            id: "q6",
            text: "æ–°ã—ã„æŒ‘æˆ¦ã‚„æ©Ÿä¼šãŒã‚ã‚‹ã¨ãã€ã‚ãªãŸã®åå¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦é£›ã³è¾¼ã¿ãŸããªã‚‹" },
              { value: "B", text: "èˆˆå‘³æ·±ã„ãŒã€ã¾ãšè©³ã—ãèª¿ã¹ã¦ã‹ã‚‰æ±ºã‚ã‚‹" },
              { value: "C", text: "ãƒªã‚¹ã‚¯ã¨åˆ©ç›Šã‚’æ…é‡ã«å¤©ç§¤ã«ã‹ã‘ã‚‹" },
              { value: "D", text: "å‘¨ã‚Šã®æ„è¦‹ã‚’èã„ã¦ã‹ã‚‰åˆ¤æ–­ã™ã‚‹" },
              { value: "E", text: "è‡ªåˆ†ã«ã¨ã£ã¦æœ¬å½“ã«ä¾¡å€¤ãŒã‚ã‚‹ã‹è€ƒãˆã‚‹" }
            ]
          },
          
          // Q7-Q9: å_æ¢æ±‚æ€§
          {
            id: "q7",
            text: "çŸ¥ã‚‰ãªã„ã“ã¨ã«å‡ºä¼šã£ãŸã¨ãã€ã‚ãªãŸã®åå¿œã¯ï¼Ÿ",
            category: { title: "æ¢æ±‚æ€§ã®æ¬¡å…ƒ", description: "çŸ¥è­˜ã‚„ç†è§£ã¸ã®å–ã‚Šçµ„ã¿æ–¹ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "æ·±ãæ˜ã‚Šä¸‹ã’ã¦å¾¹åº•çš„ã«ç†è§£ã—ãŸããªã‚‹" },
              { value: "B", text: "æ–°ã—ã„ç™ºè¦‹ã‚„å¯èƒ½æ€§ã‚’è¦‹ã¤ã‘ãŸããªã‚‹" },
              { value: "C", text: "ã¿ã‚“ãªã§ä¸€ç·’ã«å­¦ã³åˆã„ãŸããªã‚‹" },
              { value: "D", text: "å®Ÿç”¨çš„ã§å½¹ã«ç«‹ã¤éƒ¨åˆ†ã‚’çŸ¥ã‚ŠãŸããªã‚‹" },
              { value: "E", text: "å¿…è¦ã«å¿œã˜ã¦å°‘ã—ãšã¤ç†è§£ã—ã¦ã„ã" }
            ]
          },
          {
            id: "q8",
            text: "è¤‡é›‘ãªå•é¡Œã«ç›´é¢ã—ãŸã¨ãã€ã‚ãªãŸã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ï¼Ÿ",
            options: [
              { value: "A", text: "å•é¡Œã®æœ¬è³ªã‚’è¦‹æ¥µã‚ã‚‹ã¾ã§è€ƒãˆæŠœã" },
              { value: "B", text: "æ–°ã—ã„è¦–ç‚¹ã‹ã‚‰å•é¡Œã‚’æ‰ãˆç›´ã™" },
              { value: "C", text: "ã„ã‚ã„ã‚ãªäººã®æ„è¦‹ã‚’èã„ã¦å‚è€ƒã«ã™ã‚‹" },
              { value: "D", text: "ã¾ãšè¡Œå‹•ã—ã¦ã¿ã¦ã€ã‚„ã‚ŠãªãŒã‚‰è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã‚‹" },
              { value: "E", text: "éå»ã®çµŒé¨“ã‚„äº‹ä¾‹ã‚’å‚è€ƒã«ã—ã¦è§£æ±ºã™ã‚‹" }
            ]
          },
          {
            id: "q9",
            text: "å­¦ç¿’ã‚„ç ”ç©¶ã«ã¤ã„ã¦ã€ã‚ãªãŸã®å§¿å‹¢ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "çœŸç†ã‚„æœ¬è³ªã‚’è¿½æ±‚ã™ã‚‹ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã‚‹" },
              { value: "B", text: "æ–°ã—ã„ç™ºè¦‹ã‹ã‚‰å‰µé€ çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å¾—ãŸã„" },
              { value: "C", text: "å­¦ã‚“ã ã“ã¨ã‚’ã¿ã‚“ãªã¨å…±æœ‰ã—ãŸã„" },
              { value: "D", text: "å®Ÿç”Ÿæ´»ã§æ´»ç”¨ã§ãã‚‹çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ãŸã„" },
              { value: "E", text: "çŠ¶æ³ã«å¿œã˜ã¦å¿…è¦ãªçŸ¥è­˜ã‚’åŠ¹ç‡ã‚ˆãå­¦ã¶" }
            ]
          },
          
          // Q10-Q12: è‰®_å®‰å®šæ€§
          {
            id: "q10",
            text: "é‡è¦ãªæ±ºæ–­ã‚’ã™ã‚‹ã¨ãã€ã‚ãªãŸãŒæœ€ã‚‚é‡è¦–ã™ã‚‹ã“ã¨ã¯ï¼Ÿ",
            category: { title: "å®‰å®šæ€§ã®æ¬¡å…ƒ", description: "æŒç¶šæ€§ã‚„ç¢ºå®Ÿæ€§ã¸ã®ä¾¡å€¤è¦³ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "ç¢ºå®Ÿæ€§ãŒé«˜ãã€ãƒªã‚¹ã‚¯ã®å°‘ãªã„é¸æŠè‚¢" },
              { value: "B", text: "é©æ–°çš„ã§å¤§ããªå¯èƒ½æ€§ã®ã‚ã‚‹é¸æŠè‚¢" },
              { value: "C", text: "ã¿ã‚“ãªãŒç´å¾—ã§ãã‚‹é¸æŠè‚¢" },
              { value: "D", text: "è«–ç†çš„ã«æœ€ã‚‚åˆç†çš„ãªé¸æŠè‚¢" },
              { value: "E", text: "çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«å¤‰æ›´ã§ãã‚‹é¸æŠè‚¢" }
            ]
          },
          {
            id: "q11",
            text: "é•·æœŸçš„ãªç›®æ¨™ã«ã¤ã„ã¦ã€ã‚ãªãŸã®è€ƒãˆæ–¹ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ç€å®Ÿã«ç©ã¿é‡ã­ã¦ç¢ºå®Ÿã«é”æˆã—ãŸã„" },
              { value: "B", text: "å¤§èƒ†ãªæŒ‘æˆ¦ã§å¤§ããªæˆæœã‚’ç›®æŒ‡ã—ãŸã„" },
              { value: "C", text: "ã¿ã‚“ãªã¨ä¸€ç·’ã«æˆé•·ã—ã¦ã„ããŸã„" },
              { value: "D", text: "æ·±ãæ¢æ±‚ã—ã¦å°‚é–€æ€§ã‚’é«˜ã‚ãŸã„" },
              { value: "E", text: "çŠ¶æ³ã«å¿œã˜ã¦ç›®æ¨™ã‚’æŸ”è»Ÿã«èª¿æ•´ã—ãŸã„" }
            ]
          },
          {
            id: "q12",
            text: "ã€Œç¶™ç¶šã€ã‚„ã€ŒæŒç¶šã€ã«ã¤ã„ã¦ã€ã‚ãªãŸã®ä¾¡å€¤è¦³ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ä¸€åº¦å§‹ã‚ãŸã“ã¨ã¯æœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "B", text: "å¸¸ã«æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ç¶šã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "C", text: "ã¿ã‚“ãªã¨è‰¯ã„é–¢ä¿‚ã‚’é•·ãä¿ã¤ã“ã¨ãŒå¤§åˆ‡" },
              { value: "D", text: "æ·±ãå­¦ã³ç¶šã‘ã¦ç†è§£ã‚’æ·±ã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "E", text: "å¤‰åŒ–ã«åˆã‚ã›ã¦é©å¿œã—ç¶šã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡" }
            ]
          },
          
          // Q13-Q15: å¤_å—å®¹æ€§
          {
            id: "q13",
            text: "ä»–ã®äººã¨ã®é–¢ã‚ã‚Šæ–¹ã§ã€ã‚ãªãŸã®ç‰¹å¾´ã¯ï¼Ÿ",
            category: { title: "å—å®¹æ€§ã®æ¬¡å…ƒ", description: "ä»–è€…ã¨ã®é–¢ã‚ã‚Šæ–¹ã‚„å—ã‘å…¥ã‚Œã‚‹åŠ›ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "ç©æ¥µçš„ã«ãƒªãƒ¼ãƒ‰ã—ã¦æ–°ã—ã„æ–¹å‘æ€§ã‚’ç¤ºã™" },
              { value: "B", text: "ç›¸æ‰‹ã®è©±ã‚’ã˜ã£ãã‚Šèã„ã¦ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹" },
              { value: "C", text: "ãŠäº’ã„ã®æ„è¦‹ã‚’äº¤æ›ã—ã¦å­¦ã³åˆã†" },
              { value: "D", text: "ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ã«æ´»å‹•ã—ã¦ç››ã‚Šä¸Šã’ã‚‹" },
              { value: "E", text: "ç›¸æ‰‹ã«åˆã‚ã›ã¦é©åˆ‡ãªè·é›¢æ„Ÿã‚’ä¿ã¤" }
            ]
          },
          {
            id: "q14",
            text: "å›°ã£ã¦ã„ã‚‹äººã‚’è¦‹ã‹ã‘ãŸã¨ãã€ã‚ãªãŸã®åå¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„è§£æ±ºæ–¹æ³•ã‚’ææ¡ˆã—ã¦ã‚µãƒãƒ¼ãƒˆã™ã‚‹" },
              { value: "B", text: "ã¾ãšç›¸æ‰‹ã®æ°—æŒã¡ã‚’å—ã‘æ­¢ã‚ã¦å¯„ã‚Šæ·»ã†" },
              { value: "C", text: "ä¸€ç·’ã«è§£æ±ºç­–ã‚’è€ƒãˆã¦å®Ÿè¡Œã™ã‚‹" },
              { value: "D", text: "å•é¡Œã®åŸå› ã‚’åˆ†æã—ã¦æ ¹æœ¬çš„ãªè§£æ±ºã‚’å›³ã‚‹" },
              { value: "E", text: "ãã®äººã«æœ€ã‚‚é©ã—ãŸæ”¯æ´æ–¹æ³•ã‚’è¦‹ã¤ã‘ã‚‹" }
            ]
          },
          {
            id: "q15",
            text: "ã€Œæ”¯ãˆã‚‹ã€ã¨ã„ã†ã“ã¨ã«ã¤ã„ã¦ã€ã‚ãªãŸã®è€ƒãˆã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„å¯èƒ½æ€§ã‚’é–‹ã„ã¦äººã‚’åŠ±ã¾ã™ã“ã¨" },
              { value: "B", text: "ã©ã‚“ãªæ™‚ã‚‚å¤‰ã‚ã‚‰ãšãã°ã«ã„ã‚‹ã“ã¨" },
              { value: "C", text: "å…±ã«å–œã³ã€å…±ã«æ‚²ã—ã‚€ã“ã¨" },
              { value: "D", text: "å…·ä½“çš„ãªè¡Œå‹•ã§å®Ÿéš›ã«åŠ©ã‘ã‚‹ã“ã¨" },
              { value: "E", text: "ç›¸æ‰‹ã®çŠ¶æ³ã«åˆã‚ã›ã¦æœ€é©ãªæ”¯æ´ã‚’ã™ã‚‹ã“ã¨" }
            ]
          },
          
          // Q16-Q18: å·½_é©å¿œæ€§
          {
            id: "q16",
            text: "äºˆæœŸã—ãªã„å¤‰åŒ–ã‚„å›°é›£ã«ç›´é¢ã—ãŸã¨ãã€ã‚ãªãŸã®å¯¾å¿œã¯ï¼Ÿ",
            category: { title: "é©å¿œæ€§ã®æ¬¡å…ƒ", description: "å¤‰åŒ–ã‚„çŠ¶æ³ã¸ã®é©å¿œåŠ›ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "ã“ã‚Œã‚’æ©Ÿä¼šã«æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹" },
              { value: "B", text: "çŠ¶æ³ã«åˆã‚ã›ã¦æŸ”è»Ÿã«æ–¹é‡ã‚’èª¿æ•´ã™ã‚‹" },
              { value: "C", text: "ã¿ã‚“ãªã§å”åŠ›ã—ã¦ä¹—ã‚Šè¶Šãˆã‚‹æ–¹æ³•ã‚’æ¢ã™" },
              { value: "D", text: "åŸå› ã‚’åˆ†æã—ã¦æ ¹æœ¬çš„ãªå¯¾ç­–ã‚’ç«‹ã¦ã‚‹" },
              { value: "E", text: "ç¢ºå®Ÿã§å®‰å…¨ãªæ–¹æ³•ã§å¯¾å‡¦ã™ã‚‹" }
            ]
          },
          {
            id: "q17",
            text: "ç•°ãªã‚‹ä¾¡å€¤è¦³ã®äººãŸã¡ã¨ä¸€ç·’ã«æ´»å‹•ã™ã‚‹ã¨ãã€ã‚ãªãŸã®å½¹å‰²ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„è¦–ç‚¹ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æä¾›ã™ã‚‹" },
              { value: "B", text: "ã¿ã‚“ãªã®æ„è¦‹ã‚’èª¿æ•´ã—ã¦æ©‹æ¸¡ã—ã‚’ã™ã‚‹" },
              { value: "C", text: "å…¨ä½“ã®é›°å›²æ°—ã‚’å’Œã‚„ã‹ã«ä¿ã¤" },
              { value: "D", text: "ç©æ¥µçš„ã«è¡Œå‹•ã—ã¦å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹" },
              { value: "E", text: "å®‰å®šã—ãŸåŸºç›¤ã‚’æä¾›ã—ã¦æ”¯ãˆã‚‹" }
            ]
          },
          {
            id: "q18",
            text: "ã€ŒæŸ”è»Ÿæ€§ã€ã«ã¤ã„ã¦ã€ã‚ãªãŸã®ä¾¡å€¤è¦³ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„å¯èƒ½æ€§ã‚’ç”Ÿã¿å‡ºã™ãŸã‚ã«å¿…è¦ãªã‚‚ã®" },
              { value: "B", text: "ã©ã‚“ãªçŠ¶æ³ã§ã‚‚å¯¾å¿œã§ãã‚‹å¤§åˆ‡ãªèƒ½åŠ›" },
              { value: "C", text: "äººã¨ã®é–¢ä¿‚ã‚’è‰¯å¥½ã«ä¿ã¤ãŸã‚ã«é‡è¦ãªã‚‚ã®" },
              { value: "D", text: "åŠ¹æœçš„ã«è¡Œå‹•ã™ã‚‹ãŸã‚ã®æ‰‹æ®µã®ä¸€ã¤" },
              { value: "E", text: "ä¸€è²«æ€§ãŒã‚ã£ã¦ã“ãæ„å‘³ã‚’æŒã¤ã‚‚ã®" }
            ]
          },
          
          // Q19-Q21: é›¢_è¡¨ç¾æ€§
          {
            id: "q19",
            text: "è‡ªåˆ†ã®è€ƒãˆã‚„æ°—æŒã¡ã‚’è¡¨ç¾ã™ã‚‹ã¨ãã€ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ",
            category: { title: "è¡¨ç¾æ€§ã®æ¬¡å…ƒ", description: "è‡ªå·±è¡¨ç¾åŠ›ã‚„å½±éŸ¿åŠ›ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "ç‹¬å‰µçš„ã§å°è±¡ã«æ®‹ã‚‹æ–¹æ³•ã§è¡¨ç¾ã™ã‚‹" },
              { value: "B", text: "ç›¸æ‰‹ã«åˆã‚ã›ã¦åˆ†ã‹ã‚Šã‚„ã™ãä¼ãˆã‚‹" },
              { value: "C", text: "è«–ç†çš„ã§èª¬å¾—åŠ›ã®ã‚ã‚‹èª¬æ˜ã‚’ã™ã‚‹" },
              { value: "D", text: "ç‡ç›´ã§æ­£ç›´ãªè¡¨ç¾ã‚’å¿ƒãŒã‘ã‚‹" },
              { value: "E", text: "ç›¸æ‰‹ã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã„ãªãŒã‚‰ä¼ãˆã‚‹" }
            ]
          },
          {
            id: "q20",
            text: "æ³¨ç›®ã‚’æµ´ã³ã‚‹å ´é¢ã§ã€ã‚ãªãŸã®åå¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "è‡ªåˆ†ã‚‰ã—ã•ã‚’æ€ã„åˆ‡ã‚Šç™ºæ®ã™ã‚‹" },
              { value: "B", text: "å ´ã®é›°å›²æ°—ã«åˆã‚ã›ã¦é©åˆ‡ã«æŒ¯ã‚‹èˆã†" },
              { value: "C", text: "ã¿ã‚“ãªãŒæ¥½ã—ã‚ã‚‹ã‚ˆã†ã«é…æ…®ã™ã‚‹" },
              { value: "D", text: "æ§ãˆã‚ã«æŒ¯ã‚‹èˆã£ã¦ç›®ç«‹ãŸãªã„ã‚ˆã†ã«ã™ã‚‹" },
              { value: "E", text: "ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ã«è¡Œå‹•ã—ã¦å ´ã‚’ç››ã‚Šä¸Šã’ã‚‹" }
            ]
          },
          {
            id: "q21",
            text: "ã€Œå½±éŸ¿åŠ›ã‚’æŒã¤ã€ã¨ã„ã†ã“ã¨ã«ã¤ã„ã¦ã€ã‚ãªãŸã®è€ƒãˆã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„ä¾¡å€¤è¦³ã‚„å¯èƒ½æ€§ã‚’ä¼ãˆã‚‹åŠ›" },
              { value: "B", text: "è‡ªåˆ†ã®å€‹æ€§ã‚„é­…åŠ›ã§äººã‚’æƒ¹ãã¤ã‘ã‚‹åŠ›" },
              { value: "C", text: "ã¿ã‚“ãªã‚’ã¾ã¨ã‚ã¦è‰¯ã„æ–¹å‘ã«å°ãåŠ›" },
              { value: "D", text: "è¡Œå‹•ã§ç¤ºã—ã¦å‘¨ã‚Šã‚’å‹•ã‹ã™åŠ›" },
              { value: "E", text: "ä¿¡é ¼ã¨å®Ÿç¸¾ã§èªã‚ã‚‰ã‚Œã‚‹åŠ›" }
            ]
          },
          
          // Q22-Q24: å…Œ_èª¿å’Œæ€§
          {
            id: "q22",
            text: "å¯¾ç«‹ã‚„æ„è¦‹ã®è¡çªãŒèµ·ããŸã¨ãã€ã‚ãªãŸã®å¯¾å¿œã¯ï¼Ÿ",
            category: { title: "èª¿å’Œæ€§ã®æ¬¡å…ƒ", description: "å”èª¿æ€§ã‚„èª¿å’Œã‚’é‡è¦–ã™ã‚‹åŠ›ã‚’æ¸¬å®šã—ã¾ã™" },
            options: [
              { value: "A", text: "æ–°ã—ã„è¦–ç‚¹ã‚’æç¤ºã—ã¦æµã‚Œã‚’å¤‰ãˆã‚‹" },
              { value: "B", text: "åŒæ–¹ã®è‰¯ã„ç‚¹ã‚’è¦‹ã¤ã‘ã¦æ©‹æ¸¡ã—ã‚’ã™ã‚‹" },
              { value: "C", text: "å†·é™ã«åˆ†æã—ã¦å®¢è¦³çš„ãªè§£æ±ºç­–ã‚’æç¤ºã™ã‚‹" },
              { value: "D", text: "ç©æ¥µçš„ã«è¡Œå‹•ã—ã¦çŠ¶æ³ã‚’æ‰“é–‹ã™ã‚‹" },
              { value: "E", text: "ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å—ã‘æ­¢ã‚ã¦å¯„ã‚Šæ·»ã†" }
            ]
          },
          {
            id: "q23",
            text: "äººã¨ã®é–¢ä¿‚ã§æœ€ã‚‚å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ãŠäº’ã„ã«åˆºæ¿€ã—åˆã£ã¦æˆé•·ã§ãã‚‹ã“ã¨" },
              { value: "B", text: "ç¬‘é¡”ã§æ¥½ã—ã„æ™‚é–“ã‚’å…±æœ‰ã§ãã‚‹ã“ã¨" },
              { value: "C", text: "æ·±ãç†è§£ã—åˆãˆã‚‹ã“ã¨" },
              { value: "D", text: "äº’ã„ã‚’æ”¯ãˆåˆãˆã‚‹ã“ã¨" },
              { value: "E", text: "ç›¸æ‰‹ã«åˆã‚ã›ã¦é©åˆ‡ãªé–¢ä¿‚ã‚’ç¯‰ã‘ã‚‹ã“ã¨" }
            ]
          },
          {
            id: "q24",
            text: "ã€Œã¤ãªãŒã‚Šã€ã‚„ã€Œçµ†ã€ã«ã¤ã„ã¦ã€ã‚ãªãŸã®ä¾¡å€¤è¦³ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„å‡ºä¼šã„ã‹ã‚‰ç”Ÿã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒå¤§åˆ‡" },
              { value: "B", text: "ãŠäº’ã„ã«å–œã³ã‚’åˆ†ã‹ã¡åˆãˆã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "C", text: "æ·±ã„ä¿¡é ¼é–¢ä¿‚ã‚’ç¯‰ã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "D", text: "å›°ã£ãŸæ™‚ã«æ”¯ãˆåˆãˆã‚‹ã“ã¨ãŒå¤§åˆ‡" },
              { value: "E", text: "ãŠäº’ã„ã®é•ã„ã‚’èªã‚åˆãˆã‚‹ã“ã¨ãŒå¤§åˆ‡" }
            ]
          },
          
          // Q25-Q30: ã‚·ãƒŠãƒªã‚ªè¨­å•ï¼ˆInterface/SafeMode OSç‰¹å®šç”¨ï¼‰
          {
            id: "q25",
            text: "ã‚ãªãŸãŒä¼šç¤¾ã§æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã«ä»»å‘½ã•ã‚Œã¾ã—ãŸã€‚ãƒ¡ãƒ³ãƒãƒ¼ã¯çµŒé¨“è±Šå¯Œã§ã™ãŒã€ãã‚Œãã‚Œç•°ãªã‚‹æ„è¦‹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚æœ€åˆã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã€ã‚ãªãŸã¯ã©ã®ã‚ˆã†ã«ãƒãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã¾ã™ã‹ï¼Ÿ",
            category: { title: "ã‚·ãƒŠãƒªã‚ªè¨­å•", description: "å…·ä½“çš„ãªçŠ¶æ³ã§ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã¾ã™" },
            options: [
              { value: "A", text: "å…¨å“¡ã®æ„è¦‹ã‚’ã˜ã£ãã‚Šèã„ã¦ã‹ã‚‰ã€ã¿ã‚“ãªãŒç´å¾—ã§ãã‚‹æŠ˜è¡·æ¡ˆã‚’ä½œã‚‹" },
              { value: "B", text: "æ˜ç¢ºãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’ç¤ºã—ã€ãã“ã«å‘ã‹ã£ã¦ãƒ¡ãƒ³ãƒãƒ¼ã‚’å°ã" },
              { value: "C", text: "å„ãƒ¡ãƒ³ãƒãƒ¼ã®å¼·ã¿ã‚’åˆ†æã—ã€æœ€é©ãªå½¹å‰²åˆ†æ‹…ã‚’ææ¡ˆã™ã‚‹" },
              { value: "D", text: "éå»ã®æˆåŠŸäº‹ä¾‹ã‚’å…±æœ‰ã—ã€å®Ÿç¸¾ã«åŸºã¥ã„ãŸæ–¹æ³•è«–ã‚’ææ¡ˆã™ã‚‹" },
              { value: "E", text: "ã¾ãšã¯å°ã•ãªæˆåŠŸã‚’ç›®æŒ‡ã—ã€ãƒãƒ¼ãƒ ã®çµæŸã‚’é«˜ã‚ãªãŒã‚‰é€²ã‚ã‚‹" }
            ]
          },
          {
            id: "q26",
            text: "é‡è¦ãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›´å‰ã«ã€æŠ€è¡“çš„ãªå•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚ãªãŸã®å¯¾å¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ä»£æ›¿æ¡ˆã‚’å³åº§ã«è€ƒãˆã¦ã€äºˆå®šé€šã‚Šå®Ÿè¡Œã™ã‚‹" },
              { value: "B", text: "å•é¡Œã‚’æ­£ç›´ã«èª¬æ˜ã—ã€ç†è§£ã‚’æ±‚ã‚ãªãŒã‚‰é€²ã‚ã‚‹" },
              { value: "C", text: "ãƒãƒ¼ãƒ å…¨å“¡ã§å”åŠ›ã—ã¦æœ€å–„ã®è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã‚‹" },
              { value: "D", text: "å•é¡Œã®åŸå› ã‚’åˆ†æã—ã€æ ¹æœ¬çš„ãªå¯¾ç­–ã‚’æ¤œè¨ã™ã‚‹" },
              { value: "E", text: "å»¶æœŸã‚’ææ¡ˆã—ã€å®Œç’§ãªçŠ¶æ…‹ã§å®Ÿæ–½ã™ã‚‹" }
            ]
          },
          {
            id: "q27",
            text: "æ–°ã—ã„ç’°å¢ƒï¼ˆè»¢è·ã€å¼•ã£è¶Šã—ç­‰ï¼‰ã«ç½®ã‹ã‚ŒãŸã¨ãã€ã‚ãªãŸã®é©å¿œæ–¹æ³•ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ç©æ¥µçš„ã«æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ã¦ã€è‡ªåˆ†ã‚‰ã—ã•ã‚’ç™ºæ®ã™ã‚‹" },
              { value: "B", text: "å‘¨ã‚Šã®äººã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚Šã€é–¢ä¿‚æ€§ã‚’ç¯‰ã" },
              { value: "C", text: "ç’°å¢ƒã‚’ã‚ˆãè¦³å¯Ÿã—ã€ãƒ«ãƒ¼ãƒ«ã‚„æ–‡åŒ–ã‚’ç†è§£ã™ã‚‹" },
              { value: "D", text: "éå»ã®çµŒé¨“ã‚’æ´»ã‹ã—ã€ç€å®Ÿã«åŸºç›¤ã‚’å›ºã‚ã‚‹" },
              { value: "E", text: "çŠ¶æ³ã«åˆã‚ã›ã¦ã€å¿…è¦ã«å¿œã˜ã¦è‡ªåˆ†ã‚’èª¿æ•´ã™ã‚‹" }
            ]
          },
          {
            id: "q28",
            text: "å¤§åˆ‡ãªæ±ºæ–­ã‚’è¿«ã‚‰ã‚Œã€é™ã‚‰ã‚ŒãŸæƒ…å ±ã—ã‹ãªã„çŠ¶æ³ã§ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "ç›´æ„Ÿã‚’ä¿¡ã˜ã¦ã€ç´ æ—©ãæ±ºæ–­ã™ã‚‹" },
              { value: "B", text: "ä¿¡é ¼ã§ãã‚‹äººã«ç›¸è«‡ã—ã¦ã€æ„è¦‹ã‚’æ±‚ã‚ã‚‹" },
              { value: "C", text: "å¯èƒ½ãªé™ã‚Šæƒ…å ±ã‚’åé›†ã—ã¦ã‹ã‚‰åˆ¤æ–­ã™ã‚‹" },
              { value: "D", text: "ãƒªã‚¹ã‚¯ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹é¸æŠè‚¢ã‚’é¸ã¶" },
              { value: "E", text: "è¤‡æ•°ã®ã‚·ãƒŠãƒªã‚ªã‚’æƒ³å®šã—ã¦ã€æŸ”è»Ÿãªè¨ˆç”»ã‚’ç«‹ã¦ã‚‹" }
            ]
          },
          {
            id: "q29",
            text: "ãƒãƒ¼ãƒ ã®æˆæœãŒæœŸå¾…ã‚’ä¸‹å›ã£ãŸå ´åˆã€ã‚ãªãŸã®åå¿œã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ææ¡ˆã—ã€ãƒãƒ¼ãƒ ã‚’é¼“èˆã™ã‚‹" },
              { value: "B", text: "ãƒ¡ãƒ³ãƒãƒ¼ã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã„ã€æ”¯æ´ã‚’å¼·åŒ–ã™ã‚‹" },
              { value: "C", text: "å®¢è¦³çš„ã«åˆ†æã—ã€æ”¹å–„ç‚¹ã‚’æ˜ç¢ºã«ã™ã‚‹" },
              { value: "D", text: "è²¬ä»»ã‚’å–ã‚Šã€ã‚ˆã‚Šç¢ºå®Ÿãªæ–¹æ³•ã«å¤‰æ›´ã™ã‚‹" },
              { value: "E", text: "çŠ¶æ³ã«å¿œã˜ã¦æˆ¦ç•¥ã‚’æŸ”è»Ÿã«èª¿æ•´ã™ã‚‹" }
            ]
          },
          {
            id: "q30",
            text: "äººç”Ÿã®é‡è¦ãªè»¢æ©Ÿã«ãŠã„ã¦ã€ã‚ãªãŸãŒæœ€ã‚‚å¤§åˆ‡ã«ã—ãŸã„ä¾¡å€¤è¦³ã¯ï¼Ÿ",
            options: [
              { value: "A", text: "æ–°ã—ã„å¯èƒ½æ€§ã¸ã®æŒ‘æˆ¦ã¨æˆé•·" },
              { value: "B", text: "å¤§åˆ‡ãªäººã¨ã®çµ†ã¨ã¤ãªãŒã‚Š" },
              { value: "C", text: "çœŸç†ã®æ¢æ±‚ã¨æ·±ã„ç†è§£" },
              { value: "D", text: "å®‰å®šã—ãŸåŸºç›¤ã¨ç¢ºå®Ÿãªæ­©ã¿" },
              { value: "E", text: "å¤‰åŒ–ã¸ã®é©å¿œã¨æŸ”è»Ÿãªå¯¾å¿œ" }
            ]
          }
        ];
      }
      
      /**
       * åˆæœŸåŒ–
       */
      init() {
        // ä¿å­˜ã•ã‚ŒãŸé€²æ—ã‚’å¾©å…ƒ
        this.loadProgress();
        
        // åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        this.render();
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        this.bindEvents();
        
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        this.setupKeyboardNavigation();
      }
      
      /**
       * ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
       */
      render() {
        if (this.isCompleted) {
          this.renderComplete();
          return;
        }
        
        const question = this.questions[this.currentQuestionIndex];
        const progress = this.calculateProgress();
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
        this.progressFill.style.width = `${progress}%`;
        this.progressFill.parentElement.style.setProperty('--progress', `${progress}%`);
        
        // è³ªå•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
        this.questionContent.innerHTML = `
          <div class="question-header">
            <div class="question-counter">
              <span>è³ªå• ${this.currentQuestionIndex + 1} / 30</span>
            </div>
            <div class="question-instruction">
              ç›´æ„Ÿã§ç­”ãˆã¦ãã ã•ã„ã€‚æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
            </div>
            <div class="progress-text">
              é€²æ—: ${Math.round(progress)}%
            </div>
          </div>
          
          ${question.category && this.currentQuestionIndex % 3 === 0 ? `
            <div class="category-header">
              <div class="category-title">${question.category.title}</div>
              <div class="category-description">${question.category.description}</div>
            </div>
          ` : ''}
          
          <div class="question-card" data-question-id="${question.id}">
            <h3 class="question-text">${question.text}</h3>
            
            <div class="question-options">
              ${question.options.map(option => `
                <div class="option-item">
                  <input type="radio" 
                         id="${question.id}-${option.value}" 
                         name="${question.id}" 
                         value="${option.value}" 
                         class="option-input"
                         ${this.answers[question.id] === option.value ? 'checked' : ''}>
                  <label for="${question.id}-${option.value}" class="option-label">
                    <div class="option-content">
                      <div class="option-value">${option.value}</div>
                      <div class="option-text">${option.text}</div>
                    </div>
                  </label>
                </div>
              `).join('')}
            </div>
          </div>
          
          <div class="question-navigation">
            <button type="button" 
                    class="nav-button secondary" 
                    id="prev-btn"
                    ${this.currentQuestionIndex === 0 ? 'disabled' : ''}>
              â† å‰ã®è³ªå•
            </button>
            
            <div class="nav-info">
              ${this.currentQuestionIndex + 1} / 30
            </div>
            
            <button type="button" 
                    class="nav-button ${this.currentQuestionIndex === 29 ? 'results-button' : ''}" 
                    id="next-btn"
                    ${!this.answers[question.id] ? 'disabled' : ''}>
              ${this.currentQuestionIndex === 29 ? 'çµæœã‚’è¦‹ã‚‹ â†’' : 'æ¬¡ã®è³ªå• â†’'}
            </button>
          </div>
        `;
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        this.questionContent.classList.add('animate-fadeIn');
      }
      
      /**
       * å®Œäº†ç”»é¢ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
       */
      renderComplete() {
        this.progressFill.style.width = '100%';
        this.progressFill.parentElement.style.setProperty('--progress', '100%');
        
        this.questionContent.innerHTML = `
          <div class="question-header">
            <div class="question-counter">
              <span>å®Œäº†ã—ã¾ã—ãŸï¼</span>
            </div>
            <div class="question-instruction">
              30å•ã™ã¹ã¦ã«ãŠç­”ãˆã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
            </div>
            <div class="progress-text">
              é€²æ—: 100%
            </div>
          </div>
          
          <div class="question-card">
            <h3 class="question-text">åˆ†æçµæœã‚’æº–å‚™ã—ã¦ã„ã¾ã™...</h3>
            
            <div style="text-align: center; padding: 2rem;">
              <div class="loading" style="justify-content: center; font-size: 1.125rem;">
                ã‚ãªãŸã® Triple OS ã‚’åˆ†æä¸­
              </div>
              <p style="margin-top: 1rem; color: var(--primary-400);">
                å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã€ã‚¨ãƒ³ã‚¸ãƒ³OSã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹OSã€ã‚»ãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ‰OSã‚’åˆ¤å®šã—ã¦ã„ã¾ã™
              </p>
            </div>
          </div>
          
          <div class="question-navigation">
            <button type="button" class="nav-button secondary" onclick="location.reload()">
              æœ€åˆã‹ã‚‰
            </button>
            
            <div class="nav-info">
              åˆ†ææº–å‚™ä¸­...
            </div>
            
            <button type="button" class="nav-button results-button" id="analyze-btn">
              åˆ†æé–‹å§‹ â†’
            </button>
          </div>
        `;
        
        // åˆ†æãƒœã‚¿ãƒ³ã®å‡¦ç†
        setTimeout(() => {
          const analyzeBtn = document.getElementById('analyze-btn');
          if (analyzeBtn) {
            analyzeBtn.addEventListener('click', () => this.proceedToAnalysis());
          }
        }, 100);
      }
      
      /**
       * ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
       */
      bindEvents() {
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
        document.addEventListener('click', (e) => {
          if (e.target.id === 'prev-btn') {
            this.goToPrevious();
          } else if (e.target.id === 'next-btn') {
            this.goToNext();
          }
        });
        
        // å›ç­”é¸æŠ
        document.addEventListener('change', (e) => {
          if (e.target.classList.contains('option-input')) {
            this.handleAnswerChange(e);
          }
        });
      }
      
      /**
       * ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
       */
      setupKeyboardNavigation() {
        document.addEventListener('keydown', (e) => {
          switch (e.key) {
            case 'ArrowLeft':
              if (this.currentQuestionIndex > 0) {
                e.preventDefault();
                this.goToPrevious();
              }
              break;
            case 'ArrowRight':
            case 'Enter':
              if (this.canGoNext()) {
                e.preventDefault();
                this.goToNext();
              }
              break;
            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
              const optionIndex = parseInt(e.key) - 1;
              this.selectOptionByIndex(optionIndex);
              break;
          }
        });
      }
      
      /**
       * å›ç­”å¤‰æ›´ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
       */
      handleAnswerChange(e) {
        const questionId = e.target.name;
        const answer = e.target.value;
        
        this.answers[questionId] = answer;
        this.hideValidationMessage();
        this.updateNavigation();
        this.saveProgress();
      }
      
      /**
       * å‰ã®è³ªå•ã«ç§»å‹•
       */
      goToPrevious() {
        if (this.currentQuestionIndex > 0) {
          this.currentQuestionIndex--;
          this.render();
          this.saveProgress();
        }
      }
      
      /**
       * æ¬¡ã®è³ªå•ã«ç§»å‹•
       */
      goToNext() {
        const currentQuestion = this.questions[this.currentQuestionIndex];
        
        if (!this.answers[currentQuestion.id]) {
          this.showValidationMessage('ã“ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚');
          return;
        }
        
        if (this.currentQuestionIndex === 29) {
          // æœ€å¾Œã®è³ªå• - Triple OSåˆ†æé–‹å§‹
          this.isCompleted = true;
          this.startTripleOSAnalysis();
        } else {
          this.currentQuestionIndex++;
          this.render();
          this.saveProgress();
        }
      }
      
      /**
       * æ¬¡ã«é€²ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
       */
      canGoNext() {
        const currentQuestion = this.questions[this.currentQuestionIndex];
        return !!this.answers[currentQuestion.id];
      }
      
      /**
       * ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°
       */
      updateNavigation() {
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        
        if (prevBtn) {
          prevBtn.disabled = this.currentQuestionIndex === 0;
        }
        
        if (nextBtn) {
          nextBtn.disabled = !this.canGoNext();
        }
      }
      
      /**
       * ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§é¸æŠè‚¢ã‚’é¸æŠ
       */
      selectOptionByIndex(optionIndex) {
        const currentQuestion = this.questions[this.currentQuestionIndex];
        if (currentQuestion.options[optionIndex]) {
          const option = currentQuestion.options[optionIndex];
          const input = document.getElementById(`${currentQuestion.id}-${option.value}`);
          if (input) {
            input.checked = true;
            input.dispatchEvent(new Event('change', { bubbles: true }));
          }
        }
      }
      
      /**
       * é€²æ—è¨ˆç®—
       */
      calculateProgress() {
        const answeredCount = Object.keys(this.answers).length;
        return (answeredCount / 30) * 100;
      }
      
      /**
       * ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
       */
      showValidationMessage(message) {
        this.validationText.textContent = message;
        this.validationMessage.classList.add('visible');
        
        setTimeout(() => {
          this.hideValidationMessage();
        }, 3000);
      }
      
      /**
       * ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸éè¡¨ç¤º
       */
      hideValidationMessage() {
        this.validationMessage.classList.remove('visible');
      }
      
      /**
       * é€²æ—ä¿å­˜
       */
      saveProgress() {
        const progressData = {
          currentQuestionIndex: this.currentQuestionIndex,
          answers: this.answers,
          isCompleted: this.isCompleted,
          timestamp: new Date().toISOString()
        };
        
        try {
          localStorage.setItem('haqei_emergency_progress', JSON.stringify(progressData));
        } catch (error) {
          console.warn('é€²æ—ã®ä¿å­˜ã«å¤±æ•—:', error);
        }
      }
      
      /**
       * é€²æ—èª­ã¿è¾¼ã¿
       */
      loadProgress() {
        try {
          const saved = localStorage.getItem('haqei_emergency_progress');
          if (saved) {
            const progressData = JSON.parse(saved);
            this.currentQuestionIndex = progressData.currentQuestionIndex || 0;
            this.answers = progressData.answers || {};
            this.isCompleted = progressData.isCompleted || false;
          }
        } catch (error) {
          console.warn('é€²æ—ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', error);
          this.reset();
        }
      }
      
      /**
       * ãƒªã‚»ãƒƒãƒˆ
       */
      reset() {
        this.currentQuestionIndex = 0;
        this.answers = {};
        this.isCompleted = false;
        localStorage.removeItem('haqei_emergency_progress');
        this.render();
      }
      
      /**
       * Triple OSåˆ†æé–‹å§‹ - UltraAnalysisEngineçµ±åˆ
       */
      async startTripleOSAnalysis() {
        try {
          // T103 Triple OSè¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè¡Œ
          const analysisResults = await this.executeTripleOSAnalysis();
          
          // çµæœã‚’localStorageã«ä¿å­˜
          const haqeiAnswers = this.convertToHAQEIFormat();
          localStorage.setItem('haqei_answers', JSON.stringify(haqeiAnswers));
          localStorage.setItem('haqei_analysis_results', JSON.stringify(analysisResults));
          
          console.log('âœ… T103 Triple OSåˆ†æå®Œäº†:', analysisResults);
          
          // çµæœè¡¨ç¤ºç”»é¢ã«ç§»è¡Œ
          this.showAnalysisResults(analysisResults);
          
        } catch (error) {
          console.error('âŒ Triple OSåˆ†æã«å¤±æ•—:', error);
          this.showValidationMessage('åˆ†æå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
        }
      }

      /**
       * T103 Triple OSè¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ - UltraAnalysisEngineçµ±åˆå®Ÿè¡Œ
       */
      async executeTripleOSAnalysis() {
        // UltraAnalysisEngineã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—
        const analysisEngine = window.ultraAnalysisEngine;
        
        if (!analysisEngine) {
          throw new Error('UltraAnalysisEngineãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
        }

        // 30å•å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’UltraAnalysisEngineã§åˆ†æ
        console.log('ğŸ”„ Triple OSåˆ†æå®Ÿè¡Œä¸­...', this.answers);
        const results = analysisEngine.analyzeTripleOS(this.answers);
        
        console.log('âœ… UltraAnalysisEngineåˆ†æå®Œäº†:', results);
        return results;
      }

      /**
       * ã‚¹ãƒ†ãƒƒãƒ—1: 30å•å›ç­”â†’8æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«æ§‹ç¯‰
       */
      calculate8DimensionVector() {
        // scoring_tagsé›†è¨ˆç”¨
        const scoringAccumulator = {
          'ä¹¾_å‰µé€ æ€§': 0,
          'éœ‡_è¡Œå‹•æ€§': 0, 
          'å_æ¢æ±‚æ€§': 0,
          'è‰®_å®‰å®šæ€§': 0,
          'å¤_å—å®¹æ€§': 0,
          'å·½_é©å¿œæ€§': 0,
          'é›¢_è¡¨ç¾æ€§': 0,
          'å…Œ_èª¿å’Œæ€§': 0
        };

        // å„è³ªå•ã®å›ç­”ã‹ã‚‰scoring_tagsã‚’é›†è¨ˆ
        Object.entries(this.answers).forEach(([questionId, selectedValue]) => {
          const question = this.questions.find(q => q.id === questionId);
          const selectedOption = question.options.find(opt => opt.value === selectedValue);
          
          // scoring_tagsã‚’å–å¾—ï¼ˆè³ªå•ID + é¸æŠè‚¢ã‹ã‚‰æ¨å®šï¼‰
          const scoringTags = this.getScoringTags(questionId, selectedValue);
          
          // å„æ¬¡å…ƒã«ã‚¹ã‚³ã‚¢åŠ ç®—
          Object.entries(scoringTags).forEach(([dimension, score]) => {
            if (scoringAccumulator.hasOwnProperty(dimension)) {
              scoringAccumulator[dimension] += score;
            }
          });
        });

        // æ­£è¦åŒ–å‡¦ç†ï¼ˆ0-100ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
        const totalScore = Object.values(scoringAccumulator).reduce((sum, score) => sum + score, 0);
        const normalizedVector = {};
        
        Object.entries(scoringAccumulator).forEach(([dimension, score]) => {
          normalizedVector[dimension] = Math.round((score / totalScore) * 100);
        });

        return normalizedVector;
      }

      /**
       * scoring_tagsæ¨å®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè³ªå•ID + é¸æŠè‚¢ã‹ã‚‰ï¼‰
       */
      getScoringTags(questionId, selectedValue) {
        const questionIndex = parseInt(questionId.replace('q', ''));
        
        // Q1-Q3: ä¹¾_å‰µé€ æ€§
        if (questionIndex >= 1 && questionIndex <= 3) {
          return this.getCreativityScoring(questionIndex, selectedValue);
        }
        // Q4-Q6: éœ‡_è¡Œå‹•æ€§  
        if (questionIndex >= 4 && questionIndex <= 6) {
          return this.getActionScoring(questionIndex, selectedValue);
        }
        // Q7-Q9: å_æ¢æ±‚æ€§
        if (questionIndex >= 7 && questionIndex <= 9) {
          return this.getExplorationScoring(questionIndex, selectedValue);
        }
        // Q10-Q12: è‰®_å®‰å®šæ€§
        if (questionIndex >= 10 && questionIndex <= 12) {
          return this.getStabilityScoring(questionIndex, selectedValue);
        }
        // Q13-Q15: å¤_å—å®¹æ€§
        if (questionIndex >= 13 && questionIndex <= 15) {
          return this.getReceptivityScoring(questionIndex, selectedValue);
        }
        // Q16-Q18: å·½_é©å¿œæ€§
        if (questionIndex >= 16 && questionIndex <= 18) {
          return this.getAdaptabilityScoring(questionIndex, selectedValue);
        }
        // Q19-Q21: é›¢_è¡¨ç¾æ€§
        if (questionIndex >= 19 && questionIndex <= 21) {
          return this.getExpressionScoring(questionIndex, selectedValue);
        }
        // Q22-Q24: å…Œ_èª¿å’Œæ€§
        if (questionIndex >= 22 && questionIndex <= 24) {
          return this.getHarmonyScoring(questionIndex, selectedValue);
        }
        // Q25-Q30: ã‚·ãƒŠãƒªã‚ªè¨­å•ï¼ˆå…¨æ¬¡å…ƒã«åˆ†æ•£ï¼‰
        if (questionIndex >= 25 && questionIndex <= 30) {
          return this.getScenarioScoring(questionIndex, selectedValue);
        }

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        return { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 };
      }

      /**
       * ä¹¾_å‰µé€ æ€§ã®scoringè¨ˆç®—
       */
      getCreativityScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 5, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 4, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 4, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 }
        };
        return scoringMap[selectedValue] || scoringMap['A'];
      }

      /**
       * éœ‡_è¡Œå‹•æ€§ã®scoringè¨ˆç®—
       */
      getActionScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 5, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 3, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 4, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 3, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 3, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 2 }
        };
        return scoringMap[selectedValue] || scoringMap['A'];
      }

      /**
       * å_æ¢æ±‚æ€§ã®scoringè¨ˆç®—
       */
      getExplorationScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 5, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 3, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 3, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 3, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 }
        };
        return scoringMap[selectedValue] || scoringMap['A'];
      }

      /**
       * è‰®_å®‰å®šæ€§ã®scoringè¨ˆç®—
       */
      getStabilityScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 5, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 4, 'éœ‡_è¡Œå‹•æ€§': 3, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 4, 'è‰®_å®‰å®šæ€§': 3, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 4, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 }
        };
        return scoringMap[selectedValue] || scoringMap['A'];
      }

      /**
       * å¤_å—å®¹æ€§ã®scoringè¨ˆç®—
       */
      getReceptivityScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 3, 'å…Œ_èª¿å’Œæ€§': 2 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 5, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 3 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 3, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 3, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 3, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 1 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 4, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 }
        };
        return scoringMap[selectedValue] || scoringMap['B'];
      }

      /**
       * å·½_é©å¿œæ€§ã®scoringè¨ˆç®—
       */
      getAdaptabilityScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 3, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 3, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 5, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 3, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 4, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 4, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 3 }
        };
        return scoringMap[selectedValue] || scoringMap['B'];
      }

      /**
       * é›¢_è¡¨ç¾æ€§ã®scoringè¨ˆç®—
       */
      getExpressionScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 5, 'å…Œ_èª¿å’Œæ€§': 1 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 3, 'é›¢_è¡¨ç¾æ€§': 3, 'å…Œ_èª¿å’Œæ€§': 1 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 3, 'å…Œ_èª¿å’Œæ€§': 3 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 3, 'å¤_å—å®¹æ€§': 3, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 3 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 4, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 4, 'å…Œ_èª¿å’Œæ€§': 1 }
        };
        return scoringMap[selectedValue] || scoringMap['A'];
      }

      /**
       * å…Œ_èª¿å’Œæ€§ã®scoringè¨ˆç®—
       */
      getHarmonyScoring(questionIndex, selectedValue) {
        const scoringMap = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 3 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 3, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 5 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 3, 'å¤_å—å®¹æ€§': 4, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 4, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 4 }
        };
        return scoringMap[selectedValue] || scoringMap['B'];
      }

      /**
       * ã‚·ãƒŠãƒªã‚ªè¨­å•ã®scoringè¨ˆç®—ï¼ˆQ25-Q30ï¼‰
       */
      getScenarioScoring(questionIndex, selectedValue) {
        // ã‚·ãƒŠãƒªã‚ªè¨­å•ã¯å…¨æ¬¡å…ƒã«å‡ç­‰åˆ†æ•£
        const baseScore = {
          'A': { 'ä¹¾_å‰µé€ æ€§': 3, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 1, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 3, 'å…Œ_èª¿å’Œæ€§': 2 },
          'B': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 3, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 3 },
          'C': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 3, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 2, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 2 },
          'D': { 'ä¹¾_å‰µé€ æ€§': 1, 'éœ‡_è¡Œå‹•æ€§': 1, 'å_æ¢æ±‚æ€§': 2, 'è‰®_å®‰å®šæ€§': 4, 'å¤_å—å®¹æ€§': 2, 'å·½_é©å¿œæ€§': 1, 'é›¢_è¡¨ç¾æ€§': 1, 'å…Œ_èª¿å’Œæ€§': 3 },
          'E': { 'ä¹¾_å‰µé€ æ€§': 2, 'éœ‡_è¡Œå‹•æ€§': 2, 'å_æ¢æ±‚æ€§': 1, 'è‰®_å®‰å®šæ€§': 2, 'å¤_å—å®¹æ€§': 1, 'å·½_é©å¿œæ€§': 4, 'é›¢_è¡¨ç¾æ€§': 2, 'å…Œ_èª¿å’Œæ€§': 1 }
        };
        return baseScore[selectedValue] || baseScore['A'];
      }
      
      /**
       * ã‚¹ãƒ†ãƒƒãƒ—2: Engine OSåˆ†æï¼ˆQ1-Q24ä¾¡å€¤è¦³è¨­å•ï¼‰
       */
      calculateEngineOS(eightDimensionVector) {
        // 8æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«â†’ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›
        const topThreeDimensions = this.getTopThreeDimensions(eightDimensionVector);
        
        // ä¸‰çˆ»â†’å…­çˆ»å¤‰æ›ã§ä¸Šå¦ãƒ»ä¸‹å¦çµ„ã¿åˆã‚ã›
        const upperTrigram = this.convertToTrigram(topThreeDimensions[0]);
        const lowerTrigram = this.convertToTrigram(topThreeDimensions[1]);
        
        // 64å¦ç‰¹å®š
        const hexagramId = this.getHexagramIdFromTrigrams(upperTrigram, lowerTrigram);
        
        // ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ ã®æ ¸å¿ƒåˆ†æ
        const coreValues = this.analyzeCoreValues(eightDimensionVector, hexagramId);
        
        return {
          type: 'Engine OS',
          description: 'ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå†…ãªã‚‹å‹•æ©Ÿã®æ ¸å¿ƒï¼‰',
          hexagramId: hexagramId,
          upperTrigram: upperTrigram,
          lowerTrigram: lowerTrigram,
          coreValues: coreValues,
          dominantDimensions: topThreeDimensions,
          analysisDate: new Date().toISOString()
        };
      }

      /**
       * ã‚¹ãƒ†ãƒƒãƒ—3: Interface OSåˆ†æï¼ˆQ25-Q30ã‚·ãƒŠãƒªã‚ªè¨­å•ï¼‰
       */
      calculateInterfaceOS() {
        // Q25-Q30ã®ã‚·ãƒŠãƒªã‚ªå›ç­”ã‚’åˆ†æ
        const scenarioAnswers = {};
        for (let i = 25; i <= 30; i++) {
          const questionId = `q${i}`;
          if (this.answers[questionId]) {
            scenarioAnswers[questionId] = this.answers[questionId];
          }
        }

        // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°åˆ†æ
        const behaviorPatterns = this.analyzeScenarioBehavior(scenarioAnswers);
        
        // ç¤¾ä¼šçš„è¡¨ç¾ã‚¹ã‚¿ã‚¤ãƒ«ã®ç‰¹å®š
        const socialStyle = this.determineSocialStyle(behaviorPatterns);
        
        // å¯¾äººé–¢ä¿‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†æ
        const relationshipPatterns = this.analyzeRelationshipPatterns(behaviorPatterns);

        return {
          type: 'Interface OS',
          description: 'ç¤¾ä¼šçš„ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå¯¾å¤–çš„ãªæŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰',
          socialStyle: socialStyle,
          behaviorPatterns: behaviorPatterns,
          relationshipPatterns: relationshipPatterns,
          scenarioAnalysis: this.getScenarioInsights(scenarioAnswers),
          analysisDate: new Date().toISOString()
        };
      }

      /**
       * ã‚¹ãƒ†ãƒƒãƒ—4: Safe Mode OSåˆ†æ
       */
      calculateSafeModeOS(eightDimensionVector) {
        // ã‚¹ãƒˆãƒ¬ã‚¹ãƒ»å›°é›£æ™‚ã®å¯¾å‡¦ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
        const stressResponses = this.analyzeStressResponses();
        
        // é˜²å¾¡æ©Ÿåˆ¶ã®ç‰¹å®š
        const defensePatterns = this.identifyDefensePatterns(eightDimensionVector);
        
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡Œå‹•ã®åˆ†æ
        const fallbackBehaviors = this.analyzeFallbackBehaviors(stressResponses);
        
        // å›å¾©ãƒ»å†ç”Ÿãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç‰¹å®š
        const recoveryPatterns = this.identifyRecoveryPatterns(eightDimensionVector, stressResponses);

        return {
          type: 'Safe Mode OS',
          description: 'é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå›°é›£ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹æ™‚ã®å¯¾å‡¦ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰',
          stressResponses: stressResponses,
          defensePatterns: defensePatterns,
          fallbackBehaviors: fallbackBehaviors,
          recoveryPatterns: recoveryPatterns,
          resilience: this.calculateResilienceScore(eightDimensionVector),
          analysisDate: new Date().toISOString()
        };
      }

      /**
       * ã‚¹ãƒ†ãƒƒãƒ—5: HaQeiå“²å­¦æº–æ‹ ã®çµæœçµ±åˆ
       */
      integrateTripleOSResults(analysisData) {
        const { eightDimensionVector, engineOS, interfaceOS, safeModeOS } = analysisData;
        
        // HaQeiè¡¨ç¾ã§ã®çµ±åˆè§£é‡ˆ
        const integratedInsights = this.generateHaQeiInsights(engineOS, interfaceOS, safeModeOS);
        
        // æ˜“çµŒæº–æ‹ ã®æˆ¦ç•¥çš„æ´»ç”¨ææ¡ˆ
        const strategicGuidance = this.generateStrategicGuidance(engineOS.hexagramId, eightDimensionVector);
        
        // ä¸‰ã¤ã®äººæ ¼ã‚·ã‚¹ãƒ†ãƒ ã®ç›¸äº’ä½œç”¨åˆ†æ
        const systemInteractions = this.analyzeSystemInteractions(engineOS, interfaceOS, safeModeOS);
        
        return {
          analysisType: 'Triple OS Architecture',
          philosophy: 'HaQei (åˆ†äºº) - Divided Performance Theory',
          timestamp: new Date().toISOString(),
          
          // ã‚³ã‚¢åˆ†æçµæœ
          eightDimensionVector: eightDimensionVector,
          engineOS: engineOS,
          interfaceOS: interfaceOS,
          safeModeOS: safeModeOS,
          
          // çµ±åˆè§£é‡ˆ
          integratedInsights: integratedInsights,
          strategicGuidance: strategicGuidance,
          systemInteractions: systemInteractions,
          
          // HaQeiè¡¨ç¾æº–æ‹ 
          HaQeiExpression: {
            disclaimer: 'å‚è€ƒã¨ã—ã¦ä¸€ã¤ã®è¦–ç‚¹ã‚’æä¾›ã—ã¾ã™',
            perspective: '3ã¤ã®äººæ ¼ã‚·ã‚¹ãƒ†ãƒ ç†è«–ã«åŸºã¥ãåˆ†æ',
            avoidDeterminism: 'æ±ºå®šè«–ã‚’å›é¿ã—ã€é¸æŠã®è‡ªç”±ã‚’å°Šé‡'
          }
        };
      }

      /**
       * ä¸Šä½3æ¬¡å…ƒã‚’å–å¾—
       */
      getTopThreeDimensions(vector) {
        return Object.entries(vector)
          .sort(([,a], [,b]) => b - a)
          .slice(0, 3)
          .map(([dimension, score]) => ({ dimension, score }));
      }

      /**
       * æ¬¡å…ƒã‚’ä¸‰çˆ»ã«å¤‰æ›
       */
      convertToTrigram(dimensionData) {
        const dimensionToTrigram = {
          'ä¹¾_å‰µé€ æ€§': 1, // ä¹¾ â˜°
          'å…Œ_èª¿å’Œæ€§': 2, // å…Œ â˜±
          'é›¢_è¡¨ç¾æ€§': 3, // é›¢ â˜²
          'éœ‡_è¡Œå‹•æ€§': 4, // éœ‡ â˜³
          'å·½_é©å¿œæ€§': 5, // å·½ â˜´
          'å_æ¢æ±‚æ€§': 6, // å â˜µ
          'è‰®_å®‰å®šæ€§': 7, // è‰® â˜¶
          'å¤_å—å®¹æ€§': 8  // å¤ â˜·
        };
        
        return dimensionToTrigram[dimensionData.dimension] || 1;
      }

      /**
       * ä¸‰çˆ»çµ„ã¿åˆã‚ã›ã‹ã‚‰64å¦IDå–å¾—
       */
      getHexagramIdFromTrigrams(upperTrigram, lowerTrigram) {
        const trigramMatrix = {
          1: { 1: 1, 2: 10, 3: 14, 4: 34, 5: 9, 6: 5, 7: 26, 8: 11 },
          2: { 1: 43, 2: 58, 3: 38, 4: 54, 5: 61, 6: 60, 7: 41, 8: 19 },
          3: { 1: 13, 2: 49, 3: 30, 4: 55, 5: 37, 6: 63, 7: 22, 8: 36 },
          4: { 1: 25, 2: 17, 3: 21, 4: 51, 5: 42, 6: 3, 7: 27, 8: 24 },
          5: { 1: 44, 2: 28, 3: 50, 4: 32, 5: 57, 6: 48, 7: 18, 8: 46 },
          6: { 1: 6, 2: 47, 3: 64, 4: 40, 5: 59, 6: 29, 7: 4, 8: 7 },
          7: { 1: 33, 2: 31, 3: 56, 4: 62, 5: 53, 6: 39, 7: 52, 8: 15 },
          8: { 1: 12, 2: 45, 3: 35, 4: 16, 5: 20, 6: 8, 7: 23, 8: 2 }
        };
        
        return trigramMatrix[upperTrigram]?.[lowerTrigram] || 1;
      }

      /**
       * å›ç­”ãƒ‡ãƒ¼ã‚¿ã‚’HAQEIå½¢å¼ã«å¤‰æ›
       */
      convertToHAQEIFormat() {
        return Object.entries(this.answers).map(([questionId, selectedValue]) => {
          const question = this.questions.find(q => q.id === questionId);
          const option = question.options.find(opt => opt.value === selectedValue);
          
          return {
            questionId: questionId,
            selectedValue: selectedValue,
            selectedChoice: `${questionId}${selectedValue.toLowerCase()}`,
            choiceText: option.text,
            timestamp: new Date().toISOString()
          };
        });
      }

      /**
       * åˆ†æçµæœè¡¨ç¤º
       */
      showAnalysisResults(results) {
        this.questionContent.innerHTML = `
          <div class="question-header">
            <div class="question-counter">
              <span>Triple OSåˆ†æå®Œäº†</span>
            </div>
            <div class="question-instruction">
              ã‚ãªãŸã®3ã¤ã®äººæ ¼ã‚·ã‚¹ãƒ†ãƒ ãŒåˆ¤æ˜ã—ã¾ã—ãŸ
            </div>
            <div class="progress-text">
              HaQeiå“²å­¦æº–æ‹ ã®çµæœã‚’ã”ç¢ºèªãã ã•ã„
            </div>
          </div>
          
          <!-- T104 å®Ÿè£…: ç¾ã—ã„Triple OSçµæœè¡¨ç¤ºç”»é¢ -->
          <div class="triple-os-results-container">
            
            <!-- çµæœæ¦‚è¦ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="results-header">
              <div class="header-content">
                <h2 class="main-title">âœ¨ Triple OS åˆ†æçµæœ</h2>
                <p class="header-subtitle">å‚è€ƒã¨ã—ã¦ã€ä¸€ã¤ã®è¦–ç‚¹ã‚’ãŠç¤ºã—ã—ã¾ã™</p>
                <div class="consistency-indicator">
                  <span class="consistency-label">ã‚·ã‚¹ãƒ†ãƒ æ•´åˆæ€§:</span>
                  <div class="consistency-bar">
                    <div class="consistency-fill" style="width: ${results.consistencyScore || 85}%"></div>
                  </div>
                  <span class="consistency-value">${results.consistencyScore || 85}%</span>
                </div>
              </div>
            </div>

            <!-- 3åˆ—ã‚«ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
            <div class="triple-os-grid">
              
              <!-- Engine OS è©³ç´°ã‚«ãƒ¼ãƒ‰ -->
              <div class="os-card engine-os-card" data-os="engine">
                <div class="os-card-header">
                  <div class="os-icon">ğŸ”¥</div>
                  <div class="os-title-section">
                    <h3 class="os-title">Engine OS</h3>
                    <p class="os-subtitle">ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ </p>
                  </div>
                </div>
                
                <div class="hexagram-showcase">
                  <div class="hexagram-main">
                    <div class="hexagram-number">ç¬¬${results.engineOS.hexagramId}å¦</div>
                    <div class="hexagram-name">${results.engineOS.name}</div>
                    <div class="hexagram-reading">${results.engineOS.reading}</div>
                    <div class="hexagram-catchphrase">${results.engineOS.catchphrase}</div>
                  </div>
                  <div class="hexagram-description">
                    <p>${results.engineOS.description}</p>
                  </div>
                </div>

                <div class="dimensions-visualization">
                  <h4 class="section-title">8æ¬¡å…ƒåˆ†æçµæœ</h4>
                  ${Object.entries(results.engineOS.dimensions).map(([dimension, score]) => `
                    <div class="dimension-item">
                      <div class="dimension-header">
                        <span class="dimension-name">${this.getDimensionLabel(dimension)}</span>
                        <span class="dimension-score">${score.toFixed(1)}</span>
                      </div>
                      <div class="dimension-bar">
                        <div class="dimension-fill" style="width: ${(score / 5) * 100}%"></div>
                      </div>
                    </div>
                  `).join('')}
                </div>

                <div class="strategic-keywords">
                  <h4 class="section-title">æˆ¦ç•¥çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</h4>
                  <div class="keywords-cloud">
                    ${results.engineOS.keywords.split(',').map(keyword => 
                      `<span class="keyword-tag">${keyword.trim()}</span>`
                    ).join('')}
                  </div>
                </div>

                <div class="confidence-display">
                  <h4 class="section-title">åˆ†æä¿¡é ¼åº¦</h4>
                  <div class="confidence-score">${Math.round(results.engineOS.confidenceScore * 100)}%</div>
                </div>
              </div>

              <!-- Interface OS è©³ç´°ã‚«ãƒ¼ãƒ‰ -->
              <div class="os-card interface-os-card" data-os="interface">
                <div class="os-card-header">
                  <div class="os-icon">ğŸŒ</div>
                  <div class="os-title-section">
                    <h3 class="os-title">Interface OS</h3>
                    <p class="os-subtitle">ç¤¾ä¼šçš„ã‚·ã‚¹ãƒ†ãƒ </p>
                  </div>
                </div>

                <div class="hexagram-showcase">
                  <div class="hexagram-main">
                    <div class="hexagram-number">ç¬¬${results.interfaceOS.hexagramId}å¦</div>
                    <div class="hexagram-name">${results.interfaceOS.name}</div>
                    <div class="hexagram-reading">${results.interfaceOS.reading}</div>
                  </div>
                </div>

                <div class="social-profile">
                  <div class="social-style-main">
                    <h4 class="section-title">ç¤¾ä¼šçš„ã‚¹ã‚¿ã‚¤ãƒ«</h4>
                    <div class="style-indicator">
                      <span class="style-badge">${results.interfaceOS.socialStyle}</span>
                    </div>
                    <div class="communication-style">
                      <span class="communication-badge">${results.interfaceOS.communicationStyle}</span>
                    </div>
                  </div>
                </div>

                <div class="relationship-analysis">
                  <h4 class="section-title">å¯¾äººé–¢ä¿‚ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>
                  <div class="relationship-grid">
                    <div class="relationship-item">
                      <div class="relationship-icon">ğŸ‘¥</div>
                      <div class="relationship-content">
                        <span class="relationship-label">ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</span>
                        <div class="relationship-bar">
                          <div class="relationship-fill" style="width: ${this.calculateRelationshipScore(results.interfaceOS, 'teamwork')}%"></div>
                        </div>
                      </div>
                    </div>
                    <div class="relationship-item">
                      <div class="relationship-icon">ğŸ­</div>
                      <div class="relationship-content">
                        <span class="relationship-label">è¡¨ç¾åŠ›</span>
                        <div class="relationship-bar">
                          <div class="relationship-fill" style="width: ${this.calculateRelationshipScore(results.interfaceOS, 'expression')}%"></div>
                        </div>
                      </div>
                    </div>
                    <div class="relationship-item">
                      <div class="relationship-icon">ğŸ¤</div>
                      <div class="relationship-content">
                        <span class="relationship-label">å”èª¿æ€§</span>
                        <div class="relationship-bar">
                          <div class="relationship-fill" style="width: ${this.calculateRelationshipScore(results.interfaceOS, 'cooperation')}%"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="communication-patterns">
                  <h4 class="section-title">ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç‰¹æ€§</h4>
                  <p class="communication-insight">${results.interfaceOS.relationshipPatterns}</p>
                </div>
              </div>

              <!-- Safe Mode OS è©³ç´°ã‚«ãƒ¼ãƒ‰ -->
              <div class="os-card safemode-os-card" data-os="safemode">
                <div class="os-card-header">
                  <div class="os-icon">ğŸ›¡ï¸</div>
                  <div class="os-title-section">
                    <h3 class="os-title">Safe Mode OS</h3>
                    <p class="os-subtitle">é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ </p>
                  </div>
                </div>

                <div class="hexagram-showcase">
                  <div class="hexagram-main">
                    <div class="hexagram-number">ç¬¬${results.safeModeOS.hexagramId}å¦</div>
                    <div class="hexagram-name">${results.safeModeOS.name}</div>
                    <div class="hexagram-reading">${results.safeModeOS.reading}</div>
                  </div>
                </div>

                <div class="resilience-dashboard">
                  <h4 class="section-title">ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹æŒ‡æ¨™</h4>
                  <div class="resilience-circle">
                    <div class="circle-progress">
                      <svg class="progress-ring" width="120" height="120">
                        <circle class="progress-ring-bg" cx="60" cy="60" r="54"></circle>
                        <circle class="progress-ring-fill" cx="60" cy="60" r="54"
                          style="stroke-dasharray: ${2 * Math.PI * 54}; stroke-dashoffset: ${2 * Math.PI * 54 * (1 - results.safeModeOS.resilienceScore)}"></circle>
                      </svg>
                      <div class="progress-center">
                        <span class="progress-value">${Math.round(results.safeModeOS.resilienceScore * 100)}%</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="defense-mechanisms">
                  <h4 class="section-title">é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³</h4>
                  <div class="defense-patterns">
                    ${Object.entries(results.safeModeOS.defensePatterns).map(([pattern, strength]) => `
                      <div class="defense-item">
                        <div class="defense-header">
                          <span class="defense-name">${this.getDefensePatternLabel(pattern)}</span>
                          <span class="defense-strength">${strength}</span>
                        </div>
                        <div class="defense-bar">
                          <div class="defense-fill" style="width: ${(strength / 20) * 100}%"></div>
                        </div>
                      </div>
                    `).join('')}
                  </div>
                </div>

                <div class="stress-response">
                  <h4 class="section-title">ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³•</h4>
                  <div class="coping-style">
                    <div class="coping-main">
                      <span class="coping-badge">${results.safeModeOS.copingStyle}</span>
                    </div>
                    <div class="stress-response-type">
                      <span class="response-badge">${results.safeModeOS.stressResponse}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ã‚·ã‚¹ãƒ†ãƒ çµ±åˆåˆ†æ -->
            <div class="integration-analysis">
              <h3 class="integration-title">ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ çµ±åˆåˆ†æ</h3>
              
              <div class="integration-grid">
                <div class="integration-card">
                  <h4 class="integration-subtitle">Engine âŸ· Interface</h4>
                  <div class="integration-score">
                    <div class="score-bar">
                      <div class="score-fill engine-interface" style="width: ${this.calculateIntegrationScore(results, 'engine-interface')}%"></div>
                    </div>
                    <span class="score-text">${this.calculateIntegrationScore(results, 'engine-interface')}%</span>
                  </div>
                  <p class="integration-insight">${this.getIntegrationInsight(results, 'engine-interface')}</p>
                </div>

                <div class="integration-card">
                  <h4 class="integration-subtitle">Interface âŸ· Safe Mode</h4>
                  <div class="integration-score">
                    <div class="score-bar">
                      <div class="score-fill interface-safe" style="width: ${this.calculateIntegrationScore(results, 'interface-safe')}%"></div>
                    </div>
                    <span class="score-text">${this.calculateIntegrationScore(results, 'interface-safe')}%</span>
                  </div>
                  <p class="integration-insight">${this.getIntegrationInsight(results, 'interface-safe')}</p>
                </div>

                <div class="integration-card">
                  <h4 class="integration-subtitle">Engine âŸ· Safe Mode</h4>
                  <div class="integration-score">
                    <div class="score-bar">
                      <div class="score-fill engine-safe" style="width: ${this.calculateIntegrationScore(results, 'engine-safe')}%"></div>
                    </div>
                    <span class="score-text">${this.calculateIntegrationScore(results, 'engine-safe')}%</span>
                  </div>
                  <p class="integration-insight">${this.getIntegrationInsight(results, 'engine-safe')}</p>
                </div>
              </div>
            </div>

            <!-- HaQeiçµ±åˆè¦‹è§£ï¼ˆç¾åŒ–ç‰ˆï¼‰ -->
            <div class="HaQei-wisdom">
              <div class="wisdom-header">
                <div class="wisdom-icon">ğŸ’­</div>
                <h3 class="wisdom-title">HaQei çµ±åˆè¦‹è§£</h3>
              </div>
              
              <div class="wisdom-disclaimer">
                <p>${results.HaQeiExpression.disclaimer}</p>
              </div>

              <div class="wisdom-content">
                <div class="insight-sections">
                  ${results.integratedInsights.split('ã€‚').filter(insight => insight.trim()).map((insight, index) => `
                    <div class="insight-item" data-insight="${index}">
                      <div class="insight-marker"></div>
                      <p class="insight-text">${insight.trim()}ã€‚</p>
                    </div>
                  `).join('')}
                </div>
              </div>

              <div class="strategic-guidance">
                <h4 class="guidance-title">æˆ¦ç•¥çš„æ´»ç”¨ã®ç¤ºå”†</h4>
                <div class="guidance-content">
                  <p class="guidance-text">${results.strategicGuidance || this.generateStrategicGuidance(results)}</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="question-navigation">
            <button type="button" class="nav-button secondary" onclick="location.reload()">
              å†åˆ†æã™ã‚‹
            </button>
            
            <div class="nav-info">
              åˆ†æå®Œäº†
            </div>
            
            <button type="button" class="nav-button results-button" onclick="window.print()">
              çµæœã‚’ä¿å­˜ â†’
            </button>
          </div>
        `;
        
        // CSSã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
        this.addAnalysisResultsStyles();
      }

      /**
       * åˆ†æçµæœè¡¨ç¤ºç”¨CSS
       */
      addAnalysisResultsStyles() {
        if (!document.getElementById('analysis-results-styles')) {
          const style = document.createElement('style');
          style.id = 'analysis-results-styles';
          style.textContent = `
            /* T104 å®Ÿè£…: ç¾ã—ã„Triple OSçµæœè¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ« */
            
            .triple-os-results-container {
              padding: var(--space-xl);
              max-height: 80vh;
              overflow-y: auto;
              animation: fadeInUp 0.8s ease-out;
            }

            @keyframes fadeInUp {
              from { opacity: 0; transform: translateY(30px); }
              to { opacity: 1; transform: translateY(0); }
            }

            /* çµæœæ¦‚è¦ãƒ˜ãƒƒãƒ€ãƒ¼ */
            .results-header {
              text-align: center;
              margin-bottom: var(--space-xl);
              padding: var(--space-lg);
              background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
              border-radius: var(--radius-xl);
              border: 1px solid rgba(99, 102, 241, 0.2);
            }

            .main-title {
              color: var(--accent-400);
              font-size: 2rem;
              font-weight: 700;
              margin-bottom: var(--space-sm);
              font-family: var(--font-jp);
            }

            .header-subtitle {
              color: var(--primary-300);
              font-size: 1rem;
              margin-bottom: var(--space-md);
              font-style: italic;
            }

            .consistency-indicator {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: var(--space-sm);
              margin-top: var(--space-md);
            }

            .consistency-label {
              color: var(--primary-200);
              font-weight: 500;
            }

            .consistency-bar {
              width: 200px;
              height: 8px;
              background: rgba(30, 41, 59, 0.5);
              border-radius: var(--radius-full);
              overflow: hidden;
            }

            .consistency-fill {
              height: 100%;
              background: linear-gradient(90deg, var(--accent-500), var(--accent-400));
              transition: width 1s ease-out;
            }

            .consistency-value {
              color: var(--accent-400);
              font-weight: 600;
              min-width: 40px;
              text-align: right;
            }

            /* 3åˆ—ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
            .triple-os-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
              gap: var(--space-xl);
              margin-bottom: var(--space-xl);
            }

            /* OSã‚«ãƒ¼ãƒ‰å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
            .os-card {
              background: rgba(30, 41, 59, 0.6);
              border: 1px solid rgba(99, 102, 241, 0.2);
              border-radius: var(--radius-xl);
              padding: var(--space-lg);
              transition: all 0.3s ease;
              position: relative;
              overflow: hidden;
            }

            .os-card::before {
              content: '';
              position: absolute;
              top: 0;
              left: 0;
              right: 0;
              height: 3px;
              background: linear-gradient(90deg, transparent, var(--accent-500), transparent);
            }

            .os-card:hover {
              transform: translateY(-4px);
              border-color: rgba(99, 102, 241, 0.4);
              box-shadow: 0 8px 32px rgba(99, 102, 241, 0.1);
            }

            .engine-os-card::before {
              background: linear-gradient(90deg, transparent, #ff6b6b, transparent);
            }

            .interface-os-card::before {
              background: linear-gradient(90deg, transparent, #4ecdc4, transparent);
            }

            .safemode-os-card::before {
              background: linear-gradient(90deg, transparent, #45b7d1, transparent);
            }

            .os-card-header {
              display: flex;
              align-items: center;
              gap: var(--space-md);
              margin-bottom: var(--space-lg);
              padding-bottom: var(--space-md);
              border-bottom: 1px solid rgba(99, 102, 241, 0.1);
            }

            .os-icon {
              font-size: 2rem;
              background: rgba(99, 102, 241, 0.1);
              padding: var(--space-md);
              border-radius: var(--radius-lg);
            }

            .os-title-section {
              flex: 1;
            }

            .os-title {
              color: var(--accent-400);
              font-size: 1.25rem;
              font-weight: 700;
              margin-bottom: var(--space-xs);
              font-family: var(--font-jp);
            }

            .os-subtitle {
              color: var(--primary-300);
              font-size: 0.9rem;
              font-weight: 400;
            }

            .section-title {
              color: var(--accent-400);
              font-size: 1rem;
              font-weight: 600;
              margin-bottom: var(--space-md);
              font-family: var(--font-jp);
              border-bottom: 1px solid rgba(99, 102, 241, 0.2);
              padding-bottom: var(--space-xs);
            }

            /* å¦æƒ…å ±è¡¨ç¤º */
            .hexagram-showcase {
              background: rgba(99, 102, 241, 0.05);
              border-radius: var(--radius-lg);
              padding: var(--space-md);
              margin-bottom: var(--space-lg);
            }

            .hexagram-main {
              text-align: center;
              margin-bottom: var(--space-md);
            }

            .hexagram-number {
              color: var(--accent-500);
              font-size: 1.1rem;
              font-weight: 600;
            }

            .hexagram-name {
              color: var(--primary-100);
              font-size: 1.3rem;
              font-weight: 700;
              margin: var(--space-xs) 0;
              font-family: var(--font-jp);
            }

            .hexagram-symbol {
              font-size: 2rem;
              color: var(--accent-400);
              margin-top: var(--space-sm);
            }

            .hexagram-description {
              color: var(--primary-200);
              font-size: 0.9rem;
              line-height: 1.5;
              text-align: center;
            }

            /* æ¬¡å…ƒå¯è¦–åŒ– */
            .dimensions-visualization {
              margin-bottom: var(--space-lg);
            }

            .dimension-item {
              margin-bottom: var(--space-md);
              padding: var(--space-md);
              background: rgba(99, 102, 241, 0.05);
              border-radius: var(--radius-md);
            }

            .dimension-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: var(--space-sm);
            }

            .dimension-name {
              color: var(--primary-100);
              font-weight: 500;
            }

            .dimension-score {
              color: var(--accent-400);
              font-weight: 700;
            }

            .dimension-bar {
              height: 6px;
              background: rgba(30, 41, 59, 0.5);
              border-radius: var(--radius-full);
              overflow: hidden;
              margin-bottom: var(--space-xs);
            }

            .dimension-fill {
              height: 100%;
              background: linear-gradient(90deg, var(--accent-500), var(--accent-400));
              transition: width 1s ease-out;
              border-radius: var(--radius-full);
            }

            .dimension-insight {
              color: var(--primary-300);
              font-size: 0.85rem;
              margin-bottom: 0;
            }

            /* ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¦ãƒ‰ */
            .keywords-cloud {
              display: flex;
              flex-wrap: wrap;
              gap: var(--space-xs);
            }

            .keyword-tag {
              background: rgba(99, 102, 241, 0.15);
              color: var(--accent-300);
              padding: var(--space-xs) var(--space-sm);
              border-radius: var(--radius-full);
              font-size: 0.8rem;
              border: 1px solid rgba(99, 102, 241, 0.2);
              transition: all 0.2s ease;
            }

            .keyword-tag:hover {
              background: rgba(99, 102, 241, 0.25);
              transform: translateY(-1px);
            }

            /* ç¤¾ä¼šçš„ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« */
            .style-badge {
              display: inline-block;
              background: linear-gradient(135deg, var(--accent-500), var(--accent-400));
              color: white;
              padding: var(--space-sm) var(--space-md);
              border-radius: var(--radius-full);
              font-weight: 600;
              font-size: 0.9rem;
            }

            .style-description {
              color: var(--primary-200);
              font-size: 0.9rem;
              margin-top: var(--space-sm);
              line-height: 1.4;
            }

            /* é–¢ä¿‚æ€§åˆ†æ */
            .relationship-grid {
              display: flex;
              flex-direction: column;
              gap: var(--space-sm);
            }

            .relationship-item {
              display: flex;
              align-items: center;
              gap: var(--space-md);
              padding: var(--space-sm);
              background: rgba(99, 102, 241, 0.05);
              border-radius: var(--radius-md);
            }

            .relationship-icon {
              font-size: 1.2rem;
            }

            .relationship-content {
              flex: 1;
            }

            .relationship-label {
              color: var(--primary-200);
              font-size: 0.9rem;
              font-weight: 500;
            }

            .relationship-bar {
              height: 4px;
              background: rgba(30, 41, 59, 0.5);
              border-radius: var(--radius-full);
              margin-top: var(--space-xs);
              overflow: hidden;
            }

            .relationship-fill {
              height: 100%;
              background: linear-gradient(90deg, #4ecdc4, #44a08d);
              border-radius: var(--radius-full);
              transition: width 1s ease-out;
            }

            /* ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹å††ã‚°ãƒ©ãƒ• */
            .resilience-dashboard {
              text-align: center;
              margin-bottom: var(--space-lg);
            }

            .resilience-circle {
              display: flex;
              justify-content: center;
              margin: var(--space-md) 0;
            }

            .circle-progress {
              position: relative;
            }

            .progress-ring {
              transform: rotate(-90deg);
            }

            .progress-ring-bg {
              fill: none;
              stroke: rgba(30, 41, 59, 0.5);
              stroke-width: 8;
            }

            .progress-ring-fill {
              fill: none;
              stroke: url(#resilience-gradient);
              stroke-width: 8;
              stroke-linecap: round;
              transition: stroke-dashoffset 1s ease-out;
            }

            .progress-center {
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
            }

            .progress-value {
              font-size: 1.5rem;
              font-weight: 700;
              color: var(--accent-400);
            }

            .resilience-interpretation {
              color: var(--primary-200);
              font-size: 0.9rem;
              margin-top: var(--space-sm);
            }

            /* é˜²å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ  */
            .defense-list {
              display: flex;
              flex-direction: column;
              gap: var(--space-sm);
            }

            .defense-item {
              display: flex;
              align-items: flex-start;
              gap: var(--space-md);
              padding: var(--space-md);
              background: rgba(99, 102, 241, 0.05);
              border-radius: var(--radius-md);
            }

            .defense-icon {
              font-size: 1.2rem;
              margin-top: 2px;
            }

            .defense-content {
              flex: 1;
            }

            .defense-name {
              color: var(--primary-100);
              font-weight: 600;
              display: block;
              margin-bottom: var(--space-xs);
            }

            .defense-description {
              color: var(--primary-300);
              font-size: 0.85rem;
              line-height: 1.4;
              margin: 0;
            }

            /* ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³• */
            .response-strategies {
              display: flex;
              flex-wrap: wrap;
              gap: var(--space-xs);
            }

            .response-tag {
              background: rgba(69, 183, 209, 0.15);
              color: #45b7d1;
              padding: var(--space-xs) var(--space-sm);
              border-radius: var(--radius-full);
              font-size: 0.8rem;
              border: 1px solid rgba(69, 183, 209, 0.2);
            }

            /* ã‚·ã‚¹ãƒ†ãƒ çµ±åˆåˆ†æ */
            .integration-analysis {
              background: rgba(30, 41, 59, 0.4);
              border: 1px solid rgba(99, 102, 241, 0.2);
              border-radius: var(--radius-xl);
              padding: var(--space-xl);
              margin-bottom: var(--space-xl);
            }

            .integration-title {
              color: var(--accent-400);
              font-size: 1.5rem;
              font-weight: 700;
              text-align: center;
              margin-bottom: var(--space-lg);
              font-family: var(--font-jp);
            }

            .integration-grid {
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: var(--space-lg);
            }

            .integration-card {
              background: rgba(99, 102, 241, 0.05);
              border: 1px solid rgba(99, 102, 241, 0.1);
              border-radius: var(--radius-lg);
              padding: var(--space-lg);
              text-align: center;
            }

            .integration-subtitle {
              color: var(--primary-100);
              font-size: 1rem;
              font-weight: 600;
              margin-bottom: var(--space-md);
            }

            .integration-score {
              display: flex;
              align-items: center;
              gap: var(--space-md);
              margin-bottom: var(--space-md);
            }

            .score-bar {
              flex: 1;
              height: 8px;
              background: rgba(30, 41, 59, 0.5);
              border-radius: var(--radius-full);
              overflow: hidden;
            }

            .score-fill {
              height: 100%;
              border-radius: var(--radius-full);
              transition: width 1s ease-out;
            }

            .score-fill.engine-interface {
              background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            }

            .score-fill.interface-safe {
              background: linear-gradient(90deg, #4ecdc4, #45b7d1);
            }

            .score-fill.engine-safe {
              background: linear-gradient(90deg, #ff6b6b, #45b7d1);
            }

            .score-text {
              color: var(--accent-400);
              font-weight: 700;
              min-width: 40px;
            }

            .integration-insight {
              color: var(--primary-200);
              font-size: 0.9rem;
              line-height: 1.4;
            }

            /* HaQeiçµ±åˆè¦‹è§£ */
            .HaQei-wisdom {
              background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
              border: 1px solid rgba(139, 92, 246, 0.3);
              border-radius: var(--radius-xl);
              padding: var(--space-xl);
              margin-bottom: var(--space-xl);
            }

            .wisdom-header {
              display: flex;
              align-items: center;
              gap: var(--space-md);
              margin-bottom: var(--space-lg);
              justify-content: center;
            }

            .wisdom-icon {
              font-size: 2rem;
            }

            .wisdom-title {
              color: var(--accent-400);
              font-size: 1.5rem;
              font-weight: 700;
              font-family: var(--font-jp);
            }

            .wisdom-disclaimer {
              text-align: center;
              margin-bottom: var(--space-lg);
            }

            .wisdom-disclaimer p {
              color: var(--primary-400);
              font-size: 0.9rem;
              font-style: italic;
              margin: 0;
            }

            .insight-sections {
              display: flex;
              flex-direction: column;
              gap: var(--space-md);
              margin-bottom: var(--space-lg);
            }

            .insight-item {
              display: flex;
              align-items: flex-start;
              gap: var(--space-md);
              padding: var(--space-md);
              background: rgba(99, 102, 241, 0.05);
              border-radius: var(--radius-md);
              animation: fadeInLeft 0.6s ease-out;
              animation-delay: calc(var(--insight) * 0.1s);
            }

            .insight-marker {
              width: 8px;
              height: 8px;
              background: var(--accent-400);
              border-radius: 50%;
              margin-top: 8px;
              flex-shrink: 0;
            }

            .insight-text {
              color: var(--primary-200);
              line-height: 1.6;
              margin: 0;
            }

            .strategic-guidance {
              background: rgba(139, 92, 246, 0.1);
              border: 1px solid rgba(139, 92, 246, 0.2);
              border-radius: var(--radius-lg);
              padding: var(--space-lg);
            }

            .guidance-title {
              color: var(--accent-400);
              font-size: 1.1rem;
              font-weight: 600;
              margin-bottom: var(--space-md);
              text-align: center;
              font-family: var(--font-jp);
            }

            .guidance-text {
              color: var(--primary-200);
              line-height: 1.6;
              text-align: center;
              margin: 0;
            }

            @keyframes fadeInLeft {
              from { opacity: 0; transform: translateX(-20px); }
              to { opacity: 1; transform: translateX(0); }
            }

            /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
            @media (max-width: 768px) {
              .triple-os-grid {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
              }

              .integration-grid {
                grid-template-columns: 1fr;
              }

              .consistency-indicator {
                flex-direction: column;
                gap: var(--space-sm);
              }

              .consistency-bar {
                width: 100%;
                max-width: 300px;
              }

              .main-title {
                font-size: 1.5rem;
              }

              .os-card {
                padding: var(--space-md);
              }

              .relationship-grid {
                gap: var(--space-xs);
              }
            }

            /* å¤ã„ã‚¹ã‚¿ã‚¤ãƒ«ã¨ã®äº’æ›æ€§ï¼ˆå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼‰ */
            .analysis-results-container,
            .os-result-card,
            .HaQei-insights {
              display: none;
            }
          `;
          document.head.appendChild(style);
        }

        // ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹å††ã‚°ãƒ©ãƒ•ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
        if (!document.getElementById('resilience-gradient')) {
          const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
          svg.style.position = 'absolute';
          svg.style.width = '0';
          svg.style.height = '0';
          svg.innerHTML = `
            <defs>
              <linearGradient id="resilience-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#45b7d1;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#96c93d;stop-opacity:1" />
              </linearGradient>
            </defs>
          `;
          document.body.appendChild(svg);
        }
      }

      /**
       * å¦åå–å¾—ï¼ˆå®Œå…¨ç‰ˆï¼‰
       */
      getHexagramName(hexagramId) {
        const hexagramNames = {
          1: 'ä¹¾ç‚ºå¤©', 2: 'å¤ç‚ºåœ°', 3: 'æ°´é›·å±¯', 4: 'å±±æ°´è’™', 5: 'æ°´å¤©éœ€',
          6: 'å¤©æ°´è¨Ÿ', 7: 'åœ°æ°´å¸«', 8: 'æ°´åœ°æ¯”', 9: 'é¢¨å¤©å°ç•œ', 10: 'å¤©æ²¢å±¥',
          11: 'åœ°å¤©æ³°', 12: 'å¤©åœ°å¦', 13: 'å¤©ç«åŒäºº', 14: 'ç«å¤©å¤§æœ‰', 15: 'åœ°å±±è¬™',
          16: 'é›·åœ°è±«', 17: 'æ²¢é›·éš', 18: 'å±±é¢¨è ±', 19: 'åœ°æ²¢è‡¨', 20: 'é¢¨åœ°è¦³',
          21: 'ç«é›·å™¬å—‘', 22: 'å±±ç«è³', 23: 'å±±åœ°å‰', 24: 'åœ°é›·å¾©', 25: 'å¤©é›·æ— å¦„',
          26: 'å±±å¤©å¤§ç•œ', 27: 'å±±é›·é ¤', 28: 'æ²¢é¢¨å¤§é', 29: 'åç‚ºæ°´', 30: 'é›¢ç‚ºç«',
          31: 'æ²¢å±±å’¸', 32: 'é›·é¢¨æ’', 33: 'å¤©å±±é¯', 34: 'é›·å¤©å¤§å£®', 35: 'ç«åœ°æ™‹',
          36: 'åœ°ç«æ˜å¤·', 37: 'é¢¨ç«å®¶äºº', 38: 'ç«æ²¢ç½', 39: 'æ°´å±±è¹‡', 40: 'é›·æ°´è§£',
          41: 'å±±æ²¢æ', 42: 'é¢¨é›·ç›Š', 43: 'æ²¢å¤©å¤¬', 44: 'å¤©é¢¨å§¤', 45: 'æ²¢åœ°èƒ',
          46: 'åœ°é¢¨å‡', 47: 'æ²¢æ°´å›°', 48: 'æ°´é¢¨äº•', 49: 'æ²¢ç«é©', 50: 'ç«é¢¨é¼',
          51: 'éœ‡ç‚ºé›·', 52: 'è‰®ç‚ºå±±', 53: 'é¢¨å±±æ¼¸', 54: 'é›·æ²¢å¸°å¦¹', 55: 'é›·ç«è±Š',
          56: 'ç«å±±æ—…', 57: 'å·½ç‚ºé¢¨', 58: 'å…Œç‚ºæ²¢', 59: 'é¢¨æ°´æ¸™', 60: 'æ°´æ²¢ç¯€',
          61: 'é¢¨æ²¢ä¸­å­š', 62: 'é›·å±±å°é', 63: 'æ°´ç«æ—¢æ¸ˆ', 64: 'ç«æ°´æœªæ¸ˆ'
        };
        return hexagramNames[hexagramId] || `ç¬¬${hexagramId}å¦`;
      }

      /**
       * T104: å¦ã‚·ãƒ³ãƒœãƒ«å–å¾—
       */
      getHexagramSymbol(hexagramId) {
        const symbols = {
          1: 'â˜°â˜°', 2: 'â˜·â˜·', 3: 'â˜µâ˜³', 4: 'â˜¶â˜µ', 5: 'â˜µâ˜°', 6: 'â˜°â˜µ', 7: 'â˜·â˜µ', 8: 'â˜µâ˜·',
          9: 'â˜´â˜°', 10: 'â˜°â˜±', 11: 'â˜·â˜°', 12: 'â˜°â˜·', 13: 'â˜°â˜²', 14: 'â˜²â˜°', 15: 'â˜·â˜¶',
          16: 'â˜³â˜·', 17: 'â˜±â˜³', 18: 'â˜¶â˜´', 19: 'â˜·â˜±', 20: 'â˜´â˜·', 21: 'â˜²â˜³', 22: 'â˜¶â˜²',
          23: 'â˜¶â˜·', 24: 'â˜·â˜³', 25: 'â˜°â˜³', 26: 'â˜¶â˜°', 27: 'â˜¶â˜³', 28: 'â˜±â˜´', 29: 'â˜µâ˜µ',
          30: 'â˜²â˜²', 31: 'â˜±â˜¶', 32: 'â˜³â˜´', 33: 'â˜°â˜¶', 34: 'â˜³â˜°', 35: 'â˜²â˜·', 36: 'â˜·â˜²',
          37: 'â˜´â˜²', 38: 'â˜²â˜±', 39: 'â˜µâ˜¶', 40: 'â˜³â˜µ', 41: 'â˜¶â˜±', 42: 'â˜´â˜³', 43: 'â˜±â˜°',
          44: 'â˜°â˜´', 45: 'â˜±â˜·', 46: 'â˜·â˜´', 47: 'â˜±â˜µ', 48: 'â˜µâ˜´', 49: 'â˜±â˜²', 50: 'â˜²â˜´',
          51: 'â˜³â˜³', 52: 'â˜¶â˜¶', 53: 'â˜´â˜¶', 54: 'â˜³â˜±', 55: 'â˜³â˜²', 56: 'â˜²â˜¶', 57: 'â˜´â˜´',
          58: 'â˜±â˜±', 59: 'â˜´â˜µ', 60: 'â˜µâ˜±', 61: 'â˜´â˜±', 62: 'â˜³â˜¶', 63: 'â˜µâ˜²', 64: 'â˜²â˜µ'
        };
        return symbols[hexagramId] || 'â˜°â˜°';
      }

      /**
       * T104: å¦ã®è©³ç´°èª¬æ˜å–å¾—
       */
      getHexagramDetailedDescription(hexagramId) {
        const descriptions = {
          1: 'å‰µé€ ã®åŠ›ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€å¼·ã„æ„å¿—åŠ›ã‚’è±¡å¾´ã—ã¾ã™ã€‚å¤©ã®è±¡å¾´ã¨ã—ã¦ã€ç„¡é™ã®å¯èƒ½æ€§ã¨é–‹æ‹“ç²¾ç¥ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚',
          2: 'å—å®¹æ€§ã€åŒ…å®¹åŠ›ã€æ”¯ãˆã‚‹åŠ›ã‚’è¡¨ã—ã¾ã™ã€‚åœ°ã®è±¡å¾´ã¨ã—ã¦ã€å®‰å®šæ€§ã¨è‚²æˆã®åŠ›ã‚’æŒã¡ã¾ã™ã€‚',
          3: 'å›°é›£ã®ä¸­ã§ã®æˆé•·ã€æ–°ã—ã„å§‹ã¾ã‚Šã‚’æ„å‘³ã—ã¾ã™ã€‚ç¨®ãŒåœŸã®ä¸­ã§èŠ½å¹ãåŠ›ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          4: 'å­¦ç¿’ã¨æˆé•·ã®æ®µéšã€æœªç†ŸãªçŠ¶æ…‹ã‹ã‚‰çŸ¥è­˜ã‚’å¾—ã‚‹éç¨‹ã‚’è¡¨ã—ã¾ã™ã€‚',
          5: 'å¾…ã¤åŠ›ã€å¿è€åŠ›ã€é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¦‹æ¥µã‚ã‚‹çŸ¥æµã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          6: 'äº‰ã„ã€å¯¾ç«‹ã€æ­£ç¾©ã‚’æ±‚ã‚ã‚‹å§¿å‹¢ã‚’è¡¨ã—ã¾ã™ã€‚æ³•çš„ãªå•é¡Œã‚„è­°è«–ã‚’æ„å‘³ã™ã‚‹ã“ã¨ã‚‚ã€‚',
          7: 'çµ±ç‡åŠ›ã€è¦å¾‹ã€çµ„ç¹”çš„ãªè¡Œå‹•ã‚’è±¡å¾´ã—ã¾ã™ã€‚è»éšŠã®ã‚ˆã†ã«çµ±åˆ¶ã•ã‚ŒãŸé›†å›£è¡Œå‹•ã€‚',
          8: 'å”èª¿ã€è¦ªç¦ã€å…±åŒä½“ã®çµæŸã‚’è¡¨ã—ã¾ã™ã€‚äººã€…ãŒå…±ã«æ­©ã‚€å§¿å‹¢ã€‚',
          9: 'å°ã•ãªåŠ›ã§ã®è“„ç©ã€å¾ã€…ã«åŠ›ã‚’è²¯ã‚ã‚‹æ®µéšã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          10: 'ç¤¼å„€æ­£ã—ã•ã€æ…é‡ãªè¡Œå‹•ã€ç¤¾ä¼šçš„ãªãƒãƒŠãƒ¼ã‚’é‡è¦–ã™ã‚‹æ…‹åº¦ã€‚',
          11: 'é€šã˜åˆã„ã€èª¿å’Œã€å¹³å’ŒãªçŠ¶æ…‹ã‚’è¡¨ã—ã¾ã™ã€‚å¤©åœ°ã®æ°—ãŒé€šã˜ã‚‹å‰å…†ã€‚',
          12: 'é–‰å¡ã€åœæ»ã€é€šã˜åˆã‚ãªã„çŠ¶æ…‹ã‚’è±¡å¾´ã—ã¾ã™ã€‚ä¸€æ™‚çš„ãªå›°é›£æœŸã€‚',
          13: 'åŒå¿—ã€å”åŠ›ã€å…±é€šã®ç›®æ¨™ã‚’æŒã¤ä»²é–“ã¨ã®çµæŸã‚’è¡¨ã—ã¾ã™ã€‚',
          14: 'å¤§ã„ãªã‚‹æ‰€æœ‰ã€è±Šã‹ã•ã€æˆåŠŸã‚’è±¡å¾´ã—ã¾ã™ã€‚ç‰©è³ªçš„ãƒ»ç²¾ç¥çš„ãªå……å®Ÿã€‚',
          15: 'è¬™éœã€è¬™è™šã•ã€æ§ãˆã‚ãªå§¿å‹¢ã‹ã‚‰ç”Ÿã¾ã‚Œã‚‹çœŸã®å¼·ã•ã‚’è¡¨ã—ã¾ã™ã€‚',
          16: 'å–œã³ã€æ¥½ã—ã•ã€èª¿å’Œã®ã¨ã‚ŒãŸé–¢ä¿‚æ€§ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          17: 'å¾“ã†ã€é©å¿œã™ã‚‹ã€æµã‚Œã«èº«ã‚’ä»»ã›ã‚‹æŸ”è»Ÿæ€§ã‚’è¡¨ã—ã¾ã™ã€‚',
          18: 'è…æ•—ã®æ”¹å–„ã€æ”¹é©ã€å¤ã„ã‚‚ã®ã‚’æ–°ã—ãã™ã‚‹åŠ›ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          19: 'è‡¨ã‚€ã€æ¥è¿‘ã™ã‚‹ã€å½±éŸ¿åŠ›ã‚’åŠã¼ã™åŠ›ã‚’è¡¨ã—ã¾ã™ã€‚',
          20: 'è¦³å¯Ÿã€æ´å¯Ÿã€å®¢è¦³çš„ãªè¦–ç‚¹ã§ç‰©äº‹ã‚’è¦‹ã‚‹èƒ½åŠ›ã‚’è±¡å¾´ã—ã¾ã™ã€‚',
          // ... ä»–ã®å¦ã®èª¬æ˜ã‚‚åŒæ§˜ã«
          29: 'å›°é›£ã€è©¦ç·´ã€æ·±ã„è°·ã‚’è¡¨ã—ã¾ã™ã€‚å±é™ºã‚’ä¹—ã‚Šè¶Šãˆã‚‹çŸ¥æµãŒå¿…è¦ã€‚',
          30: 'æ˜ã‚‹ã•ã€çŸ¥æ€§ã€ç¾ã—ã•ã‚’è±¡å¾´ã—ã¾ã™ã€‚å¤ªé™½ã®ã‚ˆã†ãªè¼ãã€‚',
          51: 'éœ‡æ’¼ã€é©šãã€çªç„¶ã®å¤‰åŒ–ã‚’è¡¨ã—ã¾ã™ã€‚é›·ã®ã‚ˆã†ãªç¬ç™ºåŠ›ã€‚',
          52: 'é™æ­¢ã€å®‰å®šã€æ·±ã„æ€æ…®ã‚’è±¡å¾´ã—ã¾ã™ã€‚å±±ã®ã‚ˆã†ãªä¸å‹•ã®å¿ƒã€‚',
          63: 'å®Œæˆã€èª¿å’Œã€æ—¢ã«æˆã—é‚ã’ã‚‰ã‚ŒãŸçŠ¶æ…‹ã‚’è¡¨ã—ã¾ã™ã€‚',
          64: 'æœªå®Œæˆã€å¯èƒ½æ€§ã€ã¾ã å®Œæˆã—ã¦ã„ãªã„æ½œåœ¨åŠ›ã‚’è±¡å¾´ã—ã¾ã™ã€‚'
        };

        return descriptions[hexagramId] || `ç¬¬${hexagramId}å¦ã¯ã€æ˜“çµŒã«ãŠã‘ã‚‹é‡è¦ãªè±¡å¾´ã®ä¸€ã¤ã¨ã—ã¦ã€ç‰¹åˆ¥ãªæ„å‘³ã‚’æŒã£ã¦ã„ã¾ã™ã€‚å‚è€ƒã¨ã—ã¦ã€ä¸€ã¤ã®è§£é‡ˆã‚’ãŠç¤ºã—ã—ã¾ã™ã€‚`;
      }

      /**
       * T104: æ¬¡å…ƒæ´å¯Ÿãƒ†ã‚­ã‚¹ãƒˆå–å¾—
       */
      getDimensionInsight(dimension) {
        const insights = {
          'ä¹¾_å‰µé€ æ€§': 'æ–°ãŸãªä¾¡å€¤ã‚’å‰µé€ ã—ã€ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿã¿å‡ºã™åŠ›',
          'éœ‡_è¡Œå‹•æ€§': 'è¿…é€Ÿãªåˆ¤æ–­ã¨å®Ÿè¡ŒåŠ›ã§å¤‰åŒ–ã«å¯¾å¿œã™ã‚‹èƒ½åŠ›',
          'å_æ¢æ±‚æ€§': 'æ·±ã„æ´å¯Ÿã¨çœŸç†ã‚’è¿½æ±‚ã™ã‚‹æ¢ç©¶å¿ƒ',
          'è‰®_å®‰å®šæ€§': 'ç¢ºå®ŸãªåŸºç›¤ã‚’ç¯‰ãã€æŒç¶šå¯èƒ½ãªç™ºå±•ã‚’ç›®æŒ‡ã™å§¿å‹¢',
          'å¤_å—å®¹æ€§': 'ä»–è€…ã‚’åŒ…å®¹ã—ã€èª¿å’Œã‚’é‡è¦–ã™ã‚‹åŒ…æ‘‚çš„ãªæ„›',
          'å·½_é©å¿œæ€§': 'ç’°å¢ƒã«æŸ”è»Ÿã«é©å¿œã—ã€èª¿å’Œã‚’ä¿ã¤ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦š',
          'é›¢_è¡¨ç¾æ€§': 'è‡ªå·±ã‚’è¡¨ç¾ã—ã€å‘¨å›²ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ç™ºä¿¡åŠ›',
          'å…Œ_èª¿å’Œæ€§': 'äººã¨ã®ç¹‹ãŒã‚Šã‚’å¤§åˆ‡ã«ã—ã€å–œã³ã‚’åˆ†ã‹ã¡åˆã†åŠ›'
        };
        return insights[dimension] || 'å¤šé¢çš„ãªä¾¡å€¤è¦³ã®èª¿å’Œ';
      }

      /**
       * T104: Engine OSæˆ¦ç•¥çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ
       */
      generateEngineKeywords(hexagramId) {
        const keywordMap = {
          1: ['ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—', 'å‰µé€ åŠ›', 'å…ˆé§†æ€§', 'å¼·ã„æ„å¿—'],
          2: ['åŒ…å®¹åŠ›', 'å®‰å®šæ€§', 'å—å®¹æ€§', 'è‚²æˆåŠ›'],
          3: ['æˆé•·åŠ›', 'å›°é›£å…‹æœ', 'æ–°è¦é–‹æ‹“', 'å¿è€åŠ›'],
          4: ['å­¦ç¿’åŠ›', 'æˆé•·æ„æ¬²', 'ç´ ç›´ã•', 'å¸ååŠ›'],
          5: ['å¿è€åŠ›', 'ã‚¿ã‚¤ãƒŸãƒ³ã‚°', 'æº–å‚™åŠ›', 'æ´å¯ŸåŠ›'],
          29: ['æ·±ã„æ´å¯Ÿ', 'å±æ©Ÿç®¡ç†', 'é›†ä¸­åŠ›', 'å…‹æœåŠ›'],
          30: ['è¡¨ç¾åŠ›', 'çŸ¥æ€§', 'ç¾çš„æ„Ÿè¦š', 'æ˜å¿«æ€§'],
          51: ['ç¬ç™ºåŠ›', 'å¤‰åŒ–å¯¾å¿œ', 'æ±ºæ–­åŠ›', 'é©æ–°æ€§'],
          52: ['å®‰å®šå¿—å‘', 'æ·±æ…®', 'é›†ä¸­åŠ›', 'ä¸å‹•å¿ƒ'],
          63: ['å®ŒæˆåŠ›', 'èª¿å’Œ', 'ãƒãƒ©ãƒ³ã‚¹', 'é”æˆåŠ›'],
          64: ['å¯èƒ½æ€§', 'å‰µé€ æ€§', 'ç™ºå±•æ€§', 'æœªæ¥å¿—å‘']
        };

        return keywordMap[hexagramId] || ['å¤šæ§˜æ€§', 'çµ±åˆåŠ›', 'é©å¿œåŠ›', 'ãƒãƒ©ãƒ³ã‚¹'];
      }

      /**
       * T104: ç¤¾ä¼šçš„ã‚¹ã‚¿ã‚¤ãƒ«èª¬æ˜å–å¾—
       */
      getSocialStyleDescription(socialStyle) {
        const descriptions = {
          'ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–å‹': 'ç©æ¥µçš„ã«å ´ã‚’ãƒªãƒ¼ãƒ‰ã—ã€æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ææ¡ˆã™ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒ ã®æ–¹å‘æ€§ã‚’ç¤ºã—ã€ä»–è€…ã‚’å·»ãè¾¼ã‚€åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚',
          'ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼å‹': 'èª¿å’Œã‚’é‡è¦–ã—ã€ãƒ¡ãƒ³ãƒãƒ¼é–“ã®é–¢ä¿‚æ€§ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚å¯¾ç«‹ã‚’é¿ã‘ã€çš†ãŒæ°—æŒã¡ã‚ˆãå‚åŠ ã§ãã‚‹ç’°å¢ƒã¥ãã‚Šã‚’å¿ƒãŒã‘ã¾ã™ã€‚',
          'ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚«ãƒ«å‹': 'è«–ç†çš„ã§åˆ†æçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å–ã‚Šã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚„äº‹å®Ÿã«åŸºã¥ã„ã¦åˆ¤æ–­ã—ã€æ…é‡ã«è¡Œå‹•ã™ã‚‹ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚',
          'ã‚µãƒãƒ¼ãƒ†ã‚£ãƒ–å‹': 'ä»–è€…ã‚’æ”¯æ´ã—ã€ãƒãƒ¼ãƒ ã®ç¸ã®ä¸‹ã®åŠ›æŒã¡ã¨ã—ã¦è²¢çŒ®ã—ã¾ã™ã€‚å”åŠ›çš„ã§ä¿¡é ¼ã•ã‚Œã‚‹å­˜åœ¨ã¨ã—ã¦æ´»å‹•ã—ã¾ã™ã€‚',
          'ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«å‹': 'çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰ãˆã‚‹é©å¿œåŠ›ãŒã‚ã‚Šã¾ã™ã€‚å¤šæ§˜ãªå ´é¢ã§åŠ¹æœçš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚Œã¾ã™ã€‚'
        };

        return descriptions[socialStyle] || 'å€‹æ€§çš„ã§å¤šé¢çš„ãªç¤¾ä¼šçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æŒã£ã¦ã„ã¾ã™ã€‚çŠ¶æ³ã«å¿œã˜ã¦æ§˜ã€…ãªé¢ã‚’ç™ºæ®ã§ãã‚‹ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚';
      }

      /**
       * T104: é–¢ä¿‚æ€§ã‚¹ã‚³ã‚¢è¨ˆç®—
       */
      calculateRelationshipScore(interfaceOS, type) {
        const baseScore = 70;
        const socialStyle = interfaceOS.socialStyle || '';

        switch(type) {
          case 'teamwork':
            if (socialStyle.includes('ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–')) return Math.min(90, baseScore + 15);
            if (socialStyle.includes('ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼')) return Math.min(95, baseScore + 20);
            if (socialStyle.includes('ã‚µãƒãƒ¼ãƒ†ã‚£ãƒ–')) return Math.min(92, baseScore + 18);
            return baseScore + 5;

          case 'expression':
            if (socialStyle.includes('ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–')) return Math.min(95, baseScore + 20);
            if (socialStyle.includes('ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚«ãƒ«')) return Math.min(85, baseScore + 10);
            if (socialStyle.includes('ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«')) return Math.min(88, baseScore + 13);
            return baseScore + 8;

          case 'cooperation':
            if (socialStyle.includes('ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼')) return Math.min(93, baseScore + 18);
            if (socialStyle.includes('ã‚µãƒãƒ¼ãƒ†ã‚£ãƒ–')) return Math.min(95, baseScore + 20);
            if (socialStyle.includes('ãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«')) return Math.min(90, baseScore + 15);
            return baseScore + 7;

          default:
            return baseScore;
        }
      }

      /**
       * T104: ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹è§£é‡ˆå–å¾—
       */
      getResilienceInterpretation(resilience) {
        if (resilience >= 85) {
          return 'ã¨ã¦ã‚‚é«˜ã„ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚å›°é›£ãªçŠ¶æ³ã§ã‚‚å†·é™ã«å¯¾å‡¦ã—ã€ã‚€ã—ã‚æˆé•·ã®æ©Ÿä¼šã¨ã—ã¦æ‰ãˆã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚';
        } else if (resilience >= 70) {
          return 'é©åº¦ãªãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚å¤šãã®å›°é›£ã«å¯¾å‡¦ã§ãã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ãŒã€æ™‚ã«ã¯ä¼‘æ¯ã‚‚å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚';
        } else if (resilience >= 55) {
          return 'æ¨™æº–çš„ãªãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã™ã€‚æ—¥å¸¸çš„ãªã‚¹ãƒˆãƒ¬ã‚¹ã«ã¯å¯¾å‡¦ã§ãã¾ã™ãŒã€å¤§ããªå¤‰åŒ–ã«ã¯æº–å‚™ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚';
        } else {
          return 'ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã¨æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚';
        }
      }

      /**
       * T104: é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æ
       */
      parseDefensePatterns(patternsText) {
        // é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å€‹åˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆ†è§£
        const patterns = patternsText.split('ã€').map(p => p.trim()).filter(p => p.length > 0);
        return patterns.length > 0 ? patterns : ['åˆ†æçš„å¯¾å‡¦', 'è¨ˆç”»çš„è¡Œå‹•'];
      }

      /**
       * T104: é˜²å¾¡ã‚¢ã‚¤ã‚³ãƒ³å–å¾—
       */
      getDefenseIcon(pattern) {
        const icons = {
          'åˆ†æçš„å¯¾å‡¦': 'ğŸ§ ',
          'è¨ˆç”»çš„è¡Œå‹•': 'ğŸ“‹',
          'æ„Ÿæƒ…åˆ¶å¾¡': 'ğŸ§˜',
          'ç¤¾ä¼šçš„æ”¯æ´': 'ğŸ¤',
          'å•é¡Œè§£æ±º': 'ğŸ”',
          'å›é¿è¡Œå‹•': 'ğŸ›¡ï¸',
          'ç©æ¥µçš„è¡Œå‹•': 'âš¡',
          'ä¼‘æ¯å›å¾©': 'ğŸŒ±'
        };
        return icons[pattern] || 'ğŸ”§';
      }

      /**
       * T104: é˜²å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ èª¬æ˜
       */
      getDefenseDescription(pattern) {
        const descriptions = {
          'åˆ†æçš„å¯¾å‡¦': 'å•é¡Œã‚’å®¢è¦³çš„ã«åˆ†æã—ã€è«–ç†çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§è§£æ±ºç­–ã‚’è¦‹ã¤ã‘ã¾ã™',
          'è¨ˆç”»çš„è¡Œå‹•': 'äº‹å‰ã«è¨ˆç”»ã‚’ç«‹ã¦ã€æ®µéšçš„ã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã™ã‚‹æ–¹æ³•ã‚’å¥½ã¿ã¾ã™',
          'æ„Ÿæƒ…åˆ¶å¾¡': 'æ„Ÿæƒ…ã‚’é©åˆ‡ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã€å†·é™ãªåˆ¤æ–­ã‚’ç¶­æŒã—ã¾ã™',
          'ç¤¾ä¼šçš„æ”¯æ´': 'ä¿¡é ¼ã§ãã‚‹äººã‹ã‚‰ã®æ”¯æ´ã‚’æ±‚ã‚ã€å”åŠ›ã—ã¦å•é¡Œã«å–ã‚Šçµ„ã¿ã¾ã™',
          'å•é¡Œè§£æ±º': 'å…·ä½“çš„ãªè§£æ±ºç­–ã«é›†ä¸­ã—ã€è¡Œå‹•ã‚’é€šã˜ã¦å›°é›£ã‚’å…‹æœã—ã¾ã™',
          'å›é¿è¡Œå‹•': 'ä¸€æ™‚çš„ã«è·é›¢ã‚’ç½®ãã€çŠ¶æ³ã‚’å®¢è¦³è¦–ã™ã‚‹æ™‚é–“ã‚’ç¢ºä¿ã—ã¾ã™',
          'ç©æ¥µçš„è¡Œå‹•': 'ç©æ¥µçš„ã«è¡Œå‹•ã‚’èµ·ã“ã—ã€å¤‰åŒ–ã‚’é€šã˜ã¦çŠ¶æ³ã‚’æ”¹å–„ã—ã¾ã™',
          'ä¼‘æ¯å›å¾©': 'é©åˆ‡ãªä¼‘æ¯ã‚’å–ã‚Šã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å›å¾©ã•ã›ã‚‹ã“ã¨ã‚’é‡è¦–ã—ã¾ã™'
        };
        return descriptions[pattern] || 'ãã®äººã‚‰ã—ã„æ–¹æ³•ã§å›°é›£ã«å¯¾å‡¦ã—ã¾ã™';
      }

      /**
       * T104: ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦æ³•ç”Ÿæˆ
       */
      generateStressResponses(safeModeOS) {
        const baseResponses = ['æ·±å‘¼å¸', 'æ•£æ­©', 'éŸ³æ¥½é‘‘è³', 'èª­æ›¸'];
        const resilience = safeModeOS.resilience || 70;

        if (resilience >= 80) {
          return [...baseResponses, 'ç‘æƒ³', 'é‹å‹•', 'å‰µä½œæ´»å‹•', 'äººã¨ã®å¯¾è©±'];
        } else if (resilience >= 65) {
          return [...baseResponses, 'æ¸©æ³‰', 'ãƒãƒƒã‚µãƒ¼ã‚¸', 'è‡ªç„¶æ•£ç­–'];
        } else {
          return [...baseResponses, 'ãƒ—ãƒ­ã®ç›¸è«‡', 'ãƒ¨ã‚¬', 'ã‚¢ãƒ­ãƒãƒ†ãƒ©ãƒ”ãƒ¼'];
        }
      }

      /**
       * T104: ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚¹ã‚³ã‚¢è¨ˆç®—
       */
      calculateIntegrationScore(results, type) {
        const engineScore = results.engineOS?.dominantDimensions?.[0]?.score || 75;
        const interfaceScore = 75; // Interface OSã®åŸºæœ¬ã‚¹ã‚³ã‚¢
        const safeModeScore = results.safeModeOS?.resilience || 70;

        switch(type) {
          case 'engine-interface':
            return Math.round((engineScore + interfaceScore) / 2 * 0.9);
          case 'interface-safe':
            return Math.round((interfaceScore + safeModeScore) / 2 * 0.85);
          case 'engine-safe':
            return Math.round((engineScore + safeModeScore) / 2 * 0.88);
          default:
            return 75;
        }
      }

      /**
       * T104: çµ±åˆæ´å¯Ÿãƒ†ã‚­ã‚¹ãƒˆå–å¾—
       */
      getIntegrationInsight(results, type) {
        const score = this.calculateIntegrationScore(results, type);

        const insights = {
          'engine-interface': score >= 80 
            ? 'ä¾¡å€¤è¦³ã¨ç¤¾ä¼šçš„è¡Œå‹•ãŒé«˜åº¦ã«çµ±åˆã•ã‚Œã¦ãŠã‚Šã€ä¸€è²«ã—ãŸè¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¤ºã—ã¾ã™'
            : 'ä¾¡å€¤è¦³ã¨ç¤¾ä¼šçš„è¡Œå‹•ã®é–“ã«èª¿æ•´ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚ã‚ˆã‚Šä¸€è²«æ€§ã®ã‚ã‚‹è¡¨ç¾ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†',
          'interface-safe': score >= 80
            ? 'ç¤¾ä¼šçš„æ´»å‹•ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ãŒãƒãƒ©ãƒ³ã‚¹ã‚ˆãæ©Ÿèƒ½ã—ã€æŒç¶šå¯èƒ½ãªé–¢ä¿‚æ€§ã‚’ç¯‰ã‘ã¾ã™'
            : 'ç¤¾ä¼šçš„è² è·ã¨å›å¾©ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ç›´ã™ã“ã¨ã§ã€ã‚ˆã‚Šå®‰å®šã—ãŸäººé–“é–¢ä¿‚ãŒæœŸå¾…ã§ãã¾ã™',
          'engine-safe': score >= 80
            ? 'æ ¸å¿ƒçš„ä¾¡å€¤è¦³ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ãŒèª¿å’Œã—ã€ã‚¹ãƒˆãƒ¬ã‚¹ä¸‹ã§ã‚‚ä¸€è²«ã—ãŸè‡ªåˆ†ã‚’ä¿ã¦ã¾ã™'
            : 'ä¾¡å€¤è¦³ã¨é˜²å¾¡åå¿œã®çµ±åˆã«ã‚ˆã‚Šã€ã‚ˆã‚Šå¼·ã„è‡ªå·±åŸºç›¤ã®æ§‹ç¯‰ãŒå¯èƒ½ã§ã™'
        };

        return insights[type] || 'å„ã‚·ã‚¹ãƒ†ãƒ ã®èª¿å’Œã«ã‚ˆã‚Šã€ã‚ˆã‚Šçµ±åˆã•ã‚ŒãŸäººæ ¼ã®ç™ºå±•ãŒæœŸå¾…ã•ã‚Œã¾ã™';
      }

      /**
       * T104: æˆ¦ç•¥çš„ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ç”Ÿæˆ
       */
      generateStrategicGuidance(results) {
        const engineHex = results.engineOS?.hexagramId || 1;
        const resilience = results.safeModeOS?.resilience || 70;
        
        let guidance = 'å‚è€ƒã¨ã—ã¦ã€ä»¥ä¸‹ã®æ´»ç”¨æ–¹å‘æ€§ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚';

        if (engineHex <= 16) {
          guidance += 'å‰µé€ çš„ãªé ˜åŸŸã§ã®æ´»å‹•ã«ç„¦ç‚¹ã‚’å½“ã¦ã€';
        } else if (engineHex <= 32) {
          guidance += 'èª¿å’Œã¨å”åŠ›ã‚’é‡è¦–ã—ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã€';
        } else if (engineHex <= 48) {
          guidance += 'å¤‰åŒ–ã¨é©å¿œã‚’æ„è­˜ã—ãŸæˆ¦ç•¥çš„è¡Œå‹•ã§ã€';
        } else {
          guidance += 'æ·±ã„æ´å¯Ÿã¨æŒç¶šçš„ãªæˆé•·ã«å‘ã‘ã¦ã€';
        }

        if (resilience >= 80) {
          guidance += 'é«˜ã„ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹åŠ›ã‚’æ´»ã‹ã—ã¦å›°é›£ãªæŒ‘æˆ¦ã«å–ã‚Šçµ„ã‚€ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚';
        } else if (resilience >= 65) {
          guidance += 'é©åº¦ãªæŒ‘æˆ¦ã¨ä¼‘æ¯ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ç™ºå±•ã—ã¦ã„ã‘ã‚‹ã§ã—ã‚‡ã†ã€‚';
        } else {
          guidance += 'ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã‚’é‡è¦–ã—ãªãŒã‚‰ç€å®Ÿãªæˆé•·ã‚’ç›®æŒ‡ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚';
        }

        return guidance;
      }

      // === ä»¥ä¸‹ã€è£œåŠ©é–¢æ•°ç¾¤ï¼ˆè©³ç´°å®Ÿè£…ç‰ˆï¼‰ ===
      
      /**
       * ä¾¡å€¤è¦³ã®æ ¸å¿ƒåˆ†æ
       */
      analyzeCoreValues(vector, hexagramId) {
        const topDimension = Object.entries(vector).sort(([,a], [,b]) => b - a)[0];
        const hexagramNames = this.getHexagramName(hexagramId);
        
        return `${topDimension[0]}ï¼ˆ${topDimension[1]}%ï¼‰ã‚’ä¸­æ ¸ã¨ã—ã€${hexagramNames}ã®æ€§è³ªã‚’æŒã¤ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ ã€‚å†…ãªã‚‹å‹•æ©Ÿã¯${this.getCoreValueInsight(topDimension[0])}ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚`;
      }

      getCoreValueInsight(dimension) {
        const insights = {
          'ä¹¾_å‰µé€ æ€§': 'æ–°ã—ã„å¯èƒ½æ€§ã‚’ç”Ÿã¿å‡ºã™å‰µé€ çš„ãªæŒ‘æˆ¦',
          'éœ‡_è¡Œå‹•æ€§': 'ç©æ¥µçš„ãªå®Ÿè¡Œã¨å¤‰åŒ–ã¸ã®å¯¾å¿œ',
          'å_æ¢æ±‚æ€§': 'æ·±ã„çœŸç†ã®æ¢æ±‚ã¨ç†è§£ã®è¿½æ±‚',
          'è‰®_å®‰å®šæ€§': 'ç¢ºå®Ÿæ€§ã¨æŒç¶šå¯èƒ½ãªåŸºç›¤ã¥ãã‚Š',
          'å¤_å—å®¹æ€§': 'ä»–è€…ã‚’åŒ…å®¹ã—æ”¯ãˆã‚‹åŒ…æ‘‚çš„ãªæ„›',
          'å·½_é©å¿œæ€§': 'çŠ¶æ³ã«å¿œã˜ãŸæŸ”è»Ÿãªå¯¾å¿œã¨èª¿å’Œ',
          'é›¢_è¡¨ç¾æ€§': 'è‡ªå·±è¡¨ç¾ã¨å‘¨å›²ã¸ã®å½±éŸ¿åŠ›ã®è¡Œä½¿',
          'å…Œ_èª¿å’Œæ€§': 'äººã¨ã®ç¹‹ãŒã‚Šã¨å–œã³ã®å…±æœ‰'
        };
        return insights[dimension] || 'å¤šé¢çš„ãªä¾¡å€¤è¦³ã®çµ±åˆ';
      }
      
      /**
       * ã‚·ãƒŠãƒªã‚ªè¡Œå‹•åˆ†æ
       */
      analyzeScenarioBehavior(answers) {
        const behaviorPatterns = [];
        
        // ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚¹ã‚¿ã‚¤ãƒ«åˆ†æï¼ˆQ25ï¼‰
        const q25Style = this.analyzeLeadershipStyle(answers['q25']);
        behaviorPatterns.push(q25Style);
        
        // å±æ©Ÿå¯¾å¿œã‚¹ã‚¿ã‚¤ãƒ«åˆ†æï¼ˆQ26ï¼‰
        const q26Style = this.analyzeCrisisResponse(answers['q26']);
        behaviorPatterns.push(q26Style);
        
        // é©å¿œã‚¹ã‚¿ã‚¤ãƒ«åˆ†æï¼ˆQ27ï¼‰
        const q27Style = this.analyzeAdaptationStyle(answers['q27']);
        behaviorPatterns.push(q27Style);
        
        return behaviorPatterns.join('ã€');
      }
      
      analyzeLeadershipStyle(answer) {
        const styles = {
          'A': 'åˆæ„å½¢æˆå‹ãƒªãƒ¼ãƒ€ãƒ¼',
          'B': 'ãƒ“ã‚¸ãƒ§ãƒ³æç¤ºå‹ãƒªãƒ¼ãƒ€ãƒ¼', 
          'C': 'åˆ†æãƒ»æœ€é©åŒ–å‹ãƒªãƒ¼ãƒ€ãƒ¼',
          'D': 'å®Ÿç¸¾é‡è¦–å‹ãƒªãƒ¼ãƒ€ãƒ¼',
          'E': 'æ®µéšçš„æˆé•·å‹ãƒªãƒ¼ãƒ€ãƒ¼'
        };
        return styles[answer] || 'å¤šæ§˜ãªãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—';
      }
      
      analyzeCrisisResponse(answer) {
        const responses = {
          'A': 'å³èˆˆå¯¾å¿œå‹',
          'B': 'é€æ˜æ€§é‡è¦–å‹',
          'C': 'ãƒãƒ¼ãƒ å”èª¿å‹',
          'D': 'æ ¹æœ¬åˆ†æå‹',
          'E': 'æ…é‡å®Œç’§å‹'
        };
        return responses[answer] || 'çŠ¶æ³é©å¿œå‹';
      }
      
      analyzeAdaptationStyle(answer) {
        const styles = {
          'A': 'ç©æ¥µæŒ‘æˆ¦å‹',
          'B': 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é‡è¦–å‹',
          'C': 'è¦³å¯Ÿå­¦ç¿’å‹',
          'D': 'çµŒé¨“æ´»ç”¨å‹',
          'E': 'æŸ”è»Ÿèª¿æ•´å‹'
        };
        return styles[answer] || 'å¤šé¢é©å¿œå‹';
      }
      
      /**
       * ç¤¾ä¼šçš„ã‚¹ã‚¿ã‚¤ãƒ«ç‰¹å®š
       */
      determineSocialStyle(patterns) {
        if (patterns.includes('ãƒ“ã‚¸ãƒ§ãƒ³æç¤ºå‹') || patterns.includes('ç©æ¥µæŒ‘æˆ¦å‹')) {
          return 'ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–å‹ï¼ˆä¸»å°çš„ãƒ»é©æ–°çš„ï¼‰';
        } else if (patterns.includes('åˆæ„å½¢æˆå‹') || patterns.includes('ãƒãƒ¼ãƒ å”èª¿å‹')) {
          return 'ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼å‹ï¼ˆå”èª¿çš„ãƒ»çµ±åˆçš„ï¼‰';
        } else if (patterns.includes('åˆ†æãƒ»æœ€é©åŒ–å‹') || patterns.includes('è¦³å¯Ÿå­¦ç¿’å‹')) {
          return 'ã‚¢ãƒŠãƒªãƒ†ã‚£ãƒƒã‚¯å‹ï¼ˆåˆ†æçš„ãƒ»æ…é‡ï¼‰';
        } else if (patterns.includes('å®Ÿç¸¾é‡è¦–å‹') || patterns.includes('çµŒé¨“æ´»ç”¨å‹')) {
          return 'ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚«ãƒ«å‹ï¼ˆå®Ÿç”¨çš„ãƒ»ç€å®Ÿï¼‰';
        }
        return 'ã‚¢ãƒ€ãƒ—ãƒ†ã‚£ãƒ–å‹ï¼ˆçŠ¶æ³é©å¿œçš„ï¼‰';
      }
      
      /**
       * é–¢ä¿‚æ€§ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
       */
      analyzeRelationshipPatterns(patterns) {
        if (patterns.includes('ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é‡è¦–å‹') || patterns.includes('é€æ˜æ€§é‡è¦–å‹')) {
          return 'ã‚ªãƒ¼ãƒ—ãƒ³ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æŒ‡å‘';
        } else if (patterns.includes('ãƒãƒ¼ãƒ å”èª¿å‹') || patterns.includes('åˆæ„å½¢æˆå‹')) {
          return 'å”åƒãƒ»åˆæ„å½¢æˆæŒ‡å‘';
        } else if (patterns.includes('ãƒ“ã‚¸ãƒ§ãƒ³æç¤ºå‹') || patterns.includes('ç©æ¥µæŒ‘æˆ¦å‹')) {
          return 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãƒ»å½±éŸ¿åŠ›æŒ‡å‘';
        }
        return 'ãƒãƒ©ãƒ³ã‚¹å‹é–¢ä¿‚æ§‹ç¯‰';
      }
      
      /**
       * ã‚·ãƒŠãƒªã‚ªæ´å¯Ÿ
       */
      getScenarioInsights(answers) {
        const insights = [];
        
        if (answers['q28']) {
          insights.push(`æ„æ€æ±ºå®šã§ã¯${this.getDecisionStyle(answers['q28'])}ã‚’é‡è¦–`);
        }
        if (answers['q29']) {
          insights.push(`ãƒãƒ¼ãƒ èª²é¡Œã§ã¯${this.getTeamApproach(answers['q29'])}ã§ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ`);
        }
        if (answers['q30']) {
          insights.push(`äººç”Ÿã®è»¢æ©Ÿã§ã¯${this.getLifeValues(answers['q30'])}ã‚’å¤§åˆ‡ã«ã™ã‚‹`);
        }
        
        return insights.join('ã€');
      }
      
      getDecisionStyle(answer) {
        const styles = {
          'A': 'ç›´æ„Ÿã¨è¿…é€Ÿæ€§',
          'B': 'ä»–è€…ã®æ„è¦‹',
          'C': 'æƒ…å ±åé›†ã¨åˆ†æ',
          'D': 'ãƒªã‚¹ã‚¯æœ€å°åŒ–',
          'E': 'è¤‡æ•°ã‚·ãƒŠãƒªã‚ªã®æº–å‚™'
        };
        return styles[answer] || 'çŠ¶æ³åˆ¤æ–­';
      }
      
      getTeamApproach(answer) {
        const approaches = {
          'A': 'æ–°ã—ã„è¦–ç‚¹ã¨é¼“èˆ',
          'B': 'æ”¯æ´ã¨å¯„ã‚Šæ·»ã„',
          'C': 'å®¢è¦³åˆ†æã¨æ”¹å–„',
          'D': 'è²¬ä»»ã¨ç¢ºå®Ÿæ€§',
          'E': 'æŸ”è»Ÿãªæˆ¦ç•¥èª¿æ•´'
        };
        return approaches[answer] || 'å¤šé¢çš„å¯¾å¿œ';
      }
      
      getLifeValues(answer) {
        const values = {
          'A': 'æŒ‘æˆ¦ã¨æˆé•·',
          'B': 'çµ†ã¨ã¤ãªãŒã‚Š',
          'C': 'æ¢æ±‚ã¨ç†è§£',
          'D': 'å®‰å®šã¨ç¢ºå®Ÿæ€§',
          'E': 'é©å¿œã¨æŸ”è»Ÿæ€§'
        };
        return values[answer] || 'å¤šæ§˜ãªä¾¡å€¤';
      }
      
      /**
       * ã‚¹ãƒˆãƒ¬ã‚¹åå¿œåˆ†æ
       */
      analyzeStressResponses() {
        // Q5ï¼ˆå›°é›£ãªçŠ¶æ³ã§ã®ç¬¬ä¸€åå¿œï¼‰ã¨Q26ï¼ˆæŠ€è¡“å•é¡Œã¸ã®å¯¾å¿œï¼‰ã‹ã‚‰æ¨å®š
        const q5Answer = this.answers['q5'];
        const q26Answer = this.answers['q26'];
        
        const stressPatterns = [];
        
        if (q5Answer === 'A' || q26Answer === 'A') {
          stressPatterns.push('å³åº§ã®å•é¡Œè§£æ±ºè¡Œå‹•');
        }
        if (q5Answer === 'B' || q26Answer === 'D') {
          stressPatterns.push('å†·é™ãªåˆ†æã¨åŸå› ç‰¹å®š');
        }
        if (q5Answer === 'C' || q26Answer === 'C') {
          stressPatterns.push('ä»–è€…ã¨ã®å”åŠ›ã¨ç›¸è«‡');
        }
        if (q5Answer === 'D' || q26Answer === 'E') {
          stressPatterns.push('æ…é‡ãªçŠ¶æ³è¦³å¯Ÿã¨å¾…æ©Ÿ');
        }
        if (q5Answer === 'E') {
          stressPatterns.push('æŸ”è»Ÿãªå¯¾å¿œç­–ã®æ¨¡ç´¢');
        }
        
        return stressPatterns.join('ã€') || 'å¤šé¢çš„ãªã‚¹ãƒˆãƒ¬ã‚¹å¯¾å¿œ';
      }
      
      /**
       * é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ç‰¹å®š
       */
      identifyDefensePatterns(vector) {
        const topDimensions = Object.entries(vector)
          .sort(([,a], [,b]) => b - a)
          .slice(0, 2)
          .map(([dim]) => dim);
        
        const defenseMap = {
          'ä¹¾_å‰µé€ æ€§': 'å‰µé€ çš„å•é¡Œè§£æ±ºã«ã‚ˆã‚‹å›é¿',
          'éœ‡_è¡Œå‹•æ€§': 'ç©æ¥µçš„è¡Œå‹•ã«ã‚ˆã‚‹çŠ¶æ³æ‰“é–‹',
          'å_æ¢æ±‚æ€§': 'æ·±ã„åˆ†æã«ã‚ˆã‚‹ç†è§£ã¨å¯¾ç­–',
          'è‰®_å®‰å®šæ€§': 'æ…é‡ãªæº–å‚™ã¨ç¢ºå®Ÿãªæ‰‹æ®µ',
          'å¤_å—å®¹æ€§': 'å—å®¹ã¨åŒ…å®¹ã«ã‚ˆã‚‹ç·©å’Œ',
          'å·½_é©å¿œæ€§': 'æŸ”è»Ÿãªé©å¿œã«ã‚ˆã‚‹èª¿å’Œ',
          'é›¢_è¡¨ç¾æ€§': 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹è§£æ±º',
          'å…Œ_èª¿å’Œæ€§': 'äººé–“é–¢ä¿‚ã«ã‚ˆã‚‹æ”¯æ´ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯'
        };
        
        const primaryDefense = defenseMap[topDimensions[0]];
        const secondaryDefense = defenseMap[topDimensions[1]];
        
        return `${primaryDefense}ã‚’ä¸»è»¸ã¨ã—ã€${secondaryDefense}ã§ã‚µãƒãƒ¼ãƒˆ`;
      }
      
      /**
       * ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡Œå‹•åˆ†æ
       */
      analyzeFallbackBehaviors(responses) {
        if (responses.includes('å³åº§ã®å•é¡Œè§£æ±ºè¡Œå‹•')) {
          return 'è¿…é€Ÿãªä»£æ›¿æ¡ˆå®Ÿè¡Œ';
        } else if (responses.includes('å†·é™ãªåˆ†æã¨åŸå› ç‰¹å®š')) {
          return 'æƒ…å ±åé›†ã¨è¨ˆç”»çš„å¯¾å¿œ';
        } else if (responses.includes('ä»–è€…ã¨ã®å”åŠ›ã¨ç›¸è«‡')) {
          return 'ã‚µãƒãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ´»ç”¨';
        } else if (responses.includes('æ…é‡ãªçŠ¶æ³è¦³å¯Ÿã¨å¾…æ©Ÿ')) {
          return 'ä¿å®ˆçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨å®‰å…¨ç¢ºä¿';
        }
        return 'çŠ¶æ³é©å¿œçš„ãªè¡Œå‹•é¸æŠ';
      }
      
      /**
       * å›å¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ç‰¹å®š
       */
      identifyRecoveryPatterns(vector, responses) {
        const resilientDimensions = ['ä¹¾_å‰µé€ æ€§', 'éœ‡_è¡Œå‹•æ€§', 'å·½_é©å¿œæ€§', 'å…Œ_èª¿å’Œæ€§'];
        const resilientScore = resilientDimensions.reduce((sum, dim) => sum + (vector[dim] || 0), 0);
        
        if (resilientScore > 120) {
          return 'é«˜ã„å›å¾©åŠ›ã¨æˆé•·æŒ‡å‘';
        } else if (resilientScore > 80) {
          return 'ä¸­ç¨‹åº¦ã®å›å¾©åŠ›ã¨å­¦ç¿’èƒ½åŠ›';
        } else {
          return 'å®‰å®šå¿—å‘ã®ç€å®Ÿãªå›å¾©';
        }
      }
      
      /**
       * ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹æŒ‡æ•°è¨ˆç®—
       */
      calculateResilienceScore(vector) {
        // ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹é–¢é€£æ¬¡å…ƒã®é‡ã¿ä»˜ã‘è¨ˆç®—
        const weights = {
          'ä¹¾_å‰µé€ æ€§': 0.2,   // å‰µé€ çš„å•é¡Œè§£æ±º
          'éœ‡_è¡Œå‹•æ€§': 0.25,  // ç©æ¥µçš„å¯¾å¿œ
          'å_æ¢æ±‚æ€§': 0.1,   // å­¦ç¿’ã¨ç†è§£
          'è‰®_å®‰å®šæ€§': 0.05,  // åŸºç›¤ç¶­æŒï¼ˆä½é‡é‡ï¼‰
          'å¤_å—å®¹æ€§': 0.1,   // å—å®¹èƒ½åŠ›
          'å·½_é©å¿œæ€§': 0.2,   // æŸ”è»Ÿæ€§
          'é›¢_è¡¨ç¾æ€§': 0.05,  // è¡¨ç¾åŠ›ï¼ˆä½é‡é‡ï¼‰
          'å…Œ_èª¿å’Œæ€§': 0.15   // äººé–“é–¢ä¿‚
        };
        
        let resilience = 0;
        Object.entries(vector).forEach(([dimension, score]) => {
          resilience += score * (weights[dimension] || 0);
        });
        
        // 60-95ã®ç¯„å›²ã«æ­£è¦åŒ–
        return Math.max(60, Math.min(95, Math.round(resilience * 0.35 + 60)));
      }
      
      /**
       * HaQeiçµ±åˆè¦‹è§£ç”Ÿæˆ
       */
      generateHaQeiInsights(engineOS, interfaceOS, safeModeOS) {
        const insights = [];
        
        // Engine OSã®ç‰¹å¾´
        const engineInsight = `ä¾¡å€¤è¦³ã®æ ¸å¿ƒï¼ˆEngine OSï¼‰ã¯ã€Œ${this.getHexagramName(engineOS.hexagramId)}ã€ã®æ€§è³ªã‚’æŒã¡`;
        insights.push(engineInsight);
        
        // Interface OSã®ç‰¹å¾´
        const interfaceInsight = `ç¤¾ä¼šçš„å ´é¢ï¼ˆInterface OSï¼‰ã§ã¯ã€Œ${interfaceOS.socialStyle}ã€ã¨ã—ã¦æŒ¯ã‚‹èˆã„`;
        insights.push(interfaceInsight);
        
        // Safe Mode OSã®ç‰¹å¾´
        const safeModeInsight = `å›°é›£æ™‚ï¼ˆSafe Mode OSï¼‰ã¯ã€Œ${safeModeOS.defensePatterns}ã€ã§å¯¾å‡¦ã™ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™`;
        insights.push(safeModeInsight);
        
        // HaQeiå“²å­¦çš„è£œè¶³
        const philosophy = `ã“ã‚Œã‚‰3ã¤ã®ã‚·ã‚¹ãƒ†ãƒ ã¯çŠ¶æ³ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã€ã‚ãªãŸã®ã€Œåˆ†äººã€ã¨ã—ã¦ã®å¤šæ§˜ãªå´é¢ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã©ã®ã‚·ã‚¹ãƒ†ãƒ ãŒå„ªã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã¯ãªãã€ãã‚Œãã‚ŒãŒç•°ãªã‚‹ä¾¡å€¤ã‚’æŒã¤ã‚‚ã®ã¨ã—ã¦ã€å‚è€ƒã«ãŠå½¹ç«‹ã¦ãã ã•ã„ã€‚`;
        
        return insights.join('ã€') + 'ã€‚' + philosophy;
      }
      
      /**
       * æˆ¦ç•¥çš„æ´»ç”¨ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ç”Ÿæˆ
       */
      generateStrategicGuidance(hexagramId, vector) {
        const hexagramName = this.getHexagramName(hexagramId);
        const topDimension = Object.entries(vector).sort(([,a], [,b]) => b - a)[0][0];
        
        const strategicAdvice = {
          1: 'å‰µé€ çš„ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã€æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„é©æ–°çš„ãªå–ã‚Šçµ„ã¿ã§åŠ›ã‚’ç™ºæ®',
          2: 'æ”¯æ´ã¨è‚²æˆã«é‡ç‚¹ã‚’ç½®ãã€ãƒãƒ¼ãƒ ã®ã‚µãƒãƒ¼ãƒˆå½¹ã¨ã—ã¦çµ„ç¹”ã«è²¢çŒ®',
          // ... ä»–ã®å¦ã«ã¤ã„ã¦ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼ˆè¦å®Ÿè£…ï¼‰
        };
        
        const dimensionAdvice = {
          'ä¹¾_å‰µé€ æ€§': 'æ–°è¦äº‹æ¥­ã€ä¼ç”»ç«‹æ¡ˆã€ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³é ˜åŸŸã§ã®æ´»ç”¨',
          'éœ‡_è¡Œå‹•æ€§': 'å®Ÿè¡Œè²¬ä»»è€…ã€å¤‰é©æ¨é€²ã€ç·Šæ€¥æ™‚å¯¾å¿œã§ã®æ´»ç”¨',
          'å_æ¢æ±‚æ€§': 'R&Dã€åˆ†ææ¥­å‹™ã€ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°åˆ†é‡ã§ã®æ´»ç”¨',
          'è‰®_å®‰å®šæ€§': 'å“è³ªç®¡ç†ã€ãƒªã‚¹ã‚¯ç®¡ç†ã€åŸºç›¤æ•´å‚™ã§ã®æ´»ç”¨',
          'å¤_å—å®¹æ€§': 'HRã€ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆã€ãƒãƒ¼ãƒ èª¿æ•´ã§ã®æ´»ç”¨',
          'å·½_é©å¿œæ€§': 'å–¶æ¥­ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆã€æ–‡åŒ–æ©‹æ¸¡ã—ã§ã®æ´»ç”¨',
          'é›¢_è¡¨ç¾æ€§': 'ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã€åºƒå ±ã€æ•™è‚²ãƒ»ç ”ä¿®ã§ã®æ´»ç”¨',
          'å…Œ_èª¿å’Œæ€§': 'ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€é¡§å®¢é–¢ä¿‚ã€ç¤¾å†…èª¿æ•´ã§ã®æ´»ç”¨'
        };
        
        return `${hexagramName}ã®ç‰¹æ€§ã‚’æ´»ã‹ã—ã€ç‰¹ã«${dimensionAdvice[topDimension]}ã§å¼·ã¿ã‚’ç™ºæ®ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`;
      }
      
      /**
       * ã‚·ã‚¹ãƒ†ãƒ é–“ç›¸äº’ä½œç”¨åˆ†æ
       */
      analyzeSystemInteractions(engineOS, interfaceOS, safeModeOS) {
        const interactions = [];
        
        // Engine-Interfaceç›¸äº’ä½œç”¨
        interactions.push(`ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ ã¨ç¤¾ä¼šçš„ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œ${this.analyzeEngineInterfaceAlignment(engineOS, interfaceOS)}ã€ã®é–¢ä¿‚æ€§`);
        
        // Interface-SafeModeç›¸äº’ä½œç”¨
        interactions.push(`ç¤¾ä¼šçš„ã‚·ã‚¹ãƒ†ãƒ ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œ${this.analyzeInterfaceSafeModeBalance(interfaceOS, safeModeOS)}ã€ã§ãƒãƒ©ãƒ³ã‚¹`);
        
        // Engine-SafeModeç›¸äº’ä½œç”¨
        interactions.push(`ä¾¡å€¤è¦³ã‚·ã‚¹ãƒ†ãƒ ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œ${this.analyzeEngineSafeModeConsistency(engineOS, safeModeOS)}ã€ã®ä¸€è²«æ€§`);
        
        return interactions.join('ã€') + 'ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚';
      }
      
      analyzeEngineInterfaceAlignment(engineOS, interfaceOS) {
        // ä¾¡å€¤è¦³ã¨ç¤¾ä¼šçš„è¡¨ç¾ã®æ•´åˆæ€§åˆ†æ
        if (interfaceOS.socialStyle.includes('ã‚¤ãƒ‹ã‚·ã‚¢ãƒ†ã‚£ãƒ–å‹')) {
          return 'å†…ãªã‚‹å‰µé€ æ€§ãŒå¤–å‘çš„ãªè¡¨ç¾ã¨èª¿å’Œ';
        } else if (interfaceOS.socialStyle.includes('ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼å‹')) {
          return 'å”èª¿çš„ä¾¡å€¤è¦³ãŒç¤¾ä¼šæ€§ã«åæ˜ ';
        }
        return 'å¤šé¢çš„ãªä¾¡å€¤è¦³ãŒæŸ”è»Ÿã«è¡¨ç¾';
      }
      
      analyzeInterfaceSafeModeBalance(interfaceOS, safeModeOS) {
        // ç¤¾ä¼šçš„è¡Œå‹•ã¨é˜²å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®ãƒãƒ©ãƒ³ã‚¹
        if (safeModeOS.resilience > 80) {
          return 'ç©æ¥µçš„ãªç¤¾ä¼šå‚åŠ ã¨é«˜ã„å›å¾©åŠ›ã§ç›¸ä¹—åŠ¹æœ';
        } else if (safeModeOS.resilience > 65) {
          return 'é©åº¦ãªç¤¾ä¼šæ€§ã¨å®‰å®šã—ãŸé˜²å¾¡åŠ›ã§å‡è¡¡';
        }
        return 'æ…é‡ãªç¤¾ä¼šå‚åŠ ã¨ç¢ºå®Ÿãªé˜²å¾¡ã§å®‰å…¨é‡è¦–';
      }
      
      analyzeEngineSafeModeConsistency(engineOS, safeModeOS) {
        // ä¾¡å€¤è¦³ã¨é˜²å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®ä¸€è²«æ€§
        const engineTop = engineOS.dominantDimensions[0].dimension;
        
        if (engineTop.includes('å‰µé€ æ€§') || engineTop.includes('è¡Œå‹•æ€§')) {
          return 'æŒ‘æˆ¦çš„ä¾¡å€¤è¦³ã¨ç©æ¥µçš„é˜²å¾¡ã§æ”»æ’ƒå‹';
        } else if (engineTop.includes('å®‰å®šæ€§') || engineTop.includes('å—å®¹æ€§')) {
          return 'å®‰å®šå¿—å‘ä¾¡å€¤è¦³ã¨æ…é‡é˜²å¾¡ã§å®ˆå‚™å‹';
        }
        return 'å¤šæ§˜ãªä¾¡å€¤è¦³ã¨æŸ”è»Ÿé˜²å¾¡ã§ãƒãƒ©ãƒ³ã‚¹å‹';
      }

      /**
       * 8æ¬¡å…ƒã®ãƒ©ãƒ™ãƒ«å¤‰æ›ï¼ˆUltraAnalysisEngineé€£æºç”¨ï¼‰
       */
      getDimensionLabel(dimension) {
        const labels = {
          creativity: 'å‰µé€ æ€§',
          action: 'è¡Œå‹•æ€§', 
          exploration: 'æ¢æ±‚æ€§',
          stability: 'å®‰å®šæ€§',
          acceptance: 'å—å®¹æ€§',
          adaptation: 'é©å¿œæ€§',
          expression: 'è¡¨ç¾æ€§',
          harmony: 'èª¿å’Œæ€§'
        };
        return labels[dimension] || dimension;
      }

      /**
       * é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ©ãƒ™ãƒ«å¤‰æ›ï¼ˆUltraAnalysisEngineé€£æºç”¨ï¼‰
       */
      getDefensePatternLabel(pattern) {
        const labels = {
          avoidance: 'å›é¿å‹',
          confrontation: 'å¯¾å³™å‹', 
          adaptation: 'é©å¿œå‹',
          support: 'æ”¯æ´è¦è«‹å‹'
        };
        return labels[pattern] || pattern;
      }
    }
    
    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
    /**
     * UltraAnalysisEngine - Triple OSåˆ†æã‚¨ãƒ³ã‚¸ãƒ³
     * HaQeiå“²å­¦ã«åŸºã¥ã3ã¤ã®OSï¼ˆEngine/Interface/Safe Modeï¼‰åˆ†æã‚·ã‚¹ãƒ†ãƒ 
     */
    class UltraAnalysisEngine {
      constructor() {
        // å®Œå…¨ãª64å¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ï¼‰
        this.H64_HEXAGRAMS = this.initializeHexagramDatabase();

        // ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›ãƒ†ãƒ¼ãƒ–ãƒ«
        this.trigramTable = {
          1: [1, 1, 1], // â˜° ä¹¾ (å‰µé€ ãƒ»å¤©)
          2: [0, 1, 1], // â˜± å…Œ (å–œã³ãƒ»æ²¢)  
          3: [1, 0, 1], // â˜² é›¢ (ç«ãƒ»è¼ã)
          4: [1, 0, 0], // â˜³ éœ‡ (é›·ãƒ»è¡Œå‹•)
          5: [1, 1, 0], // â˜´ å·½ (é¢¨ãƒ»æµ¸é€)
          6: [0, 1, 0], // â˜µ å (æ°´ãƒ»å›°é›£)
          7: [0, 0, 1], // â˜¶ è‰® (å±±ãƒ»é™æ­¢)
          8: [0, 0, 0]  // â˜· å¤ (åœ°ãƒ»å—å®¹)
        };

        // 64å¦ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«
        this.hexagramMapping = this.generateHexagramMapping();
      }

      /**
       * 64å¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
       */
      initializeHexagramDatabase() {
        // åŸºæœ¬çš„ãª64å¦ãƒ‡ãƒ¼ã‚¿ï¼ˆç°¡ç•¥ç‰ˆï¼‰
        const basicHexagrams = [];
        
        for (let i = 1; i <= 64; i++) {
          basicHexagrams.push({
            hexagram_id: i,
            name_jp: `ç¬¬${i}å¦`,
            reading: "ã¿ã¦ã„",
            catchphrase: "HaQeiå“²å­¦ã«åŸºã¥ãæ·±ã„æ´å¯Ÿ",
            description: `ã‚ãªãŸã®æœ¬è³ªçš„ãªç‰¹æ€§ã‚’è¡¨ã™ç¬¬${i}å¦ã§ã™ã€‚ã“ã®å¦ã¯ã€ã‚ãªãŸã®å†…ãªã‚‹åŠ›ã¨å¯èƒ½æ€§ã‚’è±¡å¾´ã—ã¦ã„ã¾ã™ã€‚`,
            keywords: "èª¿å’Œ,æˆé•·,ç™ºå±•"
          });
        }

        // é‡è¦ãªå¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’è©³ç´°åŒ–
        const detailedHexagrams = {
          1: {
            name_jp: "ä¹¾ç‚ºå¤©",
            reading: "ã‘ã‚“ã„ã¦ã‚“", 
            catchphrase: "å¤©ç¿”ã‘ã‚‹é¾ã®ã‚ˆã†ãªã€å¤©æ€§ã®ãƒªãƒ¼ãƒ€ãƒ¼",
            description: "ã‚ãªãŸã®å¿ƒã®å¥¥åº•ã«ã¯ã€å¤©ã‚’ç¿”ã‘ã‚‹é¾ã®ã‚ˆã†ãªå£®å¤§ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå®¿ã£ã¦ã„ã¾ã™ã€‚æ–°ã—ã„é“ã‚’åˆ‡ã‚Šé–‹ãã€äººã€…ã‚’å°ãã“ã¨ã«æœ€ã‚‚ä¾¡å€¤ã‚’è¦‹å‡ºã™ã‚ãªãŸã¯ã€ç”Ÿã¾ã‚ŒãªãŒã‚‰ã®ãƒªãƒ¼ãƒ€ãƒ¼ã§ã™ã€‚",
            keywords: "å‰µé€ ,ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—,åŠ›"
          },
          2: {
            name_jp: "å¤ç‚ºåœ°",
            reading: "ã“ã‚“ã„ã¡",
            catchphrase: "å¤§åœ°ã®æ¯ã®ã‚ˆã†ã«ã€ã™ã¹ã¦ã‚’å—ã‘å…¥ã‚Œã‚‹äºº", 
            description: "ã‚ãªãŸã®å¿ƒã«ã¯ã€å¤§åœ°ã®ã‚ˆã†ãªåºƒå¤§ã§æ·±ã„åŒ…å®¹åŠ›ãŒå‚™ã‚ã£ã¦ã„ã¾ã™ã€‚äººã‚„ç‰©äº‹ã‚’è‚²ã¿ã€æ”¯ãˆã‚‹ã“ã¨ã«æœ€ã‚‚å–œã³ã‚’æ„Ÿã˜ã‚‹ã‚ãªãŸã¯ã€å‘¨å›²ã«ã¨ã£ã¦æ¬ ã‹ã›ãªã„å­˜åœ¨ã§ã™ã€‚",
            keywords: "å—å®¹,è‚²æˆ,ã‚µãƒãƒ¼ãƒˆ"
          },
          8: {
            name_jp: "æ°´åœ°æ¯”",
            reading: "ã™ã„ã¡ã²",
            catchphrase: "å¿ƒã§ç¹‹ãŒã‚Šã€äººã‚’æ”¯ãˆã‚‹ã‚µãƒãƒ¼ã‚¿ãƒ¼",
            description: "ã‚ãªãŸã®å¿ƒã®ä¸­å¿ƒã«ã‚ã‚‹ã®ã¯ã€ã€Œäººã¨è¦ªã—ã¿ã€åŠ©ã‘åˆã„ãŸã„ã€ã¨ã„ã†æ¸©ã‹ã„æƒ³ã„ã§ã™ã€‚ç«¶äº‰ã‚„å¯¾ç«‹ã‚ˆã‚Šã‚‚å”èª¿ã‚’é‡ã‚“ã˜ã€èª°ã‹ã®å½¹ã«ç«‹ã¤ã“ã¨ã«æœ€ã‚‚ä¾¡å€¤ã‚’æ„Ÿã˜ã¾ã™ã€‚",
            keywords: "å”åŠ›,è¦ªå¯†,çµæŸ"
          },
          32: {
            name_jp: "é›·é¢¨æ’",
            reading: "ã‚‰ã„ãµã†ã“ã†",
            catchphrase: "æ±ºã‚ãŸé“ã‚’ã€ç€å®Ÿã«æ­©ã¿ç¶šã‘ã‚‹ç¶™ç¶šè€…",
            description: "ã‚ãªãŸã¯ã€ä¸€åº¦æ±ºã‚ãŸé“ã‚’ã€åœ°é“ã«ã€ãã—ã¦çœŸé¢ç›®ã«æ­©ã¿ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€Œç¶™ç¶šã€ã®äººã§ã™ã€‚æ´¾æ‰‹ã•ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ãã®ç¢ºã‹ãªä¸€æ­©ä¸€æ­©ãŒã€å‘¨å›²ã‹ã‚‰ã®çµ¶å¤§ãªä¿¡é ¼ã‚’ç¯‰ãä¸Šã’ã¾ã™ã€‚",
            keywords: "æŒç¶š,æ’ä¹…,å®‰å®š"
          },
          33: {
            name_jp: "å¤©å±±é¯",
            reading: "ã¦ã‚“ã–ã‚“ã¨ã‚“",
            catchphrase: "è³¢æ˜ãªè·é›¢æ„Ÿã‚’ä¿ã¤ã€ã‚¯ãƒ¼ãƒ«ãªæˆ¦ç•¥å®¶",
            description: "ã‚ãªãŸã¯ã€ç„¡ç›Šãªäº‰ã„ã‚„ä¸åˆ©ãªçŠ¶æ³ã‹ã‚‰ã€è³¢æ˜ã«èº«ã‚’å¼•ãã“ã¨ãŒã§ãã‚‹ã€ã‚¯ãƒ¼ãƒ«ãªæˆ¦ç•¥å®¶ã§ã™ã€‚ç‰©äº‹ã«æ·±å…¥ã‚Šã›ãšã€å¸¸ã«å†·é™ãªè·é›¢æ„Ÿã‚’ä¿ã¤ã“ã¨ã§ã€æœ€é©ãªåˆ¤æ–­ã‚’ä¸‹ã—ã¾ã™ã€‚",
            keywords: "æ’¤é€€,èº«ã‚’å¼•ã,è‡ªå·±é˜²è¡›"
          },
          34: {
            name_jp: "é›·å¤©å¤§å£®",
            reading: "ã‚‰ã„ã¦ã‚“ãŸã„ãã†",
            catchphrase: "ç›®æ¨™ã«å‘ã‹ã£ã¦ã€åŠ›å¼·ãé€²ã‚€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼",
            description: "ã‚ãªãŸã®å†…ã«ã¯ã€æº¢ã‚Œã‚“ã°ã‹ã‚Šã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæ¸¦å·»ã„ã¦ãŠã‚Šã€ç›®æ¨™ã«å‘ã‹ã£ã¦çŒªçªçŒ›é€²ã™ã‚‹ã€è¡€æ°—ç››ã‚“ãªãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚ãã®å¼·ã„æ­£ç¾©æ„Ÿã¨åœ§å€’çš„ãªå®Ÿè¡ŒåŠ›ã¯ã€å¤šãã®å£ã‚’æ‰“ã¡ç ´ã‚Šã¾ã™ã€‚",
            keywords: "å¤§ã„ãªã‚‹å‹¢ã„,åŠ›å¼·ã„å‰é€²"
          },
          42: {
            name_jp: "é¢¨é›·ç›Š",
            reading: "ãµã†ã‚‰ã„ãˆã",
            catchphrase: "å–„æ„ã®å¾ªç’°ã‚’ç”Ÿã¿å‡ºã™ã€å¿ƒå„ªã—ã„ã‚µãƒãƒ¼ã‚¿ãƒ¼",
            description: "ã‚ãªãŸã¯ã€ä»–è€…ã‚’åŠ©ã‘ã€ç¤¾ä¼šã«è²¢çŒ®ã™ã‚‹ã“ã¨ãŒã€å·¡ã‚Šå·¡ã£ã¦è‡ªåˆ†ã®åˆ©ç›Šã«ã‚‚ç¹‹ãŒã‚‹ã¨ã„ã†ã€Œå–„æ„ã®å¾ªç’°ã€ã‚’ä¿¡ã˜ã‚‹ã€å¿ƒå„ªã—ã„ã‚µãƒãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚",
            keywords: "å¢—ç›Š,è²¢çŒ®,æˆé•·"
          }
        };

        // è©³ç´°ãƒ‡ãƒ¼ã‚¿ã§ä¸Šæ›¸ã
        basicHexagrams.forEach(hexagram => {
          if (detailedHexagrams[hexagram.hexagram_id]) {
            Object.assign(hexagram, detailedHexagrams[hexagram.hexagram_id]);
          }
        });

        return basicHexagrams;
      }

      /**
       * 64å¦ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
       */
      generateHexagramMapping() {
        const mapping = {};
        
        // 8Ã—8 = 64å¦ã®çµ„ã¿åˆã‚ã›
        for (let upper = 1; upper <= 8; upper++) {
          for (let lower = 1; lower <= 8; lower++) {
            const hexagramId = (upper - 1) * 8 + lower;
            mapping[`${upper}-${lower}`] = hexagramId;
          }
        }
        
        return mapping;
      }

      /**
       * ãƒ¡ã‚¤ãƒ³åˆ†ææ©Ÿèƒ½ - Triple OSåˆ†æ
       * @param {Object} answers - 30å•ã®å›ç­”ãƒ‡ãƒ¼ã‚¿
       * @returns {Object} 3ã¤ã®OSåˆ†æçµæœ
       */
      analyzeTripleOS(answers) {
        try {
          // 1. Engine OSåˆ†æï¼ˆQ1-Q24: 8æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ï¼‰
          const engineOS = this.analyzeEngineOS(answers);
          
          // 2. Interface OSåˆ†æï¼ˆQ25-Q30: ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
          const interfaceOS = this.analyzeInterfaceOS(answers);
          
          // 3. Safe Mode OSåˆ†æï¼ˆé˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
          const safeModeOS = this.analyzeSafeModeOS(answers);

          return {
            engineOS,
            interfaceOS,
            safeModeOS,
            timestamp: new Date().toISOString(),
            analysisVersion: "1.0.0"
          };

        } catch (error) {
          console.error('Triple OSåˆ†æã‚¨ãƒ©ãƒ¼:', error);
          return this.getDefaultResults();
        }
      }

      /**
       * Engine OSåˆ†æ - 8æ¬¡å…ƒä¾¡å€¤è¦³ãƒ™ã‚¯ãƒˆãƒ«â†’64å¦ç‰¹å®š
       */
      analyzeEngineOS(answers) {
        // 8æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«è¨ˆç®—
        const dimensions = this.calculate8DimensionVector(answers);
        
        // 8æ¬¡å…ƒâ†’ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›
        const trigramEnergies = this.convertToTrigramEnergies(dimensions);
        
        // ä¸Šå¦ãƒ»ä¸‹å¦ç‰¹å®š
        const upperTrigram = this.determineUpperTrigram(trigramEnergies);
        const lowerTrigram = this.determineLowerTrigram(trigramEnergies);
        
        // 64å¦ç‰¹å®š
        const hexagramId = this.getHexagramId(upperTrigram, lowerTrigram);
        const hexagramData = this.getHexagramData(hexagramId);

        return {
          hexagramId,
          name: hexagramData.name_jp,
          reading: hexagramData.reading,
          catchphrase: hexagramData.catchphrase,
          description: hexagramData.description,
          keywords: hexagramData.keywords,
          dimensions,
          upperTrigram,
          lowerTrigram,
          confidenceScore: this.calculateConfidenceScore(dimensions)
        };
      }

      /**
       * Interface OSåˆ†æ - Q25-Q30ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³â†’64å¦ç‰¹å®š
       */
      analyzeInterfaceOS(answers) {
        // Q25-Q30ã®ã‚·ãƒŠãƒªã‚ªå›ç­”åˆ†æ
        const socialPatterns = this.analyzeSocialPatterns(answers);
        
        // ç¤¾ä¼šçš„ã‚¹ã‚¿ã‚¤ãƒ«ç‰¹å®š
        const socialStyle = this.determineSocialStyle(socialPatterns);
        
        // Interface OSå°‚ç”¨64å¦ç‰¹å®š
        const hexagramId = this.mapSocialPatternToHexagram(socialPatterns);
        const hexagramData = this.getHexagramData(hexagramId);

        return {
          hexagramId,
          name: hexagramData.name_jp,
          reading: hexagramData.reading,
          socialStyle,
          socialPatterns,
          adaptabilityScore: this.calculateAdaptabilityScore(socialPatterns),
          communicationStyle: this.determineCommunicationStyle(socialPatterns)
        };
      }

      /**
       * Safe Mode OSåˆ†æ - é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³â†’64å¦ç‰¹å®š
       */
      analyzeSafeModeOS(answers) {
        // é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
        const defensePatterns = this.detectDefensePatterns(answers);
        
        // ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦ã‚¹ã‚¿ã‚¤ãƒ«
        const stressResponse = this.analyzeStressResponse(answers);
        
        // Safe Modeå°‚ç”¨64å¦ç‰¹å®š
        const hexagramId = this.mapDefensePatternToHexagram(defensePatterns);
        const hexagramData = this.getHexagramData(hexagramId);

        return {
          hexagramId,
          name: hexagramData.name_jp,
          reading: hexagramData.reading,
          defensePatterns,
          stressResponse,
          resilienceScore: this.calculateResilienceScore(defensePatterns),
          copingStyle: this.determineCopingStyle(stressResponse)
        };
      }

      /**
       * 8æ¬¡å…ƒä¾¡å€¤è¦³ãƒ™ã‚¯ãƒˆãƒ«è¨ˆç®—
       */
      calculate8DimensionVector(answers) {
        const dimensions = {
          creativity: 0,    // å‰µé€ æ€§
          action: 0,       // è¡Œå‹•æ€§
          exploration: 0,  // æ¢æ±‚æ€§
          stability: 0,    // å®‰å®šæ€§
          acceptance: 0,   // å—å®¹æ€§
          adaptation: 0,   // é©å¿œæ€§
          expression: 0,   // è¡¨ç¾æ€§
          harmony: 0       // èª¿å’Œæ€§
        };

        // Q1-Q24ã‹ã‚‰8æ¬¡å…ƒã‚¹ã‚³ã‚¢è¨ˆç®—
        const questionBlocks = [
          { start: 1, end: 3, dimension: 'creativity' },
          { start: 4, end: 6, dimension: 'action' },
          { start: 7, end: 9, dimension: 'exploration' },
          { start: 10, end: 12, dimension: 'stability' },
          { start: 13, end: 15, dimension: 'acceptance' },
          { start: 16, end: 18, dimension: 'adaptation' },
          { start: 19, end: 21, dimension: 'expression' },
          { start: 22, end: 24, dimension: 'harmony' }
        ];

        questionBlocks.forEach(block => {
          let blockScore = 0;
          for (let i = block.start; i <= block.end; i++) {
            const questionId = `q${i}`;
            const answer = parseInt(answers[questionId] || 3);
            blockScore += answer;
          }
          dimensions[block.dimension] = Math.round((blockScore / 3) * 20) / 20; // 5æ®µéšã‚¹ã‚±ãƒ¼ãƒ«æ­£è¦åŒ–
        });

        return dimensions;
      }

      /**
       * 8æ¬¡å…ƒâ†’ä¸‰çˆ»ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤‰æ›
       */
      convertToTrigramEnergies(dimensions) {
        const values = Object.values(dimensions);
        const avg = values.reduce((a, b) => a + b, 0) / values.length;
        
        return {
          upper: values.slice(0, 4).reduce((a, b) => a + b, 0) / 4,
          middle: values.slice(2, 6).reduce((a, b) => a + b, 0) / 4,
          lower: values.slice(4, 8).reduce((a, b) => a + b, 0) / 4
        };
      }

      /**
       * ä¸Šå¦ç‰¹å®š
       */
      determineUpperTrigram(energies) {
        const threshold = 3.0;
        const pattern = [
          energies.upper > threshold ? 1 : 0,
          energies.middle > threshold ? 1 : 0,
          energies.lower > threshold ? 1 : 0
        ];

        // ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
        for (const [trigram, trigramPattern] of Object.entries(this.trigramTable)) {
          if (JSON.stringify(pattern) === JSON.stringify(trigramPattern)) {
            return parseInt(trigram);
          }
        }
        
        return 1; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šä¹¾
      }

      /**
       * ä¸‹å¦ç‰¹å®š
       */
      determineLowerTrigram(energies) {
        const threshold = 2.8;
        const pattern = [
          energies.lower > threshold ? 1 : 0,
          energies.middle > threshold ? 1 : 0,
          energies.upper > threshold ? 1 : 0
        ];

        // ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°
        for (const [trigram, trigramPattern] of Object.entries(this.trigramTable)) {
          if (JSON.stringify(pattern) === JSON.stringify(trigramPattern)) {
            return parseInt(trigram);
          }
        }
        
        return 8; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå¤
      }

      /**
       * 64å¦IDç‰¹å®š
       */
      getHexagramId(upperTrigram, lowerTrigram) {
        const key = `${upperTrigram}-${lowerTrigram}`;
        return this.hexagramMapping[key] || 1;
      }

      /**
       * 64å¦ãƒ‡ãƒ¼ã‚¿å–å¾—
       */
      getHexagramData(hexagramId) {
        const hexagram = this.H64_HEXAGRAMS.find(h => h.hexagram_id === hexagramId);
        if (hexagram) return hexagram;
        
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        return {
          hexagram_id: hexagramId,
          name_jp: `ç¬¬${hexagramId}å¦`,
          reading: "ã¿ã¦ã„",
          catchphrase: "HaQeiå“²å­¦ã«åŸºã¥ãç‹¬è‡ªã®è§£é‡ˆ",
          description: "ã‚ãªãŸã®å†…ãªã‚‹æœ¬è³ªã‚’è¡¨ã™é‡è¦ãªè±¡å¾´ã§ã™ã€‚",
          keywords: "èª¿å’Œ,æˆé•·,ç™ºå±•"
        };
      }

      /**
       * ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
       */
      analyzeSocialPatterns(answers) {
        const patterns = {
          leadership: 0,
          collaboration: 0,
          communication: 0,
          adaptation: 0
        };

        // Q25-Q30ã®ã‚·ãƒŠãƒªã‚ªå›ç­”åˆ†æ
        for (let i = 25; i <= 30; i++) {
          const answer = parseInt(answers[`q${i}`] || 3);
          
          switch (i) {
            case 25:
            case 26:
              patterns.leadership += answer;
              break;
            case 27:
            case 28:
              patterns.collaboration += answer;
              break;
            case 29:
              patterns.communication += answer * 2; // é‡ã¿ä»˜ã‘
              break;
            case 30:
              patterns.adaptation += answer * 2; // é‡ã¿ä»˜ã‘
              break;
          }
        }

        return patterns;
      }

      /**
       * ç¤¾ä¼šçš„ã‚¹ã‚¿ã‚¤ãƒ«ç‰¹å®š
       */
      determineSocialStyle(patterns) {
        const maxPattern = Object.keys(patterns).reduce((a, b) => 
          patterns[a] > patterns[b] ? a : b
        );

        const styleMap = {
          leadership: "æŒ‡å°è€…å‹",
          collaboration: "å”èª¿è€…å‹", 
          communication: "è¡¨ç¾è€…å‹",
          adaptation: "é©å¿œè€…å‹"
        };

        return styleMap[maxPattern] || "ãƒãƒ©ãƒ³ã‚¹å‹";
      }

      /**
       * ç¤¾ä¼šçš„ãƒ‘ã‚¿ãƒ¼ãƒ³â†’64å¦ãƒãƒƒãƒ”ãƒ³ã‚°
       */
      mapSocialPatternToHexagram(patterns) {
        // ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¹ã‚³ã‚¢ã«åŸºã¥ã64å¦ç‰¹å®šãƒ­ã‚¸ãƒƒã‚¯
        const totalScore = Object.values(patterns).reduce((a, b) => a + b, 0);
        const normalizedScore = Math.floor((totalScore / 30) * 64) + 1;
        
        return Math.min(Math.max(normalizedScore, 1), 64);
      }

      /**
       * é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
       */
      detectDefensePatterns(answers) {
        const patterns = {
          avoidance: 0,      // å›é¿
          confrontation: 0,  // å¯¾å³™
          adaptation: 0,     // é©å¿œ
          support: 0         // æ”¯æ´è¦è«‹
        };

        // å…¨å›ç­”ã‹ã‚‰é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¨å®š
        Object.values(answers).forEach((answer, index) => {
          const score = parseInt(answer || 3);
          
          if (score <= 2) {
            patterns.avoidance += 1;
          } else if (score >= 4) {
            patterns.confrontation += 1;
          } else {
            patterns.adaptation += 1;
          }
          
          // ç‰¹å®šè³ªå•ã§ã®æ”¯æ´è¦è«‹ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
          if ([5, 10, 15, 20].includes(index + 1) && score === 3) {
            patterns.support += 1;
          }
        });

        return patterns;
      }

      /**
       * ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦åˆ†æ
       */
      analyzeStressResponse(answers) {
        // Q25-Q30ã®ã‚·ãƒŠãƒªã‚ªã‹ã‚‰ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å‡¦ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æ
        const stressIndicators = [];
        
        for (let i = 25; i <= 30; i++) {
          const answer = parseInt(answers[`q${i}`] || 3);
          stressIndicators.push(answer);
        }

        const avgResponse = stressIndicators.reduce((a, b) => a + b, 0) / stressIndicators.length;
        
        if (avgResponse < 2.5) return "å†…å‘çš„å¯¾å‡¦";
        if (avgResponse > 3.5) return "å¤–å‘çš„å¯¾å‡¦";
        return "ãƒãƒ©ãƒ³ã‚¹å‹å¯¾å‡¦";
      }

      /**
       * é˜²å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³â†’64å¦ãƒãƒƒãƒ”ãƒ³ã‚°
       */
      mapDefensePatternToHexagram(patterns) {
        const dominantPattern = Object.keys(patterns).reduce((a, b) => 
          patterns[a] > patterns[b] ? a : b
        );

        const hexagramMap = {
          avoidance: 33,      // å¤©å±±é¯ (é€€å´)
          confrontation: 34,  // é›·å¤©å¤§å£® (å¤§ã„ãªã‚‹åŠ›)
          adaptation: 32,     // é›·é¢¨æ’ (æŒç¶š)
          support: 8          // æ°´åœ°æ¯” (è¦ªã—ã¿)
        };

        return hexagramMap[dominantPattern] || 42; // é¢¨é›·ç›Š (åˆ©ç›Š)
      }

      /**
       * ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
       */
      calculateConfidenceScore(dimensions) {
        const values = Object.values(dimensions);
        const variance = this.calculateVariance(values);
        return Math.max(0.5, 1 - (variance / 5)); // 0.5-1.0ã®ç¯„å›²
      }

      /**
       * é©å¿œæ€§ã‚¹ã‚³ã‚¢è¨ˆç®—
       */
      calculateAdaptabilityScore(patterns) {
        return Math.min(1.0, patterns.adaptation / 10);
      }

      /**
       * ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ã‚¹ã‚³ã‚¢è¨ˆç®—
       */
      calculateResilienceScore(patterns) {
        const totalDefense = Object.values(patterns).reduce((a, b) => a + b, 0);
        return Math.min(1.0, totalDefense / 20);
      }

      /**
       * ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ç‰¹å®š
       */
      determineCommunicationStyle(patterns) {
        if (patterns.communication > 8) return "è¡¨ç¾é‡è¦–";
        if (patterns.collaboration > 8) return "å”èª¿é‡è¦–";
        return "ãƒãƒ©ãƒ³ã‚¹å‹";
      }

      /**
       * ã‚³ãƒ¼ãƒ”ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ç‰¹å®š
       */
      determineCopingStyle(stressResponse) {
        const styleMap = {
          "å†…å‘çš„å¯¾å‡¦": "å†…çœãƒ»è‡ªå·±å®Œçµå‹",
          "å¤–å‘çš„å¯¾å‡¦": "è¡Œå‹•ãƒ»å¤–éƒ¨è§£æ±ºå‹",
          "ãƒãƒ©ãƒ³ã‚¹å‹å¯¾å‡¦": "çŠ¶æ³é©å¿œå‹"
        };
        return styleMap[stressResponse] || "å€‹æ€§é©å¿œå‹";
      }

      /**
       * åˆ†æ•£è¨ˆç®—ï¼ˆçµ±è¨ˆç”¨ï¼‰
       */
      calculateVariance(values) {
        const mean = values.reduce((a, b) => a + b, 0) / values.length;
        const squaredDiffs = values.map(value => Math.pow(value - mean, 2));
        return squaredDiffs.reduce((a, b) => a + b, 0) / values.length;
      }

      /**
       * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçµæœï¼ˆã‚¨ãƒ©ãƒ¼æ™‚ï¼‰
       */
      getDefaultResults() {
        return {
          engineOS: {
            hexagramId: 1,
            name: "ä¹¾ç‚ºå¤©",
            reading: "ã‘ã‚“ã„ã¦ã‚“",
            catchphrase: "å¤©ç¿”ã‘ã‚‹é¾ã®ã‚ˆã†ãªã€å¤©æ€§ã®ãƒªãƒ¼ãƒ€ãƒ¼",
            description: "åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸãŒã€ã‚ãªãŸã®æœ¬è³ªçš„ãªåŠ›ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚",
            keywords: "å‰µé€ ,ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—,åŠ›",
            confidenceScore: 0.8
          },
          interfaceOS: {
            hexagramId: 2,
            name: "å¤ç‚ºåœ°", 
            reading: "ã“ã‚“ã„ã¡",
            socialStyle: "å”èª¿è€…å‹"
          },
          safeModeOS: {
            hexagramId: 42,
            name: "é¢¨é›·ç›Š",
            reading: "ãµã†ã‚‰ã„ãˆã",
            copingStyle: "çŠ¶æ³é©å¿œå‹"
          }
        };
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      window.emergencyHAQEIFlow = new EmergencyHAQEIFlow();
      window.ultraAnalysisEngine = new UltraAnalysisEngine();
      
      // ãƒ‡ãƒãƒƒã‚°ç”¨
      window.resetFlow = () => {
        if (confirm('é€²æ—ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
          window.emergencyHAQEIFlow.reset();
        }
      };
    });
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
    window.showCurrentAnswers = function() {
      console.log('ç¾åœ¨ã®å›ç­”:', window.emergencyHAQEIFlow.answers);
      console.log('é€²æ—:', window.emergencyHAQEIFlow.calculateProgress() + '%');
    };
  </script>
</body>
</html>