class EnhancedKeywordAnalyzer{constructor(){this.categoryDictionary={preparation:["準備","基礎固め","学習","ポテンシャル","始まり","待機","予兆","初霜","始まりの注意","教育","学び","素直さ","蓄積","潜在力","萌芽"],cooperation:["協力","協力者","出会い","信頼","公の場","パートナー","信頼関係","包容力","親密","結束","団結","パートナーシップ","交流","共感","協調","相互理解","支援","仲間","連携","協働"],growth:["チャンス到来","成長","発展","チャンス","成果","吉","繁栄","成功","達成","飛躍","向上","進歩","開花","実現","結実"],leadership:["リーダー","リーダーシップ","公明正大","中核","勝利","統率","指導","責任","決断","主導","威厳","権威","統治","采配","求心力"],difficulty:["困難","リスクあり","危機","停滞","危険","凶","絶望","行き詰まり","破滅","泥沼","危機管理","破綻","失敗","機能不全","混乱","不満","不安定","障害","苦境","窮地"],stability:["安定","問題なし","安全第一","休息","堅実","持続","平穏","秩序","維持","保全","継続","均衡","調和","平和","安泰"],reflection:["内省","慎重","忍耐","待機","口を閉ざす","内面の美徳","反省","熟慮","自制","沈黙","瞑想","観察","洞察","自己探求","省察"],transformation:["改革","革新","転換点","方針転換","撤退","再編","変革","刷新","再生","転機","変化","移行","改変","革命","更新"],decision:["決断","判断","選択","決定","意思決定","判断ミス","賢明な判断","冷静な対応","見極め","評価"],integrity:["誠実","公正","公平性","正義","真心","誠意","信義","廉潔","高潔","清廉"],caution:["油断","慢心","傲慢","軽率","無謀","虚飾","誘惑","不誠実","優柔不断","危険回避"],completion:["完成","完了","成就","達成","終結","完結","完遂","完全","完備","円満"],recovery:["危機脱出","信頼回復","原点回帰","再生","回復","復活","復興","立ち直り","更生","復帰"],strategy:["守り","損失回避","危機克服","問題解決","対策","戦略","戦術","方策","手段","計画"],balance:["中庸","柔軟性","調整","バランス","均衡","適度","節度","程良い","適正","適切"]},this.categoryRelations={preparation:["cooperation","growth"],cooperation:["stability","leadership","growth"],growth:["leadership","completion","stability"],leadership:["decision","strategy","integrity"],difficulty:["reflection","recovery","transformation"],stability:["growth","completion","balance"],reflection:["transformation","recovery","integrity"],transformation:["growth","recovery","decision"],decision:["strategy","leadership","caution"],integrity:["leadership","cooperation","stability"],caution:["difficulty","reflection","strategy"],completion:["growth","stability","recovery"],recovery:["transformation","growth","stability"],strategy:["decision","leadership","caution"],balance:["stability","integrity","reflection"]}}analyzeKeyword(t){for(const[e,i]of Object.entries(this.categoryDictionary))if(i.includes(t))return e;for(const[e,i]of Object.entries(this.categoryDictionary))for(const o of i)if(t.includes(o)||o.includes(t))return e;return this.analyzeSemantics(t)}analyzeSemantics(t){const e=["吉","成","良","善","正","安","信","協"],i=["凶","危","困","破","失","悪","不","無"];for(const n of e)if(t.includes(n))return t.includes("成")?"growth":t.includes("安")?"stability":t.includes("信")||t.includes("協")?"cooperation":"growth";for(const n of i)if(t.includes(n))return t.includes("危")||t.includes("困")?"difficulty":t.includes("不")||t.includes("無")?"caution":"difficulty";const o=["動","進","変","転","改"],r=["静","定","保","維","続"];for(const n of o)if(t.includes(n))return"transformation";for(const n of r)if(t.includes(n))return"stability";return"other"}getThematicConnection(t,e,i,o){if(t===e)return`「${i}」の状態が深まり、より成熟した「${o}」へと自然に発展していきます。`;if(this.categoryRelations[t]?.includes(e)){const r={preparation_cooperation:"個人の準備から他者との協働へ",preparation_growth:"基礎固めから成長段階へ",cooperation_stability:"協力関係から安定した体制へ",cooperation_leadership:"協働からリーダーシップ発揮へ",growth_leadership:"成長から主導的立場へ",growth_completion:"成長から完成段階へ",difficulty_reflection:"困難から内省と学びへ",reflection_transformation:"内省から変革への決意へ",transformation_recovery:"変革から再生と回復へ"}[`${t}_${e}`]||`${i}から${o}への自然な流れ`;return`「${i}」という${this.getCategoryLabel(t)}の段階から、${r}という関連性のある発展が起こります。`}return`「${i}」の経験を踏まえ、新たな視点で「${o}」という${this.getCategoryLabel(e)}の段階へ進化します。`}getThematicShift(t,e,i,o){if(t===e)return`同じ${this.getCategoryLabel(t)}の中でも、「${i}」から「${o}」へと質的な変化が起こります。`;return{preparation:"completion",cooperation:"difficulty",growth:"difficulty",stability:"transformation",reflection:"leadership",caution:"decision",difficulty:"recovery"}[t]===e?`「${i}」という${this.getCategoryLabel(t)}から、対極的な「${o}」という${this.getCategoryLabel(e)}への大転換が起こります。`:`「${i}」という${this.getCategoryLabel(t)}のテーマから離れ、全く異なる「${o}」という${this.getCategoryLabel(e)}への方向転換が起こります。`}getCategoryLabel(t){return{preparation:"準備と基礎",cooperation:"協力と信頼",growth:"成長と発展",leadership:"リーダーシップ",difficulty:"困難と挑戦",stability:"安定と持続",reflection:"内省と熟慮",transformation:"変革と転換",decision:"決断と判断",integrity:"誠実と正義",caution:"警戒と注意",completion:"完成と達成",recovery:"回復と再生",strategy:"戦略と対策",balance:"バランスと調和",other:"独自の展開"}[t]||t}getAccuracyStats(t){let e=0,i=0;const o={};return t.forEach(t=>{t["キーワード"]&&t["キーワード"].forEach(t=>{e++;const r=this.analyzeKeyword(t);"other"!==r&&i++,o[r]=(o[r]||0)+1})}),{total:e,classified:i,classificationRate:(i/e*100).toFixed(2),categoryCount:o}}}"undefined"!=typeof module&&module.exports&&(module.exports=EnhancedKeywordAnalyzer);