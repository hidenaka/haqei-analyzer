console.log("🎭 VirtualPersonaEnhancer Loading..."),function(){"use strict";class VirtualPersonaEnhancer{constructor(){this.name="VirtualPersonaEnhancer",this.version="1.0.0",this.philosophy="haqei-persona-enhancement",this.personas=this.initializePersonas(),this.enhancementConfig={includeTraits:!0,includeCatchphrase:!0,includeMetaphor:!0,includeHexagramStyle:!0,includeColorTheme:!0},this.isInitialized=!1}async initialize(){console.log("🔧 VirtualPersonaEnhancer initializing...");try{return await this.validatePersonas(),await this.integrateHaQeiPhilosophy(),this.isInitialized=!0,console.log("✅ VirtualPersonaEnhancer initialized successfully"),!0}catch(e){return console.error("❌ VirtualPersonaEnhancer initialization failed:",e),this.initializeSafeMode()}}initializePersonas(){return{engine:{name:"創造の探検家",symbol:"🚀",traits:["好奇心旺盛","革新的","チャレンジ精神","先見性","独創性"],catchphrase:"新しい可能性を切り開く",metaphor:"未踏の地を探求する冒険者のように",hexagramStyle:"乾為天（創造力の象徴）",personalityDescription:"常に新しい挑戦を求め、未来に向かって突き進む革新者",strengths:["創造性","リーダーシップ","先見性","行動力"],approaches:["革新的解決策","新規開拓","変革リーダー","未来思考"],colors:{primary:"#6366f1",secondary:"#8b5cf6",background:"rgba(99, 102, 241, 0.1)",gradient:"linear-gradient(135deg, #6366f1, #8b5cf6)"},emojis:["🚀","✨","💡","⚡","🌟","🎯","🔥","🦅","⭐","🌌"]},interface:{name:"調和の橋渡し",symbol:"🤝",traits:["共感力","協調性","コミュニケーション","思いやり","包容力"],catchphrase:"人との繋がりを大切にする",metaphor:"異なる世界を繋ぐ橋のように",hexagramStyle:"地天泰（調和の象徴）",personalityDescription:"人と人との間に立ち、調和と理解を促進する仲介者",strengths:["協調性","コミュニケーション","共感力","チームワーク"],approaches:["対話促進","合意形成","関係構築","調和創出"],colors:{primary:"#8b5cf6",secondary:"#a855f7",background:"rgba(139, 92, 246, 0.1)",gradient:"linear-gradient(135deg, #8b5cf6, #a855f7)"},emojis:["🤝","💫","🌸","🎈","🎊","💕","🌻","🌈","🕊️","💐"]},safemode:{name:"慎重な守護者",symbol:"🛡️",traits:["分析力","慎重性","安全志向","責任感","持続性"],catchphrase:"リスクを見極め、安全を確保する",metaphor:"嵐の中でも灯台のように",hexagramStyle:"山雷頤（慎重さの象徴）",personalityDescription:"冷静な判断で危険を回避し、安定を維持する守護者",strengths:["分析力","慎重性","持続力","安定性"],approaches:["リスク分析","段階的実行","安全確保","持続可能"],colors:{primary:"#10b981",secondary:"#059669",background:"rgba(16, 185, 129, 0.1)",gradient:"linear-gradient(135deg, #10b981, #059669)"},emojis:["🛡️","🔍","📋","⚖️","🎯","🔒","⚓","🏰","🗿","🌿"]}}}enhanceOSResult(e,a){if(!this.isInitialized)return console.warn("⚠️ VirtualPersonaEnhancer not initialized"),e;const n=this.personas[a];if(!n)return console.warn(`⚠️ Unknown persona type: ${a}`),e;try{const a=this.calculateOSStrength(e),t=this.adjustTraitsByStrength(n.traits,a),r=this.adjustCatchphraseByStrength(n.catchphrase,a);return{...e,persona:{name:n.name,symbol:n.symbol,traits:t,catchphrase:r,metaphor:n.metaphor,personalityDescription:n.personalityDescription,strengths:n.strengths,approaches:n.approaches,hexagramStyle:n.hexagramStyle,colors:n.colors,emojis:n.emojis,strength:a,dominanceLevel:this.calculateDominanceLevel(a),expressionIntensity:this.calculateExpressionIntensity(a),description:`あなたの${n.name}は、${n.metaphor}、${r}特徴を持っています。`,detailedDescription:this.generateDetailedDescription(n,a)}}}catch(t){return console.error("❌ OS result enhancement failed:",t),e}}calculateOSStrength(e){if(void 0!==e.percentage)return Math.round(e.percentage);if(void 0!==e.strength)return Math.round(e.strength);if(e.trigramEnergy){const a=Object.values(e.trigramEnergy).reduce((e,a)=>e+a,0);return Math.round(a/Object.keys(e.trigramEnergy).length)}return 50}adjustTraitsByStrength(e,a){return a>=80?e.map(e=>`強い${e}`):a>=60?e:a>=40?e.map(e=>`適度な${e}`):e.map(e=>`潜在的な${e}`)}adjustCatchphraseByStrength(e,a){return a>=80?`積極的に${e}`:a>=60?e:a>=40?`慎重に${e}`:`時には${e}`}calculateDominanceLevel(e){return e>=80?"dominant":e>=60?"strong":e>=40?"moderate":e>=20?"weak":"minimal"}calculateExpressionIntensity(e){return Math.floor(e/20)+1}generateDetailedDescription(e,a){return`この仮想人格は${a>=70?"非常に強く":a>=50?"比較的強く":a>=30?"ある程度":"時折"}現れる傾向があります。${e.personalityDescription}として、${e.approaches.join("、")}などのアプローチを取ります。`}async validatePersonas(){const e=Object.keys(this.personas);return console.log(`📋 Validating ${e.length} persona definitions...`),e.forEach(e=>{const a=this.personas[e];if(!(a.name&&a.symbol&&a.traits&&a.catchphrase))throw new Error(`Invalid persona definition for ${e}`)}),!0}async integrateHaQeiPhilosophy(){this.philosophicalFramework={principle:"3つの仮想人格の個性的表現による深い自己理解",approach:"易経メタファーと現代心理学の融合",goal:"創造的自己表現を通じた成長と調和",wisdom:"内なる多様性を受け入れ、統合的な視点を育む"},console.log("🔯 HaQei philosophy integrated with persona enhancement")}initializeSafeMode(){return console.log("⚠️ Initializing safe mode..."),this.personas={engine:{name:"Engine OS",symbol:"⚡",traits:["創造性"],catchphrase:"新しい可能性"},interface:{name:"Interface OS",symbol:"🤝",traits:["協調性"],catchphrase:"人との繋がり"},safemode:{name:"SafeMode OS",symbol:"🛡️",traits:["慎重性"],catchphrase:"安全確保"}},this.isInitialized=!0,!0}getAvailablePersonas(){return Object.keys(this.personas).map(e=>({type:e,name:this.personas[e].name,symbol:this.personas[e].symbol,description:this.personas[e].personalityDescription}))}}"undefined"!=typeof window&&(window.VirtualPersonaEnhancer=VirtualPersonaEnhancer),"undefined"!=typeof module&&module.exports&&(module.exports=VirtualPersonaEnhancer),console.log("✅ VirtualPersonaEnhancer loaded successfully with HaQei Philosophy")}("undefined"!=typeof window?window:global);