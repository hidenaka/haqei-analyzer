class H384DatabaseCompat{constructor(){this.version="1.0.0-compat",this.initialized=!1,this.data=[],this.lineTexts=new Map,this.symbolTexts=new Map,this.judgmentTexts=new Map,this.hexagramMeta=new Map,console.log("🔄 H384DatabaseCompat initializing...")}async initialize(){if(this.initialized)return!0;try{const t=await fetch("/data/h384.json"),i=await t.json();return this.data=i.hexagrams||[],this.data.forEach(t=>{this.hexagramMeta.set(t.id,t)}),this.initializeBasicTexts(),this.initialized=!0,console.log(`✅ H384DatabaseCompat initialized with ${this.data.length} hexagrams`),!0}catch(t){return console.error("❌ H384DatabaseCompat initialization failed:",t),this.initializeFallbackData(),this.initialized=!0,console.log("⚠️ H384DatabaseCompat using fallback data"),!0}}initializeBasicTexts(){Object.entries({"1-1":"初九：潜龍勿用。","1-2":"九二：見龍在田，利見大人。","1-3":"九三：君子終日乾乾，夕惕若厲，無咎。","1-4":"九四：或躍在淵，無咎。","1-5":"九五：飛龍在天，利見大人。","1-6":"上九：亢龍有悔。","2-1":"初六：履霜，堅冰至。","2-2":"六二：直，方，大，不習無不利。","2-3":"六三：含章可貞。或從王事，無成有終。","2-4":"六四：括囊；無咎，無誉。","2-5":"六五：黄裳，元吉。","2-6":"上六：龍戰于野，其血玄黄。"}).forEach(([t,i])=>{this.lineTexts.set(t,i)})}initializeFallbackData(){const t=[{id:1,name:"乾為天",chinese:"乾",reading:"けん"},{id:2,name:"坤為地",chinese:"坤",reading:"こん"},{id:3,name:"水雷屯",chinese:"屯",reading:"ちゅん"},{id:4,name:"山水蒙",chinese:"蒙",reading:"もう"}];this.data=t,t.forEach(t=>{this.hexagramMeta.set(t.id,t)}),this.initializeBasicTexts()}getLineText(t,i){const e=`${t}-${i}`;return this.lineTexts.get(e)||`第${t}卦 第${i}爻`}getSymbolText(t,i){const e=`${t}-${i}`;return this.symbolTexts.get(e)||`第${t}卦 第${i}爻の象`}getJudgmentText(t){return this.judgmentTexts.get(t)||`第${t}卦の彖辞`}getHexagramMeta(t){return this.hexagramMeta.get(t)||{id:t,name:`第${t}卦`}}searchByKeyword(t){const i=[];return this.lineTexts.forEach((e,a)=>{if(e.includes(t)){const[t,n]=a.split("-");i.push({hexagram:parseInt(t),line:parseInt(n),text:e})}}),i}async loadLineTexts(){return!0}async loadSymbolTexts(){return!0}async loadJudgmentTexts(){return!0}isInitialized(){return this.initialized}getStats(){return{totalLines:this.lineTexts.size,totalHexagrams:this.data.length,version:this.version,initialized:this.initialized}}}const H384_DATABASE_COMPAT=new H384DatabaseCompat;let H384_DATA_COMPAT;"undefined"!=typeof window&&(window.H384_DATABASE||(window.H384_DATABASE=H384_DATABASE_COMPAT,console.log("✅ Using H384_DATABASE compatibility layer")),window.H384_DATA||(H384_DATA_COMPAT=H384_DATABASE_COMPAT.data,window.H384_DATA=H384_DATA_COMPAT),H384_DATABASE_COMPAT.initialize().then(()=>{console.log("✅ H384_DATABASE compatibility layer ready"),window.H384_DATABASE===H384_DATABASE_COMPAT&&(window.H384_DATA=H384_DATABASE_COMPAT.data),window.dispatchEvent(new CustomEvent("h384DatabaseReady",{detail:H384_DATABASE_COMPAT.getStats()}))})),"undefined"!=typeof module&&module.exports&&(module.exports=H384_DATABASE),console.log("🔧 H384_DATABASE compatibility wrapper loaded");