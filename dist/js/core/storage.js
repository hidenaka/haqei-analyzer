!function(t){"use strict";const e="haqei.",r=5242880;t.storageGet=function(t){try{const r=t.startsWith(e)?t:e+t,o=localStorage.getItem(r);return o?JSON.parse(o):null}catch(r){return console.error(`Storage get error for ${t}:`,r),null}},t.storageSet=function(t,o){try{const a=t.startsWith(e)?t:e+t,n=JSON.stringify(o);if(n.length>r)throw new Error(`Data too large: ${n.length} bytes`);return localStorage.setItem(a,n),!0}catch(a){return console.error(`Storage set error for ${t}:`,a),"QuotaExceededError"===a.name&&function(){const t=document.createElement("div");t.className="fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50",t.textContent="ストレージ容量が不足しています。古いデータを削除してください。",document.body.appendChild(t),setTimeout(()=>t.remove(),5e3)}(),!1}},t.storageRemove=function(t){const r=t.startsWith(e)?t:e+t;localStorage.removeItem(r)},t.storageClearByPrefix=function(t){const r=e+t;Object.keys(localStorage).filter(t=>t.startsWith(r)).forEach(t=>localStorage.removeItem(t))},t.storageGetUsage=function(){let t=0;for(let r in localStorage)r.startsWith(e)&&(t+=localStorage[r].length+r.length);return{used:t,percentage:t/r*100}},t.storageGetAllData=function(){const t={};for(let r in localStorage)if(r.startsWith(e))try{t[r]=JSON.parse(localStorage[r])}catch{t[r]=localStorage[r]}return t}}(window);