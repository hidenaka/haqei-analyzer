console.log("ğŸ“š H384DatabaseConnector Loading..."),function(global){"use strict";class H384DatabaseConnector{constructor(){this.name="H384DatabaseConnector",this.version="2.0.0",this.database=null,this.isLoaded=!1,this.loadAttempts=0,this.maxAttempts=3}async initialize(){console.log("ğŸ”„ H384DatabaseConnector initializing...");try{if(this.database=await this.loadDatabase(),this.validateDatabase())return this.isLoaded=!0,console.log("âœ… H384Database loaded successfully:",{entries:this.database.length,firstEntry:this.database[0],lastEntry:this.database[this.database.length-1]}),!0;throw new Error("Database validation failed")}catch(a){return console.error("âŒ H384Database initialization failed:",a),this.initializeFallback()}}async loadDatabase(){if(void 0!==window.H384_DATA&&Array.isArray(window.H384_DATA))return console.log("âœ… Method 1: Direct window.H384_DATA access successful"),window.H384_DATA;if("undefined"!=typeof H384_DATA&&Array.isArray(H384_DATA))return console.log("âœ… Method 2: Global H384_DATA access successful"),window.H384_DATA=H384_DATA,H384_DATA;try{const response=await fetch("./assets/H384H64database.js"),scriptText=await response.text();if(eval(scriptText),"undefined"!=typeof H384_DATA)return console.log("âœ… Method 3: Dynamic import successful"),window.H384_DATA=H384_DATA,H384_DATA}catch(error){console.warn("âš ï¸ Method 3 failed:",error)}return console.warn("âš ï¸ All methods failed, generating fallback data"),this.generateFallbackData()}validateDatabase(){if(!this.database||!Array.isArray(this.database))return console.error("âŒ Database is not an array"),!1;if(386!==this.database.length){if(console.warn(`âš ï¸ Expected 386 entries, got ${this.database.length}`),384!==this.database.length)return!1;console.log("ğŸ“ Adding missing ç”¨ä¹ãƒ»ç”¨å…­ entries"),this.addMissingEntries()}const a=["é€šã—ç•ªå·","å¦ç•ªå·","å¦å","çˆ»","ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰","ç¾ä»£è§£é‡ˆã®è¦ç´„"],t=this.database[0];for(const e of a)if(!(e in t))return console.error(`âŒ Missing required field: ${e}`),!1;return console.log("âœ… Database validation passed"),!0}addMissingEntries(){this.database.push({"é€šã—ç•ªå·":385,"å¦ç•ªå·":0,"å¦å":"ç”¨ä¹","çˆ»":"ç”¨ä¹","ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":["ç¾¤é¾ç„¡é¦–","å‰","å”åŠ›"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":"å…¨ã¦ã®é™½ãŒæ¥µã¾ã£ãŸçŠ¶æ…‹ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ãªãç¾¤é¾ãŒè‡ªå¾‹çš„ã«å”åŠ›ã™ã‚‹ç†æƒ³å½¢ã€‚","S1_åŸºæœ¬ã‚¹ã‚³ã‚¢":75,"S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":80,"S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢":60,"S4_ãƒªã‚¹ã‚¯":-20,"S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹":"èƒ½å‹•","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢":40,"S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢":70},{"é€šã—ç•ªå·":386,"å¦ç•ªå·":0,"å¦å":"ç”¨å…­","çˆ»":"ç”¨å…­","ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":["åˆ©æ°¸è²","å …å®Ÿ","æŒç¶š"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":"å…¨ã¦ã®é™°ãŒæ¥µã¾ã£ãŸçŠ¶æ…‹ã€‚æ°¸ç¶šçš„ãªè²ç¯€ã‚’ä¿ã¤ã“ã¨ã§åˆ©ã‚’å¾—ã‚‹ã€‚","S1_åŸºæœ¬ã‚¹ã‚³ã‚¢":70,"S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":60,"S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢":80,"S4_ãƒªã‚¹ã‚¯":-15,"S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹":"å—å‹•","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢":20,"S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢":75}),console.log("âœ… Added ç”¨ä¹ãƒ»ç”¨å…­ entries")}generateFallbackData(){console.warn("âš ï¸ Generating minimal fallback data");const a=[],t=["ä¹¾ç‚ºå¤©","å¤ç‚ºåœ°","æ°´é›·å±¯","å±±æ°´è’™","æ°´å¤©éœ€","å¤©æ°´è¨Ÿ","åœ°æ°´å¸«","æ°´åœ°æ¯”","é¢¨å¤©å°ç•œ","å¤©æ¾¤å±¥","åœ°å¤©æ³°","å¤©åœ°å¦","å¤©ç«åŒäºº","ç«å¤©å¤§æœ‰","åœ°å±±è¬™","é›·åœ°è±«","æ¾¤é›·éš","å±±é¢¨è ±","åœ°æ¾¤è‡¨","é¢¨åœ°è¦³","ç«é›·å™¬å—‘","å±±ç«è³","å±±åœ°å‰¥","åœ°é›·å¾©","å¤©é›·æ— å¦„","å±±å¤©å¤§ç•œ","å±±é›·é ¤","æ¾¤é¢¨å¤§é","åç‚ºæ°´","é›¢ç‚ºç«","æ¾¤å±±å’¸","é›·é¢¨æ’","å¤©å±±é¯","é›·å¤©å¤§å£®","ç«åœ°æ™‹","åœ°ç«æ˜å¤·","é¢¨ç«å®¶äºº","ç«æ¾¤ç½","æ°´å±±è¹‡","é›·æ°´è§£","å±±æ¾¤æ","é¢¨é›·ç›Š","æ¾¤å¤©å¤¬","å¤©é¢¨å§¤","æ¾¤åœ°èƒ","åœ°é¢¨å‡","æ¾¤æ°´å›°","æ°´é¢¨äº•","æ¾¤ç«é©","ç«é¢¨é¼","éœ‡ç‚ºé›·","è‰®ç‚ºå±±","é¢¨å±±æ¼¸","é›·æ¾¤å¸°å¦¹","é›·ç«è±Š","ç«å±±æ—…","å·½ç‚ºé¢¨","å…Œç‚ºæ¾¤","é¢¨æ°´æ¸™","æ°´æ¾¤ç¯€","é¢¨æ¾¤ä¸­å­š","é›·å±±å°é","æ°´ç«æ—¢æ¸ˆ","ç«æ°´æœªæ¸ˆ"],e=["åˆçˆ»","äºŒçˆ»","ä¸‰çˆ»","å››çˆ»","äº”çˆ»","ä¸Šçˆ»"];let s=1;for(let n=1;n<=64;n++)for(let i=1;i<=6;i++)a.push({"é€šã—ç•ªå·":s++,"å¦ç•ªå·":n,"å¦å":t[n-1],"çˆ»":e[i-1],"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":["å¤‰åŒ–","è»¢æ©Ÿ","é¸æŠ"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":`${t[n-1]}ã®${e[i-1]}ã®çŠ¶æ…‹`,"S1_åŸºæœ¬ã‚¹ã‚³ã‚¢":50+Math.floor(50*Math.random()),"S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":40+Math.floor(40*Math.random()),"S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢":30+Math.floor(50*Math.random()),"S4_ãƒªã‚¹ã‚¯":-(20+Math.floor(60*Math.random())),"S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹":Math.random()>.5?"èƒ½å‹•":"å—å‹•","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢":20+Math.floor(60*Math.random()),"S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢":30+Math.floor(50*Math.random())});return a.push({"é€šã—ç•ªå·":385,"å¦ç•ªå·":0,"å¦å":"ç”¨ä¹","çˆ»":"ç”¨ä¹","ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":["ç¾¤é¾ç„¡é¦–","å‰","å”åŠ›"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":"å…¨é™½æ¥µã¾ã‚‹","S1_åŸºæœ¬ã‚¹ã‚³ã‚¢":75,"S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":80,"S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢":60,"S4_ãƒªã‚¹ã‚¯":-20,"S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹":"èƒ½å‹•","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢":40,"S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢":70},{"é€šã—ç•ªå·":386,"å¦ç•ªå·":0,"å¦å":"ç”¨å…­","çˆ»":"ç”¨å…­","ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":["åˆ©æ°¸è²","å …å®Ÿ","æŒç¶š"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":"å…¨é™°æ¥µã¾ã‚‹","S1_åŸºæœ¬ã‚¹ã‚³ã‚¢":70,"S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":60,"S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢":80,"S4_ãƒªã‚¹ã‚¯":-15,"S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹":"å—å‹•","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢":20,"S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢":75}),a}initializeFallback(){return console.warn("âš ï¸ Using fallback initialization"),this.database=this.generateFallbackData(),this.isLoaded=!0,!0}getDatabaseData(){return this.isLoaded?this.database:(console.warn("âš ï¸ Database not loaded, returning empty array"),[])}getHexagramYaoData(a,t){if(!this.isLoaded)return null;const e=6*(a-1)+t-1;return e>=0&&e<this.database.length?this.database[e]:(console.warn(`âš ï¸ No data found for å¦${a} çˆ»${t}`),null)}searchByKeyword(a){return this.isLoaded?this.database.filter(t=>t["ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"].some(t=>t.includes(a))||t["ç¾ä»£è§£é‡ˆã®è¦ç´„"].includes(a)||t["å¦å"].includes(a)):[]}filterByScore(a,t,e=100){return this.isLoaded?this.database.filter(s=>{const n=s[a];return n>=t&&n<=e}):[]}getStatistics(){if(!this.isLoaded)return null;const a={totalEntries:this.database.length,hexagrams:new Set(this.database.map(a=>a["å¦ç•ªå·"])).size,averageScores:{},stanceDistribution:{"èƒ½å‹•":0,"å—å‹•":0,"ä¸­ç«‹":0}};return["S1_åŸºæœ¬ã‚¹ã‚³ã‚¢","S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«","S3_å®‰å®šæ€§ã‚¹ã‚³ã‚¢","S6_å¤‰å‹•æ€§ã‚¹ã‚³ã‚¢","S7_ç·åˆè©•ä¾¡ã‚¹ã‚³ã‚¢"].forEach(t=>{const e=this.database.reduce((a,e)=>a+(e[t]||0),0);a.averageScores[t]=Math.round(e/this.database.length)}),this.database.forEach(t=>{const e=t["S5_ä¸»ä½“æ€§æ¨å¥¨ã‚¹ã‚¿ãƒ³ã‚¹"]||"ä¸­ç«‹";a.stanceDistribution[e]++}),a}}"undefined"!=typeof window&&(window.H384DatabaseConnector=H384DatabaseConnector,window.h384db=new H384DatabaseConnector,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.h384db.initialize()}):window.h384db.initialize()),window.getDatabaseData=function(){return window.h384db&&window.h384db.isLoaded?window.h384db.getDatabaseData():window.H384_DATA&&Array.isArray(window.H384_DATA)?window.H384_DATA:(console.warn("âš ï¸ getDatabaseData: No data available"),[])},console.log("âœ… H384DatabaseConnector loaded")}("undefined"!=typeof window?window:this);