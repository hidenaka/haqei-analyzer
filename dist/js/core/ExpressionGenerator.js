!function(e){"use strict";class ExpressionGenerator{constructor(){this.version="1.0",console.log("📝 ExpressionGenerator v1.0 initialized"),this._expressionCache=new Map,this._MAX_CACHE_SIZE=100}getOSBunjinCharacteristics(e){try{const n={engine:{bunjinNames:["積極的な一面","推進する自分","挑戦する側面","リーダー気質の部分","創造的な声"],role:"内なる推進力・創造力を担当する側面",voice:"「やってみよう」「進めよう」「作り出そう」という前向きな心の声"},interface:{bunjinNames:["社交的な面","協調する自分","人と繋がる側面","コミュニケーター気質","調和を大切にする声"],role:"内なる社会性・対人関係を担当する側面",voice:"「みんなで協力しよう」「関係を大切にしよう」という社会性を重視する心の声",stressBehavior:"過度な気遣い、他人に合わせすぎ、自分を抑制"},safe:{bunjinNames:["慎重な部分","守る自分","安全を確保する側面","誠実な面","安定を求める声"],role:"内なる安全確保・リスク管理を担当する側面",voice:"「よく考えよう」「安全を確保しよう」「無理をしないでおこう」という慎重な心の声",stressBehavior:"過度な心配、行動制限、変化への抵抗、萎縮"}};return n[e]||n.engine}catch(n){return console.error("❌ OS characteristics error:",n),{bunjinNames:["側面"],role:"内なる側面",voice:"心の声"}}}generateOSPairSpecificExpression(e,n,r,i){try{const s=`pair_${e}_${n}_${r}_${i}`;if(this._expressionCache.has(s))return this._expressionCache.get(s);const t=`${e}-${n}`,o={"engine-safe":[`場面に応じて自分の中の${r}と${i}が適切に現れ、積極性と慎重さのバランスの取れた行動ができる`,`必要な時に内なる${r}と${i}が自然に切り替わり、勇気と安全の両立を実現する`,`心の中の${r}と${i}が状況によって自然に連携し、勇気と慎重さを併せ持った自分として行動する`,`自分の中の${r}と${i}が有機的に連動し、挑戦と安定の調和した判断ができる`,`場面に応じて${r}と${i}が適切に働き、推進力と安全性を両立させた選択ができる`],"interface-safe":[`状況に応じて自分の中の${r}と${i}が現れ、社会性と安定性のバランスの取れた関係作りができる`,`必要な時に内なる${r}と${i}が協力し、人間関係の中で安心と信頼を両立する`,`場面に応じて自分の中の${r}と${i}が適切に現れ、人間関係の中で安心と信頼を両立できる`,`心の中の${r}と${i}が状況によって連携し、社会性を保ちながら自分を守ることができる`,`自分の中の${r}と${i}が有機的に働き、人との繋がりと個人の安全を両立できる`],"engine-interface":[`必要な時に内なる${r}や${i}が前面に出て、状況に最適な推進力とコミュニケーション力を発揮する`,`場面に応じて自分の中の${r}と${i}が協調し、リーダーシップと協調性を両立させる`,`心の中の${r}と${i}が自然に連携し、行動力と社会性の調和した自分として振る舞える`,`状況によって内なる${r}と${i}が適切に働き、実行力と調整力のバランスが取れる`,`自分の中の${r}と${i}が有機的に協力し、推進と協調の最適な組み合わせを実現する`]}[t];if(o&&o.length>0){const e=o[Math.floor(Math.random()*o.length)];if(this._expressionCache.size>this._MAX_CACHE_SIZE){const e=this._expressionCache.keys().next().value;this._expressionCache.delete(e)}return this._expressionCache.set(s,e),e}return null}catch(s){return console.error("❌ OS pair expression generation error:",s),null}}generateBunjinHarmoniousExpression(e,n,r){try{const i=this.getOSBunjinCharacteristics(e),s=this.getOSBunjinCharacteristics(n),t=i.bunjinNames[Math.floor(Math.random()*i.bunjinNames.length)],o=s.bunjinNames[Math.floor(Math.random()*s.bunjinNames.length)],a=this.generateOSPairSpecificExpression(e,n,t,o);if(a)return console.log("💪 OSペアテンプレート使用"),a;if(r.ichingRelations&&r.ichingRelations.length>0){const e=r.ichingRelations[0],n=this.generateBunjinRelationshipExpression(e.type,t,o);return console.log(`🔮 易経関係表現: ${e.type}`),n}if(r.subtleDifferences&&r.subtleDifferences.length>0){const e=r.subtleDifferences[0],n=this.generateBunjinDifferenceExpression(e.type,t,o);return console.log(`🎭 微細差異表現: ${e.type}`),n}return console.log("🔄 フォールバック表現使用"),`自分の中の${t}と${o}が場面に応じて自然に協力し、柔軟でバランスの取れた行動ができる`}catch(i){return console.error("❌ Harmonious expression generation error:",i),"内なる側面が調和して、バランスの取れた行動ができる"}}generateBunjinRelationshipExpression(e,n,r){const i={adjacent:`場面に応じて自分の中の${n}と${r}が自然に協力し、無理なく状況に適応していく`,zong:`自分の中の${n}と${r}がお互いに影響し合いながら、バランスの取れた行動ができる`,terminal:`心の中の${n}と${r}が相互に支え合って、継続的に成長していく力を発揮する`,origin:`内なる${n}と${r}が深く協調して、状況に応じた独自の判断力を生み出す`};return i[e]||i.adjacent}generateBunjinDifferenceExpression(e,n,r){const i={cognitive_direction:`自分の中の${n}と${r}の考え方の違いが、場面に応じて柔軟で多角的な判断力を生み出す`,emotional_texture:`心の中の${n}と${r}の感じ方の違いが、状況に応じて豊かで深みのある感情表現を可能にする`,completion_phase:`内なる${n}と${r}の異なる成長段階が、場面に応じて継続的で持続的な発展を実現する`};return i[e]||i.cognitive_direction}clearCache(){try{this._expressionCache.clear(),console.log("✅ Expression cache cleared")}catch(e){console.error("❌ Error clearing expression cache:",e)}}getCacheStatistics(){return{expressionCache:this._expressionCache.size,maxSize:this._MAX_CACHE_SIZE}}}"undefined"!=typeof module&&module.exports?module.exports=ExpressionGenerator:e.ExpressionGenerator=ExpressionGenerator}("undefined"!=typeof window?window:global);