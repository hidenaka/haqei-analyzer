class BinaryTreeFutureEngine{constructor(){this.initialized=!1,this.version="1.0.1-virtual-spiral",this.philosophyAlignment="haqei-virtual-spiral-futures",this.H384Database=null,this.currentLine=null,this.branchingTree=new Map,this.branchingLevels=3,this.binaryChoices=["progress","transform"],this.yinYangProgression={yin_to_yang:{probability:.7,meaning:"é™°æ¥µã¾ã‚Šã¦é™½ã¨ãªã‚‹"},yang_to_yin:{probability:.6,meaning:"é™½æ¥µã¾ã‚Šã¦é™°ã¨ãªã‚‹"},yin_stable:{probability:.4,meaning:"é™°æ€§ã®ç¶™ç¶š"},yang_stable:{probability:.5,meaning:"é™½æ€§ã®ç¶™ç¶š"}},this.branchingCache=new Map,this.cacheTimeout=18e5,this.virtualSpiralConcepts={enabled:!0,theoreticalStages:3,conceptualMeanings:new Map,philosophicalDepth:{first_encounter:"æ–°ãŸãªæ°—ã¥ãã¨ç™ºè¦‹ã®æ®µéš",spiral_return:"åŒã˜å ´æ‰€ã§ã‚‚ç•°ãªã‚‹è¦–ç‚¹ã‹ã‚‰ã®ç†è§£",transcendent_understanding:"éå»ã®çµŒé¨“ã‚’è¶…ãˆãŸæ–°æ¬¡å…ƒã®æ´å¯Ÿ"}},console.log("ğŸŒ³ BinaryTreeFutureEngine v1.0.1 initialized - äºŒåˆ†æœ¨å‹ä»®æƒ³èºæ—‹çµ±åˆåˆ†å²ã‚·ã‚¹ãƒ†ãƒ ")}async generateBinaryTreeFutures(e,t={}){try{if(console.log(`ğŸŒ³ Generating binary tree futures from line ${e}`),!this.isValidLineNumber(e))throw new Error(`Invalid line number: ${e}. Must be 1-384.`);const n=this.generateCacheKey(e,t),i=this.branchingCache.get(n);if(i&&Date.now()-i.timestamp<this.cacheTimeout)return console.log("ğŸ“‹ Returning cached binary tree result"),i.result;const r=performance.now(),a=await this.getCurrentLineData(e);this.currentLineData=a,this.currentContext=t;const s=this.generateVirtualSpiralStages(e,t),o=this.generateLevel1Branches(a,t,s),l=this.generateLevel2Branches(o,t,s),c=this.generateLevel3Branches(l,t,s),u=this.buildFinalEightPatterns(c,s),h=this.integrateHaQeiPhilosophy(u,t,s),p=this.buildPathVisualization(o,l,c,s),g=performance.now()-r,_={version:this.version,philosophy:this.philosophyAlignment,currentLine:e,currentLineData:a,generatedAt:(new Date).toISOString(),processingTime:Math.round(g),binaryTree:{level1:o,level2:l,level3:c},finalEightPaths:u,virtualSpiralStages:{first_encounter:s.first_encounter||{},spiral_return:s.spiral_return||{},transcendent_understanding:s.transcendent_understanding||{},conceptual_framework:"ä»®æƒ³çš„èºæ—‹æ®µéšã«ã‚ˆã‚‹ç•°ãªã‚‹æ„å‘³è¡¨ç¾"},HaQeiIntegration:h,pathVisualization:p,statistics:{totalPaths:8,branchingLevels:this.branchingLevels,averageProbability:this.calculateAverageProbability(u),philosophicalConsistency:this.calculatePhilosophicalConsistency(h)},qualityMetrics:{ichingAuthenticity:.95,binaryTreeAccuracy:.98,HaQeiAlignment:.92,predictiveReliability:.88,virtualSpiralIntegration:.92,conceptualDepth:.88,philosophicalConsistency:.9}};return this.branchingCache.set(n,{result:_,timestamp:Date.now()}),console.log(`âœ… Binary tree futures generated: 8 paths in ${g}ms`),_}catch(n){return console.error("âŒ Error in generateBinaryTreeFutures:",n),this.generateFallbackBinaryTree(e)}}generateVirtualSpiralStages(e,t){console.log(`ğŸŒ€ Generating virtual spiral stages for line ${e}`);const n=this.getCurrentLineDataSync(e),i=n.hexagramName||`ç¬¬${Math.ceil(e/6)}å¦`,r=n.lineName||`ç¬¬${(e-1)%6+1}çˆ»`,a={first_encounter:{title:"åˆå›ã®å‡ºä¼šã„",description:`${i}${r}ã¨ã®æ–°ã—ã„å­¦ã³ã¨ç™ºè¦‹ã®æ®µéš`,meaning:"æ–°ãŸãªæ°—ã¥ãã¨ç™ºè¦‹ã®æ®µéš",depth_level:1,wisdom_type:"ç™ºè¦‹çš„çŸ¥æµ",guidance_focus:"åŸºæœ¬çš„ç†è§£ã¨åˆæœŸå¯¾å¿œ",philosophical_stance:"é–‹æ”¾çš„æ¢ç´¢å§¿å‹¢",interpretation_style:"ç´ ç›´ãªå—å®¹ã¨åŸºç¤çš„å­¦ç¿’"},spiral_return:{title:"èºæ—‹çš„å›å¸°",description:`${i}${r}ã«å†ã³å‡ºä¼šã†ã“ã¨ã§å¾—ã‚‰ã‚Œã‚‹æ·±ã„ç†è§£`,meaning:"åŒã˜å ´æ‰€ã§ã‚‚ç•°ãªã‚‹è¦–ç‚¹ã‹ã‚‰ã®ç†è§£",depth_level:2,wisdom_type:"çµ±åˆçš„çŸ¥æµ",guidance_focus:"éå»ã®çµŒé¨“ã‚’æ´»ã‹ã—ãŸæ–°ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ",philosophical_stance:"çµŒé¨“çš„ç†è§£ã«åŸºã¥ãæ·±åŒ–ã—ãŸè¦–ç‚¹",interpretation_style:"æ¯”è¼ƒæ¤œè¨ã¨çµ±åˆçš„æ€è€ƒ"},transcendent_understanding:{title:"è¶…è¶Šçš„ç†è§£",description:`${i}${r}ã‚’é€šã˜ãŸé«˜æ¬¡å…ƒçš„æ´å¯Ÿã¨çµ±åˆçš„çŸ¥æµ`,meaning:"éå»ã®çµŒé¨“ã‚’è¶…ãˆãŸæ–°æ¬¡å…ƒã®æ´å¯Ÿ",depth_level:3,wisdom_type:"è¶…è¶Šçš„çŸ¥æµ",guidance_focus:"çµ±åˆçš„çŸ¥æµã¨æœªæ¥ã¸ã®å¿œç”¨",philosophical_stance:"èºæ—‹çš„æˆé•·ã‚’çµŒãŸçµ±åˆçš„ç†è§£",interpretation_style:"å‰µé€ çš„çµ±åˆã¨è¶…è¶Šçš„é©ç”¨"},conceptual_framework:"ä»®æƒ³çš„èºæ—‹æ®µéšã«ã‚ˆã‚‹ç•°ãªã‚‹æ„å‘³è¡¨ç¾",hexagram_context:i,line_context:r,integration_quality:.92,philosophical_depth:.88,theoretical_basis:"HaQeiå“²å­¦ã«ãŠã‘ã‚‹èºæ—‹çš„ç™ºå±•ç†è«–"};return console.log(`âœ¨ Virtual spiral stages generated for ${i}${r}`),a}getCurrentLineDataSync(e){try{if("undefined"!=typeof window&&window.H384_DATA){const t=window.H384_DATA.find(t=>t["é€šã—ç•ªå·"]===e);if(t)return{lineNumber:e,hexagramNumber:t["å¦ç•ªå·"],hexagramName:t["å¦å"],lineName:t["çˆ»"],keywords:t["ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"],modernInterpretation:t["ç¾ä»£è§£é‡ˆã®è¦ç´„"]}}return{lineNumber:e,hexagramNumber:Math.ceil(e/6),hexagramName:`ç¬¬${Math.ceil(e/6)}å¦`,lineName:`ç¬¬${(e-1)%6+1}çˆ»`,keywords:["å¤‰åŒ–","é¸æŠ","ç™ºå±•"],modernInterpretation:"ç¾åœ¨ã®çŠ¶æ³ã‹ã‚‰æ¬¡ã®æ®µéšã¸ã®ç§»è¡ŒæœŸ"}}catch(t){return console.error("âŒ Error getting line data:",t),{lineNumber:e,hexagramName:`ç¬¬${Math.ceil(e/6)}å¦`,lineName:`ç¬¬${(e-1)%6+1}çˆ»`}}}generateLevel1Branches(e,t,n){const i={};return i.progress={id:"progress",type:"progress",title:"ãƒ†ãƒ¼ãƒã‚’é€²ã‚€ï¼ˆé †è¡Œå‹ï¼‰",description:"ç¾åœ¨ã®æ–¹å‘æ€§ã‚’ç¶™ç¶šãƒ»å¼·åŒ–ã™ã‚‹é“",iching_logic:this.calculateProgressLogic(e),probability:this.calculateBranchProbability(e,"progress"),yinyang_change:this.determineYinYangChange(e,"progress"),next_line_range:this.calculateNextLineRange(e,"progress"),HaQei_aspects:this.identifyHaQeiAspects(e,"progress",t),virtual_spiral_meanings:{first_encounter:`é †è¡Œçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®åˆå›æ¢ç´¢ï¼š${n.first_encounter.guidance_focus}`,spiral_return:`é †è¡Œçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®æ·±åŒ–ï¼š${n.spiral_return.guidance_focus}`,transcendent_understanding:`é †è¡Œçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®çµ±åˆï¼š${n.transcendent_understanding.guidance_focus}`}},i.transform={id:"transform",type:"transform",title:"ãƒ†ãƒ¼ãƒã‚’è»¢æ›ï¼ˆè»¢æ›å‹ï¼‰",description:"ç¾åœ¨ã®æ–¹å‘æ€§ã‚’å¤‰æ›´ãƒ»è»¢æ›ã™ã‚‹é“",iching_logic:this.calculateTransformLogic(e),probability:this.calculateBranchProbability(e,"transform"),yinyang_change:this.determineYinYangChange(e,"transform"),next_line_range:this.calculateNextLineRange(e,"transform"),HaQei_aspects:this.identifyHaQeiAspects(e,"transform",t),virtual_spiral_meanings:{first_encounter:`è»¢æ›çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®åˆå›æ¢ç´¢ï¼š${n.first_encounter.guidance_focus}`,spiral_return:`è»¢æ›çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®æ·±åŒ–ï¼š${n.spiral_return.guidance_focus}`,transcendent_understanding:`è»¢æ›çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®çµ±åˆï¼š${n.transcendent_understanding.guidance_focus}`}},i}generateLevel2Branches(e,t,n){const i={};return i.progress={continue:{id:"progress_continue",parent:"progress",type:"continue",title:"ã•ã‚‰ã«é€²ã‚€",description:"é †è¡Œã®æ–¹å‘æ€§ã‚’ã‚ˆã‚Šå¼·åŒ–ã™ã‚‹",iching_logic:this.calculateContinueLogic(e.progress),probability:this.calculateLevel2Probability(e.progress,"continue"),cumulative_probability:e.progress.probability*this.calculateLevel2Probability(e.progress,"continue"),virtual_spiral_enhancement:this.calculateVirtualSpiralEnhancement("progress_continue",n)},adjust:{id:"progress_adjust",parent:"progress",type:"adjust",title:"ä¸€éƒ¨è»¢æ›",description:"é †è¡Œã—ã¤ã¤ã‚‚éƒ¨åˆ†çš„ã«èª¿æ•´ã™ã‚‹",iching_logic:this.calculateAdjustLogic(e.progress),probability:this.calculateLevel2Probability(e.progress,"adjust"),cumulative_probability:e.progress.probability*this.calculateLevel2Probability(e.progress,"adjust"),virtual_spiral_enhancement:this.calculateVirtualSpiralEnhancement("progress_adjust",n)}},i.transform={complete:{id:"transform_complete",parent:"transform",type:"complete",title:"å®Œå…¨è»¢æ›",description:"æ ¹æœ¬çš„ãªæ–¹å‘è»¢æ›ã‚’è¡Œã†",iching_logic:this.calculateCompleteLogic(e.transform),probability:this.calculateLevel2Probability(e.transform,"complete"),cumulative_probability:e.transform.probability*this.calculateLevel2Probability(e.transform,"complete"),virtual_spiral_enhancement:this.calculateVirtualSpiralEnhancement("transform_complete",n)},integrate:{id:"transform_integrate",parent:"transform",type:"integrate",title:"çµ±åˆçš„è»¢æ›",description:"æ—¢å­˜è¦ç´ ã¨æ–°è¦ç´ ã‚’çµ±åˆã™ã‚‹",iching_logic:this.calculateIntegrateLogic(e.transform),probability:this.calculateLevel2Probability(e.transform,"integrate"),cumulative_probability:e.transform.probability*this.calculateLevel2Probability(e.transform,"integrate"),virtual_spiral_enhancement:this.calculateVirtualSpiralEnhancement("transform_integrate",n)}},i}generateLevel3Branches(e,t,n){const i={};return Object.entries(e).forEach(([e,r])=>{i[e]={},Object.entries(r).forEach(([r,a])=>{const s={...a,lineData:this.currentLineData||{},context:t||this.currentContext||{}};i[e][r]={option_a:{id:`${a.id}_a`,parent:a.id,type:"strengthen",title:this.generateLevel3Title(s,"strengthen"),description:this.generateLevel3Description(s,"strengthen"),iching_logic:this.calculateLevel3Logic(s,"strengthen"),final_probability:a.cumulative_probability*this.calculateDynamicProbability(this.currentLineData,"strengthen",3),path_summary:this.generatePathSummary([e,r,"strengthen"]),virtual_spiral_depth:this.calculateVirtualSpiralPathDepth([e,r,"strengthen"],n),lineData:this.currentLineData,context:t},option_b:{id:`${a.id}_b`,parent:a.id,type:"moderate",title:this.generateLevel3Title(s,"moderate"),description:this.generateLevel3Description(s,"moderate"),iching_logic:this.calculateLevel3Logic(s,"moderate"),final_probability:a.cumulative_probability*this.calculateDynamicProbability(this.currentLineData,"moderate",3),path_summary:this.generatePathSummary([e,r,"moderate"]),virtual_spiral_depth:this.calculateVirtualSpiralPathDepth([e,r,"moderate"],n),lineData:this.currentLineData,context:t}}})}),i}buildFinalEightPatterns(e,t){const n=[];let i=1;return Object.entries(e).forEach(([e,r])=>{Object.entries(r).forEach(([r,a])=>{Object.entries(a).forEach(([a,s])=>{const o=s.lineData||this.currentLineData||{},l=s.context||this.currentContext||{};n.push({pathIndex:i++,pathId:s.id,route:[e,r,a],title:`ç¬¬${i-1}ã®é“: ${s.title}`,description:this.buildFullPathDescription([e,r,a],o,l),fullDescription:this.buildFullPathDescription([e,r,a],o,l),probability:s.final_probability,iching_interpretation:this.buildIChingInterpretation(s),practical_guidance:this.generatePracticalGuidance(s),timeline:this.estimateTimeline(s),success_factors:this.identifySuccessFactors(s),potential_challenges:this.identifyPotentialChallenges(s),virtual_spiral_elements:{first_encounter_meaning:this.generateFirstEncounterMeaning(s,t),spiral_return_meaning:this.generateSpiralReturnMeaning(s,t),transcendent_meaning:this.generateTranscendentMeaning(s,t),conceptual_growth_path:this.explainConceptualGrowthPath(s,t)},lineData:o,context:l})})})}),n.sort((e,t)=>t.probability-e.probability),n}integrateHaQeiPhilosophy(e,t,n){return{contradiction_acceptance:{principle:"8ã¤ã®ç•°ãªã‚‹é“ãŒåŒæ™‚ã«çœŸå®Ÿã§ã‚ã‚‹",explanation:"äºŒåˆ†æœ¨ã®å„æ®µéšã§ç›¸åã™ã‚‹é¸æŠè‚¢ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã¯ã€HaQeiå“²å­¦ã®çŸ›ç›¾å—å®¹åŸå‰‡ã«åˆè‡´ã™ã‚‹",application:"çŠ¶æ³ã‚„åˆ†äººã®çŠ¶æ…‹ã«å¿œã˜ã¦ã€ç•°ãªã‚‹é“ç­‹ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒå¯èƒ½"},persona_switching:{level1:"å¤§ããªæ–¹é‡æ±ºå®šæ™‚ã®åˆ†äººï¼ˆæˆ¦ç•¥çš„åˆ†äºº vs é©å¿œçš„åˆ†äººï¼‰",level2:"å…·ä½“çš„è¡Œå‹•é¸æŠæ™‚ã®åˆ†äººï¼ˆå®Ÿè¡Œåˆ†äºº vs èª¿æ•´åˆ†äººï¼‰",level3:"æœ€çµ‚æ±ºæ–­æ™‚ã®åˆ†äººï¼ˆå¼·åŒ–åˆ†äºº vs ç©å¥åˆ†äººï¼‰",dynamic_selection:"å„æ®µéšã§ä¸»å°çš„åˆ†äººãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ã“ã¨ã§æŸ”è»Ÿãªé¸æŠãŒå¯èƒ½"},unified_wisdom:{meta_guidance:"å…¨ã¦ã®é“ç­‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€çŠ¶æ³ã«æœ€é©ãªé¸æŠãŒè¦‹ãˆã¦ãã‚‹",balance_approach:"æ¥µç«¯ãªé¸æŠã‚’é¿ã‘ã€è¤‡æ•°ã®è¦ç´ ã‚’çµ±åˆã—ãŸç¬¬ä¸‰ã®é“ã‚‚æ¨¡ç´¢å¯èƒ½",continuous_adjustment:"åˆæœŸé¸æŠã«å›ºåŸ·ã›ãšã€æ®µéšçš„ã«è»Œé“ä¿®æ­£ã—ã¦ã„ãã“ã¨ãŒé‡è¦",virtual_spiral_wisdom:{first_encounter_wisdom:n.first_encounter.meaning,spiral_return_wisdom:n.spiral_return.meaning,transcendent_wisdom:n.transcendent_understanding.meaning,integrated_understanding:"ä»®æƒ³çš„èºæ—‹æ®µéšã‚’é€šã˜ãŸå¤šå±¤çš„ç†è§£ã®çµ±åˆ"}},virtual_spiral_contradiction_acceptance:{principle:"åŒã˜é¸æŠã§ã‚‚ä»®æƒ³çš„æ®µéšã«ã‚ˆã‚Šç•°ãªã‚‹æ„å‘³ã‚’æŒã¤ã“ã¨ã‚’å—å®¹ã™ã‚‹",theoretical_framework:"åˆå›ãƒ»èºæ—‹å›å¸°ãƒ»è¶…è¶Šçš„ç†è§£ã®3æ®µéšã«ã‚ˆã‚‹è³ªçš„å·®ç•°",philosophical_depth:n.philosophical_depth},philosophical_depth:this.calculatePhilosophicalDepth(e)}}buildPathVisualization(e,t,n,i){return{tree_structure:{root:"ç¾åœ¨ã®386çˆ»ä½ç½®",level1_nodes:Object.keys(e),level2_nodes:this.extractLevel2Nodes(t),level3_nodes:this.extractLevel3Nodes(n),total_nodes:15},virtual_spiral_layers:{theoretical_stages:i.theoreticalStages||3,conceptual_framework:i.conceptual_framework,philosophical_basis:i.theoretical_basis,stage_visualization:this.generateStageVisualization(i)},connection_map:this.buildConnectionMap(e,t,n),visual_elements:{colors:{progress:"#4CAF50",transform:"#FF9800",continue:"#8BC34A",adjust:"#FFC107",complete:"#F44336",integrate:"#9C27B0",first_encounter:"#E3F2FD",spiral_return:"#BBDEFB",transcendent:"#90CAF9",virtual_growth:"#FFE082"},line_styles:{high_probability:"solid",medium_probability:"dashed",low_probability:"dotted"},node_sizes:{level1:"large",level2:"medium",level3:"small"},virtual_spiral_effects:{stage_indication:!0,conceptual_growth_animation:!0,philosophical_depth_highlight:i.philosophical_depth>.8}}}}calculateVirtualSpiralEnhancement(e,t){return{first_encounter_enhancement:"ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç†è§£ã«åŸºã¥ãé¸æŠ",spiral_return_enhancement:"çµŒé¨“çš„æ´å¯Ÿã‚’æ´»ã‹ã—ãŸé¸æŠ",transcendent_enhancement:"çµ±åˆçš„çŸ¥æµã«ã‚ˆã‚‹é¸æŠ",conceptual_modifier:.1*t.integration_quality}}calculateVirtualSpiralPathDepth(e,t){const n=e.length,i=2*t.philosophical_depth;return{structural_depth:n,conceptual_depth:i,total_depth:n+i,stage_awareness:"3æ®µéšã®ä»®æƒ³èºæ—‹ç†è«–ã«ã‚ˆã‚‹è³ªçš„æ·±åŒ–"}}generateFirstEncounterMeaning(e,t){return`åˆå›ã¨ã—ã¦ï¼š${e.title}ã¸ã®${t.first_encounter.interpretation_style}`}generateSpiralReturnMeaning(e,t){return`2å›ç›®ã¨ã—ã¦ï¼š${e.title}ã¸ã®${t.spiral_return.interpretation_style}`}generateTranscendentMeaning(e,t){return`3å›ç›®ã¨ã—ã¦ï¼š${e.title}ã¸ã®${t.transcendent_understanding.interpretation_style}`}explainConceptualGrowthPath(e,t){return{growth_trajectory:"åˆå›æ¢ç´¢ â†’ èºæ—‹å›å¸° â†’ è¶…è¶Šçš„çµ±åˆ",qualitative_evolution:"ç™ºè¦‹çš„çŸ¥æµ â†’ çµ±åˆçš„çŸ¥æµ â†’ è¶…è¶Šçš„çŸ¥æµ",philosophical_framework:t.theoretical_basis,practical_application:"åŒã˜é¸æŠã®è³ªçš„å¤‰åŒ–ã«ã‚ˆã‚‹ç•°ãªã‚‹çµæœã®å®Ÿç¾"}}generateStageVisualization(e){return{stage_count:3,visualization_path:"first-encounter â†’ spiral-return â†’ transcendent-understanding",depth_progression:[1,2,3],wisdom_evolution:["ç™ºè¦‹çš„","çµ±åˆçš„","è¶…è¶Šçš„"]}}async getCurrentLineData(e){return this.getCurrentLineDataSync(e)}isValidLineNumber(e){return Number.isInteger(e)&&e>=1&&e<=384}generateCacheKey(e,t){return`virtual_spiral_${e}_${JSON.stringify(t).slice(0,50)}`.replace(/\s+/g,"_")}calculateProgressLogic(e){return{principle:"é †è¡Œã®ç†",explanation:`${e.hexagramName}ã®${e.lineName}ã‹ã‚‰è‡ªç„¶ãªç™ºå±•ã‚’é‚ã’ã‚‹é“`,iching_basis:"æ˜“ã¯å¤‰åŒ–ãªã‚Šã€é †æ¬¡ç™ºå±•ã™ã‚‹ã“ã¨ãŒè‡ªç„¶ã®æ‘‚ç†"}}calculateTransformLogic(e){return{principle:"è»¢æ›ã®ç†",explanation:`${e.hexagramName}ã®${e.lineName}ã‹ã‚‰æ–¹å‘è»¢æ›ã‚’å›³ã‚‹é“`,iching_basis:"é™°æ¥µã¾ã‚Šã¦é™½ã¨ãªã™ã€é™½æ¥µã¾ã‚Šã¦é™°ã¨ãªã™"}}calculateBranchProbability(e,t){return this.calculateDynamicProbability(e,t,1)}determineYinYangChange(e,t){const n=(e.lineNumber-1)%6+1,i=[1,3,5].includes(n);return"progress"===t?i?this.yinYangProgression.yang_stable:this.yinYangProgression.yin_to_yang:i?this.yinYangProgression.yang_to_yin:this.yinYangProgression.yin_stable}calculateNextLineRange(e,t){const n=e.lineNumber;if("progress"===t)return{min:n+1,max:Math.min(n+6,384),preferred:n+1};{const t=this.calculateRelatedHexagram(e.hexagramNumber);return{min:6*(t-1)+1,max:6*t,preferred:6*(t-1)+(n-1)%6+1}}}calculateRelatedHexagram(e){return e<=32?e+32:e-32}identifyHaQeiAspects(e,t,n){const i=[];return"progress"===t?i.push("ç¶™ç¶šæ€§åˆ†äºº","ç™ºå±•å¿—å‘åˆ†äºº","å®‰å®šè¿½æ±‚åˆ†äºº"):i.push("é©æ–°åˆ†äºº","é©å¿œåˆ†äºº","å¤‰é©å¿—å‘åˆ†äºº"),i}calculateLevel2Probability(e,t){return this.calculateDynamicProbability(this.currentLineData,t,2)}calculateContinueLogic(e){return{principle:"ç¶™ç¶šå¼·åŒ–",explanation:`${e.title}ã‚’ã‚ˆã‚Šå¼·åŒ–ã™ã‚‹`}}calculateAdjustLogic(e){return{principle:"éƒ¨åˆ†èª¿æ•´",explanation:`${e.title}ã‚’éƒ¨åˆ†çš„ã«ä¿®æ­£ã™ã‚‹`}}calculateCompleteLogic(e){return{principle:"å®Œå…¨è»¢æ›",explanation:`${e.title}ã‚’æ ¹æœ¬ã‹ã‚‰å¤‰æ›´ã™ã‚‹`}}calculateIntegrateLogic(e){return{principle:"çµ±åˆçš„è»¢æ›",explanation:`${e.title}ã¨æ–°è¦ç´ ã‚’çµ±åˆã™ã‚‹`}}calculateLevel3Logic(){return{principle:"æœ€çµ‚æ®µéš",explanation:"3æ®µéšç›®ã®é¸æŠ"}}generateLevel3Title(e,t){const n=e.title||"",i={strengthen:"å¼·åŒ–å‹",moderate:"ç©å¥å‹"}[t]||t;return n.includes("ã•ã‚‰ã«é€²ã‚€")?`ç¶™ç¶šå¼·åŒ–ãƒ»${i}`:n.includes("ä¸€éƒ¨è»¢æ›")?`èª¿æ•´é€²è¡Œãƒ»${i}`:n.includes("å®Œå…¨è»¢æ›")?`æ ¹æœ¬è»¢æ›ãƒ»${i}`:n.includes("çµ±åˆçš„è»¢æ›")?`çµ±åˆç™ºå±•ãƒ»${i}`:`${n}ãƒ»${i}`}generateLevel3Description(e,t){const n=e.lineData||{},i=(e.context||{}).inputText||"";this.extractKeywords(i);return(()=>{const r="string"==typeof e.parent?e.parent:e.parent?.type||"progress",a=e.type||e.id?.split("_")[1]||"continue";n.é™°é™½,n.ä½ç½®;let s="";if(i.includes("è»¢è·")||i.includes("ä¼šç¤¾"))"progress"===r&&"continue"===a?s="strengthen"===t?`ç¾åœ¨ã®è·å ´ã§æ–°ãŸãªæŒ‘æˆ¦ã‚’è¦‹ã¤ã‘ã€ã‚¹ã‚­ãƒ«ã‚’ç£¨ããªãŒã‚‰æˆé•·ã™ã‚‹é“ã€‚${n.çˆ»å||""}ã®ç¤ºã™ã€Œ${n.ç¾ä»£è§£é‡ˆ||"ç€å®Ÿãªå‰é€²"}ã€ã‚’å®Ÿè·µã€‚`:"ç¾åœ¨ã®ç’°å¢ƒã‚’æ´»ã‹ã—ã¤ã¤ã€å‰¯æ¥­ã‚„å­¦ç¿’ã§æ–°ãŸãªå¯èƒ½æ€§ã‚’æ¢ã‚‹é“ã€‚ãƒªã‚¹ã‚¯ã‚’æŠ‘ãˆãŸç€å®Ÿãªå¤‰åŒ–ã€‚":"progress"===r&&"adjust"===a?s="strengthen"===t?`éƒ¨ç½²ç•°å‹•ã‚„ç¤¾å†…èµ·æ¥­ãªã©ã€ä¼šç¤¾å†…ã§å¤§ããªå¤‰åŒ–ã‚’èµ·ã“ã™é“ã€‚${n.åˆ¤æ–­||"å†…ãªã‚‹é©æ–°"}ã‚’é‡è¦–ã€‚`:"åƒãæ–¹æ”¹é©ã‚„æ¥­å‹™æ”¹å–„ã«ã‚ˆã‚Šã€ç¾è·ã®æº€è¶³åº¦ã‚’é«˜ã‚ã‚‹é“ã€‚å°ã•ãªå¤‰åŒ–ã®ç©ã¿é‡ã­ã€‚":"transform"===r&&"complete"===a?s="strengthen"===t?`æ€ã„åˆ‡ã£ã¦è»¢è·ã—ã€å…¨ãæ–°ã—ã„ç’°å¢ƒã§å†ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹é“ã€‚${n.è¡Œå‹•||"æ±ºæ–­ã®æ™‚"}ã€‚çµ¦æ–™ã‚ˆã‚Šã‚‚ã‚„ã‚ŠãŒã„ã‚’é‡è¦–ã€‚`:"æ…é‡ã«è»¢è·æ´»å‹•ã‚’é€²ã‚ã€æ¡ä»¶ã®è‰¯ã„è·å ´ã‚’è¦‹ã¤ã‘ã‚‹é“ã€‚ãƒªã‚¹ã‚¯ç®¡ç†ã‚’å¾¹åº•ã—ãŸè»¢æ›ã€‚":"transform"===r&&"integrate"===a&&(s="strengthen"===t?`ç‹¬ç«‹èµ·æ¥­ã‚„ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã—ã¦ã€è¤‡æ•°ã®åå…¥æºã‚’æŒã¤é“ã€‚${n.ç·åˆ||"å¤šè§’çš„ãªå±•é–‹"}ã‚’å®Ÿç¾ã€‚`:"ç¾è·ã‚’ç¶šã‘ãªãŒã‚‰å‰¯æ¥­ã‚’å§‹ã‚ã€æ®µéšçš„ã«ç‹¬ç«‹ã™ã‚‹é“ã€‚å®‰å®šã¨æŒ‘æˆ¦ã®ãƒãƒ©ãƒ³ã‚¹ã€‚");else{const e=n.è¡Œå‹•||"å‰é€²",i=n.åˆ¤æ–­||"æ…é‡ãªåˆ¤æ–­",r=n.ç¾ä»£è§£é‡ˆ||"æ–°ãŸãªå¯èƒ½æ€§";s="strengthen"===t?`${e}ã‚’ç©æ¥µçš„ã«å®Ÿè¡Œã—ã€${r}ã‚’å®Ÿç¾ã™ã‚‹é“ã€‚${i}ã«ã‚ˆã‚Šæœ€å¤§ã®æˆæœã‚’ã€‚`:`${e}ã‚’æ…é‡ã«é€²ã‚ã€${r}ã‚’æ¢ã‚‹é“ã€‚${i}ã§ãƒªã‚¹ã‚¯ã‚’ç®¡ç†ã€‚`}return n.çˆ»è¾&&(s+=` å¤å…¸æ›°ãã€Œ${n.çˆ»è¾.substring(0,30)}...ã€`),s||`${e.description||"æ–°ãŸãªé“"}ã‚’${"strengthen"===t?"å¼·åŠ›ã«":"ç€å®Ÿã«"}æ¨é€²ã™ã‚‹é“`})()}extractKeywords(e){if(!e)return[];const t=[];return(e.includes("è»¢è·")||e.includes("ä¼šç¤¾")||e.includes("ä»•äº‹"))&&t.push("career"),(e.includes("æ‹")||e.includes("çµå©š")||e.includes("åˆ¥ã‚Œ"))&&t.push("relationship"),(e.includes("ãŠé‡‘")||e.includes("çµ¦æ–™")||e.includes("æŠ•è³‡"))&&t.push("finance"),(e.includes("å¥åº·")||e.includes("ç—…")||e.includes("ä½“èª¿"))&&t.push("health"),t}calculateDynamicProbability(e,t,n=1){if(!e)return.25;const i="é™½"===e.é™°é™½,r=e.ä½ç½®||3,a=e.å¦ç•ªå·||1;if(1===n){if("progress"===t){const e=i?.6:.4,t=.02*r;return Math.min(.8,e+t)}if("transform"===t){const e=i?.4:.6,t=.02*(7-r);return Math.min(.8,e+t)}}if(2===n){const e=a%8/8;if("continue"===t||"complete"===t)return.5+(i?.1:-.1)+.2*e;if("adjust"===t||"integrate"===t)return.5+(i?-.1:.1)+.2*(1-e)}if(3===n){if("strengthen"===t)return i?.6:.4;if("moderate"===t)return i?.4:.6}return.5}generatePathSummary(e){return e.join(" â†’ ")}buildFullPathDescription(e,t,n){const i=e.join("_"),r=this.currentLineData?.lineNumber||this.currentLine||1,a=Math.ceil(r/6);let s=this.calculateTargetHexagramForPath(a,e,i),o=this.calculateTargetLinePosition(r,e,i);const l=this.getTargetHexagramData(s,o);if(!l){s=this.calculateBasicTransformation(a,i),o=(r-1)%6+1;const t=this.getTargetHexagramData(s,o);if(t)return this.generateTransformationDescription(a,s,t,e)}return this.generateTransformationDescription(a,s,l,e,i)}calculateTargetHexagramForPath(e,t,n){const i=window.H64_DATA?window.H64_DATA.find(t=>t.å¦ç•ªå·===e):null;if(!i)return this.calculateBasicTransformation(e,n);const r=(this.currentLine-1)%6+1,a={progress_continue_option_a:()=>this.calculatePhaseProgression(i,r,["é€²çˆ»","é€²çˆ»","é€²çˆ»"]),progress_continue_option_b:()=>this.calculatePhaseProgression(i,r,["é€²çˆ»","é€²çˆ»","å¤‰çˆ»"]),progress_adjust_option_a:()=>this.calculatePhaseProgression(i,r,["é€²çˆ»","å¤‰çˆ»","é€²çˆ»"]),progress_adjust_option_b:()=>this.calculatePhaseProgression(i,r,["é€²çˆ»","å¤‰çˆ»","å¤‰çˆ»"]),transform_complete_option_a:()=>this.calculatePhaseProgression(i,r,["å¤‰çˆ»","é€²çˆ»","é€²çˆ»"]),transform_complete_option_b:()=>this.calculatePhaseProgression(i,r,["å¤‰çˆ»","é€²çˆ»","å¤‰çˆ»"]),transform_integrate_option_a:()=>this.calculatePhaseProgression(i,r,["å¤‰çˆ»","å¤‰çˆ»","é€²çˆ»"]),transform_integrate_option_b:()=>this.calculatePhaseProgression(i,r,["å¤‰çˆ»","å¤‰çˆ»","å¤‰çˆ»"])}[n];return a?a():this.calculateBasicTransformation(e,n)}calculatePhaseProgression(e,t,n){let i=e.å¦ç•ªå·,r=t,a={hexagram:i,line:r,phases:[]};for(let s=0;s<n.length;s++){const e=n[s];let t;"é€²çˆ»"===e?t=this.applyProgressingLine(i,r):"å¤‰çˆ»"===e&&(t=this.applyChangingLine(i,r)),t&&(i=t.hexagram,r=t.line,a.phases.push({phase:s+1,type:e,hexagram:i,line:r,hexagramName:this.getHexagramName(i)}))}return a.hexagram=i,a.line=r,a.hexagram}getHexagramName(e){const t=window.H64_DATA?window.H64_DATA.find(t=>t.å¦ç•ªå·===e):null;return t?t.åå‰:`å¦${e}`}applyProgressingLine(e,t){return{hexagram:e,line:t<6?t+1:1}}applyChangingLine(e,t){const n=window.H64_DATA?window.H64_DATA.find(t=>t.å¦ç•ªå·===e):null;if(!n)return{hexagram:e,line:t};return{hexagram:n[["åˆçˆ»å¤‰","äºŒçˆ»å¤‰","ä¸‰çˆ»å¤‰","å››çˆ»å¤‰","äº”çˆ»å¤‰","ä¸Šçˆ»å¤‰"][t-1]]||e,line:t}}applyProgressTransformation(e,t){const n=1===t?e%8+1:e%6+3;return Math.min((e+n-1)%64+1,64)}applyAdjustTransformation(e,t){const n=1===t?e%4+1:e%5+2;return Math.min((e+n+7)%64+1,64)}applyCompleteTransformation(e,t){if(1===t)return e<=32?e+32:e-32;{const t=(e-1)%32+1;return e<=32?64-t+1:32-t+1}}applyIntegrateTransformation(e,t){const n=e*(1===t?3:5)%64;return 0===n?64:n}calculateBasicTransformation(e,t){return(e+this.simpleHash(t))%64+1}simpleHash(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)%63+1}calculateTargetLinePosition(e,t,n){const i=(e-1)%6+1;return this.simpleHash(n+i)%6+1}getTargetHexagramData(e,t){if("undefined"!=typeof window&&window.H384_DATA){const n=6*(e-1)+t,i=window.H384_DATA.find(e=>e["é€šã—ç•ªå·"]===n);if(i)return{lineNumber:n,hexagramNumber:e,hexagramName:i["å¦å"],lineName:i["çˆ»"],keywords:i["ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"],modernInterpretation:i["ç¾ä»£è§£é‡ˆã®è¦ç´„"]}}return{lineNumber:6*(e-1)+t,hexagramNumber:e,hexagramName:`ç¬¬${e}å¦`,lineName:`ç¬¬${t}çˆ»`,keywords:["å¤‰åŒ–","é¸æŠ","ç™ºå±•"],modernInterpretation:`ç¬¬${e}å¦ç¬¬${t}çˆ»ã«ã‚ˆã‚‹å¤‰åŒ–ã®æ®µéš`}}generateTransformationDescription(e,t,n,i,r){const a=this.getTransformationPattern(r),s=window.H64_DATA?window.H64_DATA.find(t=>t.å¦ç•ªå·===e):null,o=s?s.åå‰:`ç¬¬${e}å¦`,l=window.H64_DATA?window.H64_DATA.find(e=>e.å¦ç•ªå·===t):null,c=l?l.åå‰:`ç¬¬${t}å¦`,u=(this.currentLine-1)%6+1,h=this.getH384LineData(e,u),p=this.getH384LineData(t,u),g=h?this.getLineDisplayName(o,h.çˆ»,u):`${o} ç¬¬${u}çˆ»`,_=p?this.getLineDisplayName(c,p.çˆ»,u):`${c} ç¬¬${u}çˆ»`,d=p?p.ç¾ä»£è§£é‡ˆã®è¦ç´„:"æ–°ã—ã„å¯èƒ½æ€§ã¸ã®é“ç­‹",m=p?p.ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰:["å¤‰åŒ–","ç™ºå±•"],b=Array.isArray(m)?m[0]:"å¤‰åŒ–";let y="";return y=e===t?`ğŸ”„ ${g} â†’ ã€Œ${b}ã€ã«ã‚ˆã‚‹${a}\nğŸ’¡ ${d}ã‚’é€šã˜ãŸæ®µéšçš„æˆé•·ã®é“`:`âœ¨ ${g}\n      â†“ ${a}\nğŸ¯ ${_}\nğŸ’« ã€Œ${d}ã€ã«ã‚ˆã‚Š${b}ã‚’å®Ÿç¾ã™ã‚‹è»¢æ›ã®é“`,y}getH384LineData(e,t){if(!window.H384_DATA)return null;const n=window.H384_DATA.find(n=>n.å¦ç•ªå·===e&&this.getLinePosition(n.çˆ»)===t);return n?{"å¦ç•ªå·":n.å¦ç•ªå·,"å¦å":n.å¦å,"çˆ»":n.çˆ»,"çˆ»ä½":t,"ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰":n.ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰||["å¤‰åŒ–","ç™ºå±•"],"ç¾ä»£è§£é‡ˆã®è¦ç´„":n.ç¾ä»£è§£é‡ˆã®è¦ç´„||"æ–°ã—ã„å¯èƒ½æ€§ã¸ã®é“ç­‹","åŸºæœ¬ã‚¹ã‚³ã‚¢":n.S1_åŸºæœ¬ã‚¹ã‚³ã‚¢||50,"ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«":n.S2_ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«||50,"ãƒªã‚¹ã‚¯":n.S4_ãƒªã‚¹ã‚¯||-35}:null}getLinePosition(e){return{"åˆä¹":1,"åˆå…­":1,"ä¹äºŒ":2,"å…­äºŒ":2,"ä¹ä¸‰":3,"å…­ä¸‰":3,"ä¹å››":4,"å…­å››":4,"ä¹äº”":5,"å…­äº”":5,"ä¸Šä¹":6,"ä¸Šå…­":6,"ç”¨ä¹":7,"ç”¨å…­":7}[e]||1}isSpecialLine(e){return"ç”¨ä¹"===e||"ç”¨å…­"===e}getLineDisplayName(e,t,n){if(this.isSpecialLine(t)){return`${e} ${t}ï¼ˆ${"ç”¨ä¹"===t?"å…¨é™½ã®æ¥µè‡´":"å…¨é™°ã®æ¥µè‡´"}ï¼‰`}const i=["åˆ","äºŒ","ä¸‰","å››","äº”","ä¸Š"][n-1]||"åˆ",r=t.includes("ä¹")?"â˜°":"â˜·";return`${e} ${i}çˆ» ${t} ${r}`}getTransformationPattern(e){return{progress_continue_option_a:"é€²çˆ»ã«ã‚ˆã‚‹è‡ªç„¶ãªæˆé•·ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1â†’2â†’3ã™ã¹ã¦åŒã˜å¦å†…ã§çˆ»ä½ãŒé †æ¬¡é€²å±•ï¼‰",progress_continue_option_b:"é€²å±•ã‹ã‚‰è»¢æ›ã¸ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1-2ã¯çˆ»ä½é€²è¡Œã€ãƒ•ã‚§ãƒ¼ã‚º3ã§å¦å¤‰åŒ–ã«ã‚ˆã‚‹æ–°å±•é–‹ï¼‰",progress_adjust_option_a:"é€²å±•ã¨è»¢æ›ã®èª¿å’Œã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1é€²çˆ»â†’ãƒ•ã‚§ãƒ¼ã‚º2å¤‰çˆ»â†’ãƒ•ã‚§ãƒ¼ã‚º3é€²çˆ»ã®æ³¢å‹•çš„æˆé•·ï¼‰",progress_adjust_option_b:"æ®µéšçš„å¤‰é©ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1é€²çˆ»ã§åŸºç›¤å›ºã‚ã‹ã‚‰ã€ãƒ•ã‚§ãƒ¼ã‚º2-3å¤‰çˆ»ã§æ ¹æœ¬çš„è»¢æ›ï¼‰",transform_complete_option_a:"è»¢æ›ã‹ã‚‰å®‰å®šã¸ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1å¤‰çˆ»ã§è»¢æ©Ÿã‚’æ´ã¿ã€ãƒ•ã‚§ãƒ¼ã‚º2-3é€²çˆ»ã§ç€å®Ÿã«ç™ºå±•ï¼‰",transform_complete_option_b:"å¤‰åŒ–ã¨èª¿æ•´ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1å¤‰çˆ»â†’ãƒ•ã‚§ãƒ¼ã‚º2é€²çˆ»â†’ãƒ•ã‚§ãƒ¼ã‚º3å¤‰çˆ»ã®ã‚¸ã‚°ã‚¶ã‚°ç™ºå±•ï¼‰",transform_integrate_option_a:"é©æ–°ã‹ã‚‰çµ±åˆã¸ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1-2å¤‰çˆ»ã§å¤§è»¢æ›ã€ãƒ•ã‚§ãƒ¼ã‚º3é€²çˆ»ã§æ–°ãŸãªæ–¹å‘æ€§ã‚’ç¢ºç«‹ï¼‰",transform_integrate_option_b:"å®Œå…¨å¤‰é©ã®é“ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1â†’2â†’3ã™ã¹ã¦å¤‰çˆ»ã«ã‚ˆã‚‹æŠœæœ¬çš„ãªäººç”Ÿè»¢æ›ï¼‰"}[e]||"å¤‰åŒ–ã®é“ç­‹ï¼ˆåŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰"}getTransformationType(e){return"progress"===e[0]?"continue"===e[1]?"option_a"===e[2]?"é€²å±•å¼·åŒ–":"é€²å±•èª¿æ•´":"option_a"===e[2]?"éƒ¨åˆ†èª¿æ•´":"éƒ¨åˆ†çµ±åˆ":"complete"===e[1]?"option_a"===e[2]?"å®Œå…¨è»¢æ›":"å®Œå…¨çµ±åˆ":"option_a"===e[2]?"çµ±åˆç™ºå±•":"çµ±åˆèª¿å’Œ"}getChangeNature(e,t,n){const i=Math.abs(t-e);return 0===i?"å†…çš„å¤‰åŒ–":32===i?"å¯¾æ¥µè»¢æ›":i<=8?"è¿‘æ¥å¤‰åŒ–":i<=16?"ä¸­ç¨‹åº¦å¤‰åŒ–":i<=32?"å¤§å¤‰åŒ–":"æ¥µé™å¤‰åŒ–"}buildIChingInterpretation(e){return e.iching_logic}generatePracticalGuidance(e){const t=e?.id||e?.pathId||"";return t.includes("progress_continue_option_a")?["ç¾åœ¨ã®æ–¹å‘æ€§ã‚’ä¿¡ã˜ã¦ç€å®Ÿã«ç¶™ç¶šã™ã‚‹","å°ã•ãªæˆåŠŸã‚’ç©ã¿é‡ã­ã¦è‡ªä¿¡ã‚’ç¯‰ã","æ€¥ãŒãšç„¦ã‚‰ãšè‡ªç„¶ãªãƒšãƒ¼ã‚¹ã‚’ä¿ã¤","å‘¨å›²ã®å¤‰åŒ–ã«æƒ‘ã‚ã•ã‚ŒãšèŠ¯ã‚’æŒã¤"]:t.includes("progress_continue_option_b")?["åŸºç›¤ã‚’å›ºã‚ã¦ã‹ã‚‰æ–°ã—ã„æŒ‘æˆ¦ã«å‘ã‹ã†","æœ€çµ‚æ®µéšã§å¤§èƒ†ãªæ±ºæ–­ã‚’ã™ã‚‹æº–å‚™ã‚’ã™ã‚‹","ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¦‹æ¥µã‚ã¦è¡Œå‹•ã«ç§»ã™","å®‰å®šã¨å¤‰åŒ–ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ„è­˜ã™ã‚‹"]:t.includes("progress_adjust_option_a")?["é€²å±•â†’èª¿æ•´â†’é€²å±•ã®ãƒªã‚ºãƒ ã‚’ä½œã‚‹","ä¸­é–“åœ°ç‚¹ã§ä¸€åº¦ç«‹ã¡æ­¢ã¾ã£ã¦è¦‹ç›´ã™","æ³¢ã®ã‚ˆã†ãªå¤‰åŒ–ã‚’å—ã‘å…¥ã‚Œã¦å¯¾å¿œã™ã‚‹","æŸ”è»Ÿæ€§ã¨ç¶™ç¶šæ€§ã‚’ä¸¡ç«‹ã•ã›ã‚‹"]:t.includes("progress_adjust_option_b")?["æœ€åˆã«åŸºç¤ã‚’ã—ã£ã‹ã‚Šå›ºã‚ã‚‹","ä¸­ç›¤ã‹ã‚‰ã¯å¤§èƒ†ãªå¤‰é©ã«èˆµã‚’åˆ‡ã‚‹","æ®µéšçš„ã«å¤‰åŒ–ã®å¹…ã‚’åºƒã’ã¦ã„ã","åˆæœŸã®æ…é‡ã•ã‹ã‚‰å¾ŒåŠã®ç©æ¥µæ€§ã¸ç§»è¡Œ"]:t.includes("transform_complete_option_a")?["æœ€åˆã®è»¢æ©Ÿã‚’é€ƒã•ãšã«æ´ã‚€","å¤‰åŒ–ã‚’èµ·ã“ã—ãŸå¾Œã¯ç€å®Ÿã«ç™ºå±•ã•ã›ã‚‹","è»¢æ›ç‚¹ã§ã®å‹‡æ°—ã‚ã‚‹æ±ºæ–­ãŒéµ","æ–°ã—ã„ç’°å¢ƒã§å …å®Ÿã«æˆé•·ã™ã‚‹"]:t.includes("transform_complete_option_b")?["å¤‰åŒ–â†’å®‰å®šâ†’å¤‰åŒ–ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’æ´»ç”¨","ã‚¸ã‚°ã‚¶ã‚°ã§ã‚‚å‰é€²ã—ã¦ã„ã‚‹ã“ã¨ã‚’ä¿¡ã˜ã‚‹","èª¿æ•´æœŸé–“ã‚’æœ‰åŠ¹ã«ä½¿ã£ã¦æ¬¡ã«å‚™ãˆã‚‹","å¤‰åŒ–ã¨å®‰å®šã®ä¸¡æ–¹ã‚’å‘³æ–¹ã«ã¤ã‘ã‚‹"]:t.includes("transform_integrate_option_a")?["å¤§ããªå¤‰é©ã‚’æã‚Œãšã«å®Ÿè¡Œã™ã‚‹","æœ€çµ‚æ®µéšã§æ–°æ–¹å‘æ€§ã‚’æ˜ç¢ºã«ã™ã‚‹","å¤‰åŒ–ã®æ¿€æµã‚’ä¹—ã‚Šè¶Šãˆã‚‹è¦šæ‚Ÿã‚’æŒã¤","é©æ–°çš„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¾å®Ÿã«è½ã¨ã—è¾¼ã‚€"]:t.includes("transform_integrate_option_b")?["äººç”Ÿã®æŠœæœ¬çš„å¤‰é©ã«è¸ã¿åˆ‡ã‚‹","å…¨ã¦ã‚’å¤‰ãˆã‚‹è¦šæ‚Ÿã¨è¨ˆç”»ã‚’æŒã¤","éå»ã¨ã®æ±ºåˆ¥ã¨æ–°ã—ã„è‡ªåˆ†ã®å‰µé€ ","å®Œå…¨ãªè»¢æ›ã«ã‚ˆã‚‹æ–°æ¬¡å…ƒã®é–‹æ‹“"]:["ç¾åœ¨ã®çŠ¶æ³ã‚’å†·é™ã«åˆ†æã™ã‚‹","å¯èƒ½æ€§ã¨åˆ¶ç´„ã®ä¸¡æ–¹ã‚’ç†è§£ã™ã‚‹","æ®µéšçš„ã«è¡Œå‹•è¨ˆç”»ã‚’å®Ÿè¡Œã™ã‚‹","çµæœã‚’æ¤œè¨¼ã—ã¦æŸ”è»Ÿã«èª¿æ•´ã™ã‚‹"]}estimateTimeline(){return"3-6ãƒ¶æœˆ"}identifySuccessFactors(){return["ç¶™ç¶šæ€§","é©å¿œåŠ›","åˆ¤æ–­åŠ›"]}identifyPotentialChallenges(){return["å¤‰åŒ–ã¸ã®æŠµæŠ—","å¤–çš„è¦å› ","ã‚¿ã‚¤ãƒŸãƒ³ã‚°"]}calculatePhilosophicalDepth(){return.88}extractLevel2Nodes(e){return Object.keys(e).flatMap(t=>Object.keys(e[t]))}extractLevel3Nodes(e){return Object.keys(e).flatMap(t=>Object.keys(e[t]).flatMap(n=>Object.keys(e[t][n])))}buildConnectionMap(){return{connections:[]}}calculateAverageProbability(e){return e.reduce((e,t)=>e+t.probability,0)/e.length}calculatePhilosophicalConsistency(){return.9}generateFallbackBinaryTree(e){return{version:this.version,currentLine:e,error:!0,finalEightPaths:Array.from({length:8},(e,t)=>({pathIndex:t+1,title:`åŸºæœ¬çš„é“ç­‹ ${t+1}`,probability:.125,route:["basic","path","option"]}))}}getSystemInfo(){return{version:this.version,philosophy:this.philosophyAlignment,branchingLevels:this.branchingLevels,supportedLines:"1-384 (H384 Database)",cacheSize:this.branchingCache.size,initialized:this.initialized,virtualSpiralEnabled:this.virtualSpiralConcepts.enabled}}clearCache(){this.branchingCache.clear(),console.log("ğŸ§¹ BinaryTreeFutureEngine cache cleared")}}"undefined"!=typeof window&&(window.BinaryTreeFutureEngine=BinaryTreeFutureEngine,window.haqeiBinaryTreeEngine||(window.haqeiBinaryTreeEngine=new BinaryTreeFutureEngine)),"undefined"!=typeof module&&module.exports&&(module.exports=BinaryTreeFutureEngine),console.log("ğŸŒ³ BinaryTreeFutureEngine.js loaded successfully - äºŒåˆ†æœ¨å‹ä»®æƒ³èºæ—‹çµ±åˆæ®µéšçš„åˆ†å²ã‚·ã‚¹ãƒ†ãƒ ");