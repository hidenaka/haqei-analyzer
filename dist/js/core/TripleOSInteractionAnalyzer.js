!function(e){"use strict";class TripleOSInteractionAnalyzer{constructor(){try{this.version="1.2",console.log("ğŸ”® TripleOSInteractionAnalyzer v1.2 (refactored) initialized"),this.expressionGenerator="undefined"!=typeof ExpressionGenerator?new ExpressionGenerator:null,this.keywordAnalyzer="undefined"!=typeof KeywordAnalyzer?new KeywordAnalyzer:null,this._synergyCache=new Map,this._interactionCache=new Map,this._strengthsCache=new Map,this._risksCache=new Map,this._keywordCombinationCache=new Map,this._hexagramCharCache=new Map,this._MAX_CACHE_SIZE=200,this.interactionPatterns=this.initializeInteractionPatterns(),this.hexagramCharacteristics=this.loadHexagramCharacteristics()}catch(e){console.error("âŒ TripleOSInteractionAnalyzer initialization error:",e),this.version="1.1",this.interactionPatterns={},this.hexagramCharacteristics={},this._initializeFallbackData()}}analyze(e,n,t){try{if(!this._validateOSInput(e)||!this._validateOSInput(n)||!this._validateOSInput(t))throw new Error("Invalid OS input parameters");return{version:this.version,engine_os:{id:e.hexagramId||1,name:e.name||"ä¹¾ç‚ºå¤©",score:e.score||.5},interface_os:{id:n.hexagramId||2,name:n.name||"å¤ç‚ºåœ°",score:n.score||.5},safe_mode_os:{id:t.hexagramId||29,name:t.name||"åç‚ºæ°´",score:t.score||.5},synergy:this.calculateSynergy(e,n,t),interactions:this.generateInteractions(e,n,t),strengths:this.identifyStrengths(e,n,t),risks:this.identifyRisks(e,n,t),created_at:(new Date).toISOString()}}catch(r){return console.error("âŒ Analysis error:",r),this._getDefaultAnalysisResult(e,n,t)}}calculateSynergy(e,n,t){try{const r=`synergy_${e.hexagramId}_${n.hexagramId}_${t.hexagramId}`;if(this._synergyCache.has(r))return this._synergyCache.get(r);const s=[[0,0,0],[0,0,0],[0,0,0]];return s[0][1]=s[1][0]=this.calculatePairSynergy(e,n,"engine-interface"),s[0][2]=s[2][0]=this.calculatePairSynergy(e,t,"engine-safe"),s[1][2]=s[2][1]=this.calculatePairSynergy(n,t,"interface-safe"),this._manageCacheSize(this._synergyCache),this._synergyCache.set(r,s),s}catch(s){return console.error("âŒ Synergy calculation error:",s),[[0,0,0],[0,0,0],[0,0,0]]}const r=this.generateSynergyNotes(e,n,t,matrix);return{matrix:matrix,notes:r}}calculatePairSynergy(e,n,t="unknown"){try{const r=e.hexagramId||1,s=n.hexagramId||1,a=this.getHexagramCharacteristics(r),i=this.getHexagramCharacteristics(s);if(r===s)return this.analyzeSameHexagram(a,t);const o=this.calculateKeywordSynergy(a.keywords,i.keywords);if(o>=.7)return o;const c=this.calculateEnergyCompatibility(a.energy,i.energy);if(c>=.6)return c;if("engine-interface"===t){if(this.haveSimilarDirection(a,i))return.5}else if("engine-safe"===t){if(this.isHealthyComplement(a,i))return.4;if(this.isStressfulComplement(a,i))return-.3}else if("interface-safe"===t&&this.isWellBalanced(a,i))return.3;if(this.isMutualHexagram(r,s))return this.isStressfulComplement(a,i)?-.2:.4;if(1===Math.abs(r-s))return.3;if(this.isOppositeHexagram(r,s))return-.1;if(this.areEnergyConflicting(a.energy,i.energy))return-.2;const h=this.analyzeStrengthWeaknessInteraction(a,i);return 0!==h?h:0}catch(r){return console.error("âŒ Pair synergy calculation error:",r),0}}generateInteractions(e,n,t){try{const r=`interactions_${e.hexagramId}_${n.hexagramId}_${t.hexagramId}`;if(this._interactionCache?.has(r))return this._interactionCache.get(r);const s={pair_insights:[this.analyzePair("engine-interface",e,n),this.analyzePair("engine-safe",e,t),this.analyzePair("interface-safe",n,t)],affordances:this.generateAffordances(e,n,t),inner_conflicts:this.identifyInnerConflicts(e,n,t),integration_prompts:this.generateIntegrationPrompts(e,n,t)};return this._interactionCache&&(this._manageCacheSize(this._interactionCache),this._interactionCache.set(r,s)),s}catch(r){return console.error("âŒ Interactions generation error:",r),{pair_insights:[],affordances:[],inner_conflicts:[],integration_prompts:[]}}}analyzePair(e,n,t){const r=this.calculatePairSynergy(n,t,e);let s="HARMONY";s=r>=.6?"SYNERGY":r>=.2?"HARMONY":r>=-.2?"TENSION":"CONFLICT";const a=this.generatePairSummary(n,t,s,e);return{pair:e,category:s,score:Math.abs(r),synergy:r,summary:a}}generateAffordances(e,n,t){const r=this.getHexagramCharacteristics(e.hexagramId),s=this.getHexagramCharacteristics(n.hexagramId),a=this.getHexagramCharacteristics(t.hexagramId);return{engine:{thrives_with:[`${s.keywords[0]||s.strength}ãŒæ´»ãã‚‹ç’°å¢ƒã§ã®${r.strength}ã®ç™ºæ®`,`${a.keywords[1]||a.keywords[0]||a.strength}ã«ã‚ˆã‚‹${r.keywords[0]||r.strength}ã®æ´—ç·´`,`${r.energy}ãŒæœ€å¤§åŒ–ã•ã‚Œã‚‹è‡ªç”±ã¨è¦å¾‹ã®ãƒãƒ©ãƒ³ã‚¹`],struggles_with:[`${r.weakness}ãŒéœ²å‘ˆã™ã‚‹${s.weakness}çš„çŠ¶æ³`,`${a.energy}ã«ã‚ˆã‚‹${r.keywords[1]||r.keywords[0]||r.strength}ã®æŠ‘åˆ¶`,`${r.keywords[2]||r.keywords[1]||r.keywords[0]||r.strength}ã‚’é˜»å®³ã™ã‚‹éåº¦ãª${a.keywords[0]||a.strength}`]},interface:{thrives_with:[`${s.strength}ã‚’æ´»ã‹ã—ãŸ${r.keywords[0]||r.strength}ã¨${a.keywords[0]||a.strength}ã®èª¿æ•´`,`${s.keywords[1]||s.keywords[0]||s.strength}ã«ã‚ˆã‚‹çµ„ç¹”å…¨ä½“ã®${s.keywords[2]||s.keywords[1]||s.keywords[0]||s.strength}ä¿ƒé€²`,`${s.energy}ãŒè©•ä¾¡ã•ã‚Œã‚‹å”èª¿çš„ç’°å¢ƒ`],struggles_with:[`${s.weakness}ã«ã‚ˆã‚Š${r.strength}ãŒç™ºæ®ã§ããªã„å ´é¢`,`${s.keywords[0]||s.strength}ã¨${a.keywords[1]||a.keywords[0]||a.strength}ã®çŸ›ç›¾ã«ã‚ˆã‚‹æ··ä¹±`,`${r.energy}ã¨ã®ä¸å”å’Œã«ã‚ˆã‚‹${s.keywords[2]||s.keywords[1]||s.keywords[0]||s.strength}ã®ä½ä¸‹`]},safe:{thrives_with:[`${a.strength}ã«ã‚ˆã‚‹${r.keywords[2]||r.keywords[1]||r.keywords[0]||r.strength}ã®å®‰å®šåŒ–`,`${a.keywords[0]||a.strength}ãŒå¿…è¦ãªé•·æœŸçš„${a.keywords[1]||a.keywords[0]||a.strength}ã®ç¢ºä¿`,`${a.energy}ã«ã‚ˆã‚‹${r.weakness}ã®æŠ‘åˆ¶åŠ¹æœ`],struggles_with:[`${a.weakness}ã«ã‚ˆã‚‹${r.keywords[0]||r.strength}ã®åœæ»`,`${s.energy}ã¨ã®ä¸èª¿å’Œã«ã‚ˆã‚‹${a.keywords[2]||a.keywords[1]||a.keywords[0]||a.strength}ã®æ··ä¹±`,`${a.keywords[1]||a.keywords[0]||a.strength}ã¸ã®å›ºåŸ·ã«ã‚ˆã‚‹æ©Ÿä¼šæå¤±`]}}}identifyInnerConflicts(e,n,t){const r=this.getHexagramCharacteristics(e.hexagramId),s=this.getHexagramCharacteristics(n.hexagramId),a=this.getHexagramCharacteristics(t.hexagramId),i=[];i.push(`${r.name}ã®ã€Œ${r.keywords[0]||r.strength}ã€ã¨${a.name}ã®ã€Œ${a.keywords[0]||a.strength}ã€ã®é–“ã§ç”Ÿã˜ã‚‹${this.generateConflictTheme(r,a)}`),i.push(`${s.name}ã®ã€Œ${s.strength}ã€ãŒã€${r.keywords[1]||r.keywords[0]||r.strength}ã¨${a.keywords[1]||a.keywords[0]||a.strength}ã®ä¸¡ç«‹ã‚’å›°é›£ã«ã™ã‚‹è‘›è—¤`),i.push(`${r.energy}ã€${s.energy}ã€${a.energy}ã®ï¼“ã¤ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸å”å’Œ`),i.push("æˆæœãƒ»èª¿å’Œãƒ»å®‰å…¨ã®ä¾¡å€¤è¦³ãŒè¡çªã™ã‚‹å ´é¢ã§ã®å„ªå…ˆé †ä½ä»˜ã‘ã®è‘›è—¤");const o=this.identifyAdditionalConflicts(e,n,t);return i.push(...o),i}identifyAdditionalConflicts(e,n,t){const r=[];return Math.abs(e.score-n.score)>.3&&r.push("å†…çš„å‹•æ©Ÿã¨å¤–çš„è¡¨ç¾ã®ãƒãƒ©ãƒ³ã‚¹ã«é–¢ã™ã‚‹ç¶™ç¶šçš„ãªèª¿æ•´ã®è‘›è—¤"),r}generateIntegrationPrompts(e,n,t){const r=this.getHexagramCharacteristics(e.hexagramId),s=this.getHexagramCharacteristics(n.hexagramId),a=this.getHexagramCharacteristics(t.hexagramId),i=[];i.push(`ã‚ãªãŸã®${r.name}ãŒæŒã¤ã€Œ${r.strength}ã€ã‚’æœ€å¤§åŒ–ã™ã‚‹ã«ã¯ã€ã©ã‚“ãª${r.keywords[2]||r.keywords[1]||r.keywords[0]||r.strength}çš„ç’°å¢ƒãŒå¿…è¦ã§ã™ã‹ï¼Ÿ`),i.push(`${s.name}ã®ã€Œ${s.keywords[0]||s.strength}ã€ã¨${r.name}ã®ã€Œ${r.keywords[0]||r.strength}ã€ã‚’ã‚·ãƒŠã‚¸ãƒ¼ã•ã›ã‚‹å…·ä½“çš„æ–¹æ³•ã¯ï¼Ÿ`),i.push(`${a.name}ã®ã€Œ${a.strength}ã€ã‚’æ´»ã‹ã—ã¤ã¤ã€${a.weakness}ã‚’å…‹æœã™ã‚‹ã«ã¯ã©ã‚“ãªå·¥å¤«ãŒã§ãã¾ã™ã‹ï¼Ÿ`),i.push("3ã¤ã®OSãã‚Œãã‚ŒãŒæœ€ã‚‚æ´»ãã‚‹ã€Œæ™‚é–“å¸¯ã€ã€Œå ´æ‰€ã€ã€Œç›¸æ‰‹ã€ã‚’æ˜ç¢ºã«ã§ãã¾ã™ã‹ï¼Ÿ");const o=this.suggestGrowthDirection(e,n,t);return i.push(o),i}identifyStrengths(e,n,t){const r=[];r.push(`${e.name}ã«ã‚ˆã‚‹æ˜ç¢ºãªæ¨é€²åŠ›ã¨æ–¹å‘æ€§`),r.push(`${n.name}ã«ã‚ˆã‚‹æŸ”è»Ÿãªå¯¾äººèª¿æ•´èƒ½åŠ›`),r.push(`${t.name}ã«ã‚ˆã‚‹ãƒªã‚¹ã‚¯ç®¡ç†ã¨å“è³ªä¿è¨¼`);this.calculateTotalSynergy(e,n,t)>.6&&r.push("3OSé–“ã®é«˜ã„ç›¸ä¹—åŠ¹æœã«ã‚ˆã‚‹çµ±åˆçš„åˆ¤æ–­åŠ›");const s=this.identifySpecialCombination(e,n,t);return s&&r.push(s),r}identifyRisks(e,n,t){const r=[];r.push(`${e.name}ã®éåº¦ãªæ¨é€²ã«ã‚ˆã‚‹ç‡ƒãˆå°½ããƒªã‚¹ã‚¯`),r.push(`${n.name}ã®èª¿å’Œé‡è¦–ã«ã‚ˆã‚‹æ±ºæ–­é…å»¶ãƒªã‚¹ã‚¯`),r.push(`${t.name}ã®æ…é‡ã•ã«ã‚ˆã‚‹æ©Ÿä¼šæå¤±ãƒªã‚¹ã‚¯`);this.calculateConflictLevel(e,n,t)>.5&&r.push("OSé–“ã®è‘›è—¤ã«ã‚ˆã‚‹æ„æ€æ±ºå®šã®åœæ»ãƒªã‚¹ã‚¯");const s=this.checkImbalance(e,n,t);return s&&r.push(s),r}loadHexagramCharacteristics(){return{1:{name:"ä¹¾ç‚ºå¤©",keywords:["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","å¼·ã„æ¨é€²åŠ›","å¤©ã®åŠ›"],strength:"æ±ºæ–­åŠ›ã¨å®Ÿè¡ŒåŠ›",weakness:"å‚²æ…¢ã«ãªã‚Šã‚„ã™ã„",energy:"é™½çš„ãƒ»ç©æ¥µçš„ãƒ»ä¸Šæ˜‡å¿—å‘"},2:{name:"å¤ç‚ºåœ°",keywords:["å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§","å¤§åœ°ã®å¾³"],strength:"èª¿å’Œã¨å”èª¿",weakness:"ä¸»ä½“æ€§ã®æ¬ å¦‚",energy:"é™°çš„ãƒ»å—å‹•çš„ãƒ»å®‰å®šå¿—å‘"},3:{name:"æ°´é›·å±¯",keywords:["å§‹å‹•","å›°é›£å…‹æœ","å‰µæ¥­ã®è‹¦åŠ´","æ½œåœ¨åŠ›"],strength:"å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹åŠ›",weakness:"æº–å‚™ä¸è¶³ã«ã‚ˆã‚‹æ··ä¹±",energy:"å‹•çš„ãƒ»æŒ‘æˆ¦çš„ãƒ»æˆé•·å¿—å‘"},4:{name:"å±±æ°´è’™",keywords:["æ•™è‚²","å­¦ç¿’","å•“ç™º","æŒ‡å°"],strength:"çŸ¥è­˜ã®è“„ç©ã¨ä¼æˆ",weakness:"çµŒé¨“ä¸è¶³ã«ã‚ˆã‚‹åˆ¤æ–­ãƒŸã‚¹",energy:"å­¦ç¿’çš„ãƒ»æˆé•·çš„ãƒ»å—å®¹å¿—å‘"},5:{name:"æ°´å¤©éœ€",keywords:["å¾…æ©Ÿ","å¿è€","æº–å‚™","æ™‚æ©Ÿåˆ°æ¥"],strength:"é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’å¾…ã¤åŠ›",weakness:"è¡Œå‹•ã®é…ã‚Œã«ã‚ˆã‚‹æ©Ÿä¼šæå¤±",energy:"å¾…æ©Ÿçš„ãƒ»å¿è€çš„ãƒ»æº–å‚™å¿—å‘"},6:{name:"å¤©æ°´è¨Ÿ",keywords:["äº‰è­°","å¯¾ç«‹","æ³•çš„è§£æ±º","æ­£ç¾©"],strength:"å…¬æ­£ãªè§£æ±ºã‚’æ±‚ã‚ã‚‹åŠ›",weakness:"å¯¾ç«‹ã®é•·æœŸåŒ–",energy:"å¯¾ç«‹çš„ãƒ»ç«¶äº‰çš„ãƒ»æ­£ç¾©å¿—å‘"},7:{name:"åœ°æ°´å¸«",keywords:["çµ„ç¹”","çµ±ç‡","è»äº‹","è¦å¾‹"],strength:"çµ„ç¹”çš„è¡Œå‹•åŠ›",weakness:"ç¡¬ç›´åŒ–ã«ã‚ˆã‚‹æŸ”è»Ÿæ€§ã®æ¬ å¦‚",energy:"çµ±åˆ¶çš„ãƒ»çµ„ç¹”çš„ãƒ»è¦å¾‹å¿—å‘"},8:{name:"æ°´åœ°æ¯”",keywords:["è¦ªå’Œ","å”èª¿","å›£çµ","ç›¸äº’æ”¯æ´"],strength:"å”åŠ›é–¢ä¿‚ã®æ§‹ç¯‰",weakness:"ä¾å­˜é–¢ä¿‚ã«ã‚ˆã‚‹è‡ªç«‹æ€§ã®æ¬ å¦‚",energy:"å”èª¿çš„ãƒ»è¦ªå’Œçš„ãƒ»å›£çµå¿—å‘"},9:{name:"é¢¨å¤©å°ç•œ",keywords:["å°ã•ãªè“„ç©","æº–å‚™","æŸ”è»Ÿæ€§","èª¿æ•´"],strength:"ç´°ã‹ãªé…æ…®ã¨èª¿æ•´åŠ›",weakness:"å°è¦æ¨¡ã™ãã‚‹å¯¾å¿œ",energy:"è“„ç©çš„ãƒ»èª¿æ•´çš„ãƒ»æŸ”è»Ÿå¿—å‘"},10:{name:"å¤©æ²¢å±¥",keywords:["ç¤¼å„€","æ…é‡","å“æ ¼","æ­£é“"],strength:"å“æ ¼ã®ã‚ã‚‹è¡Œå‹•",weakness:"éåº¦ã®æ…é‡ã•ã«ã‚ˆã‚‹åœæ»",energy:"å“æ ¼çš„ãƒ»æ…é‡çš„ãƒ»æ­£é“å¿—å‘"},11:{name:"åœ°å¤©æ³°",keywords:["èª¿å’Œ","äº¤æµ","å¹³å’Œ","ç¹æ „"],strength:"ä¸Šä¸‹ã®å††æ»‘ãªäº¤æµ",weakness:"ç¾çŠ¶ã¸ã®æ…¢å¿ƒ",energy:"èª¿å’Œçš„ãƒ»äº¤æµçš„ãƒ»çµ±åˆå¿—å‘"},12:{name:"å¤©åœ°å¦",keywords:["é–‰å¡","åœæ»","æ–­çµ¶","å¤‰é©ã®å¿…è¦"],strength:"ç¾çŠ¶æ‰“ç ´ã®åŠ›",weakness:"ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸å…¨",energy:"åˆ†é›¢çš„ãƒ»å†…å‘çš„ãƒ»å¤‰é©å¿—å‘"},13:{name:"å¤©ç«åŒäºº",keywords:["å”åŠ›","åŒå¿—","å…¬æ˜æ­£å¤§","å›£çµ"],strength:"å…¬æ­£ãªå”åŠ›é–¢ä¿‚ã®æ§‹ç¯‰",weakness:"å†…è¼ªæ„è­˜ã«ã‚ˆã‚‹æ’ä»–æ€§",energy:"å”åŠ›çš„ãƒ»å…¬æ­£çš„ãƒ»å›£çµå¿—å‘"},14:{name:"ç«å¤©å¤§æœ‰",keywords:["è±Šã‹ã•","æˆåŠŸ","ç¹æ „","çµ±åˆ"],strength:"è±Šã‹ãªè³‡æºã®åŠ¹æœçš„æ´»ç”¨",weakness:"æˆåŠŸã«ã‚ˆã‚‹æ…¢å¿ƒ",energy:"è±Šé¥’çš„ãƒ»æˆåŠŸçš„ãƒ»çµ±åˆå¿—å‘"},15:{name:"åœ°å±±è¬™",keywords:["è¬™éœ","ä½å§¿å‹¢","ç¾å¾³","å°Šæ•¬"],strength:"è¬™è™šã•ã«ã‚ˆã‚‹ä¿¡é ¼ç²å¾—",weakness:"è‡ªå·±ä¸»å¼µã®ä¸è¶³",energy:"è¬™éœçš„ãƒ»å—å®¹çš„ãƒ»ç¾å¾³å¿—å‘"},16:{name:"é›·åœ°è±«",keywords:["å–œã³","æ´»æ°—","æº–å‚™","æ¥½è¦³"],strength:"å‰å‘ããªæ´»åŠ›",weakness:"æ²¹æ–­ã«ã‚ˆã‚‹æº–å‚™ä¸è¶³",energy:"æ´»ç™ºçš„ãƒ»æ¥½è¦³çš„ãƒ»æº–å‚™å¿—å‘"},17:{name:"æ²¢é›·éš",keywords:["è¿½éš","æŸ”è»Ÿæ€§","é©å¿œ","å¤‰åŒ–å¯¾å¿œ"],strength:"å¤‰åŒ–ã¸ã®æŸ”è»Ÿãªé©å¿œåŠ›",weakness:"ä¸»ä½“æ€§ã®æ¬ å¦‚",energy:"é©å¿œçš„ãƒ»æŸ”è»Ÿçš„ãƒ»è¿½éšå¿—å‘"},18:{name:"å±±é¢¨è ±",keywords:["è…æ•—","æ”¹é©","å†ç”Ÿ","åˆ·æ–°"],strength:"å•é¡Œè§£æ±ºã¨æ”¹é©åŠ›",weakness:"æ”¹é©ã®å›°é›£ã•",energy:"æ”¹é©çš„ãƒ»å†ç”Ÿçš„ãƒ»åˆ·æ–°å¿—å‘"},19:{name:"åœ°æ²¢è‡¨",keywords:["æ¥è¿‘","æŒ‡å°","æ¸©æƒ…","åŒ…å®¹"],strength:"æ¸©ã‹ã„æŒ‡å°åŠ›",weakness:"ç”˜ã•ã«ã‚ˆã‚‹ç”˜ãˆã®èª˜ç™º",energy:"æŒ‡å°çš„ãƒ»æ¸©æƒ…çš„ãƒ»åŒ…å®¹å¿—å‘"},20:{name:"é¢¨åœ°è¦³",keywords:["è¦³å¯Ÿ","æ´å¯Ÿ","ç†è§£","å®¢è¦³æ€§"],strength:"æ·±ã„æ´å¯ŸåŠ›",weakness:"è¡Œå‹•åŠ›ã®ä¸è¶³",energy:"è¦³å¯Ÿçš„ãƒ»æ´å¯Ÿçš„ãƒ»å®¢è¦³å¿—å‘"},21:{name:"ç«é›·å™¬å—‘",keywords:["æ±ºæ–­","å‡¦æ–­","é™¤å»","è§£æ±º"],strength:"å•é¡Œã®æ ¹æœ¬è§£æ±ºåŠ›",weakness:"å¼·ç¡¬ã™ãã‚‹å‡¦æ–­",energy:"æ±ºæ–­çš„ãƒ»å‡¦æ–­çš„ãƒ»è§£æ±ºå¿—å‘"},22:{name:"å±±ç«è³",keywords:["è£…é£¾","ç¾åŒ–","æ–‡åŒ–","å„ªé›…"],strength:"ç¾çš„ã‚»ãƒ³ã‚¹ã¨è¡¨ç¾åŠ›",weakness:"å¤–è¦‹é‡è¦–ã«ã‚ˆã‚‹æœ¬è³ªè»½è¦–",energy:"ç¾çš„ãƒ»æ–‡åŒ–çš„ãƒ»è£…é£¾å¿—å‘"},23:{name:"å±±åœ°å‰",keywords:["å‰¥è½","è¡°é€€","ä¾µé£Ÿ","å¿è€"],strength:"å›°é›£ãªçŠ¶æ³ã§ã®å¿è€åŠ›",weakness:"è¡°é€€ã¸ã®ç„¡åŠ›æ„Ÿ",energy:"å¿è€çš„ãƒ»å—å‹•çš„ãƒ»é˜²å¾¡å¿—å‘"},24:{name:"åœ°é›·å¾©",keywords:["å¾©æ´»","å›å¾©","å†ç”Ÿ","å¸Œæœ›"],strength:"å¾©æ´»ã¨å†ç”Ÿã®åŠ›",weakness:"å›å¾©ã®é…ã•",energy:"å¾©æ´»çš„ãƒ»å†ç”Ÿçš„ãƒ»å¸Œæœ›å¿—å‘"},25:{name:"å¤©é›·æ— å¦„",keywords:["ç´”çœŸ","è‡ªç„¶","ç„¡é‚ªæ°—","å¤©çœŸ"],strength:"ç´”ç²‹ã§è‡ªç„¶ãªè¡Œå‹•åŠ›",weakness:"ä¸–é–“çŸ¥ã‚‰ãšã«ã‚ˆã‚‹å¤±æ•—",energy:"ç´”çœŸçš„ãƒ»è‡ªç„¶çš„ãƒ»ç„¡é‚ªæ°—å¿—å‘"},26:{name:"å±±å¤©å¤§ç•œ",keywords:["è“„ç©","æŠ‘åˆ¶","æº–å‚™","åŠ›ã®è²¯è“„"],strength:"å¤§ããªåŠ›ã®è“„ç©èƒ½åŠ›",weakness:"è¡Œå‹•ã®é…ã‚Œ",energy:"è“„ç©çš„ãƒ»æŠ‘åˆ¶çš„ãƒ»æº–å‚™å¿—å‘"},27:{name:"å±±é›·é ¤",keywords:["é¤Šè‚²","æ „é¤Š","è‡ªåˆ¶","ç¯€åˆ¶"],strength:"é©åˆ‡ãªé¤Šè‚²ã¨è‡ªåˆ¶åŠ›",weakness:"éåº¦ã®åˆ¶é™ã«ã‚ˆã‚‹åœæ»",energy:"é¤Šè‚²çš„ãƒ»ç¯€åˆ¶çš„ãƒ»è‡ªåˆ¶å¿—å‘"},28:{name:"æ²¢é¢¨å¤§é",keywords:["éåº¦","å±é™º","é‡è·","æ¥µé™"],strength:"æ¥µé™çŠ¶æ³ã§ã®å¯¾å¿œåŠ›",weakness:"éåº¦ã«ã‚ˆã‚‹ç ´ç¶»ãƒªã‚¹ã‚¯",energy:"æ¥µé™çš„ãƒ»å±é™ºçš„ãƒ»éåº¦å¿—å‘"},29:{name:"åç‚ºæ°´",keywords:["æ·±ã„æ´å¯Ÿ","å±æ©Ÿç®¡ç†","æ…é‡ã•","å†…çœ"],strength:"ãƒªã‚¹ã‚¯å¯ŸçŸ¥èƒ½åŠ›",weakness:"éåº¦ã®æ‚²è¦³",energy:"æµå‹•çš„ãƒ»é©å¿œçš„ãƒ»æ·±å±¤å¿—å‘"},30:{name:"é›¢ç‚ºç«",keywords:["æ˜æ™°æ€§","æƒ…ç†±","ç…§æ˜","æ–‡æ˜"],strength:"ç‰©äº‹ã‚’æ˜ã‚‹ãç…§ã‚‰ã™",weakness:"ç‡ƒãˆå°½ãã‚„ã™ã„",energy:"ç™ºæ•£çš„ãƒ»ç…§æ˜çš„ãƒ»å¤–å‘å¿—å‘"},31:{name:"æ²¢å±±å’¸",keywords:["æ„Ÿå¿œ","å…±é³´","ç›¸äº’å½±éŸ¿","æ„Ÿå—æ€§"],strength:"ä»–è€…ã¨ã®æ·±ã„å…±æ„Ÿ",weakness:"éåº¦ã®æ„Ÿæƒ…ç§»å…¥",energy:"å…±é³´çš„ãƒ»æ„Ÿå¿œçš„ãƒ»ç›¸äº’å¿—å‘"},32:{name:"é›·é¢¨æ’",keywords:["æŒç¶š","ç¶™ç¶š","ä¸å¤‰","æ°¸ç¶š"],strength:"æŒç¶šçš„ãªåŠªåŠ›",weakness:"å¤‰åŒ–ã¸ã®å¯¾å¿œä¸è¶³",energy:"æŒç¶šçš„ãƒ»ç¶™ç¶šçš„ãƒ»æ’å¸¸å¿—å‘"},33:{name:"å¤©å±±é¯",keywords:["é€€é¿","æˆ¦ç•¥çš„æ’¤é€€","ä¿èº«","æ™‚æ©Ÿå¾…ã¡"],strength:"é©åˆ‡ãªé€€ãéš›ã®åˆ¤æ–­",weakness:"æ¶ˆæ¥µçš„ã™ãã‚‹å§¿å‹¢",energy:"é€€é¿çš„ãƒ»ä¿å®ˆçš„ãƒ»å¾…æ©Ÿå¿—å‘"},34:{name:"é›·å¤©å¤§å£®",keywords:["å¼·å¤§","å¨åŠ›","å‹‡çŒ›","ç©æ¥µæ€§"],strength:"å¼·åŠ›ãªè¡Œå‹•åŠ›",weakness:"å‹‡ã¿è¶³ã«ã‚ˆã‚‹å¤±æ•—",energy:"å¼·åŠ›çš„ãƒ»ç©æ¥µçš„ãƒ»å‹‡çŒ›å¿—å‘"},35:{name:"ç«åœ°æ™‹",keywords:["é€²æ­©","æ˜‡é€²","å‘ä¸Š","ç™ºå±•"],strength:"ç€å®Ÿãªé€²æ­©åŠ›",weakness:"æ€¥ãã™ãã«ã‚ˆã‚‹å¤±æ•—",energy:"é€²æ­©çš„ãƒ»å‘ä¸Šçš„ãƒ»ç™ºå±•å¿—å‘"},36:{name:"åœ°ç«æ˜å¤·",keywords:["å›°é›£","æš—é»’","å¿è€","æ½œä¼"],strength:"å›°é›£ãªçŠ¶æ³ã§ã®å¿è€åŠ›",weakness:"æ¶ˆæ¥µçš„ãªå§¿å‹¢",energy:"æ½œä¼çš„ãƒ»å¿è€çš„ãƒ»å†…å‘å¿—å‘"},37:{name:"é¢¨ç«å®¶äºº",keywords:["å®¶æ—","èª¿å’Œ","ç§©åº","è¦ªå’Œ"],strength:"å®¶åº­çš„ãªèª¿å’ŒåŠ›",weakness:"å†…å‘ãã™ãã‚‹è¦–ç‚¹",energy:"å®¶åº­çš„ãƒ»èª¿å’Œçš„ãƒ»è¦ªå’Œå¿—å‘"},38:{name:"ç«æ²¢ç½",keywords:["å¯¾ç«‹","åç›®","çŸ›ç›¾","ä¸å’Œ"],strength:"å¯¾ç«‹ã‚’é€šã˜ãŸæˆé•·",weakness:"é–¢ä¿‚æ€§ã®æ‚ªåŒ–",energy:"å¯¾ç«‹çš„ãƒ»çŸ›ç›¾çš„ãƒ»åˆ†é›¢å¿—å‘"},39:{name:"æ°´å±±è¹‡",keywords:["å›°é›£","éšœå®³","åœæ»","å¿è€"],strength:"å›°é›£ã«è€ãˆã‚‹åŠ›",weakness:"å‰é€²ã®å›°é›£",energy:"åœæ»çš„ãƒ»å¿è€çš„ãƒ»å†…çœå¿—å‘"},40:{name:"é›·æ°´è§£",keywords:["è§£æ±º","è§£æ”¾","ç·©å’Œ","é–‹æ”¾"],strength:"å•é¡Œè§£æ±ºåŠ›",weakness:"è§£æ±ºå¾Œã®æ°—ã®ç·©ã¿",energy:"è§£æ±ºçš„ãƒ»é–‹æ”¾çš„ãƒ»ç·©å’Œå¿—å‘"},41:{name:"å±±æ²¢æ",keywords:["è¬™éœ","å‰Šæ¸›","æœ¬è³ªã¸ã®é›†ä¸­","ç„¡é§„ã®æ’é™¤"],strength:"æœ¬è³ªã‚’è¦‹æ¥µã‚ã‚‹åŠ›",weakness:"è‡ªå·±çŠ ç‰²ã®éå¤š",energy:"å‰Šæ¸›çš„ãƒ»æœ¬è³ªçš„ãƒ»å†…å‘å¿—å‘"},42:{name:"é¢¨é›·ç›Š",keywords:["åˆ©ç›Š","å¢—é€²","æˆé•·","ç™ºå±•"],strength:"ç›¸äº’åˆ©ç›Šã®å‰µé€ ",weakness:"åˆ©ç›Šè¿½æ±‚ã®åé‡",energy:"å¢—é€²çš„ãƒ»æˆé•·çš„ãƒ»ç™ºå±•å¿—å‘"},43:{name:"æ²¢å¤©å¤¬",keywords:["æ±ºæ–­","æ’é™¤","é™¤å»","æ–­çµ¶"],strength:"æ˜ç¢ºãªæ±ºæ–­åŠ›",weakness:"æ€§æ€¥ã™ãã‚‹åˆ¤æ–­",energy:"æ±ºæ–­çš„ãƒ»æ’é™¤çš„ãƒ»æ–­çµ¶å¿—å‘"},44:{name:"å¤©é¢¨å§¤",keywords:["é­é‡","é‚‚é€…","å¶ç„¶","å‡ºä¼šã„"],strength:"æ–°ã—ã„å‡ºä¼šã„ã®åŠ›",weakness:"äºˆæœŸã—ãªã„å›°é›£",energy:"é­é‡çš„ãƒ»å¶ç„¶çš„ãƒ»å‡ºä¼šã„å¿—å‘"},45:{name:"æ²¢åœ°èƒ",keywords:["é›†åˆ","çµé›†","çµ±åˆ","å›£çµ"],strength:"é›†å›£çµ±åˆåŠ›",weakness:"çµ±ç‡ã®å›°é›£",energy:"é›†åˆçš„ãƒ»çµ±åˆçš„ãƒ»å›£çµå¿—å‘"},46:{name:"åœ°é¢¨å‡",keywords:["ä¸Šæ˜‡","æˆé•·","ç™ºé”","å‘ä¸Š"],strength:"ç€å®Ÿãªæˆé•·åŠ›",weakness:"æˆé•·ã®éˆåŒ–",energy:"ä¸Šæ˜‡çš„ãƒ»æˆé•·çš„ãƒ»å‘ä¸Šå¿—å‘"},47:{name:"æ²¢æ°´å›°",keywords:["å›°çª®","çª®åœ°","åˆ¶ç´„","é™ç•Œ"],strength:"å›°çª®ã§ã®å‰µæ„å·¥å¤«",weakness:"è³‡æºä¸è¶³ã«ã‚ˆã‚‹åˆ¶ç´„",energy:"å›°çª®çš„ãƒ»åˆ¶ç´„çš„ãƒ»é™ç•Œå¿—å‘"},48:{name:"æ°´é¢¨äº•",keywords:["æºæ³‰","ä¾›çµ¦","å®‰å®š","æ’å¸¸æ€§"],strength:"å®‰å®šã—ãŸä¾›çµ¦åŠ›",weakness:"å¤‰åŒ–ã¸ã®å¯¾å¿œä¸è¶³",energy:"æºæ³‰çš„ãƒ»ä¾›çµ¦çš„ãƒ»å®‰å®šå¿—å‘"},49:{name:"æ²¢ç«é©",keywords:["é©å‘½","å¤‰é©","æ”¹é©","åˆ·æ–°"],strength:"é©æ–°çš„å¤‰é©åŠ›",weakness:"å¤‰é©ã«ã‚ˆã‚‹æ··ä¹±",energy:"é©æ–°çš„ãƒ»å¤‰é©çš„ãƒ»åˆ·æ–°å¿—å‘"},50:{name:"ç«é¢¨é¼",keywords:["ç¢ºç«‹","å®Œæˆ","å®‰å®š","çµ±æ²»"],strength:"å®‰å®šã—ãŸçµ±æ²»åŠ›",weakness:"ä¿å®ˆçš„ã™ãã‚‹å§¿å‹¢",energy:"ç¢ºç«‹çš„ãƒ»å®Œæˆçš„ãƒ»çµ±æ²»å¿—å‘"},51:{name:"éœ‡ç‚ºé›·",keywords:["è¡æ’ƒ","æ´»å‹•","å‹•æº","åˆºæ¿€"],strength:"å¼·åŠ›ãªæ´»å‹•åŠ›",weakness:"è¡å‹•çš„ãªè¡Œå‹•",energy:"è¡æ’ƒçš„ãƒ»æ´»å‹•çš„ãƒ»åˆºæ¿€å¿—å‘"},52:{name:"è‰®ç‚ºå±±",keywords:["é™æ­¢","ç‘æƒ³","ä¸å‹•","å®‰å®š"],strength:"æºã‚‹ããªã„å®‰å®šæ€§",weakness:"å¤‰åŒ–ã¸ã®æŠµæŠ—",energy:"é™çš„ãƒ»ä¸å‹•çš„ãƒ»ç‘æƒ³å¿—å‘"},53:{name:"é¢¨å±±æ¼¸",keywords:["æ¼¸é€²","æ®µéšçš„","ç€å®Ÿ","ç©å¥"],strength:"ç€å®Ÿãªæ®µéšçš„é€²æ­©",weakness:"é€²æ­©ã®é…ã•",energy:"æ¼¸é€²çš„ãƒ»æ®µéšçš„ãƒ»ç©å¥å¿—å‘"},54:{name:"é›·æ²¢å¸°å¦¹",keywords:["çµåˆ","å©šå§»","çµ±åˆ","èª¿å’Œ"],strength:"ç•°ãªã‚‹ã‚‚ã®ã®çµ±åˆåŠ›",weakness:"çµ±åˆã®å›°é›£",energy:"çµåˆçš„ãƒ»çµ±åˆçš„ãƒ»èª¿å’Œå¿—å‘"},55:{name:"é›·ç«è±Š",keywords:["è±Šå¯Œ","å……å®Ÿ","æ „å…‰","çµ¶é ‚"],strength:"è±Šã‹ãªå……å®Ÿæ„Ÿ",weakness:"çµ¶é ‚æœŸã®é©•ã‚Š",energy:"è±Šå¯Œçš„ãƒ»å……å®Ÿçš„ãƒ»æ „å…‰å¿—å‘"},56:{name:"ç«å±±æ—…",keywords:["æ—…è¡Œ","ç§»å‹•","å¤‰åŒ–","æ¢æ±‚"],strength:"ç’°å¢ƒå¤‰åŒ–ã¸ã®é©å¿œåŠ›",weakness:"ä¸å®‰å®šãªç«‹å ´",energy:"ç§»å‹•çš„ãƒ»å¤‰åŒ–çš„ãƒ»æ¢æ±‚å¿—å‘"},57:{name:"å·½ç‚ºé¢¨",keywords:["æŸ”è»Ÿ","æµ¸é€","é †å¿œ","å½±éŸ¿"],strength:"æŸ”è»Ÿãªæµ¸é€åŠ›",weakness:"æ„å¿—ã®å¼±ã•",energy:"æŸ”è»Ÿçš„ãƒ»æµ¸é€çš„ãƒ»é †å¿œå¿—å‘"},58:{name:"å…Œç‚ºæ²¢",keywords:["å–œã³","æ¥½ã—ã¿","è¦ªã—ã¿","äº¤æµ"],strength:"äººã¨ã®è¦ªå’ŒåŠ›",weakness:"è»½è–„ã•ã«ã‚ˆã‚‹ä¿¡é ¼å¤±å¢œ",energy:"å–œæ‚¦çš„ãƒ»è¦ªå’Œçš„ãƒ»äº¤æµå¿—å‘"},59:{name:"é¢¨æ°´æ¸™",keywords:["æ•£é–‹","åˆ†æ•£","æ‹¡æ•£","è§£æ”¾"],strength:"æŸ”è»Ÿãªæ‹¡æ•£åŠ›",weakness:"çµ±åˆ¶ã®å›°é›£",energy:"æ•£é–‹çš„ãƒ»åˆ†æ•£çš„ãƒ»è§£æ”¾å¿—å‘"},60:{name:"æ°´æ²¢ç¯€",keywords:["ç¯€åˆ¶","èª¿ç¯€","é©åº¦","åˆ¶é™"],strength:"é©åˆ‡ãªåˆ¶å¾¡åŠ›",weakness:"éåº¦ã®åˆ¶ç´„",energy:"ç¯€åˆ¶çš„ãƒ»èª¿ç¯€çš„ãƒ»åˆ¶é™å¿—å‘"},61:{name:"é¢¨æ²¢ä¸­å­š",keywords:["èª å®Ÿ","ä¿¡é ¼","çœŸå¿ƒ","å†…å®Ÿ"],strength:"æ·±ã„ä¿¡é ¼é–¢ä¿‚ã®æ§‹ç¯‰",weakness:"ç´”ç²‹ã™ãã‚‹ä¿¡é ¼",energy:"èª å®Ÿçš„ãƒ»ä¿¡é ¼çš„ãƒ»çœŸå¿ƒå¿—å‘"},62:{name:"é›·å±±å°é",keywords:["å°ã•ãªéã¡","å¾®èª¿æ•´","è¬™éœ","æ…é‡"],strength:"ç´°ã‹ãªèª¿æ•´åŠ›",weakness:"å°å¿ƒã™ãã‚‹å§¿å‹¢",energy:"èª¿æ•´çš„ãƒ»è¬™éœçš„ãƒ»æ…é‡å¿—å‘"},63:{name:"æ°´ç«æ—¢æ¸ˆ",keywords:["å®Œæˆ","é”æˆ","èª¿å’Œ","å®Œç’§"],strength:"ç‰©äº‹ã®å®ŒæˆåŠ›",weakness:"æ¬¡ã¸ã®ç§»è¡Œå›°é›£",energy:"å®Œæˆçš„ãƒ»èª¿å’Œçš„ãƒ»å®‰å®šå¿—å‘"},64:{name:"ç«æ°´æœªæ¸ˆ",keywords:["æœªå®Œ","ç¶™ç¶š","å¯èƒ½æ€§","æ°¸é ã®æŒ‘æˆ¦"],strength:"ç„¡é™ã®å¯èƒ½æ€§",weakness:"å®Œæˆã¸ã®ä¸å®‰",energy:"ç¶™ç¶šçš„ãƒ»æŒ‘æˆ¦çš„ãƒ»æœªæ¥å¿—å‘"}}}getHexagramCharacteristics(e){try{const n=`hex_${e}`;if(this._hexagramCharCache?.has(n))return this._hexagramCharCache.get(n);const t=this.hexagramCharacteristics[e]||this.hexagramCharacteristics[1];return this._hexagramCharCache&&(this._manageCacheSize(this._hexagramCharCache),this._hexagramCharCache.set(n,t)),t}catch(n){return console.error("âŒ Hexagram characteristics error:",n),this.hexagramCharacteristics[1]||{name:`ç¬¬${e}å¦`,keywords:["å¤‰åŒ–","èª¿æ•´","ç™ºå±•"],strength:"é©å¿œåŠ›",weakness:"ä¸å®‰å®šæ€§",energy:"æµå‹•çš„"}}}initializeInteractionPatterns(){return new Map([["1-2",{type:"complementary",strength:.9,description:"å¤©åœ°ã®å®Œå…¨è£œå®Œ"}],["3-4",{type:"developmental",strength:.7,description:"å§‹å‹•ã¨æˆé•·ã®é€£æº"}],["29-30",{type:"transformative",strength:.6,description:"å›°é›£ã¨å…‰æ˜ã®å¤‰æ›"}]])}isMutualHexagram(e,n){return e+n===65}isOppositeHexagram(e,n){return 32===Math.abs(e-n)}calculateSpeedConflict(e,n){const t=e.score||.5,r=1-(n.score||.5);return Math.abs(t-r)}calculateDecisionConflict(e){return e.score||.5}hasValueConflict(e,n,t){const r=[e.score,n.score,t.score];return this.calculateVariance(r)>.2}calculateVariance(e){const n=e.reduce((e,n)=>e+n,0)/e.length;return e.map(e=>Math.pow(e-n,2)).reduce((e,n)=>e+n,0)/e.length}calculateTotalSynergy(e,n,t){return(this.calculatePairSynergy(e,n,"engine-interface")+this.calculatePairSynergy(e,t,"engine-safe")+this.calculatePairSynergy(n,t,"interface-safe"))/3}calculateConflictLevel(e,n,t){const r=this.calculateTotalSynergy(e,n,t);return Math.max(0,-r)}checkImbalance(e,n,t){const r=[e.score,n.score,t.score],s=Math.max(...r),a=Math.min(...r);if(s-a>.5){const r=[e,n,t].find(e=>e.score===s),i=[e,n,t].find(e=>e.score===a);return`ã€Œ${r.name}ã€ã®éåº¦ãªå„ªä½ã¨ã€Œ${i.name}ã€ã®æŠ‘åˆ¶ã«ã‚ˆã‚‹ãƒãƒ©ãƒ³ã‚¹å´©å£Šãƒªã‚¹ã‚¯`}return null}identifySpecialCombination(e,n,t){return{"1-2-29":"å‰µé€ ã¨å—å®¹ã«å†…çœã‚’åŠ ãˆãŸæ·±ã„æ´å¯ŸåŠ›","3-4-5":"å§‹å‹•ãƒ»æˆé•·ãƒ»å¾…æ©Ÿã®ãƒªã‚ºãƒ ã‚’æŒã¤æŒç¶šçš„ç™ºå±•åŠ›"}[`${e.hexagramId}-${n.hexagramId}-${t.hexagramId}`]||null}generatePairSummary(e,n,t,r="unknown"){const s=this.getHexagramCharacteristics(e.hexagramId),a=this.getHexagramCharacteristics(n.hexagramId);return this.generateDynamicPairDescription(s,a,t,e.hexagramId,n.hexagramId,r)}generateDynamicPairDescription(e,n,t,r,s,a="unknown"){const i=Math.abs(r-s),o=this.isKnownComplementaryPair(r,s),c=this.isKnownOppositePair(r,s),h=1===i,g=r===s;return"SYNERGY"===t?g?"engine-interface"===a?`${e.name}ã®${e.strength}ãŒå®Ÿè¡Œç³»ã¨èª¿æ•´ç³»ã§å®Œç’§ã«é€£æºã—ã€æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®`:"engine-safe"===a?`${e.name}ã®${e.strength}ãŒä¸»è»¸ã¨å®‰å…¨ç¶²ã®ä¸¡é¢ã§æ©Ÿèƒ½ã—ã€å®‰å®šã—ãŸé«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å®Ÿç¾`:"interface-safe"===a?`${e.name}ã®${e.strength}ãŒèª¿æ•´å½¹ã¨å®‰å…¨ç¶²ã®ä¸¡é¢ã§æ©Ÿèƒ½ã—ã€å®Œç’§ãªãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¤`:`${e.name}ã®${e.strength}ãŒè¤‡æ•°ã®å½¹å‰²ã§ä¸€è²«ã—ã¦æœ€é«˜ã®æˆæœã‚’ç”Ÿã‚€`:o?`${e.name}ã¨${n.name}ãŒç¶œå¦é–¢ä¿‚ã«ã‚ˆã‚Šå®Œå…¨ãªè£œå®Œã‚’æˆã—ã€${e.keywords[0]||e.name}ã¨${n.keywords[0]||n.name}ãŒæœ€é«˜ã®ç›¸ä¹—åŠ¹æœã‚’ç”Ÿã‚€`:e.energy.includes("é™½")&&n.energy.includes("é™°")?`${e.name}ã®${e.keywords[0]||e.strength}ãŒ${n.name}ã®${n.keywords[0]||n.strength}ã‚’æ´»æ€§åŒ–ã—ã€é™°é™½ã®ç†æƒ³çš„ãƒãƒ©ãƒ³ã‚¹ã‚’å®Ÿç¾`:`${e.name}ã®${e.strength}ã¨${n.name}ã®${n.strength}ãŒå…±é³´ã—ã€ç›¸äº’ã«åŠ›ã‚’å¢—å¹…ã•ã›ã‚‹`:"HARMONY"===t?g?e.keywords.some(e=>["èª¿å’Œ","å”èª¿","å®‰å®š","å¹³å’Œ","å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§"].includes(e))?`åŒã˜${e.name}åŒå£«ãŒã€å…±é€šã®${e.keywords.find(e=>["èª¿å’Œ","å”èª¿","å®‰å®š","å¹³å’Œ","å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§"].includes(e))}ã«ã‚ˆã‚Šå®‰å®šã—ãŸåŸºç›¤ã‚’æä¾›`:`åŒã˜${e.name}åŒå£«ãŒã€å…±é€šã®${e.keywords[0]}ã«ã‚ˆã‚Šç©ã‚„ã‹ã«å…±å­˜ã—ã€å®‰å®šæ€§ã‚’ç¶­æŒ`:h?`éš£æ¥ã™ã‚‹${e.name}ã¨${n.name}ãŒã€${e.keywords[2]}ã‹ã‚‰${n.keywords[2]}ã¸ã®è‡ªç„¶ãªæµã‚Œã‚’ä½œã‚‹`:this.haveSimilarEnergy(e.energy,n.energy)?`${e.name}ã¨${n.name}ãŒå…±é€šã®${this.extractCommonEnergyPattern(e.energy,n.energy)}ã«ã‚ˆã‚Šç©ã‚„ã‹ã«å…±å­˜`:`${e.name}ã®${e.keywords[1]}ã¨${n.name}ã®${n.keywords[1]}ãŒäº’ã„ã‚’å°Šé‡ã—åˆã†èª¿å’Œçš„é–¢ä¿‚`:"TENSION"===t?g?"engine-safe"===a?e.keywords.some(e=>["èª¿å’Œ","å”èª¿","å®‰å®š","å¹³å’Œ","å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§"].includes(e))?`åŒã˜${e.name}åŒå£«ãŒã€å®‰å®šãƒ»èª¿å’Œã®å½¹å‰²ã«ãŠã„ã¦é©åº¦ãªç›¸äº’è£œå®Œã‚’å›³ã‚‹`:`åŒã˜${e.name}åŒå£«ãŒã€${e.strength}ã®ç™ºæ®ã‚’å·¡ã£ã¦é©åº¦ãªç·Šå¼µã‚’æŒã¡ã€å¤šæ§˜æ€§ã‚’ä¿ƒé€²`:`åŒã˜${e.name}åŒå£«ãŒã€${e.strength}ã®ç™ºæ®ã‚’å·¡ã£ã¦ç«¶åˆã—ã€å‰µé€ çš„ãªç·Šå¼µã‚’ç”Ÿã‚€`:c?`éŒ¯å¦é–¢ä¿‚ã®${e.name}ã¨${n.name}ãŒã€${e.keywords[0]||e.strength}ã¨${n.keywords[0]||n.strength}ã®æ–¹å‘æ€§ã®é•ã„ã§ç·Šå¼µã‚’ç”Ÿã‚€`:this.areEnergyConflicting(e.energy,n.energy)?`${e.name}ã®${e.energy}ã¨${n.name}ã®${n.energy}ãŒæ ¹æœ¬çš„ã«ç•°ãªã‚Šã€èª¿æ•´ãŒå¿…è¦ãªç·Šå¼µé–¢ä¿‚`:this.generateHumanRelatableDescription(e,n,a):g?"engine-safe"===a?`${e.name}ã®${e.weakness||"ãƒªã‚¹ã‚¯"}ãŒä¸»è»¸ã¨å®‰å…¨ç¶²ã®ä¸¡æ–¹ã§ç™ºç¾ã—ã€æ·±åˆ»ãªè„†å¼±æ€§ã‚’ç”Ÿã‚€`:"engine-interface"===a?`${e.name}ã®${e.weakness||"ãƒªã‚¹ã‚¯"}ãŒå®Ÿè¡Œç³»ã¨èª¿æ•´ç³»ã®ä¸¡æ–¹ã§ç™ºç¾ã—ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®éšœå®³ã‚’å¼•ãèµ·ã“ã™`:"interface-safe"===a?`${e.name}ã®${e.weakness||"ãƒªã‚¹ã‚¯"}ãŒèª¿æ•´å½¹ã¨å®‰å…¨ç¶²ã®ä¸¡æ–¹ã§ç™ºç¾ã—ã€å›å¾©å›°é›£ãªæ··ä¹±ã‚’ç”Ÿã‚€`:`${e.name}ã®${e.weakness||"ãƒªã‚¹ã‚¯"}ãŒè¤‡æ•°ã®å½¹å‰²ã§åŒæ™‚ç™ºç¾ã—ã€ç ´å£Šçš„ãªç›¸ä¹—åŠ¹æœã‚’ç”Ÿã‚€`:e.weakness===n.weakness?`${e.name}ã¨${n.name}ãŒå…±é€šã®å¼±ç‚¹ã€Œ${e.weakness}ã€ã«ã‚ˆã‚Šç›¸äº’ã«å•é¡Œã‚’å¢—å¹…ã•ã›ã‚‹`:this.areDirectlyOpposing(e,n)?`${e.name}ã®${e.keywords[0]||e.name}ã¨${n.name}ã®${n.keywords[0]||n.name}ãŒæ­£é¢ã‹ã‚‰è¡çªã—ã€è§£æ±ºå›°é›£ãªå¯¾ç«‹ã‚’ç”Ÿã‚€`:`${e.name}ã®${e.weakness}ã¨${n.name}ã®${n.weakness}ãŒç›¸äº’ã«æ‚ªå½±éŸ¿ã‚’åŠã¼ã™ç ´å£Šçš„é–¢ä¿‚`}isKnownComplementaryPair(e,n){const t=[[1,2],[3,50],[11,12],[13,14],[31,32],[41,42],[43,44],[53,54],[61,62],[63,64]];for(let[r,s]of t)if(e===r&&n===s||e===s&&n===r)return!0;return!1}isKnownOppositePair(e,n){const t=[[1,2],[29,30],[51,57],[52,58]];for(let[r,s]of t)if(e===r&&n===s||e===s&&n===r)return!0;return!1}haveSimilarEnergy(e,n){const t=e.split("ãƒ»"),r=n.split("ãƒ»");let s=0;return t.forEach(e=>{r.forEach(n=>{(e.includes(n.substring(0,2))||n.includes(e.substring(0,2)))&&s++})}),s>=2}extractCommonEnergyPattern(e,n){const t=e.split("ãƒ»"),r=n.split("ãƒ»");for(let s of t)for(let e of r)if(s.includes(e.substring(0,2))||e.includes(s.substring(0,2)))return s.substring(0,2)+"çš„å¿—å‘";return"å¿—å‘"}areEnergyConflicting(e,n){const t=[["ç©æ¥µ","å—å‹•"],["é™½çš„","é™°çš„"],["å¤–å‘","å†…å‘"],["ä¸Šæ˜‡","ä¸‹é™"],["ç™ºæ•£","åæŸ"],["å‹•çš„","é™çš„"]];for(let[r,s]of t)if(e.includes(r)&&n.includes(s)||e.includes(s)&&n.includes(r))return!0;return!1}generateHumanRelatableDescription(e,n,t){e.keywords[0]||e.strength,n.keywords[0]||n.strength;const r=this.analyzeKeywordCombination(e,n);switch(t){case"engine-interface":return this.generateEngineInterfaceTension(e,n,r);case"engine-safe":return this.generateEngineSafeTension(e,n,r);case"interface-safe":return this.generateInterfaceSafeTension(e,n,r);default:return this.generateGeneralTension(e,n,r)}}analyzeKeywordCombination(e,n){try{if(this.keywordAnalyzer)return this.keywordAnalyzer.analyzeKeywordCombination(e,n);const t=`kwc_${e.name}_${n.name}`;if(this._keywordCombinationCache?.has(t))return this._keywordCombinationCache.get(t);const r=e.keywords||[],s=n.keywords||[],a={};return[[["å–œã³","æ¥½ã—ã¿","æ¥½è¦³","å¸Œæœ›","æƒ…ç†±","å……å®Ÿ","å„ªé›…","æ „å…‰","åˆºæ¿€"],["å›°é›£","æš—é»’","å‹•æº","ä¸å’Œ","åç›®","çŸ›ç›¾","æŠ‘åˆ¶","çª®åœ°","å±é™º","æ¥µé™"],"emotionConflict"],[["ä¿¡é ¼","å‡ºä¼šã„","åŒ…å®¹","å©šå§»","å®¶æ—","æ¸©æƒ…","çµåˆ","è¦ªã—ã¿","å…±é³´","ç›¸äº’å½±éŸ¿","äº¤æµ","é‚‚é€…","é­é‡","è¿½éš","å…¬æ˜æ­£å¤§","å”åŠ›","å”èª¿","å—å®¹æ€§","åŒ…å®¹åŠ›","åŒå¿—","å›£çµ","çµé›†","é›†åˆ","è¦ªå’Œ","ç›¸äº’æ”¯æ´","èª¿å’Œ"],["å¯¾ç«‹","å¶ç„¶","äº‰è­°","æ–­çµ¶","åˆ†é›¢","ç–å¤–","èª¤è§£"],"relationshipConflict"],[["ä¾›çµ¦","åˆ©ç›Š","è±Šã‹ã•","ç¹æ „","è±Šå¯Œ","å¢—é€²","æˆåŠŸ","åŠ›ã®è²¯è“„","æºæ³‰"],["å›°çª®","æ¸›å°‘","å‰Šæ¸›","åˆ¶ç´„","é™ç•Œ","æˆ‘æ…¢","åˆ¶é™"],"materialConflict"],[["å•“ç™º","å­¦ç¿’","æŒ‡å°","æ¢æ±‚","æ•™è‚²","è¦³å¯Ÿ","ç†è§£"],["æ´å¯Ÿ","å®¢è¦³æ€§","å±æ©Ÿç®¡ç†","æ…é‡ã•","æœ¬è³ªã¸ã®é›†ä¸­","æ„Ÿå¿œ","æ·±ã„æ´å¯Ÿ","å†…çœ"],"learningConflict"],[["å“æ ¼","å°Šæ•¬","æ–‡åŒ–","æ–‡æ˜","ç¤¼å„€","ç¾åŒ–","ç¾å¾³","è£…é£¾","ç§©åº","æ­£é“"],["è‡ªç„¶","ç´”çœŸ","ç„¡é‚ªæ°—","å¤©çœŸ","çœŸå¿ƒ","å†…å®Ÿ","è¬™éœ"],"culturalConflict"],[["å›å¾©","æ „é¤Š","é¤Šè‚²","å¾©æ´»","æ½œåœ¨åŠ›","æ´»æ°—","æ´»å‹•","ç©æ¥µæ€§","å¨åŠ›","å¼·å¤§","å‹‡çŒ›"],["è‡ªåˆ¶","æ½œä¼","é™æ­¢","ç‘æƒ³","ç¯€åˆ¶","è¡°é€€","å‰¥è½","ä¾µé£Ÿ"],"vitalityConflict"],[["æ”¹é©","å†ç”Ÿ","åˆ·æ–°","é©å‘½","å¤‰é©","è»¢æ›","å¤‰åŒ–","æ–°ç§©åº","é©æ–°","å¤‰åŒ–å¯¾å¿œ","å¤‰é©ã®å¿…è¦","è§£æ”¾","é–‹æ”¾"],["è“„ç©","è²¯è”µ","æŒç¶š","ç¶™ç¶š","ä¸å¤‰","æ°¸ç¶š","å®‰å®š","å®Œæˆ","é”æˆ","å®Œç’§","æ’å¸¸æ€§","ä¸å‹•"],"changeConflict"],[["å§‹å‹•","æ±ºæ–­","å‡¦æ–­","è¡æ’ƒ","è¦šé†’","çªç ´"],["å¾…æ©Ÿ","å¿è€","æº–å‚™","æ…é‡","æ¼¸é€²","æ®µéšçš„","ç€å®Ÿ","ç©å¥","èª¿ç¯€","å¾®èª¿æ•´"],"actionConflict"],[["çµ„ç¹”","çµ±æ²»","çµ±ç‡","è¦å¾‹","è»äº‹","ç¢ºç«‹","æ³•çš„è§£æ±º","æ­£ç¾©","çµ±åˆ"],["è…æ•—","é–‰å¡","åœæ»","éšœå®³","éåº¦","é‡è·"],"systemicConflict"],[["æ˜æ™°æ€§","ç…§æ˜","é€²æ­©","æ˜‡é€²","å‘ä¸Š","ç™ºå±•","ä¸Šæ˜‡","æˆé•·","ç™ºé”","æ•£é–‹","åˆ†æ•£","æ‹¡æ•£","æ—…è¡Œ","ç§»å‹•","æ¥è¿‘","æµ¸é€"],["é€€é¿","æˆ¦ç•¥çš„æ’¤é€€","ä¿èº«","ä½å§¿å‹¢"],"spatialConflict"],[["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","å¼·ã„æ¨é€²åŠ›","è‡ªç”±","å½±éŸ¿","å‰µæ¥­ã®è‹¦åŠ´","å›°é›£å…‹æœ","æ’é™¤","é™¤å»","è§£æ±º"],["æŸ”è»Ÿæ€§","é©å¿œ","é †å¿œ","æŸ”è»Ÿ","èª¿æ•´","ç·©å’Œ","ç„¡é§„ã®æ’é™¤"],"capabilityConflict"],[["å¤§åœ°ã®å¾³","å¤©ã®åŠ›","æ™‚æ©Ÿåˆ°æ¥","æ™‚æ©Ÿå¾…ã¡","å¯èƒ½æ€§","å¹³å’Œ"],["å°ã•ãªè“„ç©","å°ã•ãªéã¡","æœªå®Œ","æ°¸é ã®æŒ‘æˆ¦","é©åº¦","æ„Ÿå—æ€§","çµ¶é ‚"],"temporalConflict"]].forEach(([e,n,t])=>{const i=r.some(n=>e.includes(n)),o=r.some(e=>n.includes(e)),c=s.some(n=>e.includes(n)),h=s.some(e=>n.includes(e));(i&&h||o&&c)&&(a[t]=!0)}),{speedConflict:a.actionConflict||!1,valueConflict:a.relationshipConflict||a.capabilityConflict||!1,timeConflict:a.changeConflict||a.temporalConflict||!1,directionConflict:a.spatialConflict||!1,emotionConflict:a.emotionConflict||!1,relationshipConflict:a.relationshipConflict||!1,materialConflict:a.materialConflict||!1,learningConflict:a.learningConflict||!1,culturalConflict:a.culturalConflict||!1,vitalityConflict:a.vitalityConflict||!1,changeConflict:a.changeConflict||!1,actionConflict:a.actionConflict||!1,systemicConflict:a.systemicConflict||!1,spatialConflict:a.spatialConflict||!1,capabilityConflict:a.capabilityConflict||!1,temporalConflict:a.temporalConflict||!1}}catch(t){return console.error("âŒ Keyword combination analysis error:",t),{emotionConflict:!1,relationshipConflict:!1,materialConflict:!1,learningConflict:!1,culturalConflict:!1,vitalityConflict:!1,changeConflict:!1,actionConflict:!1,systemicConflict:!1,spatialConflict:!1,capabilityConflict:!1,temporalConflict:!1}}}analyzeHarmoniousRelations(e,n,t=null){const r=e.hexagramId||this.getHexagramIdByName(e.name),s=n.hexagramId||this.getHexagramIdByName(n.name),a=t?t.hexagramId||this.getHexagramIdByName(t.name):null,i=e.keywords||[],o=n.keywords||[],c=t&&t.keywords||[],h=this.detectIChingRelations(r,s,a),g=this.detectSubtleDifferences(i,o,c);return{ichingRelations:h,subtleDifferences:g,hasSpecialMeaning:h.length>0||g.length>0}}detectIChingRelations(e,n,t){const r=[],s=Math.abs(e-n),a=(t&&Math.abs(n-t),t?Math.abs(e-t):0);1===s&&r.push({type:"adjacent",pair:[e,n],meaning:"éš£æ¥ã™ã‚‹ä¸¡å¦ãŒè‡ªç„¶ãªæµã‚Œã‚’ä½œã‚‹",strength:"high"}),t&&a<=3&&r.push({type:"proximate",pair:[e,t],meaning:"è¿‘æ¥ã—ãŸç›¸äº’ä½œç”¨ã«ã‚ˆã‚Šå¾®å¦™ãªèª¿å’Œã‚’æˆã™",strength:"medium"});const i=65-e;i===n&&r.push({type:"zong",pair:[e,n],meaning:"ç¶œå¦é–¢ä¿‚ã«ã‚ˆã‚Šå®Œå…¨ãªè£œå®Œã‚’æˆã™",strength:"very_high"}),t&&i===t&&r.push({type:"zong",pair:[e,t],meaning:"ç¶œå¦é–¢ä¿‚ã«ã‚ˆã‚Šæ ¹æœ¬çš„ãªç›¸äº’è£œå®Œã‚’å®Ÿç¾",strength:"very_high"});const o=[1,2,63,64],c=[e,n,t].filter(e=>e&&o.includes(e));return c.includes(64)&&r.push({type:"terminal",hexagram:64,meaning:"æœªæ¸ˆã®æ°¸é ã®å¯èƒ½æ€§ãŒçµ„ã¿åˆã‚ã›ã«æ·±ã¿ã‚’ä¸ãˆã‚‹",strength:"special"}),c.includes(1)&&r.push({type:"origin",hexagram:1,meaning:"ä¹¾ç‚ºå¤©ã®å‰µé€ çš„æ ¹æºåŠ›ãŒæœ€é«˜ã®ç›¸ä¹—åŠ¹æœã‚’ç”Ÿã‚€",strength:"special"}),r}detectSubtleDifferences(e,n,t=[]){const r=[],s=this.categorizeEmotionalTexture(e,n,t);s.size>1&&r.push({type:"emotional_texture",categories:Array.from(s),meaning:"ç•°ãªã‚‹æ„Ÿæƒ…ã®è³ªæ„ŸãŒè±Šã‹ãªå¿ƒç†çš„èª¿å’Œã‚’ä½œã‚‹"});const a=this.categorizeCognitiveDirection(e,n,t);a.size>1&&r.push({type:"cognitive_direction",categories:Array.from(a),meaning:"å†…å‘ã¨å¤–å‘ã®èªçŸ¥ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒç›¸äº’è£œå®Œã™ã‚‹"});const i=this.categorizeCompletionPhase(e,n,t);return i.size>1&&r.push({type:"completion_phase",categories:Array.from(i),meaning:"ç•°ãªã‚‹å®Œæˆæ®µéšãŒç™ºå±•çš„ãªæµã‚Œã‚’å½¢æˆã™ã‚‹"}),r}categorizeEmotionalTexture(e,n,t){const r=[...e,...n,...t],s=new Set,a=["å–œã³","æ¥½ã—ã¿","æ¥½è¦³","å¸Œæœ›","æ´»æ°—"],i=["å……å®Ÿ","æ „å…‰","æƒ…ç†±","è±Šæº€","æˆåŠŸ"],o=["åˆºæ¿€","å„ªé›…","æ„Ÿå¿œ","å…±é³´","ç›¸äº’å½±éŸ¿"];return r.some(e=>a.includes(e))&&s.add("brightJoyful"),r.some(e=>i.includes(e))&&s.add("deepFulfilled"),r.some(e=>o.includes(e))&&s.add("complexStimulated"),s}categorizeCognitiveDirection(e,n,t){const r=[...e,...n,...t],s=new Set,a=["è¦³å¯Ÿ","ç†è§£","æ•™è‚²","æŒ‡å°","æ¢æ±‚","å•“ç™º"],i=["æ´å¯Ÿ","å†…çœ","ç‘æƒ³","æœ¬è³ªã¸ã®é›†ä¸­","æ·±ã„æ´å¯Ÿ"],o=["å®¢è¦³æ€§","æ…é‡ã•","å±æ©Ÿç®¡ç†","èª¿ç¯€","é©åº¦"];return r.some(e=>a.includes(e))&&s.add("outward"),r.some(e=>i.includes(e))&&s.add("inward"),r.some(e=>o.includes(e))&&s.add("balanced"),s}categorizeCompletionPhase(e,n,t){const r=[...e,...n,...t],s=new Set,a=["å§‹å‹•","å‰µæ¥­ã®è‹¦åŠ´","å¯èƒ½æ€§","æ½œåœ¨åŠ›","å‡ºä¼šã„"],i=["æœªå®Œ","ç¶™ç¶š","æ®µéšçš„","æ¼¸é€²","å¤‰åŒ–å¯¾å¿œ","é©å¿œ"],o=["å®Œæˆ","é”æˆ","å®Œç’§","æ°¸ç¶š","ä¸å¤‰","ç¢ºç«‹"];return r.some(e=>a.includes(e))&&s.add("initiating"),r.some(e=>i.includes(e))&&s.add("processing"),r.some(e=>o.includes(e))&&s.add("completing"),s}getHexagramIdByName(e){return{"ä¹¾ç‚ºå¤©":1,"å¤ç‚ºåœ°":2,"æ°´é›·å±¯":3,"å±±æ°´è’™":4,"æ°´å¤©éœ€":5,"å¤©æ°´è¨Ÿ":6,"åœ°æ°´å¸«":7,"æ°´åœ°æ¯”":8,"é¢¨å¤©å°ç•œ":9,"å¤©æ²¢å±¥":10,"åœ°å¤©æ³°":11,"å¤©åœ°å¦":12,"å¤©ç«åŒäºº":13,"ç«å¤©å¤§æœ‰":14,"åœ°å±±è¬™":15,"é›·åœ°è±«":16,"æ²¢é›·éš":17,"å±±é¢¨è ±":18,"åœ°æ²¢è‡¨":19,"é¢¨åœ°è¦³":20,"ç«é›·å™¬å—‘":21,"å±±ç«è³":22,"å±±åœ°å‰":23,"åœ°é›·å¾©":24,"å¤©é›·æ— å¦„":25,"å±±å¤©å¤§ç•œ":26,"å±±é›·é ¤":27,"æ²¢é¢¨å¤§é":28,"åç‚ºæ°´":29,"é›¢ç‚ºç«":30,"æ²¢å±±å’¸":31,"é›·é¢¨æ’":32,"å¤©å±±é¯":33,"é›·å¤©å¤§å£®":34,"ç«åœ°æ™‹":35,"åœ°ç«æ˜å¤·":36,"é¢¨ç«å®¶äºº":37,"ç«æ²¢ç½":38,"æ°´å±±è¹‡":39,"é›·æ°´è§£":40,"å±±æ²¢æ":41,"é¢¨é›·ç›Š":42,"æ²¢å¤©å¤¬":43,"å¤©é¢¨å§¤":44,"æ²¢åœ°èƒ":45,"åœ°é¢¨å‡":46,"æ²¢æ°´å›°":47,"æ°´é¢¨äº•":48,"æ²¢ç«é©":49,"ç«é¢¨é¼":50,"éœ‡ç‚ºé›·":51,"è‰®ç‚ºå±±":52,"é¢¨å±±æ¼¸":53,"é›·æ²¢å¸°å¦¹":54,"é›·ç«è±Š":55,"ç«å±±æ—…":56,"å·½ç‚ºé¢¨":57,"å…Œç‚ºæ²¢":58,"é¢¨æ°´æ¸™":59,"æ°´æ²¢ç¯€":60,"é¢¨æ²¢ä¸­å­š":61,"é›·å±±å°é":62,"æ°´ç«æ—¢æ¸ˆ":63,"ç«æ°´æœªæ¸ˆ":64}[e]||0}convertToFriendlyTerm(e){return{"å–œã³":"æ¥½ã—ã„æ°—æŒã¡","æ¥½ã—ã¿":"ã‚ãã‚ãã™ã‚‹æ°—åˆ†","è¦ªã—ã¿":"è¦ªè¿‘æ„Ÿ","äº¤æµ":"ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³","æ·±ã„æ´å¯Ÿ":"ç‰©äº‹ã‚’æ·±ãç†è§£ã™ã‚‹åŠ›","å±æ©Ÿç®¡ç†":"ç”¨å¿ƒæ·±ã•","æ…é‡ã•":"æ…é‡ã«åˆ¤æ–­ã™ã‚‹å§¿å‹¢","å†…çœ":"è‡ªåˆ†ã‚’è¦‹ã¤ã‚ã‚‹æ™‚é–“","èª å®Ÿ":"æ­£ç›´ã§çœŸé¢ç›®ãªæ°—æŒã¡","ä¿¡é ¼":"ç›¸æ‰‹ã‚’ä¿¡ã˜ã‚‹æ°—æŒã¡","çœŸå¿ƒ":"æœ¬å½“ã®æ°—æŒã¡","å†…å®Ÿ":"ä¸­èº«ã®å……å®Ÿ","å‰µé€ åŠ›":"æ–°ã—ã„ã“ã¨ã‚’ç”Ÿã¿å‡ºã™åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—":"ã¿ã‚“ãªã‚’å¼•ã£å¼µã‚‹åŠ›","å¼·ã„æ¨é€²åŠ›":"å‰ã«é€²ã‚€å¼·ã„ã‚¨ãƒãƒ«ã‚®ãƒ¼","å¤©ã®åŠ›":"å¤§ããªãƒ‘ãƒ¯ãƒ¼","å—å®¹æ€§":"ç›¸æ‰‹ã‚’å—ã‘å…¥ã‚Œã‚‹å„ªã—ã•","åŒ…å®¹åŠ›":"åŒ…ã¿è¾¼ã‚€æ¸©ã‹ã•","æŸ”è»Ÿæ€§":"å¤‰åŒ–ã«åˆã‚ã›ã‚‹åŠ›","å¤§åœ°ã®å¾³":"æ¯ã®ã‚ˆã†ãªåŒ…å®¹åŠ›","è¬™éœ":"æ§ãˆã‚ã§ç¤¼å„€æ­£ã—ã„æ…‹åº¦","ä½å§¿å‹¢":"ç›¸æ‰‹ã‚’ç«‹ã¦ã‚‹å§¿å‹¢","ç¾å¾³":"è‰¯ã„äººæ ¼","å°Šæ•¬":"ç›¸æ‰‹ã‚’å¤§åˆ‡ã«æ€ã†æ°—æŒã¡","å®¶æ—":"ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯","èª¿å’Œ":"ä»²è‰¯ãã‚„ã£ã¦ã„ãåŠ›","ç§©åº":"è¦å¾‹ã‚’å¤§åˆ‡ã«ã™ã‚‹å¿ƒ","è¦ªå’Œ":"è¦ªã—ã¿ã‚„ã™ã•","å¯¾ç«‹":"æ„è¦‹ã®é£Ÿã„é•ã„","åç›®":"ã¶ã¤ã‹ã‚Šåˆã„","çŸ›ç›¾":"è€ƒãˆãŒåˆã‚ãªã„ã“ã¨","ä¸å’Œ":"ã†ã¾ãã„ã‹ãªã„çŠ¶æ³","è£…é£¾":"ç¾ã—ãé£¾ã‚‹ã“ã¨","ç¾åŒ–":"ãã‚Œã„ã«ã™ã‚‹æ°—æŒã¡","æ–‡åŒ–":"ã‚»ãƒ³ã‚¹ã®è‰¯ã•","å„ªé›…":"ä¸Šå“ã§æ´—ç·´ã•ã‚ŒãŸæ„Ÿã˜","ç´”çœŸ":"ç´ ç›´ã§ç´”ç²‹ãªå¿ƒ","è‡ªç„¶":"ã‚ã‚Šã®ã¾ã¾ã®å§¿","ç„¡é‚ªæ°—":"é‚ªå¿ƒã®ãªã„æ°—æŒã¡","å¤©çœŸ":"ç”Ÿã¾ã‚ŒãŸã¾ã¾ã®ç´”ç²‹ã•","æœªå®Œ":"å®Œæˆã—ã¦ã„ãªã„çŠ¶æ…‹","ç¶™ç¶š":"ç¶šã‘ã¦ã„ãåŠ›","å¯èƒ½æ€§":"æœªæ¥ã¸ã®æœŸå¾…","æ°¸é ã®æŒ‘æˆ¦":"çµ‚ã‚ã‚Šã®ãªã„æˆé•·","é­é‡":"æ€ã„ãŒã‘ãªã„å‡ºä¼šã„","é‚‚é€…":"å¶ç„¶ã®å·¡ã‚Šåˆã‚ã›","å¶ç„¶":"ãŸã¾ãŸã¾ã®æ©Ÿä¼š","å‡ºä¼šã„":"æ–°ã—ã„ã¤ãªãŒã‚Š","æ•™è‚²":"å­¦ã³è‚²ã¦ã‚‹å§¿å‹¢","å­¦ç¿’":"æ–°ã—ã„ã“ã¨ã‚’è¦šãˆã‚‹åŠ›","å•“ç™º":"æ°—ã¥ãã‚’ä¸ãˆã‚‹åŠ›","æŒ‡å°":"æ•™ãˆå°ãåŠ›","è¦³å¯Ÿ":"ã‚ˆãè¦‹ã¦ç†è§£ã™ã‚‹åŠ›","æ´å¯Ÿ":"æœ¬è³ªã‚’è¦‹æŠœãåŠ›","ç†è§£":"ç›¸æ‰‹ã®æ°—æŒã¡ã‚’åˆ†ã‹ã‚‹åŠ›","å®¢è¦³æ€§":"å†·é™ã«åˆ¤æ–­ã™ã‚‹åŠ›","è¿½éš":"æµã‚Œã«åˆã‚ã›ã‚‹åŠ›","é©å¿œ":"çŠ¶æ³ã«å¿œã˜ã¦å¤‰ã‚ã‚‹åŠ›","å¤‰åŒ–å¯¾å¿œ":"å¤‰åŒ–ã‚’å—ã‘å…¥ã‚Œã‚‹æŸ”è»Ÿã•"}[e]||e}generateFriendlyRelationshipExpression(e,n,t){const r={adjacent:{pattern:"è‡ªåˆ†ã®ä¸­ã®{friendly1}ã¨{friendly2}ãŒè‡ªç„¶ãªæµã‚Œã§ã¤ãªãŒã£ã¦ã€å†…é¢ãŒã‚¹ãƒ ãƒ¼ã‚ºã«æˆé•·ã—ã¦ã„ã",feeling:"ã¾ã‚‹ã§å·ã®æµã‚Œã®ã‚ˆã†ã«ç„¡ç†ãªãå†…çš„å¤‰åŒ–ã™ã‚‹"},zong:{pattern:"å†…ãªã‚‹{friendly1}ã¨{friendly2}ã¯æ­£åå¯¾ã ã‘ã©ã€ã ã‹ã‚‰ã“ãå®Œç’§ã«è£œã„åˆãˆã‚‹å¿ƒã®ä¸­ã®æœ€é«˜ã®çµ„ã¿åˆã‚ã›",feeling:"é•ã„ãŒå†…é¢ã®é­…åŠ›ã«ãªã£ã¦ã€è‡ªåˆ†ã®ç•°ãªã‚‹é¢ã‚’æ´»ã‹ã—åˆãˆã‚‹"},terminal:{pattern:"å¿ƒã®ä¸­ã®{friendly1}ã¨{friendly2}ãŒã„ã¤ã¾ã§ã‚‚æˆé•·ã—ç¶šã‘ã‚‹ã€çµ‚ã‚ã‚Šã®ãªã„å†…çš„å¯èƒ½æ€§ã‚’æ„Ÿã˜ã•ã›ã‚‹",feeling:"å¸¸ã«å†…é¢ã«æ–°é®®ã•ãŒã‚ã£ã¦å¿ƒãŒé£½ãã‚‹ã“ã¨ãŒãªã„"},origin:{pattern:"è‡ªåˆ†ã®ä¸­ã®{friendly1}ã¨{friendly2}ãŒæ ¹æºçš„ãªãƒ‘ãƒ¯ãƒ¼ã‚’ç”Ÿã¿å‡ºã—ã¦ã€ä»–ã§ã¯å¾—ã‚‰ã‚Œãªã„ç‰¹åˆ¥ãªå†…ãªã‚‹åŠ›ã«ãªã‚‹",feeling:"ã™ã¹ã¦ã®å§‹ã¾ã‚Šã¨ãªã‚‹å¼·ã„å†…çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ„Ÿã˜ã‚‹"}};return(r[e]||r.adjacent).pattern.replace("{friendly1}",n).replace("{friendly2}",t)}generateFriendlyDifferenceExpression(e,n,t){const r={cognitive_direction:{pattern:"è‡ªåˆ†ã®ä¸­ã®{friendly1}ã¨{friendly2}ã¯è€ƒãˆæ–¹ãŒé•ã†ã‘ã©ã€ãã®é•ã„ãŒå†…é¢ã®è¦–é‡ã‚’è±Šã‹ã«ã—ã¦ãã‚Œã‚‹",effect:"ä¸€ã¤ã®è¦–ç‚¹ã§ã¯è¦‹ãˆãªã„ã“ã¨ã«æ°—ã¥ã‘ã‚‹å†…çš„ãªæˆé•·"},emotional_texture:{pattern:"å¿ƒã®ä¸­ã®{friendly1}ã¨{friendly2}ã¯æ„Ÿã˜æ–¹ãŒé•ã†ã‘ã©ã€ãã‚ŒãŒå†…é¢ã«è±Šã‹ãªæ„Ÿæƒ…ã®ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼ã‚’ä½œã‚‹",effect:"ã‚ˆã‚Šæ·±ãã¦ç¹Šç´°ãªå†…çš„ä½“é¨“ãŒã§ãã‚‹"},completion_phase:{pattern:"å†…ãªã‚‹{friendly1}ã¨{friendly2}ã¯æˆé•·ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé•ã†ã‘ã©ã€ã ã‹ã‚‰é•·æœŸçš„ãªå†…é¢ã®ç™ºå±•ãŒã§ãã‚‹",effect:"æ®µéšçš„ã«è‡ªåˆ†è‡ªèº«ãŒæˆé•·ã—ã¦ã„ã‘ã‚‹"}};return(r[e]||r.cognitive_direction).pattern.replace("{friendly1}",n).replace("{friendly2}",t)}getOSBunjinCharacteristics(e){try{if(this.expressionGenerator)return this.expressionGenerator.getOSBunjinCharacteristics(e);const n={engine:{bunjinNames:["ç©æ¥µçš„ãªä¸€é¢","æ¨é€²ã™ã‚‹è‡ªåˆ†","æŒ‘æˆ¦ã™ã‚‹å´é¢","ãƒªãƒ¼ãƒ€ãƒ¼æ°—è³ªã®éƒ¨åˆ†","å‰µé€ çš„ãªå£°"],role:"å†…ãªã‚‹æ¨é€²åŠ›ãƒ»å‰µé€ åŠ›ã‚’æ‹…å½“ã™ã‚‹å´é¢",voice:"ã€Œã‚„ã£ã¦ã¿ã‚ˆã†ã€ã€Œé€²ã‚ã‚ˆã†ã€ã€Œä½œã‚Šå‡ºãã†ã€ã¨ã„ã†å‰å‘ããªå¿ƒã®å£°"},interface:{bunjinNames:["ç¤¾äº¤çš„ãªé¢","å”èª¿ã™ã‚‹è‡ªåˆ†","äººã¨ç¹‹ãŒã‚‹å´é¢","ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚¿ãƒ¼æ°—è³ª","èª¿å’Œã‚’å¤§åˆ‡ã«ã™ã‚‹å£°"],role:"å†…ãªã‚‹ç¤¾ä¼šæ€§ãƒ»å¯¾äººé–¢ä¿‚ã‚’æ‹…å½“ã™ã‚‹å´é¢",voice:"ã€Œã¿ã‚“ãªã§å”åŠ›ã—ã‚ˆã†ã€ã€Œé–¢ä¿‚ã‚’å¤§åˆ‡ã«ã—ã‚ˆã†ã€ã¨ã„ã†ç¤¾ä¼šæ€§ã‚’é‡è¦–ã™ã‚‹å¿ƒã®å£°",stressBehavior:"éåº¦ãªæ°—é£ã„ã€ä»–äººã«åˆã‚ã›ã™ãã€è‡ªåˆ†ã‚’æŠ‘åˆ¶"},safe:{bunjinNames:["æ…é‡ãªä¸€é¢","å®ˆã‚‹è‡ªåˆ†","å®‰å®šå¿—å‘ã®å´é¢","èª å®Ÿãªéƒ¨åˆ†","å¿ƒé…ã™ã‚‹å£°"],role:"å†…ãªã‚‹å®‰å…¨æ€§ãƒ»ä¿¡é ¼æ€§ã‚’æ‹…å½“ã™ã‚‹å´é¢",voice:"ã€Œæ…é‡ã«ã„ã“ã†ã€ã€Œå®‰å…¨ã‚’ç¢ºä¿ã—ã‚ˆã†ã€ã¨ã„ã†å®‰å®šå¿—å‘ã®å¿ƒã®å£°",stressBehavior:"éåº¦ãªå¿ƒé…ã€è¡Œå‹•åˆ¶é™ã€å¤‰åŒ–ã¸ã®æŠµæŠ—ã€èç¸®"}};return n[e]||n.engine}catch(n){return console.error("âŒ OS characteristics error:",n),{bunjinNames:["å´é¢"],role:"å†…ãªã‚‹å´é¢",voice:"å¿ƒã®å£°"}}}inferOSType(e){const n=e.keywords||[],t=["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","ç©æ¥µ","æ¨é€²","æŒ‘æˆ¦","å‰å‘ã","è¡Œå‹•","å–œã³","æ¥½ã—ã¿","è¡£æ’ƒ","æ´»å‹•","å‹•æº","å¼·ã„æ¨é€²åŠ›","æ˜æ™°æ€§","æƒ…ç†±","ç…§æ˜"],r=["ç†è§£","è¦³å¯Ÿ","æ´å¯Ÿ","èª¿å’Œ","å¯¾è©±","å®¢è¦³","å­¦ç¿’","äº¤æµ","æƒ…å ±","è¦ªã—ã¿","æµ¸é€","é †å¿œ"],s=["å®‰å…¨","æ…é‡","ä¿¡é ¼","èª å®Ÿ","å®‰å®š","ä¿è­·","ç¶™ç¶š","è²¬ä»»","è¬™éœ","å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§","é™æ­¢","ç‘æƒ³","ä¸å‹•","æ·±ã„æ´å¯Ÿ","å±æ©Ÿç®¡ç†","æ…é‡ã•"];let a=0,i=0,o=0;return n.forEach(e=>{t.some(n=>e.includes(n))&&a++,r.some(n=>e.includes(n))&&i++,s.some(n=>e.includes(n))&&o++}),a>=i&&a>=o?"engine":i>=o?"interface":"safe"}generateBunjinHarmoniousExpression(e,n,t){const r=this.getOSBunjinCharacteristics(e),s=this.getOSBunjinCharacteristics(n),a=r.bunjinNames[Math.floor(Math.random()*r.bunjinNames.length)],i=s.bunjinNames[Math.floor(Math.random()*s.bunjinNames.length)],o=this.generateOSPairSpecificExpression(e,n,a,i);if(o)return console.log(`ğŸ’ª OSãƒšã‚¢ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨: ${e}-${n}`),o;if(console.log(`âš ï¸ OSãƒšã‚¢ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãªã—: ${e}-${n}`),t.ichingRelations&&t.ichingRelations.length>0){const e=t.ichingRelations[0];return this.generateBunjinRelationshipExpression(e.type,a,i)}if(t.subtleDifferences&&t.subtleDifferences.length>0){const e=t.subtleDifferences[0];return this.generateBunjinDifferenceExpression(e.type,a,i)}return`å¿…è¦ãªæ™‚ã«è‡ªåˆ†ã®ä¸­ã®${a}ã¨${i}ãŒè‡ªç„¶ã«ç¾ã‚Œã€æŸ”è»Ÿã§ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¡Œå‹•ãŒã§ãã‚‹`}generateBunjinRelationshipExpression(e,n,t){const r={adjacent:`å ´é¢ã«å¿œã˜ã¦è‡ªåˆ†ã®ä¸­ã®${n}ã¨${t}ãŒè‡ªç„¶ã«å”åŠ›ã—ã€ç„¡ç†ãªãçŠ¶æ³ã«é©å¿œã—ã¦ã„ã`,zong:`è‡ªåˆ†ã®ä¸­ã®${n}ã¨${t}ãŒãŠäº’ã„ã«å½±éŸ¿ã—åˆã„ãªãŒã‚‰ã€ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¡Œå‹•ãŒã§ãã‚‹`,terminal:`å¿ƒã®ä¸­ã®${n}ã¨${t}ãŒç›¸äº’ã«æ”¯ãˆåˆã£ã¦ã€ç¶™ç¶šçš„ã«æˆé•·ã—ã¦ã„ãåŠ›ã‚’ç™ºæ®ã™ã‚‹`,origin:`å†…ãªã‚‹${n}ã¨${t}ãŒæ·±ãå”èª¿ã—ã¦ã€çŠ¶æ³ã«å¿œã˜ãŸç‹¬è‡ªã®åˆ¤æ–­åŠ›ã‚’ç”Ÿã¿å‡ºã™`};return r[e]||r.adjacent}generateBunjinDifferenceExpression(e,n,t){const r={cognitive_direction:`è‡ªåˆ†ã®ä¸­ã®${n}ã¨${t}ã®è€ƒãˆæ–¹ã®é•ã„ãŒã€å ´é¢ã«å¿œã˜ã¦æŸ”è»Ÿã§å¤šè§’çš„ãªåˆ¤æ–­åŠ›ã‚’ç”Ÿã¿å‡ºã™`,emotional_texture:`å¿ƒã®ä¸­ã®${n}ã¨${t}ã®æ„Ÿã˜æ–¹ã®é•ã„ãŒã€çŠ¶æ³ã«å¿œã˜ã¦è±Šã‹ã§æ·±ã¿ã®ã‚ã‚‹æ„Ÿæƒ…è¡¨ç¾ã‚’å¯èƒ½ã«ã™ã‚‹`,completion_phase:`å†…ãªã‚‹${n}ã¨${t}ã®ç•°ãªã‚‹æˆé•·æ®µéšãŒã€å ´é¢ã«å¿œã˜ã¦ç¶™ç¶šçš„ã§æŒç¶šçš„ãªç™ºå±•ã‚’å®Ÿç¾ã™ã‚‹`};return r[e]||r.cognitive_direction}generateOSPairSpecificExpression(e,n,t,r){const s=[e,n].sort().join("-"),a={"engine-safe":[`å ´é¢ã«å¿œã˜ã¦è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒé©åˆ‡ã«ç¾ã‚Œã€ç©æ¥µæ€§ã¨æ…é‡ã•ã®ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¡Œå‹•ãŒã§ãã‚‹`,`å¿ƒã®ä¸­ã®${t}ã¨${r}ãŒçŠ¶æ³ã«ã‚ˆã£ã¦è‡ªç„¶ã«é€£æºã—ã€å‹‡æ°—ã¨æ…é‡ã•ã‚’ä½µã›æŒã£ãŸè‡ªåˆ†ã¨ã—ã¦è¡Œå‹•ã™ã‚‹`,`å¿…è¦ãªæ™‚ã«å†…ãªã‚‹${t}ã‚„${r}ãŒå‰é¢ã«å‡ºã¦ã€çŠ¶æ³ã«æœ€é©ãªæ¨é€²åŠ›ã¨å®‰å…¨æ€§ã‚’ç™ºæ®ã™ã‚‹`,`è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒãŠäº’ã„ã«å½±éŸ¿ã—åˆã„ãªãŒã‚‰ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã¨å®‰å…¨ã®ä¸¡ç«‹ã‚’å®Ÿç¾ã™ã‚‹`,`å†…ãªã‚‹${t}ã¨${r}ãŒæœ‰æ©Ÿçš„ã«é€£å‹•ã—ã¦ã€æœæ•¢ã§ã‚ã‚ŠãªãŒã‚‰è³¢æ˜ãªåˆ¤æ–­ãŒã§ãã‚‹è‡ªåˆ†ã«ãªã‚‹`],"interface-safe":[`å ´é¢ã«å¿œã˜ã¦è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒé©åˆ‡ã«ç¾ã‚Œã€äººé–“é–¢ä¿‚ã®ä¸­ã§å®‰å¿ƒã¨ä¿¡é ¼ã‚’ä¸¡ç«‹ã§ãã‚‹`,`å¿ƒã®ä¸­ã®${t}ã¨${r}ãŒçŠ¶æ³ã«ã‚ˆã£ã¦è‡ªç„¶ã«é€£æºã—ã€ç¤¾äº¤çš„ã§ã‚ã‚ŠãªãŒã‚‰ä¿¡é ¼ã§ãã‚‹é–¢ä¿‚ã‚’ç¯‰ã`,`å¿…è¦ãªæ™‚ã«å†…ãªã‚‹${t}ã‚„${r}ãŒå‰é¢ã«å‡ºã¦ã€çŠ¶æ³ã«æœ€é©ãªå¯¾äººé–¢ä¿‚ã¨å®‰å®šæ€§ã‚’ç™ºæ®ã™ã‚‹`,`è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒãŠäº’ã„ã«å½±éŸ¿ã—åˆã„ãªãŒã‚‰ã€é–‹æ”¾æ€§ã¨å®‰å®šæ€§ã®ä¸¡ç«‹ã‚’å®Ÿç¾ã™ã‚‹`,`å†…ãªã‚‹${t}ã¨${r}ãŒæœ‰æ©Ÿçš„ã«é€£å‹•ã—ã¦ã€ç¤¾ä¼šçš„ã§ã‚ã‚ŠãªãŒã‚‰èª å®Ÿãªäººé–“é–¢ä¿‚ã‚’è‚²ã‚€`],"engine-interface":[`å ´é¢ã«å¿œã˜ã¦è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒé©åˆ‡ã«ç¾ã‚Œã€è¡Œå‹•åŠ›ã¨ç¤¾ä¼šæ€§ã‚’ä¸¡ç«‹ã—ãŸé–¢ä¿‚ä½œã‚ŠãŒã§ãã‚‹`,`å¿ƒã®ä¸­ã®${t}ã¨${r}ãŒçŠ¶æ³ã«ã‚ˆã£ã¦è‡ªç„¶ã«é€£æºã—ã€ç©æ¥µçš„ã§ã‚ã‚ŠãªãŒã‚‰å”èª¿çš„ãªè‡ªåˆ†ã¨ã—ã¦è¡Œå‹•ã™ã‚‹`,`å¿…è¦ãªæ™‚ã«å†…ãªã‚‹${t}ã‚„${r}ãŒå‰é¢ã«å‡ºã¦ã€çŠ¶æ³ã«æœ€é©ãªæ¨é€²åŠ›ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ›ã‚’ç™ºæ®ã™ã‚‹`,`è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒãŠäº’ã„ã«å½±éŸ¿ã—åˆã„ãªãŒã‚‰ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨å”èª¿æ€§ã®ä¸¡ç«‹ã‚’å®Ÿç¾ã™ã‚‹`,`å†…ãªã‚‹${t}ã¨${r}ãŒæœ‰æ©Ÿçš„ã«é€£å‹•ã—ã¦ã€å‰µé€ çš„ã§ã‚ã‚ŠãªãŒã‚‰èª¿å’Œã‚’é‡è¦–ã™ã‚‹è¡Œå‹•ãŒã§ãã‚‹`]};if(a[s]){const e=a[s];return e[Math.floor(Math.random()*e.length)]}return null}generateEngineInterfaceTension(e,n,t){const r=e.name,s=n.name,a=e.keywords[0]||e.strength,i=n.keywords[0]||n.strength;if(t.speedConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€ã©ã¡ã‚‰ã®ãƒšãƒ¼ã‚¹ã‚’å„ªå…ˆã™ã¹ãã‹åˆ¤æ–­ã«è¿·ã„ãŒã¡`;if(t.valueConflict)return`${r}ã®${a}é‡è¦–ã¨${s}ã®${i}é‡è¦–ã€ä¾¡å€¤è¦³ã®é•ã„ã§æ–¹é‡æ±ºå®šã«æ™‚é–“ãŒã‹ã‹ã‚‹`;if(t.timeConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®è¦‹è§£ãŒç•°ãªã‚Šèª¿æ•´ãŒå¿…è¦`;if(t.directionConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€ç›®æŒ‡ã™æ–¹å‘æ€§ãŒé•ã„æˆ¸æƒ‘ã†ã“ã¨ãŒã‚ã‚‹`;{const e=this.getOSBunjinCharacteristics("engine"),n=this.getOSBunjinCharacteristics("interface"),t=e.bunjinNames[Math.floor(Math.random()*e.bunjinNames.length)],r=n.bunjinNames[Math.floor(Math.random()*n.bunjinNames.length)],s=this.generateOSPairSpecificExpression("engine","interface",t,r);return s||`å¿…è¦ãªæ™‚ã«è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒè‡ªç„¶ã«ç¾ã‚Œã€è¡Œå‹•åŠ›ã¨ç¤¾ä¼šæ€§ã‚’ä¸¡ç«‹ã—ãŸé–¢ä¿‚ä½œã‚ŠãŒã§ãã‚‹`}}generateHarmoniousExpression(e,n,t){e.name,n.name,e.keywords[0]||e.strength,n.keywords[0]||n.strength;const r=this.inferOSType(e),s=this.inferOSType(n);return this.generateBunjinHarmoniousExpression(r,s,t)}generateEngineSafeTension(e,n,t){const r=e.name,s=n.name,a=e.keywords[0]||e.strength,i=n.keywords[0]||n.strength;if(t.speedConflict)return`${r}ã®${a}ã§é€²ã¿ãŸã„ãŒã€${s}ã®${i}ã‚‚å¤§åˆ‡ã§ã€ã‚¹ãƒ”ãƒ¼ãƒ‰èª¿æ•´ã«æ‚©ã‚€`;if(t.valueConflict)return`${r}ã®${a}ã¸ã®è¡å‹•ã¨${s}ã®${i}ã¸ã®é…æ…®ã€ã©ã¡ã‚‰ã‚‚è­²ã‚Œãšè‘›è—¤ã™ã‚‹`;if(t.timeConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€é•·æœŸçš„è¦–ç‚¹ã¨çŸ­æœŸçš„åˆ¤æ–­ã§æ¿æŒŸã¿ã«ãªã‚‹`;if(t.directionConflict)return`${r}ã®${a}ã§æ”»ã‚ã‚‹ã‹ã€${s}ã®${i}ã§å®ˆã‚‹ã‹ã€é¸æŠã«è¿·ã†`;{const e=this.getOSBunjinCharacteristics("engine"),n=this.getOSBunjinCharacteristics("safe"),t=e.bunjinNames[Math.floor(Math.random()*e.bunjinNames.length)],r=n.bunjinNames[Math.floor(Math.random()*n.bunjinNames.length)],s=this.generateOSPairSpecificExpression("engine","safe",t,r);return s||`å¿…è¦ãªæ™‚ã«è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒè‡ªç„¶ã«ç¾ã‚Œã€ç©æ¥µæ€§ã¨æ…é‡ã•ã‚’ä¸¡ç«‹ã—ãŸè¡Œå‹•ãŒã§ãã‚‹`}}generateInterfaceSafeTension(e,n,t){const r=e.name,s=n.name,a=e.keywords[0]||e.strength,i=n.keywords[0]||n.strength;if(t.speedConflict)return`${r}ã®${a}ã§ã®èª¿æ•´ã¨${s}ã®${i}ã§ã®å®‰å®šåŒ–ã€ã©ã¡ã‚‰ã‚’å„ªå…ˆã™ã‚‹ã‹æ‚©ã¾ã—ã„`;if(t.valueConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€äººé–“é–¢ä¿‚ã¨å®‰å…¨æ€§ã®ãƒãƒ©ãƒ³ã‚¹ãŒé›£ã—ã„`;if(t.timeConflict)return`${r}ã®${a}ã«ã‚ˆã‚‹å¤‰åŒ–ã¨${s}ã®${i}ã«ã‚ˆã‚‹ç¶­æŒã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒåˆã‚ãªã„`;if(t.directionConflict)return`${r}ã®${a}ã¨${s}ã®${i}ã€é–‹æ”¾æ€§ã¨æ…é‡ã•ã®ä½¿ã„åˆ†ã‘ã«è¿·ã†`;{const e=this.getOSBunjinCharacteristics("interface"),n=this.getOSBunjinCharacteristics("safe"),t=e.bunjinNames[Math.floor(Math.random()*e.bunjinNames.length)],r=n.bunjinNames[Math.floor(Math.random()*n.bunjinNames.length)],s=this.generateOSPairSpecificExpression("interface","safe",t,r);return s||`å¿…è¦ãªæ™‚ã«è‡ªåˆ†ã®ä¸­ã®${t}ã¨${r}ãŒè‡ªç„¶ã«ç¾ã‚Œã€ç¤¾ä¼šæ€§ã¨å®‰å®šæ€§ã‚’ä¸¡ç«‹ã—ãŸé–¢ä¿‚ä½œã‚ŠãŒã§ãã‚‹`}}generateGeneralTension(e,n,t){const r=e.name,s=n.name,a=e.keywords[0]||e.strength,i=n.keywords[0]||n.strength;return t.speedConflict?`${r}ã®${a}ã¨${s}ã®${i}ã€ãƒšãƒ¼ã‚¹ã®é•ã„ã§èª¿æ•´ã«æ™‚é–“ãŒã‹ã‹ã‚‹`:t.valueConflict?`${r}ã®${a}ã¨${s}ã®${i}ã€ç•°ãªã‚‹ä¾¡å€¤è¦³ã§æ–¹å‘æ€§ã«æ‚©ã‚€`:t.timeConflict?`${r}ã®${a}ã¨${s}ã®${i}ã€æ™‚é–“æ„Ÿè¦šã®é•ã„ã§ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé›£ã—ã„`:t.directionConflict?`${r}ã®${a}ã¨${s}ã®${i}ã€ç›®æ¨™ã®é•ã„ã§è¿·ã„ãŒç”Ÿã˜ã‚‹`:"è‡ªåˆ†ã®ä¸­ã®ç•°ãªã‚‹å´é¢ãŒå¿…è¦ãªæ™‚ã«è‡ªç„¶ã«ç¾ã‚Œã€æŸ”è»Ÿã§ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¡Œå‹•ãŒã§ãã‚‹"}identifyTensionReason(e,n){return e.energy.includes("è¿…é€Ÿ")&&n.energy.includes("æ…é‡")||e.energy.includes("æ…é‡")&&n.energy.includes("è¿…é€Ÿ")?"ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã®ç›¸é•":e.energy.includes("æœªæ¥")&&n.energy.includes("éå»")||e.energy.includes("é©æ–°")&&n.energy.includes("ä¼çµ±")?"æ™‚é–“è»¸ã®ä¸ä¸€è‡´":e.strength.includes("å€‹äºº")&&n.strength.includes("é›†å›£")||e.keywords.some(e=>e.includes("ç‹¬ç«‹"))&&n.keywords.some(e=>e.includes("å”èª¿"))?"ä¾¡å€¤è¦³ã®ç›¸é•":"æœ¬è³ªçš„ãªæ–¹å‘æ€§ã®é•ã„"}areDirectlyOpposing(e,n){const t=[["å‰µé€ ","ç ´å£Š"],["çµ±åˆ","åˆ†é›¢"],["å‰é€²","å¾Œé€€"],["é–‹æ”¾","é–‰å¡"],["å…‰æ˜","æš—é»’"]];for(let[r,s]of t)for(let t of e.keywords)for(let e of n.keywords)if(t.includes(r)&&e.includes(s)||t.includes(s)&&e.includes(r))return!0;return!1}generateConflictTheme(e,n){return e.energy.includes("ç©æ¥µ")&&n.energy.includes("å—å‹•")?"è¡Œå‹•é€Ÿåº¦ã®æ ¹æœ¬çš„ç›¸é•ã«ã‚ˆã‚‹è‘›è—¤":e.energy.includes("å¤–å‘")&&n.energy.includes("å†…å‘")?"æ–¹å‘æ€§ã®ä¸ä¸€è‡´ã«ã‚ˆã‚‹å†…çš„åˆ†è£‚":e.energy.includes("ä¸Šæ˜‡")&&n.energy.includes("å®‰å®š")?"æˆé•·ã¨ç¶­æŒã®ãƒãƒ©ãƒ³ã‚¹è‘›è—¤":"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®è³ªçš„ç›¸é•ã«ã‚ˆã‚‹èª¿æ•´å›°é›£"}generateSynergyNotes(e,n,t,r){const s=(r[0][1]+r[0][2]+r[1][2])/3;return s>.5?`å…¨ä½“çš„ã«èª¿å’Œçš„ãªæ§‹æˆã€‚${e.name}ã‚’ä¸­å¿ƒã«ã€${n.name}ãŒèª¿æ•´ã—ã€${t.name}ãŒå®‰å®šåŒ–ã•ã›ã‚‹å¥½å¾ªç’°`:s>0?"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ§‹æˆã€‚å„OSãŒé©åº¦ãªè·é›¢ã‚’ä¿ã¡ãªãŒã‚‰æ©Ÿèƒ½":"è‘›è—¤ã‚’å«ã‚€æ§‹æˆã€‚å‰µé€ çš„ç·Šå¼µã‚’æ´»ã‹ã™ã“ã¨ã§ç‹¬è‡ªã®å¼·ã¿ã‚’ç™ºæ®å¯èƒ½"}suggestGrowthDirection(e,n,t){const r=(e.score+n.score+t.score)/3;return r>.7?"ã™ã§ã«é«˜ã„ãƒãƒ©ãƒ³ã‚¹ã€‚å„OSã®ç‰¹å¾´ã‚’ã‚ˆã‚Šé®®æ˜ã«ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ãªã‚‹å€‹æ€§åŒ–ãŒå¯èƒ½ã§ã¯ï¼Ÿ":r>.4?"æˆé•·ã®ä½™åœ°ã‚ã‚Šã€‚æœ€ã‚‚ä½ã„ã‚¹ã‚³ã‚¢ã®OSã‚’æ„è­˜çš„ã«æ´»ç”¨ã™ã‚‹å ´é¢ã‚’å¢—ã‚„ã—ã¦ã¿ã¦ã¯ï¼Ÿ":"å¤§ããªæˆé•·ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã€‚ã¾ãšã¯æœ€ã‚‚å¾—æ„ãªOSã‚’è»¸ã«ã€æ®µéšçš„ã«ä»–ã®OSã‚’çµ±åˆã—ã¦ã„ãã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’"}calculateKeywordSynergy(e,n){const t=[[["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—"],["å¼·å¤§","å¨åŠ›","ç©æ¥µæ€§"]],[["æ±ºæ–­åŠ›","å®Ÿè¡ŒåŠ›"],["è¡Œå‹•åŠ›","å‹‡çŒ›"]],[["æ•™è‚²","æŒ‡å°"],["å­¦ç¿’","å•“ç™º"]],[["åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§"],["èª¿å’Œ","å”èª¿"]],[["å†…çœ","æ…é‡ã•"],["æ·±ã„æ´å¯Ÿ","ç‘æƒ³"]],[["å¤‰é©","é©æ–°"],["åˆ·æ–°","æ”¹é©"]],[["è±Šã‹ã•","ç¹æ „"],["æˆåŠŸ","çµ±åˆ"]],[["æŒç¶š","ç¶™ç¶š"],["æ°¸ç¶š","æ’å¸¸æ€§"]],[["å…‰æ˜","ç…§æ˜"],["æ–‡æ˜","çŸ¥æµ"]],[["æ´»åŠ›","å…ƒæ°—"],["åˆºæ¿€","å‹•åŠ›"]]];let r=0;for(let[a,i]of t){const t=e.some(e=>a.some(n=>e.includes(n))),s=n.some(e=>i.some(n=>e.includes(n)));t&&s&&(r=Math.max(r,.7))}const s=e.filter(e=>n.some(n=>e===n||e.includes(n)||n.includes(e)));if(s.length>0){const e=Math.min(.5+.1*s.length,.7);r=Math.max(r,e)}return r}calculateEnergyCompatibility(e,n){const t=[["é™½çš„","é™½çš„"],["ç©æ¥µçš„","ç©æ¥µçš„"],["ä¸Šæ˜‡å¿—å‘","æˆé•·å¿—å‘"],["å­¦ç¿’çš„","æˆé•·çš„"],["ç™ºæ•£çš„","ç…§æ˜çš„"],["æµå‹•çš„","é©å¿œçš„"],["é™°çš„","é™°çš„"],["å—å‹•çš„","å®‰å®šå¿—å‘"],["å†…å‘å¿—å‘","æ·±å±¤å¿—å‘"],["ç‘æƒ³å¿—å‘","é™çš„"]];for(let[r,s]of t)if(e.includes(r)&&n.includes(s)||e.includes(s)&&n.includes(r))return.6;return e.includes("é™½çš„")&&n.includes("é™°çš„")||e.includes("é™°çš„")&&n.includes("é™½çš„")?.6:0}analyzeStrengthWeaknessInteraction(e,n){const t=[["æ±ºæ–­åŠ›ã¨å®Ÿè¡ŒåŠ›","ä¸»ä½“æ€§ã®æ¬ å¦‚"],["èª¿å’Œã¨å”èª¿","å‚²æ…¢ã«ãªã‚Šã‚„ã™ã„"],["çŸ¥è­˜ã®è“„ç©ã¨ä¼æˆ","çµŒé¨“ä¸è¶³ã«ã‚ˆã‚‹åˆ¤æ–­ãƒŸã‚¹"],["é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’å¾…ã¤åŠ›","å‹‡ã¿è¶³ã«ã‚ˆã‚‹å¤±æ•—"],["æ·±ã„æ´å¯ŸåŠ›","è¡Œå‹•ã®é…ã‚Œã«ã‚ˆã‚‹æ©Ÿä¼šæå¤±"],["æŸ”è»Ÿãªå¯¾å¿œåŠ›","å®Œæˆã¸ã®ä¸å®‰"]];for(let[s,a]of t)if(e.strength.includes(s.split("ã¨")[0])&&n.weakness.includes(a)||n.strength.includes(s.split("ã¨")[0])&&e.weakness.includes(a))return.5;const r=["ä¸å®‰","æ··ä¹±","åœæ»","å¤±æ•—","æ¬ å¦‚"];for(let s of r)if(e.weakness.includes(s)&&n.weakness.includes(s))return-.3;return 0}haveSimilarDirection(e,n){const t=[[["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","æ±ºæ–­åŠ›"],["å¼·å¤§","å¨åŠ›","è¡Œå‹•åŠ›","ç©æ¥µæ€§"]],[["æ•™è‚²","æŒ‡å°","å­¦ç¿’"],["å•“ç™º","æˆé•·","ç™ºå±•"]],[["èª¿å’Œ","å”èª¿","åŒ…å®¹"],["æŸ”è»Ÿ","å—å®¹","é©å¿œ"]],[["æŒç¶š","ç¶™ç¶š","å®‰å®š"],["æ’å¸¸","æ°¸ç¶š","ç¶­æŒ"]],[["å¤‰é©","åˆ·æ–°","é©æ–°"],["æ”¹é©","çªç ´","é–‹æ‹“"]]];for(let[r,s]of t){const t=e.keywords.some(e=>r.some(n=>e.includes(n))),a=n.keywords.some(e=>s.some(n=>e.includes(n)));if(t&&a)return!0}return this.calculateEnergyCompatibility(e.energy,n.energy)>.6}isHealthyComplement(e,n){const t=[[["æ±ºæ–­åŠ›","å®Ÿè¡ŒåŠ›"],["æ…é‡","å†…çœ","æ·±ã„æ´å¯Ÿ"]],[["ç©æ¥µçš„","å¤–å‘"],["å—å‹•çš„","å†…å‘","é™å¯‚"]],[["å‰µé€ ","åˆ·æ–°"],["å®‰å®š","ç¶­æŒ","ä¿å®ˆ"]],[["é€Ÿã„","ç¬é–“"],["é…ã„","æŒç¶š","ç¶™ç¶š"]]];for(let[r,s]of t){const t=e.keywords.some(e=>r.some(n=>e.includes(n)))&&n.keywords.some(e=>s.some(n=>e.includes(n))),a=n.keywords.some(e=>r.some(n=>e.includes(n)))&&e.keywords.some(e=>s.some(n=>e.includes(n)));if(t||a)return this.analyzeStrengthWeaknessInteraction(e,n)>0}return!1}isStressfulComplement(e,n){const t=[[["æ±ºæ–­åŠ›","å®Ÿè¡ŒåŠ›","å‰µé€ åŠ›","å®Œæˆ"],["æœªå®Œ","ç¶™ç¶š","æ°¸é ","ç„¡é™"]],[["å®‰å®š","ç¶­æŒ","ä¿å®ˆ","ä¸å‹•"],["å¤‰é©","åˆ·æ–°","é©å‘½","ç ´å£Š"]],[["å†…çœ","ç‘æƒ³","é™å¯‚","å­¤ç‹¬"],["äº¤æµ","ç¤¾äº¤","é–‹æ”¾","æ‹¡æ•£"]],[["å®Œç’§","æ­£ç¢º","å³æ ¼","è¦å¾‹"],["æŸ”è»Ÿ","é©å½“","æ›–æ˜§","è‡ªç”±"]]];for(let[s,a]of t){const t=e.keywords.some(e=>s.some(n=>e.includes(n)))&&n.keywords.some(e=>a.some(n=>e.includes(n))),r=n.keywords.some(e=>s.some(n=>e.includes(n)))&&e.keywords.some(e=>a.some(n=>e.includes(n)));if(t||r)return!0}if(e.strength===n.strength)return!0;const r=["ä¸å®‰","æ··ä¹±","åœæ»","å¤±æ•—","æ¬ å¦‚"];for(let s of r)if(e.weakness.includes(s)&&n.weakness.includes(s))return!0;return!1}isWellBalanced(e,n){const t=[[["å­¦ç¿’","æˆé•·","ç™ºå±•"],["å®‰å®š","ç¶­æŒ","ä¿è­·"]],[["æŸ”è»Ÿ","é©å¿œ","èª¿æ•´"],["è¦å¾‹","ç§©åº","æ§‹é€ "]],[["é–‹æ”¾","æ‹¡å¼µ","è¡¨ç¾"],["åæŸ","é›†ä¸­","å†…çœ"]],[["ç›´æ„Ÿ","æ„Ÿæ€§","å‰µé€ "],["è«–ç†","åˆ†æ","æ…é‡"]]];for(let[s,a]of t){const t=e.keywords.some(e=>s.some(n=>e.includes(n)))&&n.keywords.some(e=>a.some(n=>e.includes(n))),r=n.keywords.some(e=>s.some(n=>e.includes(n)))&&e.keywords.some(e=>a.some(n=>e.includes(n)));if(t||r)return!0}const r=this.calculateEnergyCompatibility(e.energy,n.energy);return r>.3&&r<.7}analyzeSameHexagram(e,n){switch(n){case"engine-interface":return e.keywords.some(e=>["æ±ºæ–­åŠ›","å®Ÿè¡ŒåŠ›","ç©æ¥µæ€§","å¼·å¤§","å¨åŠ›"].includes(e))?.6:e.keywords.some(e=>["å†…çœ","æ…é‡","æ·±ã„æ´å¯Ÿ","ç‘æƒ³"].includes(e))?-.1:.4;case"engine-safe":return e.keywords.some(e=>["å®Œç’§","ç†æƒ³","çµ¶é ‚"].includes(e))?-.2:e.keywords.some(e=>["èª¿å’Œ","å”èª¿","å®‰å®š","å¹³å’Œ","å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§"].includes(e))?.3:e.keywords.some(e=>["æ±ºæ–­åŠ›","å®Ÿè¡ŒåŠ›","ç©æ¥µæ€§","å¼·å¤§","å¨åŠ›","å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","æ¨é€²åŠ›"].includes(e))?.2:.1;case"interface-safe":return e.keywords.some(e=>["æŸ”è»Ÿæ€§","é©å¿œ","èª¿æ•´","ãƒãƒ©ãƒ³ã‚¹","åŒ…å®¹åŠ›","å—å®¹æ€§"].includes(e))?.4:e.keywords.some(e=>["æ¥µé™","éåº¦","æ¿€åŒ–"].includes(e))?-.3:.2;default:return.3}}_validateOSInput(e){try{return!!e&&(!("number"!=typeof e.hexagramId||e.hexagramId<1||e.hexagramId>64)||(console.warn("âš ï¸ Invalid hexagramId:",e.hexagramId),!1))}catch(n){return console.error("âŒ OS validation error:",n),!1}}_getDefaultAnalysisResult(e,n,t){return{version:this.version,engine_os:{id:e&&e.hexagramId||1,name:e&&e.name||"ä¹¾ç‚ºå¤©",score:e&&e.score||.5},interface_os:{id:n&&n.hexagramId||2,name:n&&n.name||"å¤ç‚ºåœ°",score:n&&n.score||.5},safe_mode_os:{id:t&&t.hexagramId||29,name:t&&t.name||"åç‚ºæ°´",score:t&&t.score||.5},synergy:[[0,0,0],[0,0,0],[0,0,0]],interactions:{engine_interface:"åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä¸€èˆ¬çš„ãªè¡¨ç¾ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚",engine_safemode:"åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä¸€èˆ¬çš„ãªè¡¨ç¾ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚",interface_safemode:"åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä¸€èˆ¬çš„ãªè¡¨ç¾ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚",triple_balance:"åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚"},strengths:["ãƒ‡ãƒ¼ã‚¿ãŒä¸å®Œå…¨ãªãŸã‚ã€è©³ç´°ãªåˆ†æãŒã§ãã¾ã›ã‚“ã§ã—ãŸ"],risks:["ãƒ‡ãƒ¼ã‚¿ãŒä¸å®Œå…¨ãªãŸã‚ã€ãƒªã‚¹ã‚¯åˆ†æãŒã§ãã¾ã›ã‚“ã§ã—ãŸ"],created_at:(new Date).toISOString()}}_initializeFallbackData(){this.interactionPatterns={},this.hexagramCharacteristics={};for(let e=1;e<=64;e++)this.hexagramCharacteristics[e]={name:`ç¬¬${e}å¦`,keywords:["å¤‰åŒ–","èª¿æ•´","ç™ºå±•"],strength:"é©å¿œåŠ›",weakness:"ä¸å®‰å®šæ€§",energy:"æµå‹•çš„"}}_manageCacheSize(e){if(e.size>this._MAX_CACHE_SIZE){const n=e.keys().next().value;e.delete(n)}}clearCache(){try{this._synergyCache?.clear(),this._interactionCache?.clear(),this._strengthsCache?.clear(),this._risksCache?.clear(),this._keywordCombinationCache?.clear(),this._hexagramCharCache?.clear(),console.log("âœ… Cache cleared successfully")}catch(e){console.error("âŒ Error clearing cache:",e)}}getCacheStatistics(){return{synergyCache:this._synergyCache?.size||0,interactionCache:this._interactionCache?.size||0,strengthsCache:this._strengthsCache?.size||0,risksCache:this._risksCache?.size||0,keywordCombinationCache:this._keywordCombinationCache?.size||0,hexagramCharCache:this._hexagramCharCache?.size||0,totalCached:(this._synergyCache?.size||0)+(this._interactionCache?.size||0)+(this._strengthsCache?.size||0)+(this._risksCache?.size||0)+(this._keywordCombinationCache?.size||0)+(this._hexagramCharCache?.size||0)}}}"undefined"!=typeof module&&module.exports?module.exports=TripleOSInteractionAnalyzer:e.TripleOSInteractionAnalyzer=TripleOSInteractionAnalyzer}("undefined"!=typeof window?window:global);