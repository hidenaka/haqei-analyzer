if("undefined"==typeof HexagramDynamicsCalculator)try{const a=require("./hexagram-dynamics-calculator.js");global.HexagramDynamicsCalculator=a}catch(e){console.error("HexagramDynamicsCalculatorのロードに失敗しました:",e)}class HexagramDynamicsInjector{constructor(){this.calculator=new HexagramDynamicsCalculator,this.hexagramTrigramMapping={},this.initializeTrigramMapping()}initializeTrigramMapping(){const a=[1,2,3,4,5,6,7,8];let n=1;for(let r of a)for(let o of a)this.hexagramTrigramMapping[n]={upper:r,lower:o},n++}addDynamicsToHexagram(a){const n=a.hexagram_id,r=this.hexagramTrigramMapping[n];if(!r)return console.warn(`⚠️ 卦${n}の三爻卦情報が見つかりません`),a;const o=this.calculator.calculateHexagramDynamics(r.upper,r.lower);return{...a,...o}}addDynamicsToAllHexagrams(a){console.log("🔬 力学データの計算開始...");const n=a.map((a,n)=>{const r=this.addDynamicsToHexagram(a);return(n+1)%10==0&&console.log(`📊 ${n+1}/64 卦の力学データ計算完了`),r});return console.log("✅ 全64卦の力学データ計算完了"),n}generateUpdatedFileContent(a){return`// hexagrams.js - 易経64卦データ定義ファイル（力学データ統合版）\n// HaQei Analyzer - Hexagrams Master Data with Dynamics\n// 64卦の基本情報 + 力学データ（自動生成）\n\nvar hexagrams_master = [\n${this.addDynamicsToAllHexagrams(a).map(a=>"  "+JSON.stringify(a,null,2).replace(/\n/g,"\n  ")).join(",\n")}\n];\n\n// グローバルスコープで利用可能にする\nif (typeof window !== 'undefined') {\n  window.hexagrams_master = hexagrams_master;\n}\n\n// Node.js環境での利用\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = hexagrams_master;\n}`}debugHexagramDynamics(a){const n=this.hexagramTrigramMapping[a],r=this.calculator.calculateHexagramDynamics(n.upper,n.lower);return console.log(`🔍 卦${a}の力学データ:`,{trigrams:n,dynamics:r}),r}}"undefined"!=typeof window&&(window.HexagramDynamicsInjector=HexagramDynamicsInjector),"undefined"!=typeof module&&module.exports&&(module.exports=HexagramDynamicsInjector),"undefined"!=typeof window&&(window.testDynamicsInjection=function(){const a=(new HexagramDynamicsInjector).addDynamicsToHexagram({hexagram_id:1,name_jp:"乾為天",reading:"けんいてん"});return console.log("🧪 テスト結果:",a),a});