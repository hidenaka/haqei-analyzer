class FutureSimulatorUIEnhancements{constructor(){this.version="1.0.0-stable",this.initialized=!1,this.animationDuration=300,this.observers=new Map,console.log("🎨 Future Simulator UI Enhancement System initializing...")}async initialize(){if(this.initialized)console.log("✅ UI Enhancement System already initialized");else try{await this.initializeBasicEnhancements(),this.initializeAnimationSystem(),this.initializeResponsiveEnhancements(),this.initializeAccessibilityEnhancements(),this.initializeUsabilityImprovements(),this.initialized=!0,console.log("✅ Future Simulator UI Enhancement System ready")}catch(e){throw console.error("❌ UI Enhancement System initialization failed:",e),e}}async initializeBasicEnhancements(){this.enhanceCardInteractions(),this.enhanceButtonAnimations(),this.enhanceFormElements(),console.log("✅ Basic UI enhancements applied")}enhanceCardInteractions(){document.querySelectorAll(".card, .scenario-card, .choice-card").forEach(e=>{e.addEventListener("mouseenter",e=>{this.animateCardHover(e.target,!0)}),e.addEventListener("mouseleave",e=>{this.animateCardHover(e.target,!1)}),e.addEventListener("click",e=>{this.animateCardClick(e.target)})})}animateCardHover(e,t){const n=t?"scale(1.02) translateY(-2px)":"scale(1) translateY(0)",i=t?"0 8px 32px rgba(99, 102, 241, 0.3)":"0 4px 16px rgba(0, 0, 0, 0.1)";e.style.transition=`transform ${this.animationDuration}ms ease, box-shadow ${this.animationDuration}ms ease`,e.style.transform=n,e.style.boxShadow=i}animateCardClick(e){e.style.transform="scale(0.98)",setTimeout(()=>{e.style.transform="scale(1.02) translateY(-2px)"},100)}enhanceButtonAnimations(){document.querySelectorAll("button, .export-button").forEach(e=>{e.addEventListener("click",e=>{this.createRippleEffect(e)}),e.addEventListener("mouseenter",e=>{this.animateButtonHover(e.target,!0)}),e.addEventListener("mouseleave",e=>{this.animateButtonHover(e.target,!1)})})}createRippleEffect(e){const t=e.currentTarget,n=t.getBoundingClientRect(),i=Math.max(n.width,n.height),a=e.clientX-n.left-i/2,s=e.clientY-n.top-i/2,o=document.createElement("span");o.style.position="absolute",o.style.width=o.style.height=i+"px",o.style.left=a+"px",o.style.top=s+"px",o.style.background="rgba(255, 255, 255, 0.3)",o.style.borderRadius="50%",o.style.transform="scale(0)",o.style.animation="ripple 600ms linear",o.style.pointerEvents="none",this.addRippleKeyframes(),"static"===getComputedStyle(t).position&&(t.style.position="relative"),t.style.overflow="hidden",t.appendChild(o),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},600)}addRippleKeyframes(){if(document.getElementById("ripple-keyframes"))return;const e=document.createElement("style");e.id="ripple-keyframes",e.textContent="\n      @keyframes ripple {\n        to {\n          transform: scale(4);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(e)}animateButtonHover(e,t){const n=t?"translateY(-1px)":"translateY(0)",i=t?"0 6px 20px rgba(99, 102, 241, 0.4)":"0 2px 8px rgba(0, 0, 0, 0.1)";e.style.transition=`transform ${this.animationDuration}ms ease, box-shadow ${this.animationDuration}ms ease`,e.style.transform=n,e.style.boxShadow=i}enhanceFormElements(){document.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("focus",e=>{this.animateInputFocus(e.target,!0)}),e.addEventListener("blur",e=>{this.animateInputFocus(e.target,!1)})})}animateInputFocus(e,t){const n=t?"#6366f1":"#374151",i=t?"0 0 0 3px rgba(99, 102, 241, 0.1)":"none";e.style.transition=`border-color ${this.animationDuration}ms ease, box-shadow ${this.animationDuration}ms ease`,e.style.borderColor=n,e.style.boxShadow=i}initializeAnimationSystem(){this.setupScrollAnimations(),this.setupStaggeredAnimations(),console.log("✅ Animation system initialized")}setupScrollAnimations(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate-fade-in-up")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".progressive-load, .card, .scenario-card").forEach(t=>{e.observe(t)}),this.observers.set("scroll",e)}setupStaggeredAnimations(){document.querySelectorAll(".grid, .scenario-grid").forEach(e=>{const t=e.children;Array.from(t).forEach((e,t)=>{e.style.animationDelay=100*t+"ms",e.classList.add("stagger-animation")})})}initializeResponsiveEnhancements(){this.setupViewportHandling(),this.setupTouchOptimizations(),console.log("✅ Responsive enhancements initialized")}setupViewportHandling(){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleViewportChange()},150)}),this.handleViewportChange()}handleViewportChange(){const e=window.innerWidth,t=e<768,n=e>=768&&e<1024;document.body.classList.toggle("mobile-layout",t),document.body.classList.toggle("tablet-layout",n),t&&this.applyMobileOptimizations()}applyMobileOptimizations(){document.querySelectorAll(".card, .scenario-card, .choice-card").forEach(e=>{e.style.margin="0.5rem 0"});document.querySelectorAll("button").forEach(e=>{e.style.minHeight="44px"})}setupTouchOptimizations(){"ontouchstart"in window&&(document.body.classList.add("touch-device"),document.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!0}),document.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!0}))}handleTouchStart(e){const t=e.target.closest(".card, button");t&&t.classList.add("touch-active")}handleTouchEnd(e){setTimeout(()=>{document.querySelectorAll(".touch-active").forEach(e=>{e.classList.remove("touch-active")})},150)}initializeAccessibilityEnhancements(){this.setupFocusManagement(),this.setupARIAEnhancements(),this.setupKeyboardNavigation(),console.log("✅ Accessibility enhancements initialized")}setupFocusManagement(){document.querySelectorAll('button, input, textarea, select, a[href], [tabindex]:not([tabindex="-1"])').forEach(e=>{e.addEventListener("focus",e=>{e.target.classList.add("focus-visible")}),e.addEventListener("blur",e=>{e.target.classList.remove("focus-visible")})})}setupARIAEnhancements(){const e=document.getElementById("resultArea");e&&(e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"));document.querySelectorAll(".card, .scenario-card, .choice-card").forEach((e,t)=>{e.getAttribute("role")||(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.setAttribute("aria-describedby",`card-description-${t}`))})}setupKeyboardNavigation(){document.addEventListener("keydown",e=>{"Escape"===e.key&&this.closeModals(),"Enter"===e.key&&e.target.classList.contains("card")&&e.target.click()})}closeModals(){document.querySelectorAll(".modal, .overlay").forEach(e=>{"none"!==e.style.display&&(e.style.display="none")})}initializeUsabilityImprovements(){this.setupLoadingStateImprovements(),this.setupErrorStateImprovements(),this.setupProgressIndicators(),console.log("✅ Usability improvements initialized")}setupLoadingStateImprovements(){const e=document.getElementById("aiGuessBtn");if(e){const t=e.onclick;e.onclick=n=>{this.setButtonLoadingState(e,!0),t&&t.call(e,n),setTimeout(()=>{this.setButtonLoadingState(e,!1)},3e3)}}}setButtonLoadingState(e,t){if(t){e.disabled=!0,e.classList.add("loading");const t=e.textContent;e.dataset.originalText=t,e.innerHTML='\n        <span class="loading-spinner"></span>\n        分析中...\n      '}else e.disabled=!1,e.classList.remove("loading"),e.textContent=e.dataset.originalText||"未来を分析"}setupErrorStateImprovements(){window.addEventListener("error",e=>{this.showUserFriendlyError(e.error)}),window.addEventListener("unhandledrejection",e=>{this.showUserFriendlyError(e.reason)})}showUserFriendlyError(e){console.error("UI Enhancement System caught error:",e);let t=document.getElementById("ui-error-container");t||(t=document.createElement("div"),t.id="ui-error-container",t.className="fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm",t.style.display="none",document.body.appendChild(t)),t.innerHTML='\n      <div class="flex items-start">\n        <div class="flex-shrink-0">\n          <svg class="h-5 w-5 text-red-300" fill="currentColor" viewBox="0 0 20 20">\n            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>\n          </svg>\n        </div>\n        <div class="ml-3">\n          <p class="text-sm font-medium">エラーが発生しました</p>\n          <p class="text-sm opacity-90">しばらく経ってから再試行してください</p>\n        </div>\n        <button class="ml-auto flex-shrink-0 rounded-md p-1.5 hover:bg-red-600 focus:outline-none" onclick="this.parentElement.parentElement.style.display=\'none\'">\n          <span class="sr-only">閉じる</span>\n          <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">\n            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>\n          </svg>\n        </button>\n      </div>\n    ',t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3)}setupProgressIndicators(){document.querySelectorAll(".progress-bar, .progress-fill").forEach(e=>{e.style.transition="width 0.3s ease-in-out"})}cleanup(){this.observers.forEach(e=>{e.disconnect()}),this.observers.clear(),console.log("✅ UI Enhancement System cleanup completed")}}const uiEnhancementStyles="\n  /* UI Enhancement System Styles */\n  .animate-fade-in-up {\n    animation: fadeInUp 0.6s ease-out forwards;\n  }\n  \n  .stagger-animation {\n    opacity: 0;\n    transform: translateY(20px);\n    animation: fadeInUp 0.6s ease-out forwards;\n  }\n  \n  .focus-visible {\n    outline: 2px solid #6366f1 !important;\n    outline-offset: 2px;\n  }\n  \n  .loading-spinner {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    border: 2px solid #ffffff;\n    border-radius: 50%;\n    border-top-color: transparent;\n    animation: spin 1s linear infinite;\n    margin-right: 8px;\n  }\n  \n  .touch-active {\n    transform: scale(0.98);\n    opacity: 0.8;\n  }\n  \n  .mobile-layout .card,\n  .mobile-layout .scenario-card,\n  .mobile-layout .choice-card {\n    margin: 0.5rem 0 !important;\n  }\n  \n  .tablet-layout {\n    font-size: 16px;\n  }\n  \n  /* Accessibility improvements */\n  @media (prefers-reduced-motion: reduce) {\n    .animate-fade-in-up,\n    .stagger-animation,\n    .loading-spinner {\n      animation: none !important;\n      transition: none !important;\n    }\n  }\n  \n  /* High contrast mode support */\n  @media (prefers-contrast: high) {\n    .card,\n    .scenario-card,\n    .choice-card {\n      border-width: 2px !important;\n    }\n  }\n";function addUIEnhancementStyles(){if(document.getElementById("ui-enhancement-styles"))return;const e=document.createElement("style");e.id="ui-enhancement-styles",e.textContent=uiEnhancementStyles,document.head.appendChild(e)}document.addEventListener("DOMContentLoaded",async()=>{try{addUIEnhancementStyles();const e=new FutureSimulatorUIEnhancements;await e.initialize(),window.FutureSimulatorUIEnhancements=e}catch(e){console.error("❌ Failed to initialize UI Enhancement System:",e)}}),"undefined"!=typeof module&&module.exports&&(module.exports=FutureSimulatorUIEnhancements);