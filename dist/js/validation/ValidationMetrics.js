class ValidationMetrics{constructor(){this.sessionId=this.generateSessionId(),this.startTime=Date.now(),this.events=[],this.currentMetrics={scenarioSelected:null,usefulnessRating:null,decisionTimeSec:null,fallbackLevel:"full"},console.log("ğŸ“Š ValidationMetrics initialized - Session:",this.sessionId)}generateSessionId(){return`VAL-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}trackScenarioSelection(e,t=null){const s=t||Math.round((Date.now()-this.startTime)/1e3);this.currentMetrics.scenarioSelected=e,this.currentMetrics.decisionTimeSec=s,this.addEvent("scenario_selected",{scenarioId:e,decisionTimeSec:s,timestamp:Date.now()}),console.log("ğŸ¯ ã‚·ãƒŠãƒªã‚ªé¸æŠè¨˜éŒ²:",e,"æ±ºå®šæ™‚é–“:",s+"ç§’")}trackUsefulnessRating(e,t=""){e<1||e>5?console.error("âš ï¸ æœ‰ç”¨åº¦è©•ä¾¡ã¯1-5ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ãã ã•ã„:",e):(this.currentMetrics.usefulnessRating=e,this.addEvent("usefulness_rated",{rating:e,reason:t,timestamp:Date.now()}),console.log("â­ æœ‰ç”¨åº¦è©•ä¾¡è¨˜éŒ²:",e+"/5",t?`ç†ç”±: ${t}`:""))}trackDecisionTime(e){this.currentMetrics.decisionTimeSec=e,this.addEvent("decision_time_measured",{seconds:e,timestamp:Date.now()}),console.log("â±ï¸ æ±ºå®šæ™‚é–“è¨˜éŒ²:",e+"ç§’")}trackFallbackLevel(e){const t=["full","partial","minimal","emergency"];t.includes(e)?(this.currentMetrics.fallbackLevel=e,this.addEvent("fallback_level_set",{level:e,timestamp:Date.now()}),console.log("ğŸ”„ Fallbackãƒ¬ãƒ™ãƒ«è¨˜éŒ²:",e)):console.error("âš ï¸ ç„¡åŠ¹ãªfallbackãƒ¬ãƒ™ãƒ«:",e,"æœ‰åŠ¹å€¤:",t)}addEvent(e,t){this.events.push({eventType:e,data:t,sessionId:this.sessionId,timestamp:Date.now()})}saveMetrics(){const e={sessionId:this.sessionId,startTime:this.startTime,endTime:Date.now(),currentMetrics:this.currentMetrics,events:this.events,savedAt:(new Date).toISOString()};try{const t=`validation_metrics_${this.sessionId}`;return localStorage.setItem(t,JSON.stringify(e)),this.updateMetricsIndex(),console.log("ğŸ’¾ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜å®Œäº†:",t),!0}catch(t){return console.error("âŒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜å¤±æ•—:",t),!1}}saveSession(e){const t=`validation_session_${e.sessionId||this.sessionId}`;try{return localStorage.setItem(t,JSON.stringify(e)),console.log("ğŸ’¾ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜å®Œäº†:",t),!0}catch(s){return console.error("âŒ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜å¤±æ•—:",s),!1}}loadSession(e){const t=`validation_session_${e}`;try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(s){return console.error("âŒ ã‚»ãƒƒã‚·ãƒ§ãƒ³èª­ã¿è¾¼ã¿å¤±æ•—:",s),null}}updateMetricsIndex(){const e="validation_metrics_index";let t=[];try{const s=localStorage.getItem(e);t=s?JSON.parse(s):[]}catch(s){console.warn("æ—¢å­˜ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹èª­ã¿è¾¼ã¿å¤±æ•—ã€æ–°è¦ä½œæˆã—ã¾ã™"),t=[]}t.find(e=>e.sessionId===this.sessionId)||(t.push({sessionId:this.sessionId,startTime:this.startTime,lastSaved:Date.now(),scenario:this.currentMetrics.scenarioSelected,rating:this.currentMetrics.usefulnessRating}),localStorage.setItem(e,JSON.stringify(t)))}static getAllSessions(){try{const e=localStorage.getItem("validation_metrics_index");return e?JSON.parse(e):[]}catch(e){return console.error("âŒ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§å–å¾—å¤±æ•—:",e),[]}}exportData(){return{sessionInfo:{sessionId:this.sessionId,startTime:this.startTime,endTime:Date.now(),duration:Math.round((Date.now()-this.startTime)/1e3)},metrics:this.currentMetrics,events:this.events,summary:{totalEvents:this.events.length,hasScenarioSelection:!!this.currentMetrics.scenarioSelected,hasRating:!!this.currentMetrics.usefulnessRating,fallbackLevel:this.currentMetrics.fallbackLevel}}}getSystemInfo(){return{version:"1.0.0",sessionId:this.sessionId,eventsCount:this.events.length,startTime:new Date(this.startTime).toISOString(),currentMetrics:this.currentMetrics}}}"undefined"!=typeof window&&(window.ValidationMetrics=ValidationMetrics,console.log("ğŸ“Š ValidationMetrics registered to window object")),"undefined"!=typeof module&&module.exports&&(module.exports=ValidationMetrics),console.log("ğŸ“Š ValidationMetrics.js loaded successfully - 7æ—¥é–“ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ãƒ—ãƒªãƒ³ãƒˆç”¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã‚·ã‚¹ãƒ†ãƒ ");