console.log("🎭 VirtualPersonaDialogue Loading..."),function(){"use strict";class VirtualPersonaDialogue{constructor(){this.name="VirtualPersonaDialogue",this.version="1.0.0",this.philosophy="haqei-persona-dialogue",this.dialogueScenarios=this.initializeDialogueScenarios(),this.personaVoices=this.initializePersonaVoices(),this.dialogueConfig={minStrengthForDialogue:10,maxMessagesPerPersona:3,strengthInfluenceWeight:.7},this.isInitialized=!1}async initialize(){console.log("🔧 VirtualPersonaDialogue initializing...");try{return await this.validateScenarios(),await this.setupPersonaVoices(),await this.integrateHaQeiPhilosophy(),this.isInitialized=!0,console.log("✅ VirtualPersonaDialogue initialized successfully"),!0}catch(e){return console.error("❌ VirtualPersonaDialogue initialization failed:",e),this.initializeSafeMode()}}initializeDialogueScenarios(){return{decision:{situation:"重要な決断を迫られた時",context:"人生の分岐点、新しいチャレンジ、リスクを伴う選択",description:"あなたの心の中で3つの仮想人格が対話している様子を想像してみてください",engineOS:["新しいチャンスだ！挑戦してみよう！","これまでにない可能性を探ってみませんか？","革新的なアプローチで行きましょう！","未知の領域に飛び込むときこそ成長できる！","創造的な解決策を見つけ出しましょう！"],interfaceOS:["周りの人への影響も考えてみませんか？","チームのみんなと相談してから決めましょう","協力してもらえる人がいるか確認しませんか？","みんなが納得できる方向性を探しましょう","調和を保ちながら進める方法がありませんか？"],safeModeOS:["慎重に...リスクを十分検討しましょう","過去の経験から学んで判断しませんか？","安全な道筋を確保してから進みましょう","worst caseシナリオも考慮すべきです","段階的に進めて様子を見ませんか？"]},challenge:{situation:"困難な問題に直面した時",context:"想定外の問題、解決困難な課題、行き詰まり状況",description:"困難な状況で現れるあなたの内なる声たち",engineOS:["クリエイティブな解決策を探してみよう","この困難を成長のチャンスに変えましょう！","今までとは違う角度から考えてみませんか？","逆転の発想で新しい道を見つけましょう！","困難こそ革新の母です！"],interfaceOS:["チームで協力すれば乗り越えられる","経験豊富な人に相談してみましょう","みんなの知恵を集めて解決策を見つけましょう","お互いを支えながら進みませんか？","協力体制を築いて立ち向かいましょう"],safeModeOS:["まず現状を冷静に分析することが大切","リスクを最小限に抑える方法を考えましょう","着実に一歩ずつ解決していきましょう","根本原因を特定してから対処しませんか？","確実な方法で安全に進めましょう"]},creation:{situation:"新しいものを創り出す時",context:"企画立案、作品制作、アイデア発想",description:"創造活動における内なる対話",engineOS:["誰も思いつかないようなアイデアを！","既存の枠を超えた発想で行きましょう","革命的な何かを生み出してみませんか？","常識を覆すような作品を作りましょう！","世界を変えるアイデアが生まれるかも！"],interfaceOS:["みんなが喜ぶものを作りましょう","協力して素晴らしいものを作り上げましょう","人々の心に響くものを目指しませんか？","共感を呼ぶ作品にしていきましょう","みんなで作り上げる喜びを大切に"],safeModeOS:["実現可能性をしっかり検証しましょう","段階的に形にしていきませんか？","リスクを考慮した計画を立てましょう","技術的制約も考慮する必要があります","確実に形にできる範囲で進めましょう"]},relationship:{situation:"人間関係で悩んでいる時",context:"対人関係の困難、コミュニケーション問題",description:"人とのつながりについて考えている時の内なる声",engineOS:["新しい関係性を築く機会かもしれません","これまでとは違うアプローチを試してみましょう","相手の意外な一面を発見できるチャンス！","クリエイティブな解決策で関係改善を","新しい自分を見せてみませんか？"],interfaceOS:["相手の気持ちに寄り添ってみましょう","お互いの理解を深めることが大切です","協力して解決策を見つけませんか？","対話を通じて歩み寄りましょう","みんなが幸せになる方法を考えましょう"],safeModeOS:["相手との距離感を慎重に調整しましょう","感情的にならずに冷静に対処しませんか？","安全な関係性を維持することも大切です","無理をせず自分のペースで進みましょう","トラブルを避ける方法を考えてみませんか？"]}}}initializePersonaVoices(){return{engine:{name:"創造の探検家",symbol:"🚀",tone:"エネルギッシュで前向き",keywords:["チャンス","革新","可能性","挑戦","創造","アイデア","革命"],speechPattern:"！で終わる文が多い、提案形、エネルギッシュ",colors:{primary:"#6366f1",secondary:"#8b5cf6",background:"rgba(99, 102, 241, 0.1)"},emojis:["🚀","✨","💡","⚡","🌟","🎯","🔥"]},interface:{name:"調和の橋渡し",symbol:"🤝",tone:"協調的で思いやりがある",keywords:["みんな","協力","チーム","相談","調和","共感","支援"],speechPattern:"「〜しませんか？」の提案形が多い、包容力のある表現",colors:{primary:"#8b5cf6",secondary:"#a855f7",background:"rgba(139, 92, 246, 0.1)"},emojis:["🤝","💫","🌸","🎈","🎊","💕","🌻"]},safemode:{name:"慎重な守護者",symbol:"🛡️",tone:"慎重で冷静",keywords:["慎重","安全","リスク","計画","検証","分析","確実"],speechPattern:"「〜しましょう」の確実な提案、冷静な分析",colors:{primary:"#10b981",secondary:"#059669",background:"rgba(16, 185, 129, 0.1)"},emojis:["🛡️","🔍","📋","⚖️","🎯","🔒","⚓"]}}}generateDialogue(e,i="decision"){if(!this.isInitialized)return console.warn("⚠️ VirtualPersonaDialogue not initialized"),this.getDefaultDialogue();const t=this.dialogueScenarios[i];if(!t)return console.warn(`⚠️ Unknown scenario type: ${i}`),this.getDefaultDialogue();try{return{scenario:{type:i,situation:t.situation,context:t.context,description:t.description},participants:[this.generatePersonaDialogue("engine",e.engine,t.engineOS),this.generatePersonaDialogue("interface",e.interface,t.interfaceOS),this.generatePersonaDialogue("safemode",e.safemode,t.safeModeOS)],metadata:{timestamp:(new Date).toISOString(),philosophy:"haqei-persona-dialogue",version:this.version}}}catch(a){return console.error("❌ Dialogue generation failed:",a),this.getDefaultDialogue()}}generatePersonaDialogue(e,i,t){const a=this.personaVoices[e],n=this.extractStrength(i),o=this.selectMessageByStrength(t,n),s=this.adjustMessageIntensity(o,n,a);return{persona:{type:e,name:a.name,symbol:a.symbol,colors:a.colors},message:s,strength:n,reliability:this.calculateMessageReliability(n),metadata:{originalMessage:o,tone:a.tone,speechPattern:a.speechPattern}}}extractStrength(e){return e&&void 0!==e.percentage?Math.round(e.percentage):e&&void 0!==e.strength?Math.round(e.strength):50}selectMessageByStrength(e,i){return i>=80?e[0]:i>=60?e[Math.min(1,e.length-1)]:i>=40?e[Math.min(2,e.length-1)]:i>=20?e[Math.min(3,e.length-1)]:e[e.length-1]}adjustMessageIntensity(e,i,t){return i>=70?this.enhanceMessage(e,t):i<=30?this.softtenMessage(e,t):e}enhanceMessage(e,i){const t={engine:["ぜひ","きっと","絶対に","必ず"],interface:["みんなで","一緒に","協力して","心を込めて"],safemode:["しっかりと","確実に","慎重に","念入りに"]}[i.name.includes("創造")?"engine":i.name.includes("調和")?"interface":"safemode"];return`${t[Math.floor(Math.random()*t.length)]}${e}`}softtenMessage(e,i){const t={engine:["もしかすると","ひょっとすると","たぶん"],interface:["もしよろしければ","可能であれば","お時間があるときに"],safemode:["念のため","一応","参考までに"]}[i.name.includes("創造")?"engine":i.name.includes("調和")?"interface":"safemode"];return`${t[Math.floor(Math.random()*t.length)]}、${e}`}calculateMessageReliability(e){return e>=60?"high":e>=40?"medium":"low"}async integrateHaQeiPhilosophy(){this.philosophicalFramework={wisdom:"3つの仮想人格の調和による智慧",balance:"Engine・Interface・SafeModeのバランス",creativity:"対話を通じた創造的自己理解",authenticity:"易経メタファーによる真正な表現"}}getDefaultDialogue(){return{scenario:{type:"default",situation:"システム初期状態",context:"デフォルト対話",description:"基本的な3つの仮想人格の紹介"},participants:[{persona:{type:"engine",name:"創造の探検家",symbol:"🚀"},message:"新しい可能性を探求しましょう！",strength:50,reliability:"medium"},{persona:{type:"interface",name:"調和の橋渡し",symbol:"🤝"},message:"協力して素晴らしいものを作りましょう",strength:50,reliability:"medium"},{persona:{type:"safemode",name:"慎重な守護者",symbol:"🛡️"},message:"慎重に計画を立てて進めましょう",strength:50,reliability:"medium"}]}}async validateScenarios(){const e=Object.keys(this.dialogueScenarios);return console.log(`📋 Validating ${e.length} dialogue scenarios...`),!0}async setupPersonaVoices(){const e=Object.keys(this.personaVoices);return console.log(`🎭 Setting up ${e.length} persona voices...`),!0}initializeSafeMode(){return console.log("⚠️ Initializing safe mode..."),this.isInitialized=!0,!0}getAvailableScenarios(){return Object.keys(this.dialogueScenarios).map(e=>({type:e,situation:this.dialogueScenarios[e].situation,context:this.dialogueScenarios[e].context}))}}"undefined"!=typeof window&&(window.VirtualPersonaDialogue=VirtualPersonaDialogue),"undefined"!=typeof module&&module.exports&&(module.exports=VirtualPersonaDialogue),console.log("✅ VirtualPersonaDialogue loaded successfully with HaQei Philosophy")}("undefined"!=typeof window?window:global);