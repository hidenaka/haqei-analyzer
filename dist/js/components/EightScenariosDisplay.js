console.log("üéØ EightScenariosDisplay Loading..."),function(){"use strict";class EightScenariosDisplay{constructor(){this.name="EightScenariosDisplay",this.version="2.0.0",this.container=null,this.scenarios=[],this.selectedScenario=null,this.threeStageProcess=null}initialize(n){return window.futureAnalysisCompleted?(console.log("üîÑ EightScenariosDisplay initializing..."),this.container=document.getElementById(n),this.container?(this.setupStyles(),console.log("‚úÖ EightScenariosDisplay initialized"),!0):(console.error(`‚ùå Container not found: ${n}`),!1)):(console.log("‚è≥ EightScenariosDisplay waiting for analysis completion"),!1)}setupStyles(){if(!document.getElementById("eight-scenarios-styles")){const n=document.createElement("style");n.id="eight-scenarios-styles",n.textContent="\n          .eight-scenarios-container {\n            padding: 2rem;\n            background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(31, 41, 55, 0.95));\n            border-radius: 16px;\n            border: 1px solid rgba(99, 102, 241, 0.2);\n          }\n          \n          .scenario-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n            gap: 1.5rem;\n            margin-top: 2rem;\n          }\n          \n          .scenario-card {\n            background: rgba(30, 41, 59, 0.8);\n            border: 2px solid rgba(99, 102, 241, 0.3);\n            border-radius: 12px;\n            padding: 1.5rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            position: relative;\n            overflow: hidden;\n          }\n          \n          .scenario-card:hover {\n            transform: translateY(-4px);\n            box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);\n            border-color: rgba(99, 102, 241, 0.6);\n          }\n          \n          .scenario-card.selected {\n            background: rgba(99, 102, 241, 0.2);\n            border-color: #6366F1;\n            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);\n          }\n          \n          .scenario-rank {\n            position: absolute;\n            top: 0.75rem;\n            right: 0.75rem;\n            background: linear-gradient(135deg, #10B981, #059669);\n            color: white;\n            padding: 0.25rem 0.75rem;\n            border-radius: 20px;\n            font-size: 0.875rem;\n            font-weight: bold;\n          }\n          \n          .scenario-title {\n            font-size: 1.125rem;\n            font-weight: bold;\n            color: #A5B4FC;\n            margin-bottom: 0.75rem;\n          }\n          \n          .scenario-path {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            margin: 1rem 0;\n            padding: 0.75rem;\n            background: rgba(17, 24, 39, 0.5);\n            border-radius: 8px;\n          }\n          \n          .path-stage {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            flex: 1;\n          }\n          \n          .path-arrow {\n            color: #6366F1;\n            font-size: 1.25rem;\n          }\n          \n          .stage-label {\n            font-size: 0.75rem;\n            color: #9CA3AF;\n            margin-bottom: 0.25rem;\n          }\n          \n          .stage-choice {\n            padding: 0.25rem 0.5rem;\n            border-radius: 6px;\n            font-size: 0.875rem;\n            font-weight: 500;\n            text-align: center;\n          }\n          \n          .choice-conservative { background: rgba(59, 130, 246, 0.2); color: #60A5FA; }\n          .choice-progressive { background: rgba(16, 185, 129, 0.2); color: #10B981; }\n          .choice-collaborative { background: rgba(245, 158, 11, 0.2); color: #F59E0B; }\n          .choice-independent { background: rgba(139, 92, 246, 0.2); color: #8B5CF6; }\n          .choice-cautious { background: rgba(239, 68, 68, 0.2); color: #EF4444; }\n          .choice-decisive { background: rgba(6, 182, 212, 0.2); color: #06B6D4; }\n          \n          .scenario-probability {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            margin: 0.75rem 0;\n          }\n          \n          .probability-bar {\n            flex: 1;\n            height: 8px;\n            background: rgba(55, 65, 81, 0.5);\n            border-radius: 4px;\n            overflow: hidden;\n          }\n          \n          .probability-fill {\n            height: 100%;\n            background: linear-gradient(90deg, #3B82F6, #6366F1);\n            border-radius: 4px;\n            transition: width 0.3s ease;\n          }\n          \n          .probability-text {\n            font-size: 0.875rem;\n            font-weight: bold;\n            color: #A5B4FC;\n            min-width: 45px;\n            text-align: right;\n          }\n          \n          .scenario-description {\n            color: #D1D5DB;\n            font-size: 0.875rem;\n            line-height: 1.5;\n            margin: 0.75rem 0;\n          }\n          \n          .scenario-characteristics {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 0.5rem;\n            margin: 0.75rem 0;\n          }\n          \n          .characteristic-tag {\n            padding: 0.25rem 0.5rem;\n            background: rgba(99, 102, 241, 0.1);\n            border: 1px solid rgba(99, 102, 241, 0.3);\n            border-radius: 6px;\n            font-size: 0.75rem;\n            color: #C7D2FE;\n          }\n          \n          .scenario-iching {\n            margin-top: 1rem;\n            padding: 0.75rem;\n            background: rgba(165, 180, 252, 0.1);\n            border-left: 3px solid #6366F1;\n            border-radius: 4px;\n          }\n          \n          .iching-hexagram {\n            font-weight: bold;\n            color: #FDE047;\n            margin-bottom: 0.25rem;\n          }\n          \n          .iching-meaning {\n            font-size: 0.875rem;\n            color: #E5E7EB;\n            font-style: italic;\n          }\n          \n          .three-stage-header {\n            text-align: center;\n            margin-bottom: 2rem;\n          }\n          \n          .three-stage-title {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #A5B4FC;\n            margin-bottom: 0.5rem;\n          }\n          \n          .three-stage-subtitle {\n            color: #9CA3AF;\n            font-size: 1rem;\n          }\n          \n          .stage-selector {\n            display: flex;\n            justify-content: center;\n            gap: 2rem;\n            margin: 2rem 0;\n            padding: 1rem;\n            background: rgba(17, 24, 39, 0.5);\n            border-radius: 12px;\n          }\n          \n          .stage-option {\n            padding: 1rem 1.5rem;\n            background: rgba(55, 65, 81, 0.5);\n            border: 2px solid transparent;\n            border-radius: 8px;\n            cursor: pointer;\n            transition: all 0.3s ease;\n          }\n          \n          .stage-option:hover {\n            background: rgba(99, 102, 241, 0.2);\n            border-color: rgba(99, 102, 241, 0.5);\n          }\n          \n          .stage-option.selected {\n            background: rgba(99, 102, 241, 0.3);\n            border-color: #6366F1;\n          }\n          \n          .option-title {\n            font-weight: bold;\n            color: #E5E7EB;\n            margin-bottom: 0.25rem;\n          }\n          \n          .option-description {\n            font-size: 0.875rem;\n            color: #9CA3AF;\n          }\n        ",document.head.appendChild(n)}}displayScenarios(n,e){if(!this.container)return;this.applyScenariosColors(n),this.scenarios=n,this.threeStageProcess=e,this.container.innerHTML="";const a=document.createElement("div");a.className="eight-scenarios-container",a.appendChild(this.createHeader()),a.appendChild(this.createStageSelector()),a.appendChild(this.createScenarioGrid(n)),this.container.appendChild(a)}createHeader(){const n=document.createElement("div");return n.className="three-stage-header",n.innerHTML='\n        <h2 class="three-stage-title">üéØ 8„Å§„ÅÆÊú™Êù•„Ç∑„Éä„É™„Ç™</h2>\n        <p class="three-stage-subtitle">3ÊÆµÈöé„ÅÆÈÅ∏Êäû„Å´„Çà„ÇãÂèØËÉΩÊÄß„ÅÆÂÖ®‰ΩìÂÉè</p>\n      ',n}createStageSelector(){const n=document.createElement("div");return n.className="stage-selector",this.threeStageProcess&&this.threeStageProcess.stages&&this.threeStageProcess.stages.forEach((e,a)=>{const t=document.createElement("div");t.innerHTML=`\n            <h3 style="color: #A5B4FC; margin-bottom: 1rem;">${e.title}</h3>\n            <div style="display: flex; gap: 1rem;">\n              ${e.choices.map(n=>`\n                <div class="stage-option" data-stage="${a}" data-choice="${n.id}">\n                  <div class="option-title">${n.name}</div>\n                  <div class="option-description">${n.description}</div>\n                  <div style="margin-top: 0.5rem; font-size: 0.75rem; color: #10B981;">\n                    ÈÅ©ÂêàÂ∫¶: ${n.compatibility}%\n                  </div>\n                </div>\n              `).join("")}\n            </div>\n          `,n.appendChild(t)}),n.addEventListener("click",n=>{const e=n.target.closest(".stage-option");e&&this.handleStageSelection(e)}),n}createScenarioGrid(n){const e=document.createElement("div");return e.className="scenario-grid",n.forEach((n,a)=>{const t=this.createScenarioCard(n,a);e.appendChild(t)}),e}createScenarioCard(n,e){const a=document.createElement("div");a.className="scenario-card",a.dataset.scenarioId=n.id;const t=this.getScenarioVisualization(n),r=this.calculateThreePhases(n),i=this.calculateScoreProgression(n,r);a.style.borderLeft=`4px solid ${t.color}`,a.style.setProperty("--scenario-color",t.color);this.getRankClass(n.probability);const s=n.probability>70?"S":n.probability>60?"A":n.probability>50?"B":n.probability>40?"C":"D";return a.innerHTML=`\n        <div class="scenario-rank" style="${this.getRankStyle(n.probability)}">\n          ${s}„É©„É≥„ÇØ\n        </div>\n        \n        \x3c!-- „Éò„ÉÉ„ÉÄ„ÉºÔºöÂç¶Â§âÂåñË°®Á§∫ --\x3e\n        <div class="hexagram-transformation">\n          <span class="current-hexagram">\n            ${n.hexagramInfo?.name||"ÁèæÂú®Âç¶"} ${n.hexagramInfo?.line||""}\n          </span>\n          <span class="transform-arrow">‚Üí</span>\n          <span class="target-hexagram">\n            ${n.targetHexagram?.name||"Â§âÂåñÂç¶"} ${n.targetHexagram?.line||""}\n          </span>\n        </div>\n        \n        <h3 class="scenario-title" style="color: ${t.color}">\n          <span class="scenario-icon-set">\n            <span class="traditional-icon">${t.traditional}</span>\n            <span class="modern-emoji">${t.modern}</span>\n          </span>\n          „Ç∑„Éä„É™„Ç™ ${n.id}: ${n.title||n.description||"Áµ±ÂêàÁöÑÂ§âÂåñ"}\n        </h3>\n        \n        \x3c!-- 3ÊÆµÈöéÂ§âÂåñ„Éó„É≠„Çª„Çπ --\x3e\n        <div class="three-phase-container">\n          <h4>‚òØ 3ÊÆµÈöéÂ§âÂåñ„Éó„É≠„Çª„Çπ</h4>\n          \n          \x3c!-- „Éï„Çß„Éº„Ç∫1ÔºöÂãïÁàªÊúü --\x3e\n          <div class="phase-block phase-1">\n            <div class="phase-header">\n              <span class="phase-icon">‚ö°</span>\n              <span class="phase-name">ÂãïÁàªÊúü</span>\n            </div>\n            <div class="phase-content">\n              <div class="score-indicator">\n                Âü∫Á§é„Çπ„Ç≥„Ç¢: ${i.current} ‚Üí ${i.phase1}\n                <span class="${i.phase1>i.current?"positive":"negative"}">\n                  (${i.phase1>i.current?"+":""}${i.phase1-i.current})\n                </span>\n              </div>\n              <div class="phase-description">${r.phase1.description}</div>\n            </div>\n          </div>\n          \n          \x3c!-- „Éï„Çß„Éº„Ç∫2ÔºöËª¢ÁàªÊúü --\x3e\n          <div class="phase-block phase-2">\n            <div class="phase-header">\n              <span class="phase-icon">üîÑ</span>\n              <span class="phase-name">Ëª¢ÁàªÊúü</span>\n            </div>\n            <div class="phase-content">\n              <div class="score-indicator">\n                Âü∫Á§é„Çπ„Ç≥„Ç¢: ${i.phase1} ‚Üí ${i.phase2}\n                <span class="${i.phase2>i.phase1?"positive":"negative"}">\n                  (${i.phase2>i.phase1?"+":""}${i.phase2-i.phase1})\n                </span>\n              </div>\n              <div class="phase-description">${r.phase2.description}</div>\n            </div>\n          </div>\n          \n          \x3c!-- „Éï„Çß„Éº„Ç∫3ÔºöÊàêÁàªÊúü --\x3e\n          <div class="phase-block phase-3">\n            <div class="phase-header">\n              <span class="phase-icon">üéØ</span>\n              <span class="phase-name">ÊàêÁàªÊúü</span>\n            </div>\n            <div class="phase-content">\n              <div class="score-indicator final-score">\n                ÊúÄÁµÇ„Çπ„Ç≥„Ç¢: ${i.phase3}ÁÇπ\n                <span class="${i.phase3>i.current?"positive":"negative"}">\n                  (ÂêàË®à${i.phase3>i.current?"+":""}${i.phase3-i.current})\n                </span>\n              </div>\n              <div class="phase-description">${r.phase3.description}</div>\n            </div>\n          </div>\n        </div>\n        \n        \x3c!-- ÂÆüÁèæÂèØËÉΩÊÄß --\x3e\n        <div class="scenario-probability">\n          <div class="probability-bar">\n            <div class="probability-fill" style="width: ${100*n.probability}%"></div>\n          </div>\n          <span class="probability-text">ÂÆüÁèæÂèØËÉΩÊÄß: ${(100*n.probability).toFixed(1)}%</span>\n        </div>\n        \n        \x3c!-- ÊòìÁµå„ÅÆÊô∫ÊÖß --\x3e\n        <div class="scenario-iching">\n          <div class="iching-hexagram">\n            ‚òØ ${n.iChingReference?.hexagram||""}\n          </div>\n          <div class="iching-meaning">\n            „Äå${n.iChingReference?.meaning||r.wisdom||""}„Äç\n          </div>\n        </div>\n      `,a.addEventListener("click",()=>{this.selectScenario(n)}),a}createPathVisualization(n){const e=["Á¨¨‰∏ÄÊÆµÈöé","Á¨¨‰∫åÊÆµÈöé","Á¨¨‰∏âÊÆµÈöé"],a={conservative:"‰øùÂÆàÁöÑ",progressive:"ÈÄ≤Ê≠©ÁöÑ",collaborative:"ÂçîË™øÁöÑ",independent:"Áã¨Á´ãÁöÑ",cautious:"ÊÖéÈáç",decisive:"Ê±∫Êñ≠ÁöÑ"};return n.map((t,r)=>`\n        <div class="path-stage">\n          <div class="stage-label">${e[r]}</div>\n          <div class="stage-choice choice-${t}">\n            ${a[t]}\n          </div>\n        </div>\n        ${r<n.length-1?'<span class="path-arrow">‚Üí</span>':""}\n      `).join("")}getRankStyle(n){return n>70?"background: linear-gradient(135deg, #FDE047, #F59E0B);":n>60?"background: linear-gradient(135deg, #10B981, #059669);":n>50?"background: linear-gradient(135deg, #3B82F6, #2563EB);":n>40?"background: linear-gradient(135deg, #F59E0B, #DC2626);":"background: linear-gradient(135deg, #6B7280, #4B5563);"}applyScenariosColors(n){window.haqeiColorSystem&&window.haqeiColorSystem.applyScenariosColorsToDom&&(window.haqeiColorSystem.applyScenariosColorsToDom(n),console.log("üé® „Ç∑„Éä„É™„Ç™Ëâ≤„ÇíCSSÂ§âÊï∞„Å´ÈÅ©Áî®ÂÆå‰∫Ü"))}getScenarioVisualization(n){if(window.haqeiColorSystem){return window.haqeiColorSystem.getScenarioVisualization(n)}return{color:"#757575",lightColor:"#f5f5f5",darkColor:"#424242",traditional:"‚òØ",modern:"üéØ",trigramName:"‰∏ÄËà¨",trigramKey:"default",gradient:"linear-gradient(135deg, #757575, #424242)",cssClass:"trigram-default"}}calculateThreePhases(n){const e=n.hexagramInfo?.lineNumber||7;n.targetHexagram;return{phase1:{description:this.getPhase1Description(n),yaoBefore:n.hexagramInfo?.line||"ÂàùÁàª",yaoAfter:this.calculateNextYao(n.hexagramInfo?.line),timeframe:"1-3„É∂Êúà"},phase2:{description:this.getPhase2Description(n),heavenBalance:Math.round(30+40*Math.random()),humanBalance:Math.round(30+40*Math.random()),earthBalance:Math.round(30+40*Math.random()),timeframe:"3-6„É∂Êúà"},phase3:{description:this.getPhase3Description(n),finalYao:n.targetHexagram?.line||"‰∏äÁàª",realizationRate:Math.round(100*n.probability),timeframe:"6-12„É∂Êúà"},wisdom:this.getIChingWisdom(n)}}calculateScoreProgression(n,e){const a=n.hexagramInfo?.score||n.score||Math.round(50+30*Math.random()),t=this.calculatePhase1Change(n),r=this.calculatePhase2Change(n),i=this.calculatePhase3Change(n);return{current:a,phase1:Math.min(100,Math.max(0,a+t)),phase2:Math.min(100,Math.max(0,a+t+r)),phase3:Math.min(100,Math.max(0,a+t+r+i))}}calculatePhase1Change(n){return n.route&&"progress"===n.route[0]?Math.round(10+15*Math.random()):n.route&&"transform"===n.route[0]?Math.round(20*Math.random()-5):Math.round(15*Math.random()-5)}calculatePhase2Change(n){return n.route&&"continue"===n.route[1]?Math.round(5+10*Math.random()):n.route&&"adjust"===n.route[1]?Math.round(0+10*Math.random()):n.route&&"complete"===n.route[1]?Math.round(30*Math.random()-10):Math.round(0+10*Math.random())}calculatePhase3Change(n){return Math.round(20*n.probability)+Math.round(10*Math.random()-5)}getPhase1Description(n){return{progress:"ÁèæÁä∂„ÇíÁ∂≠ÊåÅ„Åó„Å™„Åå„ÇâÂÜÖ„Å™„ÇãÂäõ„ÇíËìÑÁ©ç„Åó„ÄÅÊ¨°„ÅÆÊÆµÈöé„Å∏„ÅÆÊ∫ñÂÇô„ÇíÊï¥„Åà„Çã",transform:"Êó¢Â≠ò„ÅÆÊû†ÁµÑ„Åø„Åã„ÇâËÑ±Âç¥„Åó„ÄÅÊñ∞„Åü„Å™ÂèØËÉΩÊÄß„ÇíÊ®°Á¥¢„ÅóÂßã„ÇÅ„Çã"}[n.route?.[0]||"progress"]||"Â§âÂåñ„ÅÆÂÖÜ„Åó„ÅåÁèæ„Çå„ÄÅÂÜÖÁöÑ„Ç®„Éç„É´„ÇÆ„Éº„ÅåÂãï„ÅçÂßã„ÇÅ„Çã"}getPhase2Description(n){return{continue:"È†ÜË™ø„Å™Áô∫Â±ï„ÇíÁ∂ö„Åë„ÄÅÁùÄÂÆü„Å´ÁõÆÊ®ô„Å∏Ëøë„Å•„ÅÑ„Å¶„ÅÑ„Åè",adjust:"Áä∂Ê≥Å„Å´Âøú„Åò„Å¶ÊüîËªü„Å´Ë™øÊï¥„Åó„ÄÅ„Éê„É©„É≥„Çπ„ÇíÂèñ„Çä„Å™„Åå„ÇâÂâçÈÄ≤",complete:"Ê†πÊú¨ÁöÑ„Å™Ëª¢Êèõ„ÇíÁµå„Å¶„ÄÅÊñ∞„Åü„Å™ÊÆµÈöé„Å∏„Å®ÁßªË°å",integrate:"Áï∞„Å™„ÇãË¶ÅÁ¥†„ÇíÁµ±Âêà„Åó„ÄÅ„Çà„ÇäÈ´òÊ¨°„ÅÆË™øÂíå„ÇíÂÆüÁèæ"}[n.route?.[1]||"continue"]||"Â§©„Éª‰∫∫„ÉªÂú∞„ÅÆ‰∏âÊâç„ÅåË™øÂíå„Åó„ÄÅÂ§âÂåñ„ÅåÂÖ∑‰ΩìÂåñ„Åó„Å¶„ÅÑ„Åè"}getPhase3Description(n){const e=n.probability||.5;return e>.7?"ÁêÜÊÉ≥ÁöÑ„Å™ÂΩ¢„ÅßÁõÆÊ®ô„ÇíÈÅîÊàê„Åó„ÄÅÊñ∞„Åü„Å™ÂÆâÂÆöÁä∂ÊÖã„ÇíÁ¢∫Á´ã„Åô„Çã":e>.5?"ÁùÄÂÆü„Å™Âä™Âäõ„Å´„Çà„ÇäÁõÆÊ®ô„Å´Âà∞ÈÅî„Åó„ÄÅÊåÅÁ∂öÂèØËÉΩ„Å™ÊàêÊûú„ÇíÂæó„Çã":e>.3?"Âõ∞Èõ£„Çí‰πó„ÇäË∂ä„Åà„Å¶ÁõÆÊ®ô„Å´Ëøë„Å•„Åç„ÄÅË≤¥Èáç„Å™ÁµåÈ®ì„Å®Â≠¶„Å≥„ÇíÂæó„Çã":"ÊåëÊà¶ÁöÑ„Å™ÈÅì„ÅÆ„Çä„ÇíÁµå„Å¶„ÄÅ‰∫àÊúü„Åõ„Å¨ÂΩ¢„Åß„ÅÆÊàêÈï∑„Å®Áô∫Ë¶ã„Åå„ÅÇ„Çã"}calculateNextYao(n){const e=["ÂàùÁàª","‰∫åÁàª","‰∏âÁàª","ÂõõÁàª","‰∫îÁàª","‰∏äÁàª"],a=e.findIndex(e=>n?.includes(e.substring(0,1)));return a>=0&&a<5?e[a+1]:"Â§âÁàª"}getIChingWisdom(n){const e=["ÊôÇ„Å´Âæì„ÅÑ„ÄÅÊ©ü„ÇíË¶ã„Å¶Âãï„Åè","Èô∞Ê•µ„Åæ„Çä„Å¶ÈôΩ„Å®„Å™„Åô„ÄÅÂ§âÂåñ„ÅÆÂ¶ô","Â§©Âú∞„ÅÆÈÅìÁêÜ„Å´Âæì„ÅÑ„ÄÅËá™ÁÑ∂„Å™Áô∫Â±ï„ÇíÈÅÇ„Åí„Çã","ÂâõÊüî‰∏¶„Å≥Ê∏à„Åó„ÄÅË™øÂíå„ÅÆ‰∏≠„Å´ÁúüÁêÜ„ÅÇ„Çä","ÈÄ≤ÈÄÄ„ÇíÁü•„Çä„ÄÅÊôÇÊ©ü„ÇíÂæó„Å¶ÊàêÂäü„Åô"];return e[Math.abs(this.simpleHash(JSON.stringify(n)))%e.length]}simpleHash(n){let e=0;for(let a=0;a<n.length;a++){e=(e<<5)-e+n.charCodeAt(a),e&=e}return e}getRankClass(n){return n>70?"rank-s":n>60?"rank-a":n>50?"rank-b":n>40?"rank-c":"rank-d"}handleStageSelection(n){const e=n.dataset.stage;n.dataset.choice;document.querySelectorAll(`.stage-option[data-stage="${e}"]`).forEach(n=>{n.classList.remove("selected")}),n.classList.add("selected"),this.filterScenariosBySelection()}filterScenariosBySelection(){const n=[];document.querySelectorAll(".stage-option.selected").forEach(e=>{n.push({stage:parseInt(e.dataset.stage),choice:e.dataset.choice})}),document.querySelectorAll(".scenario-card").forEach(e=>{const a=parseInt(e.dataset.scenarioId),t=this.scenarios.find(n=>n.id===a);if(t){let a=!0;n.forEach(n=>{t.path[n.stage]!==n.choice&&(a=!1)}),a?(e.style.display="block",e.style.opacity="1"):e.style.opacity="0.3"}})}selectScenario(n){document.querySelectorAll(".scenario-card").forEach(n=>{n.classList.remove("selected")});const e=document.querySelector(`[data-scenario-id="${n.id}"]`);e&&e.classList.add("selected"),this.selectedScenario=n,this.showScenarioDetails(n);const a=new CustomEvent("scenarioSelected",{detail:n});this.container.dispatchEvent(a),console.log("üìç Selected scenario:",n)}showScenarioDetails(n){let e=document.getElementById("scenario-detail-panel");e||(e=this.createDetailPanel(),document.body.appendChild(e));const a=this.calculateThreePhases(n),t=this.calculateScoreProgression(n,a);e.innerHTML=`\n        <div class="detail-panel-header">\n          <h2>üéØ „Ç∑„Éä„É™„Ç™${n.id}Ë©≥Á¥∞ÂàÜÊûê</h2>\n          <button class="close-btn" onclick="this.parentElement.parentElement.style.display='none'">√ó</button>\n        </div>\n        \n        <div class="detail-content">\n          <div class="scenario-overview">\n            <h3>${n.title||n.description||"Áµ±ÂêàÁöÑÂ§âÂåñ„Ç∑„Éä„É™„Ç™"}</h3>\n            <div class="probability-display">\n              <span>ÂÆüÁèæÂèØËÉΩÊÄß: <strong>${(100*n.probability).toFixed(1)}%</strong></span>\n            </div>\n          </div>\n          \n          <div class="three-phases-detail">\n            <h4>‚òØ 3ÊÆµÈöéÂ§âÂåñ„Éó„É≠„Çª„ÇπË©≥Á¥∞</h4>\n            \n            <div class="phase-detail phase-1">\n              <h5>‚ö° ÂãïÁàªÊúü (${a.phase1.timeframe})</h5>\n              <p><strong>„Çπ„Ç≥„Ç¢Â§âÂåñ:</strong> ${t.current} ‚Üí ${t.phase1} \n                <span class="score-change ${t.phase1>t.current?"positive":"negative"}">\n                  (${t.phase1>t.current?"+":""}${t.phase1-t.current})\n                </span>\n              </p>\n              <p><strong>Â§âÂåñÂÜÖÂÆπ:</strong> ${a.phase1.description}</p>\n              <p><strong>Áàª„ÅÆÂ§âÂåñ:</strong> ${a.phase1.yaoBefore} ‚Üí ${a.phase1.yaoAfter}</p>\n            </div>\n            \n            <div class="phase-detail phase-2">\n              <h5>üîÑ Ëª¢ÁàªÊúü (${a.phase2.timeframe})</h5>\n              <p><strong>„Çπ„Ç≥„Ç¢Â§âÂåñ:</strong> ${t.phase1} ‚Üí ${t.phase2}\n                <span class="score-change ${t.phase2>t.phase1?"positive":"negative"}">\n                  (${t.phase2>t.phase1?"+":""}${t.phase2-t.phase1})\n                </span>\n              </p>\n              <p><strong>Â§âÂåñÂÜÖÂÆπ:</strong> ${a.phase2.description}</p>\n              <div class="balance-display">\n                <div>Â§©„ÅÆ„Éê„É©„É≥„Çπ: ${a.phase2.heavenBalance}%</div>\n                <div>‰∫∫„ÅÆ„Éê„É©„É≥„Çπ: ${a.phase2.humanBalance}%</div>\n                <div>Âú∞„ÅÆ„Éê„É©„É≥„Çπ: ${a.phase2.earthBalance}%</div>\n              </div>\n            </div>\n            \n            <div class="phase-detail phase-3">\n              <h5>üéØ ÊàêÁàªÊúü (${a.phase3.timeframe})</h5>\n              <p><strong>ÊúÄÁµÇ„Çπ„Ç≥„Ç¢:</strong> ${t.phase3}ÁÇπ\n                <span class="score-change ${t.phase3>t.current?"positive":"negative"}">\n                  (ÂêàË®à${t.phase3>t.current?"+":""}${t.phase3-t.current})\n                </span>\n              </p>\n              <p><strong>Â§âÂåñÂÜÖÂÆπ:</strong> ${a.phase3.description}</p>\n              <p><strong>ÊúÄÁµÇÁàª:</strong> ${a.phase3.finalYao}</p>\n              <p><strong>ÂÆüÁèæÁéá:</strong> ${a.phase3.realizationRate}%</p>\n            </div>\n          </div>\n          \n          <div class="iching-wisdom-detail">\n            <h4>üìú ÊòìÁµå„ÅÆÊô∫ÊÖß</h4>\n            <blockquote>„Äå${a.wisdom}„Äç</blockquote>\n            ${n.iChingReference?`\n              <div class="hexagram-info">\n                <p><strong>Èñ¢ÈÄ£Âç¶:</strong> ${n.iChingReference.hexagram||""}</p>\n                <p><strong>ÊÑèÂë≥:</strong> ${n.iChingReference.meaning||""}</p>\n              </div>\n            `:""}\n          </div>\n        </div>\n      `,e.style.display="block",e.scrollTop=0}createDetailPanel(){const n=document.createElement("div");if(n.id="scenario-detail-panel",n.style.cssText="\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 90%;\n        max-width: 700px;\n        max-height: 80vh;\n        background: linear-gradient(135deg, rgba(17, 24, 39, 0.98), rgba(31, 41, 55, 0.98));\n        border: 2px solid rgba(99, 102, 241, 0.5);\n        border-radius: 16px;\n        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n        z-index: 10000;\n        color: #E5E7EB;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        overflow-y: auto;\n        display: none;\n        backdrop-filter: blur(10px);\n      ",!document.getElementById("scenario-detail-styles")){const n=document.createElement("style");n.id="scenario-detail-styles",n.textContent="\n          .detail-panel-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 1rem 1.5rem;\n            border-bottom: 1px solid rgba(99, 102, 241, 0.3);\n          }\n          \n          .detail-panel-header h2 {\n            margin: 0;\n            color: #A5B4FC;\n          }\n          \n          .close-btn {\n            background: rgba(239, 68, 68, 0.2);\n            border: 1px solid rgba(239, 68, 68, 0.4);\n            color: #FCA5A5;\n            width: 32px;\n            height: 32px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 18px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          \n          .close-btn:hover {\n            background: rgba(239, 68, 68, 0.3);\n          }\n          \n          .detail-content {\n            padding: 1.5rem;\n          }\n          \n          .scenario-overview h3 {\n            color: #FDE047;\n            margin-bottom: 0.5rem;\n          }\n          \n          .probability-display {\n            margin-bottom: 1rem;\n            font-size: 1.1rem;\n          }\n          \n          .three-phases-detail h4 {\n            color: #10B981;\n            margin-bottom: 1rem;\n          }\n          \n          .phase-detail {\n            margin-bottom: 1.5rem;\n            padding: 1rem;\n            background: rgba(55, 65, 81, 0.3);\n            border-left: 3px solid #6366F1;\n            border-radius: 8px;\n          }\n          \n          .phase-detail h5 {\n            color: #C7D2FE;\n            margin-bottom: 0.5rem;\n          }\n          \n          .score-change.positive {\n            color: #10B981;\n          }\n          \n          .score-change.negative {\n            color: #F87171;\n          }\n          \n          .balance-display {\n            display: grid;\n            grid-template-columns: 1fr 1fr 1fr;\n            gap: 0.5rem;\n            margin-top: 0.5rem;\n            font-size: 0.875rem;\n          }\n          \n          .iching-wisdom-detail blockquote {\n            background: rgba(165, 180, 252, 0.1);\n            border-left: 3px solid #6366F1;\n            margin: 0.5rem 0;\n            padding: 1rem;\n            border-radius: 4px;\n            font-style: italic;\n          }\n        ",document.head.appendChild(n)}return n}animateDisplay(){document.querySelectorAll(".scenario-card").forEach((n,e)=>{setTimeout(()=>{n.style.opacity="0",n.style.transform="translateY(20px)",setTimeout(()=>{n.style.transition="all 0.5s ease",n.style.opacity="1",n.style.transform="translateY(0)"},50)},100*e)})}}"undefined"!=typeof window&&(window.EightScenariosDisplay=EightScenariosDisplay),console.log("‚úÖ EightScenariosDisplay loaded")}("undefined"!=typeof window&&window);