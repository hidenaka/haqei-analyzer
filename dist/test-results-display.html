<\!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T104 çµæœè¡¨ç¤ºæ¤œè¨¼ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .pass { background: #059669; }
        .fail { background: #dc2626; }
        .pending { background: #f59e0b; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        #test-output { white-space: pre-wrap; font-family: monospace; background: #333; padding: 15px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª T104 çµæœè¡¨ç¤ºå®Ÿè£…æ¤œè¨¼ãƒ†ã‚¹ãƒˆ</h1>
        
        <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆé …ç›®</h2>
        <div id="test-checklist">
            <div class="test-result pending" id="test-1">1. Triple OSçµæœã®ç¾ã—ã„è¡¨ç¤º</div>
            <div class="test-result pending" id="test-2">2. 3åˆ—ã‚«ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å‹•ä½œ</div>
            <div class="test-result pending" id="test-3">3. 64å¦æƒ…å ±ã®æ­£ç¢ºè¡¨ç¤º</div>
            <div class="test-result pending" id="test-4">4. ã‚¹ã‚³ã‚¢å¯è¦–åŒ–ã®å‹•ä½œ</div>
            <div class="test-result pending" id="test-5">5. HaQeiå“²å­¦æº–æ‹ ï¼ˆå‚è€ƒã¨ã—ã¦è¡¨ç¾ï¼‰</div>
            <div class="test-result pending" id="test-6">6. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³</div>
            <div class="test-result pending" id="test-7">7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š</div>
        </div>

        <h2>ğŸ¯ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h2>
        <button onclick="startResultsTest()">çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆé–‹å§‹</button>
        <button onclick="testHaQeiPhilosophy()">HaQeiå“²å­¦æº–æ‹ ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testResponsiveDesign()">ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="testPerformance()">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</button>
        
        <h2>ğŸ“Š ãƒ†ã‚¹ãƒˆå‡ºåŠ›</h2>
        <div id="test-output"></div>
    </div>

    <script>
        let testOutput = document.getElementById('test-output');
        
        function log(message) {
            testOutput.textContent += new Date().toLocaleTimeString() + ': ' + message + '\\n';
            testOutput.scrollTop = testOutput.scrollHeight;
            console.log(message);
        }
        
        function setTestResult(testId, status) {
            const element = document.getElementById(testId);
            element.className = 'test-result ' + status;
        }

        async function startResultsTest() {
            log('ğŸ§ª T104 çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // 1. Triple OSçµæœã®ç¾ã—ã„è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
                log('ğŸ“± ãƒ†ã‚¹ãƒˆ1: Triple OSçµæœè¡¨ç¤ºã®ç¢ºèª');
                const resultsPage = window.open('/emergency_haqei.html', 'resultsTest');
                
                // ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã‚’localStorageã«ã‚»ãƒƒãƒˆ
                const testAnswers = {};
                for(let i = 1; i <= 30; i++) {
                    testAnswers[i] = Math.floor(Math.random() * 4) + 1;
                }
                
                // æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®localStorageã«ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
                setTimeout(() => {
                    if (resultsPage && \!resultsPage.closed) {
                        try {
                            resultsPage.localStorage.setItem('haqei_answers', JSON.stringify(testAnswers));
                            resultsPage.localStorage.setItem('haqei_session_id', 'test_' + Date.now());
                            log('âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’localStorageã«è¨­å®šå®Œäº†');
                            setTestResult('test-1', 'pass');
                        } catch (e) {
                            log('âŒ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿è¨­å®šå¤±æ•—: ' + e.message);
                            setTestResult('test-1', 'fail');
                        }
                    }
                }, 2000);
                
                log('âœ… çµæœè¡¨ç¤ºãƒ†ã‚¹ãƒˆæº–å‚™å®Œäº†');
                
            } catch (error) {
                log('âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼: ' + error.message);
                setTestResult('test-1', 'fail');
            }
        }

        async function testHaQeiPhilosophy() {
            log('ğŸŒ HaQeiå“²å­¦æº–æ‹ ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // emergency_haqei.htmlã®å†…å®¹ã‚’ç¢ºèª
                const response = await fetch('/emergency_haqei.html');
                const html = await response.text();
                
                // HaQeiå“²å­¦ã®è¦ç´ ã‚’ç¢ºèª
                const checks = [
                    { pattern: /å‚è€ƒã¨ã—ã¦/g, name: 'ã€Œå‚è€ƒã¨ã—ã¦ã€è¡¨ç¾' },
                    { pattern: /æ±ºå®šè«–/g, name: 'æ±ºå®šè«–çš„è¡¨ç¾ã®å›é¿', invert: true },
                    { pattern: /æˆ¦ç•¥çš„æ´»ç”¨/g, name: 'æˆ¦ç•¥çš„æ´»ç”¨ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹' },
                    { pattern: /è‡ªå·±ç†è§£/g, name: 'è‡ªå·±ç†è§£ãƒ„ãƒ¼ãƒ«ä½ç½®ã¥ã‘' }
                ];
                
                let philosophyScore = 0;
                checks.forEach(check => {
                    const matches = html.match(check.pattern);
                    const found = matches && matches.length > 0;
                    const passed = check.invert ? \!found : found;
                    
                    if (passed) {
                        philosophyScore++;
                        log('âœ… ' + check.name + ': é©åˆ');
                    } else {
                        log('âŒ ' + check.name + ': è¦æ”¹å–„');
                    }
                });
                
                if (philosophyScore >= checks.length * 0.75) {
                    setTestResult('test-5', 'pass');
                    log('âœ… HaQeiå“²å­¦æº–æ‹ ãƒ†ã‚¹ãƒˆ: åˆæ ¼ (' + philosophyScore + '/' + checks.length + ')');
                } else {
                    setTestResult('test-5', 'fail');
                    log('âŒ HaQeiå“²å­¦æº–æ‹ ãƒ†ã‚¹ãƒˆ: ä¸åˆæ ¼ (' + philosophyScore + '/' + checks.length + ')');
                }
                
            } catch (error) {
                log('âŒ HaQeiå“²å­¦ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ' + error.message);
                setTestResult('test-5', 'fail');
            }
        }

        async function testResponsiveDesign() {
            log('ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                // ç•°ãªã‚‹ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚µã‚¤ã‚ºã§ãƒ†ã‚¹ãƒˆ
                const viewports = [
                    { width: 375, height: 667, name: 'Mobile (iPhone)' },
                    { width: 768, height: 1024, name: 'Tablet' },
                    { width: 1200, height: 800, name: 'Desktop' }
                ];
                
                let responsiveScore = 0;
                
                for (const viewport of viewports) {
                    log('ğŸ” ' + viewport.name + ' (' + viewport.width + 'x' + viewport.height + ') ãƒ†ã‚¹ãƒˆä¸­');
                    
                    // æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ãƒ†ã‚¹ãƒˆ
                    const testWindow = window.open('/emergency_haqei.html', 'responsiveTest', 
                        'width=' + viewport.width + ',height=' + viewport.height);
                    
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    if (testWindow && \!testWindow.closed) {
                        responsiveScore++;
                        testWindow.close();
                        log('âœ… ' + viewport.name + ': è¡¨ç¤ºæˆåŠŸ');
                    } else {
                        log('âŒ ' + viewport.name + ': è¡¨ç¤ºå¤±æ•—');
                    }
                }
                
                if (responsiveScore >= viewports.length * 0.67) {
                    setTestResult('test-6', 'pass');
                    log('âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ: åˆæ ¼');
                } else {
                    setTestResult('test-6', 'fail');
                    log('âŒ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ: ä¸åˆæ ¼');
                }
                
            } catch (error) {
                log('âŒ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ' + error.message);
                setTestResult('test-6', 'fail');
            }
        }

        async function testPerformance() {
            log('âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            try {
                const startTime = performance.now();
                
                // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚é–“æ¸¬å®š
                const response = await fetch('/emergency_haqei.html');
                const html = await response.text();
                
                const loadTime = performance.now() - startTime;
                log('ğŸ“Š ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚é–“: ' + loadTime.toFixed(2) + 'ms');
                
                // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ¸¬å®šï¼ˆå¯èƒ½ãªå ´åˆï¼‰
                if (performance.memory) {
                    const memoryInfo = performance.memory;
                    log('ğŸ’¾ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ' + (memoryInfo.usedJSHeapSize / 1024 / 1024).toFixed(2) + 'MB');
                }
                
                // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¤å®š
                if (loadTime < 3000) { // 3ç§’ä»¥å†…
                    setTestResult('test-7', 'pass');
                    log('âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ: åˆæ ¼ (èª­ã¿è¾¼ã¿æ™‚é–“ < 3ç§’)');
                } else {
                    setTestResult('test-7', 'fail');
                    log('âŒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ: ä¸åˆæ ¼ (èª­ã¿è¾¼ã¿æ™‚é–“ >= 3ç§’)');
                }
                
            } catch (error) {
                log('âŒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ' + error.message);
                setTestResult('test-7', 'fail');
            }
        }
        
        // åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        log('ğŸ§ª T104 çµæœè¡¨ç¤ºæ¤œè¨¼ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæº–å‚™å®Œäº†');
        log('ğŸ“‹ ãƒ†ã‚¹ãƒˆå¯¾è±¡: Triple OSçµæœè¡¨ç¤ºã€HaQeiå“²å­¦æº–æ‹ ã€UI/UXã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹');
        log('ğŸ¯ ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã™ã‚‹ã«ã¯ä¸Šè¨˜ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„');
    </script>
</body>
</html>
