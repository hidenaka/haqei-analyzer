/**
 * Virtual Question Flow Emergency Fix
 * 質問画面が表示されない問題の緊急修正
 */

/* ========================================
   コンテナの強制表示
   ======================================== */

/* 質問コンテナ全体 */
#question-container {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: transparent !important;
  position: relative !important;
  z-index: 1 !important;
  min-height: 100vh !important;
}

/* Virtual Question Flow コンテナ */
.virtual-question-flow {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: transparent !important;
  position: relative !important;
  width: 100% !important;
  min-height: 100vh !important;
  padding: 20px !important;
}

/* Virtual Viewport - 質問表示エリア */
#virtual-viewport,
.virtual-viewport {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: transparent !important;
  position: relative !important;
  min-height: 500px !important;
  width: 100% !important;
  padding: 20px 0 !important;
  overflow: visible !important;
}

/* 質問アイテム */
.question-item {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: #2a2a2a !important;
  border: 1px solid #444 !important;
  border-radius: 12px !important;
  padding: 24px !important;
  margin: 16px auto !important;
  max-width: 800px !important;
  width: 100% !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* 質問テキスト */
.question-text {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  color: #ffffff !important;
  font-size: 18px !important;
  line-height: 1.6 !important;
  margin-bottom: 20px !important;
}

/* 回答オプション */
.options-container {
  visibility: visible !important;
  display: flex !important;
  opacity: 1 !important;
  flex-direction: column !important;
  gap: 12px !important;
}

.option-label {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: #3a3a3a !important;
  border: 2px solid #555 !important;
  border-radius: 8px !important;
  padding: 16px !important;
  color: #ffffff !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
}

.option-label:hover {
  background: #4a4a4a !important;
  border-color: #6366f1 !important;
}

/* プログレスコンテナ */
.progress-container {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: rgba(42, 42, 42, 0.95) !important;
  padding: 16px !important;
  border-radius: 12px !important;
  margin-bottom: 24px !important;
}

.progress-bar {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: #3a3a3a !important;
  height: 8px !important;
  border-radius: 4px !important;
  overflow: hidden !important;
}

.progress-bar-fill {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: linear-gradient(90deg, #6366f1, #8b5cf6) !important;
  height: 100% !important;
  transition: width 0.3s ease !important;
}

.progress-text {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  color: #ffffff !important;
  text-align: center !important;
  margin-top: 8px !important;
  font-size: 14px !important;
}

/* ========================================
   Shadow DOM内要素の修正
   ======================================== */

haqei-question {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  width: 100% !important;
}

/* ========================================
   全体的な背景修正
   ======================================== */

body {
  background: #1a1a1a !important;
  color: #ffffff !important;
}

.screen-container {
  visibility: visible !important;
  display: block !important;
  opacity: 1 !important;
  background: transparent !important;
}

/* ========================================
   デバッグ用ボーダー（開発時のみ）
   ======================================== */

.debug-mode #question-container {
  border: 3px solid red !important;
}

.debug-mode .virtual-question-flow {
  border: 3px solid yellow !important;
}

.debug-mode #virtual-viewport {
  border: 3px solid green !important;
}

.debug-mode .question-item {
  border: 3px solid blue !important;
}

/* ========================================
   ローディング状態の修正
   ======================================== */

.loading-overlay {
  display: none !important;
}

/* ========================================
   z-indexの調整
   ======================================== */

#question-container {
  z-index: 10 !important;
}

.virtual-question-flow {
  z-index: 20 !important;
}

#virtual-viewport {
  z-index: 30 !important;
}

.question-item {
  z-index: 40 !important;
}

.navigation-controls {
  z-index: 99999 !important;
}

/* ========================================
   レスポンシブ対応
   ======================================== */

@media (max-width: 768px) {
  .virtual-question-flow {
    padding: 10px !important;
  }
  
  .question-item {
    padding: 16px !important;
    margin: 12px 10px !important;
  }
  
  .question-text {
    font-size: 16px !important;
  }
}

/* ========================================
   強制的な表示確保
   ======================================== */

* {
  -webkit-transform: translateZ(0) !important;
}

#question-container,
#question-container * {
  pointer-events: auto !important;
  user-select: auto !important;
}