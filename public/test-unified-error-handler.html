<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAQEIçµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ v2.0.0</title>
    
    <!-- HAQEI Error Handling CSS -->
    <link rel="stylesheet" href="css/error-handling.css">
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-header h1 {
            font-size: 2.5rem;
            color: #4a90e2;
            margin-bottom: 10px;
        }
        
        .test-header p {
            font-size: 1.1rem;
            color: #e0e0e0;
            margin-bottom: 20px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(8px);
        }
        
        .test-section h2 {
            color: #4a90e2;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .test-button:hover {
            background: linear-gradient(135deg, #357abd, #2968a3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }
        
        .test-button.danger {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }
        
        .test-button.danger:hover {
            background: linear-gradient(135deg, #c82333, #bd2130);
        }
        
        .test-button.warning {
            background: linear-gradient(135deg, #ffc107, #e0a800);
        }
        
        .test-button.warning:hover {
            background: linear-gradient(135deg, #e0a800, #d39e00);
        }
        
        .status-display {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.4;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: rgba(74, 144, 226, 0.1);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4a90e2;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #e0e0e0;
        }
        
        .philosophy-display {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .philosophy-display h3 {
            color: #ffd700;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ›¡ï¸ HAQEIçµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ  v2.0.0</h1>
            <p>bunenjinå“²å­¦ãƒ»æ˜“çµŒãƒ»Triple OS Architectureå®Œå…¨å¯¾å¿œãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ</p>
            <div id="system-status" class="philosophy-display">
                <h3>ğŸ”® ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹</h3>
                <p id="status-text">åˆæœŸåŒ–ä¸­...</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸš¨ ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-buttons">
                <button class="test-button danger" onclick="testNetworkError()">
                    ğŸ“¡ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
                </button>
                <button class="test-button danger" onclick="testMemoryError()">
                    ğŸ§  ãƒ¡ãƒ¢ãƒªã‚¨ãƒ©ãƒ¼
                </button>
                <button class="test-button danger" onclick="testUIError()">
                    ğŸ–¥ï¸ UIè¡¨ç¤ºã‚¨ãƒ©ãƒ¼
                </button>
                <button class="test-button danger" onclick="testValidationError()">
                    âœ… æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
                </button>
                <button class="test-button danger" onclick="testIChingError()">
                    â˜¯ï¸ æ˜“çµŒå¤‰æ›ã‚¨ãƒ©ãƒ¼
                </button>
                <button class="test-button danger" onclick="testBunenjinConflict()">
                    ğŸ­ åˆ†äººæ€æƒ³ç«¶åˆ
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-buttons">
                <button class="test-button warning" onclick="testHighVolumeErrors()">
                    ğŸ“Š å¤§é‡ã‚¨ãƒ©ãƒ¼å‡¦ç†
                </button>
                <button class="test-button warning" onclick="testMemoryPressure()">
                    ğŸ’¾ ãƒ¡ãƒ¢ãƒªåœ§è¿«ãƒ†ã‚¹ãƒˆ
                </button>
                <button class="test-button warning" onclick="testResponseTime()">
                    â±ï¸ å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ
                </button>
                <button class="test-button" onclick="testRecoveryStrategies()">
                    ğŸ”§ å¾©æ—§æˆ¦ç•¥ãƒ†ã‚¹ãƒˆ
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”® å“²å­¦çš„æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-buttons">
                <button class="test-button" onclick="testHexagramGuidance()">
                    â˜° æ˜“çµŒã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
                </button>
                <button class="test-button" onclick="testBunenjinPersonas()">
                    ğŸ‘¥ åˆ†äººæ€æƒ³ãƒ†ã‚¹ãƒˆ
                </button>
                <button class="test-button" onclick="testTripleOSIntegration()">
                    ğŸ”º Triple OSçµ±åˆ
                </button>
                <button class="test-button" onclick="testPhilosophicalAlignment()">
                    âš–ï¸ å“²å­¦çš„èª¿å’Œåº¦
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–</h2>
            <button class="test-button" onclick="updateMetrics()">ğŸ”„ ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°</button>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="errors-processed">0</div>
                    <div class="metric-label">å‡¦ç†æ¸ˆã¿ã‚¨ãƒ©ãƒ¼</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="avg-response-time">0ms</div>
                    <div class="metric-label">å¹³å‡å¿œç­”æ™‚é–“</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="memory-usage">0MB</div>
                    <div class="metric-label">ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="throughput">0/s</div>
                    <div class="metric-label">ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="philosophical-alignment">0%</div>
                    <div class="metric-label">å“²å­¦çš„èª¿å’Œåº¦</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="system-health">å¥å…¨</div>
                    <div class="metric-label">ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§</div>
                </div>
            </div>
            <div class="status-display" id="metrics-log"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§¹ ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†</h2>
            <div class="test-buttons">
                <button class="test-button" onclick="clearErrorHistory()">
                    ğŸ—‘ï¸ ã‚¨ãƒ©ãƒ¼å±¥æ­´ã‚¯ãƒªã‚¢
                </button>
                <button class="test-button" onclick="optimizePerformance()">
                    âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
                </button>
                <button class="test-button" onclick="exportStatistics()">
                    ğŸ“ çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                </button>
                <button class="test-button danger" onclick="resetSystem()">
                    ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚»ãƒƒãƒˆ
                </button>
            </div>
        </div>
    </div>
    
    <!-- Error display container -->
    <div id="error-container"></div>
    
    <!-- Scripts -->
    <script src="js/shared/core/HAQEIErrorManager.js"></script>
    <script src="js/components/ErrorDisplayUI.js"></script>
    <script src="js/shared/core/ErrorHandler.js"></script>
    
    <script>
        // Global error handler instance
        let errorHandler = null;
        let testCounter = 0;
        
        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {\n            initializeSystem();\n        });\n        \n        async function initializeSystem() {\n            try {\n                console.log('ğŸš€ Initializing HAQEI Error Handler Test System...');\n                \n                // Initialize error handler with enhanced config\n                errorHandler = new UnifiedErrorHandler({\n                    uiContainerId: 'error-container',\n                    performanceThreshold: 10, // 10ms\n                    memoryThreshold: 10485760, // 10MB\n                    throughputTarget: 1000, // 1000 errors/sec\n                    enablePhilosophicalGuidance: true,\n                    enableTripleOS: true,\n                    enableRealTimeMonitoring: true\n                });\n                \n                updateStatusDisplay('âœ… ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†', 'success');\n                updateMetrics();\n                \n                // Start periodic metrics update\n                setInterval(updateMetrics, 5000);\n                \n            } catch (error) {\n                console.error('âŒ System initialization failed:', error);\n                updateStatusDisplay('âŒ ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å¤±æ•—: ' + error.message, 'error');\n            }\n        }\n        \n        // Error Test Functions\n        async function testNetworkError() {\n            const error = new Error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');\n            error.name = 'NetworkError';\n            \n            await errorHandler.handleError(error, 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡', {\n                url: 'https://api.example.com/data',\n                timeout: 5000,\n                retryCount: 3\n            });\n            \n            logTest('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        async function testMemoryError() {\n            const error = new Error('ãƒ¡ãƒ¢ãƒªä¸è¶³ã«ã‚ˆã‚Šå‡¦ç†ã‚’ç¶™ç¶šã§ãã¾ã›ã‚“');\n            error.name = 'MemoryError';\n            \n            await errorHandler.handleError(error, 'ãƒ¡ãƒ¢ãƒªç®¡ç†', {\n                usedMemory: 15728640, // 15MB\n                availableMemory: 2097152, // 2MB\n                requestedMemory: 5242880 // 5MB\n            });\n            \n            logTest('ãƒ¡ãƒ¢ãƒªã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        async function testUIError() {\n            const error = new Error('UIè¦ç´ ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«å¤±æ•—ã—ã¾ã—ãŸ');\n            error.name = 'UIRenderError';\n            \n            await errorHandler.handleError(error, 'UIè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ', {\n                component: 'VirtualPersonaResultsView',\n                element: 'persona-analysis-chart',\n                renderingAttempts: 3\n            });\n            \n            logTest('UIã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        async function testValidationError() {\n            const error = new Error('å…¥åŠ›å€¤ã®æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ');\n            error.name = 'ValidationError';\n            \n            await errorHandler.handleError(error, 'å…¥åŠ›æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ', {\n                field: 'hexagram_number',\n                value: 'invalid_input',\n                expectedType: 'number',\n                range: '1-64'\n            });\n            \n            logTest('æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        async function testIChingError() {\n            const error = new Error('æ˜“çµŒå¤‰æ›å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');\n            error.name = 'IChingTransformationError';\n            \n            await errorHandler.handleError(error, 'I-Chingå¤‰æ›ã‚¨ãƒ©ãƒ¼', {\n                hexagram: 64,\n                transformation: 'comprehensive',\n                stage: 'five_elements_integration'\n            });\n            \n            logTest('æ˜“çµŒå¤‰æ›ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        async function testBunenjinConflict() {\n            const error = new Error('åˆ†äººæ€æƒ³ã®èª¿å’Œã«ä¸æ•´åˆãŒç™ºç”Ÿã—ã¾ã—ãŸ');\n            error.name = 'BunenjinConflictError';\n            \n            await errorHandler.handleError(error, 'åˆ†äººæ€æƒ³èª¿å’Œã‚·ã‚¹ãƒ†ãƒ ', {\n                conflictingPersonas: ['analyticalSelf', 'intuitiveSelf'],\n                situation: 'decision_making',\n                severity: 'moderate'\n            });\n            \n            logTest('åˆ†äººæ€æƒ³ç«¶åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ');\n        }\n        \n        // Performance Tests\n        async function testHighVolumeErrors() {\n            updateStatusDisplay('ğŸ“Š å¤§é‡ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const startTime = performance.now();\n            const errorCount = 100;\n            \n            for (let i = 0; i < errorCount; i++) {\n                const error = new Error(`å¤§é‡å‡¦ç†ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ #${i + 1}`);\n                error.name = 'HighVolumeTestError';\n                \n                // Don't await to test concurrent processing\n                errorHandler.handleError(error, 'å¤§é‡å‡¦ç†ãƒ†ã‚¹ãƒˆ', {\n                    testId: i + 1,\n                    batchSize: errorCount\n                });\n                \n                // Small delay to prevent browser freeze\n                if (i % 10 === 0) {\n                    await new Promise(resolve => setTimeout(resolve, 1));\n                }\n            }\n            \n            const endTime = performance.now();\n            const throughput = errorCount / ((endTime - startTime) / 1000);\n            \n            logTest(`å¤§é‡ã‚¨ãƒ©ãƒ¼å‡¦ç†å®Œäº†: ${errorCount}ä»¶ (${throughput.toFixed(2)} errors/sec)`);\n        }\n        \n        async function testMemoryPressure() {\n            updateStatusDisplay('ğŸ’¾ ãƒ¡ãƒ¢ãƒªåœ§è¿«ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'warning');\n            \n            // Create memory pressure by generating large objects\n            const largeData = [];\n            for (let i = 0; i < 1000; i++) {\n                largeData.push(new Array(1000).fill(`memory_test_${i}`));\n            }\n            \n            const error = new Error('ãƒ¡ãƒ¢ãƒªåœ§è¿«çŠ¶æ…‹ã§ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆ');\n            error.name = 'MemoryPressureTestError';\n            \n            await errorHandler.handleError(error, 'ãƒ¡ãƒ¢ãƒªåœ§è¿«ãƒ†ã‚¹ãƒˆ', {\n                memoryObjects: largeData.length,\n                estimatedMemoryUsage: largeData.length * 1000 * 20 // rough estimate\n            });\n            \n            // Cleanup\n            largeData.length = 0;\n            \n            logTest('ãƒ¡ãƒ¢ãƒªåœ§è¿«ãƒ†ã‚¹ãƒˆå®Œäº†');\n        }\n        \n        async function testResponseTime() {\n            updateStatusDisplay('â±ï¸ å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const iterations = 50;\n            const responseTimes = [];\n            \n            for (let i = 0; i < iterations; i++) {\n                const startTime = performance.now();\n                \n                const error = new Error(`å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ #${i + 1}`);\n                error.name = 'ResponseTimeTestError';\n                \n                await errorHandler.handleError(error, 'å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ', {\n                    iteration: i + 1,\n                    targetResponseTime: 10 // 10ms target\n                });\n                \n                const responseTime = performance.now() - startTime;\n                responseTimes.push(responseTime);\n            }\n            \n            const avgResponseTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;\n            const maxResponseTime = Math.max(...responseTimes);\n            const minResponseTime = Math.min(...responseTimes);\n            \n            logTest(`å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆå®Œäº†: å¹³å‡ ${avgResponseTime.toFixed(2)}ms, æœ€å¤§ ${maxResponseTime.toFixed(2)}ms, æœ€å° ${minResponseTime.toFixed(2)}ms`);\n        }\n        \n        async function testRecoveryStrategies() {\n            updateStatusDisplay('ğŸ”§ å¾©æ—§æˆ¦ç•¥ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const testCases = [\n                { type: 'network', context: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯' },\n                { type: 'memory', context: 'ãƒ¡ãƒ¢ãƒªç®¡ç†' },\n                { type: 'ui', context: 'UIè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ' },\n                { type: 'validation', context: 'å…¥åŠ›æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ' }\n            ];\n            \n            for (const testCase of testCases) {\n                const error = new Error(`${testCase.type} recovery test`);\n                error.name = `${testCase.type}RecoveryTestError`;\n                \n                await errorHandler.handleError(error, testCase.context, {\n                    recoveryTest: true,\n                    expectedStrategy: testCase.type\n                });\n            }\n            \n            logTest('å¾©æ—§æˆ¦ç•¥ãƒ†ã‚¹ãƒˆå®Œäº†');\n        }\n        \n        // Philosophy Tests\n        async function testHexagramGuidance() {\n            updateStatusDisplay('â˜° æ˜“çµŒã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const hexagrams = [1, 2, 3, 5, 7, 11, 15, 30, 31, 32];\n            \n            for (const hexagram of hexagrams) {\n                const error = new Error(`æ˜“çµŒã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ - ç¬¬${hexagram}å¦`);\n                error.name = 'HexagramGuidanceTestError';\n                \n                await errorHandler.handleError(error, 'æ˜“çµŒã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ', {\n                    hexagram: hexagram,\n                    guidanceTest: true\n                });\n            }\n            \n            logTest('æ˜“çµŒã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Œäº†');\n        }\n        \n        async function testBunenjinPersonas() {\n            updateStatusDisplay('ğŸ‘¥ åˆ†äººæ€æƒ³ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const personas = ['analyticalSelf', 'intuitiveSelf', 'socialSelf'];\n            \n            for (const persona of personas) {\n                const error = new Error(`åˆ†äººæ€æƒ³ãƒ†ã‚¹ãƒˆ - ${persona}`);\n                error.name = 'BunenjinPersonaTestError';\n                \n                await errorHandler.handleError(error, `${persona}ãƒ†ã‚¹ãƒˆ`, {\n                    targetPersona: persona,\n                    personaTest: true\n                });\n            }\n            \n            logTest('åˆ†äººæ€æƒ³ãƒ†ã‚¹ãƒˆå®Œäº†');\n        }\n        \n        async function testTripleOSIntegration() {\n            updateStatusDisplay('ğŸ”º Triple OSçµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            const osTypes = ['engineOS', 'interfaceOS', 'safeModeOS'];\n            \n            for (const osType of osTypes) {\n                const error = new Error(`Triple OSçµ±åˆãƒ†ã‚¹ãƒˆ - ${osType}`);\n                error.name = 'TripleOSIntegrationTestError';\n                \n                await errorHandler.handleError(error, `${osType}çµ±åˆãƒ†ã‚¹ãƒˆ`, {\n                    targetOS: osType,\n                    integrationTest: true\n                });\n            }\n            \n            logTest('Triple OSçµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†');\n        }\n        \n        async function testPhilosophicalAlignment() {\n            updateStatusDisplay('âš–ï¸ å“²å­¦çš„èª¿å’Œåº¦ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'info');\n            \n            // Generate diverse errors to test philosophical balance\n            const errorTypes = [\n                { context: 'network', severity: 'medium' },\n                { context: 'memory', severity: 'high' },\n                { context: 'ui', severity: 'low' },\n                { context: 'validation', severity: 'medium' },\n                { context: 'philosophical', severity: 'high' }\n            ];\n            \n            for (const errorType of errorTypes) {\n                const error = new Error(`å“²å­¦çš„èª¿å’Œåº¦ãƒ†ã‚¹ãƒˆ - ${errorType.context}`);\n                error.name = 'PhilosophicalAlignmentTestError';\n                \n                await errorHandler.handleError(error, `${errorType.context}èª¿å’Œãƒ†ã‚¹ãƒˆ`, {\n                    severity: errorType.severity,\n                    alignmentTest: true\n                });\n            }\n            \n            const alignment = errorHandler.calculatePhilosophicalAlignment();\n            logTest(`å“²å­¦çš„èª¿å’Œåº¦ãƒ†ã‚¹ãƒˆå®Œäº†: ${alignment}%`);\n        }\n        \n        // System Management\n        function clearErrorHistory() {\n            if (errorHandler) {\n                errorHandler.errorHistory = [];\n                errorHandler.metrics.errorsProcessed = 0;\n                logTest('ã‚¨ãƒ©ãƒ¼å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');\n                updateMetrics();\n            }\n        }\n        \n        function optimizePerformance() {\n            if (errorHandler) {\n                errorHandler.triggerPerformanceOptimization();\n                logTest('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');\n            }\n        }\n        \n        function exportStatistics() {\n            if (errorHandler) {\n                const stats = errorHandler.getEnhancedStatistics();\n                const blob = new Blob([JSON.stringify(stats, null, 2)], { type: 'application/json' });\n                const url = URL.createObjectURL(blob);\n                \n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `haqei-error-stats-${new Date().toISOString().slice(0, 10)}.json`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                URL.revokeObjectURL(url);\n                \n                logTest('çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ');\n            }\n        }\n        \n        function resetSystem() {\n            if (confirm('ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {\n                location.reload();\n            }\n        }\n        \n        // Utility Functions\n        function updateMetrics() {\n            if (!errorHandler) return;\n            \n            try {\n                const stats = errorHandler.getEnhancedStatistics();\n                \n                document.getElementById('errors-processed').textContent = stats.metrics?.errorsProcessed || 0;\n                document.getElementById('avg-response-time').textContent = `${Math.round(stats.metrics?.averageResponseTime || 0)}ms`;\n                \n                if (performance.memory) {\n                    const memoryMB = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);\n                    document.getElementById('memory-usage').textContent = `${memoryMB}MB`;\n                } else {\n                    document.getElementById('memory-usage').textContent = 'N/A';\n                }\n                \n                document.getElementById('throughput').textContent = `${Math.round(stats.metrics?.throughput || 0)}/s`;\n                document.getElementById('philosophical-alignment').textContent = `${stats.philosophicalAlignment || 0}%`;\n                \n                const health = stats.systemHealth;\n                document.getElementById('system-health').textContent = health?.overall || 'ä¸æ˜';\n                \n            } catch (error) {\n                console.error('Metrics update failed:', error);\n            }\n        }\n        \n        function updateStatusDisplay(message, type = 'info') {\n            const statusText = document.getElementById('status-text');\n            if (statusText) {\n                statusText.textContent = message;\n                statusText.className = `status-${type}`;\n            }\n        }\n        \n        function logTest(message) {\n            testCounter++;\n            const timestamp = new Date().toLocaleTimeString();\n            const logEntry = `[${timestamp}] Test #${testCounter}: ${message}`;\n            \n            const metricsLog = document.getElementById('metrics-log');\n            if (metricsLog) {\n                metricsLog.innerHTML += logEntry + '\\n';\n                metricsLog.scrollTop = metricsLog.scrollHeight;\n            }\n            \n            console.log(logEntry);\n        }\n        \n        // Global error handling for testing\n        window.addEventListener('error', function(event) {\n            if (errorHandler) {\n                errorHandler.handleError(event.error, 'ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼', {\n                    filename: event.filename,\n                    lineno: event.lineno,\n                    colno: event.colno\n                });\n            }\n        });\n        \n        window.addEventListener('unhandledrejection', function(event) {\n            if (errorHandler) {\n                const error = event.reason instanceof Error ? event.reason : new Error(String(event.reason));\n                errorHandler.handleError(error, 'æœªå‡¦ç†ã®Promiseæ‹’å¦', {\n                    promise: event.promise\n                });\n            }\n        });\n    </script>\n</body>\n</html>"