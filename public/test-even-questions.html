<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å¶æ•°ç•ªè¨­å•è¡¨ç¤ºç¢ºèªãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: #f1f5f9;
        }
        .test-info {
            background: rgba(99, 102, 241, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #6366f1;
            border-radius: 8px;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
    </style>
</head>
<body>
    <h1>å¶æ•°ç•ªè¨­å•è¡¨ç¤ºç¢ºèªãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-info">
        <h3>ä¿®æ­£å†…å®¹</h3>
        <ol>
            <li>showCurrentQuestionãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ”¹å–„ï¼ˆç¾åœ¨ã®è¦ç´ ä»¥å¤–ã®ã¿éè¡¨ç¤ºï¼‰</li>
            <li>!importantã‚’ä½¿ç”¨ã—ã¦å¼·åˆ¶è¡¨ç¤º</li>
            <li>è¡¨ç¤ºå¤±æ•—æ™‚ã®ç·Šæ€¥CSSä¸Šæ›¸ãæ©Ÿèƒ½</li>
            <li>Web Componentå´ã®:hostã‚¹ã‚¿ã‚¤ãƒ«å¼·åŒ–</li>
        </ol>
    </div>
    
    <iframe src="os_analyzer.html" id="test-frame"></iframe>
    
    <div class="status" id="status">
        <h3>ãƒ†ã‚¹ãƒˆçŠ¶æ³</h3>
        <p>èª­ã¿è¾¼ã¿ä¸­...</p>
    </div>
    
    <script>
        const statusEl = document.getElementById('status');
        const frame = document.getElementById('test-frame');
        
        frame.onload = () => {
            setTimeout(() => {
                try {
                    const frameWindow = frame.contentWindow;
                    const frameDoc = frame.contentDocument;
                    
                    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
                    if (frameWindow.app && frameWindow.app.questionFlow) {
                        statusEl.innerHTML = `
                            <h3 class="success">âœ… ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–å®Œäº†</h3>
                            <p>OS AnalyzerãŒæ­£å¸¸ã«èµ·å‹•ã—ã¾ã—ãŸã€‚</p>
                            <p>ä»¥ä¸‹ã®æ‰‹é †ã§ãƒ†ã‚¹ãƒˆï¼š</p>
                            <ol>
                                <li>è¨­å•ã‚’é€²ã‚ã¦q2ï¼ˆå¶æ•°ç•ªï¼‰ã«åˆ°é”</li>
                                <li>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã€Œâœ… q2 successfully displayedã€ã‚’ç¢ºèª</li>
                                <li>q2ãŒå®Ÿéš›ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
                                <li>ã‚‚ã—è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€ŒğŸš¨ Applied emergency CSS overrideã€ãŒå‡ºåŠ›ã•ã‚Œã‚‹</li>
                            </ol>
                        `;
                        
                        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç›£è¦–
                        const originalLog = frameWindow.console.log;
                        const originalError = frameWindow.console.error;
                        
                        frameWindow.console.log = function(...args) {
                            originalLog.apply(frameWindow.console, args);
                            const msg = args.join(' ');
                            if (msg.includes('successfully displayed')) {
                                statusEl.innerHTML += `<p class="success">âœ… ${msg}</p>`;
                            }
                        };
                        
                        frameWindow.console.error = function(...args) {
                            originalError.apply(frameWindow.console, args);
                            const msg = args.join(' ');
                            if (msg.includes('CRITICAL')) {
                                statusEl.innerHTML += `<p class="error">âŒ ${msg}</p>`;
                            }
                        };
                        
                    } else {
                        statusEl.innerHTML = `
                            <h3 class="error">âŒ ã‚¨ãƒ©ãƒ¼</h3>
                            <p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
                        `;
                    }
                } catch (e) {
                    statusEl.innerHTML = `
                        <h3 class="error">âŒ ã‚¨ãƒ©ãƒ¼</h3>
                        <p>${e.message}</p>
                    `;
                }
            }, 3000);
        };
    </script>
</body>
</html>