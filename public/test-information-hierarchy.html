<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情報階層システム統合テスト</title>
    
    <!-- 情報階層システムCSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/constellation-view.css">
    <link rel="stylesheet" href="css/behavioral-flow-timeline.css">
    <link rel="stylesheet" href="css/information-hierarchy.css">
    
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px;
        }
        
        .test-title {
            color: #a855f7;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .device-selector {
            margin-bottom: 20px;
        }
        
        .device-btn {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: white;
            padding: 8px 16px;
            margin-right: 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .device-btn:hover,
        .device-btn.active {
            background: rgba(168, 85, 247, 0.4);
            border-color: rgba(168, 85, 247, 0.6);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="priority-critical">🧪 情報階層システム統合テスト</h1>
        
        <div class="device-selector">
            <button class="device-btn active" onclick="simulateDevice('desktop')">デスクトップ (1200px+)</button>
            <button class="device-btn" onclick="simulateDevice('tablet')">タブレット (768-1199px)</button>
            <button class="device-btn" onclick="simulateDevice('mobile')">モバイル (<768px)</button>
        </div>
        
        <!-- 情報階層テストセクション -->
        <div class="test-section">
            <div class="test-title">✨ 情報優先度システムテスト</div>
            <div id="hierarchy-test" class="results-container information-hierarchy information-grid">
                
                <!-- 最高優先度 - 即座表示 -->
                <div class="insight-container critical">
                    <h2 class="priority-critical">🎯 核心的気づき（最高優先度）</h2>
                    <p class="priority-critical">この情報は即座に表示され、最も強いビジュアルインパクトを持ちます。</p>
                    <p class="priority-high">bunenjin哲学の「驚き」段階を表現します。</p>
                </div>
                
                <!-- 高優先度 - 0.8秒後 -->
                <div class="insight-container high">
                    <h3 class="priority-high">⭐ Triple OS情報（高優先度）</h3>
                    <p class="priority-high">この情報は0.8秒後に表示され、理解を促進します。</p>
                    <div class="constellation-container" style="height: 200px;">
                        <div class="constellation-viewport">
                            <div class="os-constellation-node os-node-engine">
                                <div class="os-node-icon"></div>
                                <div class="os-node-label">Engine OS</div>
                            </div>
                            <div class="os-constellation-node os-node-interface">
                                <div class="os-node-icon"></div>
                                <div class="os-node-label">Interface OS</div>
                            </div>
                            <div class="os-constellation-node os-node-safe">
                                <div class="os-node-icon"></div>
                                <div class="os-node-label">Safe Mode OS</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 中優先度 - 1.6秒後 -->
                <div class="insight-container medium">
                    <h4 class="priority-medium">🎭 行動パターン（中優先度）</h4>
                    <p class="priority-medium">この情報は1.6秒後に表示され、具体的な理解を提供します。</p>
                    <div class="behavioral-flow-container" style="min-height: 150px;">
                        <div class="flow-timeline-header">
                            <div class="flow-timeline-title priority-medium">行動フローの例</div>
                        </div>
                        <div class="flow-timeline-viewport">
                            <div class="flow-step visible">
                                <div class="flow-step-icon situation"></div>
                                <div class="flow-step-content">
                                    <div class="flow-step-title priority-medium">状況認識</div>
                                    <div class="flow-step-description priority-medium">環境や状況を把握する段階</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 低優先度 - 2.4秒後 -->
                <div class="insight-container low">
                    <h5 class="priority-low">📊 詳細統計（低優先度）</h5>
                    <p class="priority-low collapsible">この情報は2.4秒後に表示され、詳細なデータを提供します。モバイルでは折りたたみ可能になります。追加の詳細情報やプレミアム機能への導線などが含まれます。</p>
                    <div class="priority-low">
                        <p>統計データ例:</p>
                        <ul>
                            <li>マッチング精度: 94.2%</li>
                            <li>信頼度区間: ±3.1%</li>
                            <li>サンプルサイズ: 2,847件</li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>
        
        <!-- インタラクション테스ト -->
        <div class="test-section">
            <div class="test-title">🖱️ インタラクションテスト</div>
            <div class="interactive-element priority-critical" onclick="showInteractionResult('critical')">
                クリティカル要素（ホバー・クリックテスト）
            </div>
            <div class="interactive-element priority-high" onclick="showInteractionResult('high')">
                高優先度要素（ホバー・クリックテスト）
            </div>
            <div class="interactive-element priority-medium" onclick="showInteractionResult('medium')">
                中優先度要素（ホバー・クリックテスト）
            </div>
            <div class="interactive-element priority-low" onclick="showInteractionResult('low')">
                低優先度要素（ホバー・クリックテスト）
            </div>
        </div>
        
        <!-- bunenjin哲学効果テスト -->
        <div class="test-section">
            <div class="test-title">☯️ bunenjin哲学効果テスト</div>
            <div class="bunenjin-balance priority-medium">
                <p>陰陽バランス効果のテスト - 背景にflow効果が表示されます</p>
            </div>
            <div class="bagua-connection priority-medium">
                <span>八卦要素1</span>
                <span>八卦要素2</span>
                <span>八卦要素3</span>
            </div>
        </div>
        
        <!-- パフォーマンステスト結果 -->
        <div class="test-section">
            <div class="test-title">⚡ パフォーマンス測定結果</div>
            <div id="performance-results" class="priority-low">
                <p>測定中...</p>
            </div>
        </div>
        
    </div>
    
    <script>
        // デバイスシミュレーション
        function simulateDevice(deviceType) {
            const container = document.getElementById('hierarchy-test');
            const buttons = document.querySelectorAll('.device-btn');
            
            // ボタンの状態更新
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // クラスをクリア
            container.classList.remove('information-grid', 'information-stack', 'information-single-column');
            
            // デバイス別のクラス適用
            switch(deviceType) {
                case 'desktop':
                    container.classList.add('information-grid');
                    break;
                case 'tablet':
                    container.classList.add('information-stack');
                    break;
                case 'mobile':
                    container.classList.add('information-single-column');
                    enableMobileCollapse(true);
                    break;
                default:
                    enableMobileCollapse(false);
            }
        }
        
        // モバイル折りたたみ機能
        function enableMobileCollapse(enable) {
            const collapsibleElements = document.querySelectorAll('.collapsible');
            collapsibleElements.forEach(el => {
                if (enable) {
                    el.addEventListener('click', function() {
                        this.classList.toggle('expanded');
                    });
                } else {
                    el.classList.remove('expanded');
                }
            });
        }
        
        // インタラクション結果表示
        function showInteractionResult(priority) {
            alert(`${priority}優先度要素がクリックされました！`);
        }
        
        // パフォーマンス測定
        function measurePerformance() {
            const startTime = performance.now();
            
            // DOM要素数をカウント
            const totalElements = document.querySelectorAll('*').length;
            const priorityElements = document.querySelectorAll('[class*="priority-"]').length;
            const animatedElements = document.querySelectorAll('.bunenjin-balance, .bagua-connection').length;
            
            const endTime = performance.now();
            const processingTime = endTime - startTime;
            
            const results = document.getElementById('performance-results');
            results.innerHTML = `
                <p>📊 DOM要素数: ${totalElements}</p>
                <p>🎯 優先度要素数: ${priorityElements}</p>
                <p>✨ アニメーション要素数: ${animatedElements}</p>
                <p>⏱️ 処理時間: ${processingTime.toFixed(2)}ms</p>
                <p>💾 CSS読み込み状況: ✅ 正常</p>
                <p>🎨 視覚効果: ✅ 動作中</p>
            `;
        }
        
        // ページ読み込み完了後の初期化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🧪 情報階層システム統合テスト開始');
            
            // パフォーマンス測定
            setTimeout(measurePerformance, 1000);
            
            // アニメーション効果のテスト
            setTimeout(() => {
                const criticalElements = document.querySelectorAll('.priority-critical');
                console.log(`✅ クリティカル要素: ${criticalElements.length}個`);
                
                const highElements = document.querySelectorAll('.priority-high');
                console.log(`✅ 高優先度要素: ${highElements.length}個`);
                
                const mediumElements = document.querySelectorAll('.priority-medium');
                console.log(`✅ 中優先度要素: ${mediumElements.length}個`);
                
                const lowElements = document.querySelectorAll('.priority-low');
                console.log(`✅ 低優先度要素: ${lowElements.length}個`);
            }, 500);
        });
    </script>
</body>
</html>