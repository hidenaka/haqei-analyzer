<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>デバッグ: 結果表示テスト</title>
    <style>
        /* CSS変数定義 - ダークモード問題修正版 */
        :root {
            --primary-900: #0f172a;
            --primary-800: #1e293b;
            --primary-700: #334155;
            --primary-600: #475569;
            --primary-500: #64748b;
            --primary-400: #94a3b8;
            --primary-300: #cbd5e1;
            --primary-200: #e2e8f0;
            --primary-100: #f1f5f9;
            --primary-50: #f8fafc;
            --accent-500: #6366f1;
            --accent-400: #8b5cf6;
        }

        /* ダークモード対応 - 完全版 */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary-900: #0a0a0a;
                --primary-800: #1a1a1a;
                --primary-700: #2a2a2a;
                --primary-600: #3a3a3a;
                --primary-500: #4a4a4a;
                --primary-400: #6a6a6a;
                --primary-300: #8a8a8a;
                --primary-200: #aaaaaa;
                --primary-100: #ffffff;  /* 修正: ダークモードでの白いテキスト */
                --primary-50: #f8f8f8;
            }
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-800);
            color: var(--primary-100);
        }

        /* テスト1: 基本表示 */
        .test-section {
            padding: 20px;
            margin: 20px;
            border: 2px solid var(--accent-500);
            background-color: var(--primary-700);
        }

        /* テスト2: results-container模擬 */
        #results-container-test {
            display: flex !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 40000 !important;
            background-color: var(--primary-800) !important;
            color: var(--primary-100) !important;
            flex-direction: column !important;
            justify-content: flex-start !important;
            align-items: center !important;
            overflow-y: auto !important;
            padding: 20px !important;
            box-sizing: border-box !important;
        }

        /* テスト3: ハードコード値版 */
        .hardcoded-test {
            background-color: #1e293b !important;
            color: #f1f5f9 !important;
            padding: 20px;
            margin: 20px;
            border: 2px solid #6366f1;
        }

        /* テスト4: 緊急視覚テスト再現 */
        .emergency-test {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 400px !important;
            height: 200px !important;
            background-color: red !important;
            color: white !important;
            border: 5px solid yellow !important;
            z-index: 99999 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 18px !important;
            font-weight: bold !important;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h1>テスト1: CSS変数を使用した基本表示</h1>
        <p>このテキストが見える場合、CSS変数は正常に動作しています。</p>
        <p>背景色: var(--primary-700)</p>
        <p>テキスト色: var(--primary-100)</p>
    </div>

    <div class="hardcoded-test">
        <h1>テスト2: ハードコード値での表示</h1>
        <p>このテキストが見える場合、ハードコード値は正常に動作しています。</p>
        <p>背景色: #1e293b</p>
        <p>テキスト色: #f1f5f9</p>
    </div>

    <div id="results-container-test" style="display: none;">
        <h1>テスト3: results-container模擬テスト</h1>
        <div style="background: var(--primary-700); padding: 20px; border-radius: 8px; margin: 20px;">
            <h2>分析結果</h2>
            <p>Engine OS: 地風升 (46)</p>
            <p>Interface OS: 天澤履 (10)</p>
            <p>SafeMode OS: 坤為地 (2)</p>
        </div>
        <button onclick="hideResultsTest()" style="background: var(--accent-500); color: white; padding: 10px 20px; border: none; border-radius: 4px; margin: 10px;">閉じる</button>
    </div>

    <div class="emergency-test" id="emergency-visual-test">
        <div style="text-align: center;">
            <div>🚨 緊急視覚テスト 🚨</div>
            <div style="margin-top: 10px;">この要素が見えますか？</div>
            <button onclick="hideEmergencyTest()" style="margin-top: 10px; padding: 5px 10px; background: white; color: black; border: none; border-radius: 4px;">はい、見えます</button>
        </div>
    </div>

    <script>
        function showResultsTest() {
            const container = document.getElementById('results-container-test');
            container.style.display = 'flex';
            console.log('Results container test displayed');
        }

        function hideResultsTest() {
            const container = document.getElementById('results-container-test');
            container.style.display = 'none';
            console.log('Results container test hidden');
        }

        function hideEmergencyTest() {
            const test = document.getElementById('emergency-visual-test');
            test.style.display = 'none';
            console.log('Emergency test confirmed visible');
            
            // 3秒後にresults-container-testを表示
            setTimeout(() => {
                showResultsTest();
            }, 1000);
        }

        // システム情報をログ出力
        console.log('🔍 システム情報:');
        console.log('- User Agent:', navigator.userAgent);
        console.log('- Screen resolution:', screen.width + 'x' + screen.height);
        console.log('- Device pixel ratio:', window.devicePixelRatio);
        console.log('- Viewport size:', window.innerWidth + 'x' + window.innerHeight);
        console.log('- Color scheme:', window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        // CSS変数の値を確認
        const rootStyles = getComputedStyle(document.documentElement);
        console.log('🎨 CSS変数の値:');
        console.log('- --primary-800:', rootStyles.getPropertyValue('--primary-800'));
        console.log('- --primary-100:', rootStyles.getPropertyValue('--primary-100'));
        console.log('- --accent-500:', rootStyles.getPropertyValue('--accent-500'));
    </script>
</body>
</html>