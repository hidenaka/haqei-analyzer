<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Loading Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .status {
        padding: 10px;
        margin: 5px 0;
        border-radius: 5px;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
      }
      .warning {
        background-color: #fff3cd;
        color: #856404;
      }
    </style>
  </head>
  <body>
    <h1>HaQei Analyzer - Loading Test</h1>
    <div id="status-container"></div>

    <script>
      function addStatus(message, type = "info") {
        const container = document.getElementById("status-container");
        const div = document.createElement("div");
        div.className = `status ${type}`;
        div.textContent = message;
        container.appendChild(div);
        console.log(`[${type.toUpperCase()}] ${message}`);
      }

      addStatus("テスト開始", "info");
    </script>

    <!-- データファイルのテスト -->
    <script>
      addStatus("データファイル読み込み開始...", "info");
    </script>

    <script
      src="../js/data/data_box.js"
      onload="addStatus('data_box.js 読み込み成功', 'success')"
      onerror="addStatus('data_box.js 読み込み失敗', 'error')"
    ></script>

    <script
      src="../js/data/questions.js"
      onload="addStatus('questions.js 読み込み成功', 'success')"
      onerror="addStatus('questions.js 読み込み失敗', 'error')"
    ></script>

    <script
      src="../js/data/vectors.js"
      onload="addStatus('vectors.js 読み込み成功', 'success')"
      onerror="addStatus('vectors.js 読み込み失敗', 'error')"
    ></script>

    <script>
      // データ確認
      setTimeout(() => {
        addStatus("データ確認中...", "info");

        if (typeof window.HAQEI_DATA !== "undefined") {
          addStatus("HAQEI_DATA: 利用可能", "success");
        } else {
          addStatus("HAQEI_DATA: 未定義", "error");
        }

        if (typeof window.WORLDVIEW_QUESTIONS !== "undefined") {
          addStatus(
            `WORLDVIEW_QUESTIONS: ${window.WORLDVIEW_QUESTIONS.length}問`,
            "success"
          );
        } else {
          addStatus("WORLDVIEW_QUESTIONS: 未定義", "error");
        }

        if (typeof window.H64_8D_VECTORS !== "undefined") {
          addStatus(
            `H64_8D_VECTORS: ${Object.keys(window.H64_8D_VECTORS).length}個`,
            "success"
          );
        } else {
          addStatus("H64_8D_VECTORS: 未定義", "error");
        }
      }, 100);
    </script>

    <!-- コアクラスのテスト -->
    <script>
      addStatus("コアクラス読み込み開始...", "info");
    </script>

    <script
      src="js/core/BaseComponent.js"
      onload="addStatus('BaseComponent.js 読み込み成功', 'success')"
      onerror="addStatus('BaseComponent.js 読み込み失敗', 'error')"
    ></script>

    <script
      src="js/core/DataManager.js"
      onload="addStatus('DataManager.js 読み込み成功', 'success')"
      onerror="addStatus('DataManager.js 読み込み失敗', 'error')"
    ></script>

    <script
      src="js/core/TripleOSEngine.js"
      onload="addStatus('TripleOSEngine.js 読み込み成功', 'success')"
      onerror="addStatus('TripleOSEngine.js 読み込み失敗', 'error')"
    ></script>

    <script>
      // クラス確認
      setTimeout(() => {
        addStatus("クラス確認中...", "info");

        if (typeof BaseComponent !== "undefined") {
          addStatus("BaseComponent: 利用可能", "success");
        } else {
          addStatus("BaseComponent: 未定義", "error");
        }

        if (typeof DataManager !== "undefined") {
          addStatus("DataManager: 利用可能", "success");
        } else {
          addStatus("DataManager: 未定義", "error");
        }

        if (typeof TripleOSEngine !== "undefined") {
          addStatus("TripleOSEngine: 利用可能", "success");
        } else {
          addStatus("TripleOSEngine: 未定義", "error");
        }
      }, 200);
    </script>

    <!-- コンポーネントのテスト -->
    <script>
      addStatus("コンポーネント読み込み開始...", "info");
    </script>

    <script
      src="js/components/WelcomeScreen.js"
      onload="addStatus('WelcomeScreen.js 読み込み成功', 'success')"
      onerror="addStatus('WelcomeScreen.js 読み込み失敗', 'error')"
    ></script>

    <script
      src="js/components/QuestionFlow.js"
      onload="addStatus('QuestionFlow.js 読み込み成功', 'success')"
      onerror="addStatus('QuestionFlow.js 読み込み失敗', 'error')"
    ></script>

    <script>
      // コンポーネント確認
      setTimeout(() => {
        addStatus("コンポーネント確認中...", "info");

        if (typeof WelcomeScreen !== "undefined") {
          addStatus("WelcomeScreen: 利用可能", "success");
        } else {
          addStatus("WelcomeScreen: 未定義", "error");
        }

        if (typeof QuestionFlow !== "undefined") {
          addStatus("QuestionFlow: 利用可能", "success");
        } else {
          addStatus("QuestionFlow: 未定義", "error");
        }

        addStatus("テスト完了", "info");
      }, 300);
    </script>

    <!-- 初期化テスト -->
    <script>
      setTimeout(() => {
        addStatus("初期化テスト開始...", "info");

        try {
          if (typeof DataManager !== "undefined") {
            const dataManager = new DataManager();
            addStatus("DataManager インスタンス作成成功", "success");
          } else {
            addStatus("DataManager が利用できません", "error");
          }
        } catch (error) {
          addStatus(`DataManager エラー: ${error.message}`, "error");
        }

        try {
          if (typeof WelcomeScreen !== "undefined") {
            const welcomeScreen = new WelcomeScreen(document.body);
            addStatus("WelcomeScreen インスタンス作成成功", "success");
          } else {
            addStatus("WelcomeScreen が利用できません", "error");
          }
        } catch (error) {
          addStatus(`WelcomeScreen エラー: ${error.message}`, "error");
        }

        addStatus("初期化テスト完了", "info");
      }, 500);
    </script>
  </body>
</html>
