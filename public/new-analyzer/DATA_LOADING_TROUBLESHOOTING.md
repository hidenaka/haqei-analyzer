# データ読み込みに関するトラブルシューティング

このドキュメントは、HaQeiアナライザーのデータ読み込みに関する一般的な問題とその解決策をまとめたものです。

## 1. データが読み込まれない、またはアナライザーが開始しない

**症状:**
- ローディング画面が終わらない。
- 「データを読み込んでいます...」というメッセージから進まない。
- コンソールに `DataManager` や `HAQEI_DATA` に関するエラーが表示される。

**原因と解決策:**

*   **ネットワーク接続の問題:**
    *   **確認:** インターネット接続が安定しているか確認してください。
    *   **解決策:** ページを再読み込みしてください。可能であれば、別のネットワーク（Wi-Fi、モバイルデータなど）で試してください。

*   **スクリプトの読み込み失敗:**
    *   **確認:** ブラウザのデベロッパーツール（F12キーで開く）の「コンソール」タブに、`Failed to load resource` や `net::ERR_` で始まるエラーがないか確認してください。
    *   **解決策:**
        1.  **ページを強制的に再読み込みする:** `Ctrl + Shift + R` (Windows/Linux) または `Cmd + Shift + R` (Mac) を押して、キャッシュを無視してページを再読み込みします。
        2.  **ブラウザのキャッシュをクリアする:** ブラウザの設定からキャッシュを削除してみてください。
        3.  **広告ブロッカーや拡張機能の無効化:** 一部のブラウザ拡張機能がスクリプトの読み込みを妨げることがあります。これらを一時的に無効にして、問題が解決するか確認してください。

*   **データの欠損または破損:**
    *   **確認:** コンソールに `HAQEI_DATA is not defined` や `validateDataStructure` に関するエラーが表示されている場合、データファイル自体に問題がある可能性があります。
    *   **解決策:** この問題は、通常、開発者側の修正が必要です。問題が発生した場合は、管理者に報告してください。

## 2. 「データ形式に問題があります」というエラーが表示される

**症状:**
- アプリケーションの初期化中にエラーメッセージが表示される。
- コンソールに `validateDataStructure` や `transformData` に関するエラーが記録されている。

**原因と解決策:**

*   **データファイルの形式が古い、または破損している:**
    *   **解決策:** このエラーは、データファイル（`data_box.js`など）の内容が期待される形式と異なっていることを示します。開発者が修正する必要がありますので、管理者に報告してください。

## 3. 特定のデータ（例：OSマニュアル、卦の説明）が表示されない

**症状:**
- アナライザーは動作するが、一部の情報が欠けている。
- 結果表示画面で、特定の項目が「データなし」または空欄になる。

**原因と解決策:**

*   **部分的なデータ読み込み:**
    *   **確認:** コンソールに `不足データ検出` や `部分的なデータで続行します` といった警告メッセージがないか確認してください。
    *   **解決策:** ネットワークが不安定な場合に発生することがあります。安定したネットワーク環境でページを再読み込みしてください。問題が解決しない場合は、管理者に報告してください。

## 開発者向けのデバッグ情報

1.  **デバッグモードの有効化:**
    *   URLの末尾に `?debug=true` を追加すると、`DataManager` が詳細なデバッグログをコンソールに出力するようになります。
    *   例: `http://localhost:8788/new-analyzer/analyzer.html?debug=true`

2.  **ユニットテストと統合テストの実行:**
    *   `datamanager-unit-test.html` を開くと、`DataManager` の単体テストを実行できます。
    *   `comprehensive-integration-test.html` を開くと、システム全体の統合テストを実行でき、データ読み込み、パフォーマンス、機能の回帰などを包括的にチェックできます。

3.  **`DataManager` のログオブジェクトの確認:**
    *   コンソールで `window.dataManager.getLoadingLogs()` を実行すると、読み込み処理中に発生したエラー、警告、情報のログをオブジェクトとして取得できます。
