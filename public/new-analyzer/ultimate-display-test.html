<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>究極表示テスト</title>
    <style>
        /* analyzer.htmlと同じCSS読み込み */
        @import url("css/main.css");
        @import url("css/components.css");
        
        /* 追加テスト用スタイル */
        .test-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 999999 !important;
            background: rgba(255, 0, 0, 0.5) !important;
            color: white !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 24px !important;
            font-weight: bold !important;
        }
    </style>
</head>
<body>
    <!-- analyzer.htmlと同じ構造 -->
    <div id="app" class="app-container">
        <section id="results-container" class="screen-container visible" style="display: flex !important; position: fixed !important; top: 0 !important; left: 0 !important; width: 100vw !important; height: 100vh !important; z-index: 30000 !important; background-color: #1e293b !important; color: #f1f5f9 !important; opacity: 1 !important; visibility: visible !important; flex-direction: column !important; justify-content: flex-start !important; align-items: center !important; overflow-y: auto !important; padding: 20px !important; box-sizing: border-box !important;">
            
            <div class="results-view-final">
                <section class="summary-hero">
                    <div class="hero-text">
                        <h1 class="archetype-title">地風升の人</h1>
                        <p class="archetype-catchphrase">地道な努力で、着実に成長できる人</p>
                    </div>
                    <div class="chart-container">
                        <div style="width: 280px; height: 280px; background: rgba(0,0,0,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.9); font-size: 14px; text-align: center; padding: 20px;">
                            <svg width="280" height="280" viewBox="0 0 280 280">
                                <circle cx="140" cy="140" r="100" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                                <circle cx="140" cy="140" r="80" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                                <circle cx="140" cy="140" r="60" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                                <circle cx="140" cy="140" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                                <circle cx="140" cy="140" r="20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
                                <text x="140" y="145" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="14" font-weight="bold">
                                    人格プロファイル
                                </text>
                            </svg>
                        </div>
                    </div>
                </section>

                <section class="os-cards-section">
                    <h2 class="section-title">あなたの3層人格OS</h2>
                    <div class="os-cards-container">
                        <div class="os-card" data-os-type="engine">
                            <div class="os-card-header">
                                <div class="os-icon">🔧</div>
                                <div class="os-label-group"><h3>エンジンOS</h3><p>核となる価値観と動機</p></div>
                                <div class="os-score-group"><div class="os-name">地風升</div><div class="os-score">85%</div></div>
                                <span class="expand-icon">+</span>
                            </div>
                            <div class="os-card-body"><h4>潜在的な強み</h4><ul><li>着実な成長能力</li></ul><h4>成長の課題</h4><ul><li>変化への適応</li></ul></div>
                        </div>
                    </div>
                </section>
            </div>
            
        </section>
    </div>
    
    <!-- 赤いオーバーレイテスト -->
    <div id="test-overlay" class="test-overlay" style="display: none;">
        🚨 このテストオーバーレイが見えますか？ 🚨
    </div>
    
    <script>
        console.log('🔬 究極表示テスト開始');
        
        // results-containerの詳細状態確認
        const resultsContainer = document.getElementById('results-container');
        console.log('📊 results-container詳細状態:', {
            exists: !!resultsContainer,
            display: resultsContainer ? getComputedStyle(resultsContainer).display : 'N/A',
            position: resultsContainer ? getComputedStyle(resultsContainer).position : 'N/A',
            zIndex: resultsContainer ? getComputedStyle(resultsContainer).zIndex : 'N/A',
            opacity: resultsContainer ? getComputedStyle(resultsContainer).opacity : 'N/A',
            visibility: resultsContainer ? getComputedStyle(resultsContainer).visibility : 'N/A',
            backgroundColor: resultsContainer ? getComputedStyle(resultsContainer).backgroundColor : 'N/A',
            color: resultsContainer ? getComputedStyle(resultsContainer).color : 'N/A',
            width: resultsContainer ? getComputedStyle(resultsContainer).width : 'N/A',
            height: resultsContainer ? getComputedStyle(resultsContainer).height : 'N/A',
            top: resultsContainer ? getComputedStyle(resultsContainer).top : 'N/A',
            left: resultsContainer ? getComputedStyle(resultsContainer).left : 'N/A',
            classes: resultsContainer ? Array.from(resultsContainer.classList) : [],
            htmlLength: resultsContainer ? resultsContainer.innerHTML.length : 0
        });
        
        // app-containerの状態確認
        const appContainer = document.getElementById('app');
        console.log('📱 app-container状態:', {
            exists: !!appContainer,
            display: appContainer ? getComputedStyle(appContainer).display : 'N/A',
            position: appContainer ? getComputedStyle(appContainer).position : 'N/A',
            zIndex: appContainer ? getComputedStyle(appContainer).zIndex : 'N/A',
            opacity: appContainer ? getComputedStyle(appContainer).opacity : 'N/A',
            overflow: appContainer ? getComputedStyle(appContainer).overflow : 'N/A'
        });
        
        // body要素の状態確認
        console.log('🌐 body状態:', {
            display: getComputedStyle(document.body).display,
            position: getComputedStyle(document.body).position,
            overflow: getComputedStyle(document.body).overflow,
            backgroundColor: getComputedStyle(document.body).backgroundColor,
            color: getComputedStyle(document.body).color
        });
        
        // 3秒後に赤いオーバーレイテスト
        setTimeout(() => {
            const overlay = document.getElementById('test-overlay');
            overlay.style.display = 'flex';
            console.log('🔴 赤いオーバーレイ表示開始');
            
            setTimeout(() => {
                const overlayVisible = confirm('赤いオーバーレイ（このテストオーバーレイが見えますか？）が表示されていますか？');
                console.log('🔴 オーバーレイテスト結果:', overlayVisible);
                
                overlay.style.display = 'none';
                
                setTimeout(() => {
                    const resultsVisible = confirm('その下に「地風升の人」というタイトルと人格OSカードが表示されていますか？');
                    console.log('📊 結果画面テスト結果:', resultsVisible);
                    
                    if (overlayVisible && resultsVisible) {
                        alert('✅ 表示は正常です。analyzer.htmlの問題は別の原因です。');
                    } else if (overlayVisible && !resultsVisible) {
                        alert('⚠️ オーバーレイは見えるが結果画面が見えない = CSS構造問題');
                    } else if (!overlayVisible && !resultsVisible) {
                        alert('❌ 両方見えない = ブラウザ・ハードウェアレベル問題');
                    } else {
                        alert('🤔 予期しない結果 - より詳細な調査が必要');
                    }
                }, 1000);
            }, 3000);
        }, 2000);
        
        // CSSルールの衝突チェック
        console.log('🎨 CSSルール衝突チェック:');
        const allStyleSheets = Array.from(document.styleSheets);
        console.log('- 読み込まれたスタイルシート数:', allStyleSheets.length);
        allStyleSheets.forEach((sheet, index) => {
            try {
                console.log(`- スタイルシート ${index}:`, sheet.href || 'inline', 'ルール数:', sheet.cssRules?.length || 'アクセス不可');
            } catch (e) {
                console.log(`- スタイルシート ${index}: CORSエラーまたはアクセス制限`);
            }
        });
    </script>
</body>
</html>