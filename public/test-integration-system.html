<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAQEIçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ - åŒ…æ‹¬çš„æ¤œè¨¼</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 30px 0;
            padding: 25px;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            background: #f8fafc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        
        .test-section h2 {
            color: #2d3748;
            border-bottom: 3px solid #4299e1;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .test-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        button {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(66, 153, 225, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(66, 153, 225, 0.4);
        }
        
        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .test-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .test-input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        
        .results {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .success { color: #68d391; }
        .error { color: #fc8181; }
        .warning { color: #f6e05e; }
        .info { color: #63b3ed; }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #4299e1;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #718096;
            font-size: 14px;
        }
        
        .progress-bar {
            background: #e2e8f0;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4299e1, #3182ce);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ready { background: #68d391; }
        .status-running { background: #f6e05e; animation: pulse 1s infinite; }
        .status-error { background: #fc8181; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .test-scenario {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #4299e1;
        }
        
        .bunenjin-integration {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .philosophy-note {
            font-style: italic;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŸ HAQEIçµ±åˆã‚·ã‚¹ãƒ†ãƒ åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ</h1>
        
        <!-- ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ– -->
        <div class="test-section">
            <h2>ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ãƒ»å¥å…¨æ€§ç¢ºèª</h2>
            <div class="test-controls">
                <button onclick="initializeSystem()">ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–</button>
                <button onclick="checkSystemHealth()">å¥å…¨æ€§ç¢ºèª</button>
                <button onclick="runDiagnostics()">è¨ºæ–­å®Ÿè¡Œ</button>
            </div>
            <div id="system-status" class="results">ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å¾…ã¡...</div>
        </div>
        
        <!-- çµ±åˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ¯ çµ±åˆæ©Ÿèƒ½ç²¾åº¦ãƒ†ã‚¹ãƒˆ</h2>
            <textarea 
                id="user-input" 
                class="test-input" 
                placeholder="æ‚©ã¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šä»•äº‹ã§ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã€‚ã©ã†ã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿï¼‰"
                rows="3">ä»•äº‹ã§ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã€‚æ˜æ—¥ã¾ã§ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Œæˆã•ã›ãªã‘ã‚Œã°ãªã‚‰ãšã€ä¸å®‰ã§çœ ã‚Œã¾ã›ã‚“ã€‚</textarea>
            
            <div class="test-controls">
                <button onclick="testIntegratedAnalysis()">çµ±åˆåˆ†æå®Ÿè¡Œ</button>
                <button onclick="testAccuracy()">ç²¾åº¦æ¤œè¨¼</button>
                <button onclick="testPatternCalculation()">7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼</button>
                <button onclick="testMetaphorQuality()">ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼å“è³ªæ¤œè¨¼</button>
            </div>
            
            <div id="integration-results" class="results">çµ±åˆãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
        
        <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»é€Ÿåº¦ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button onclick="testResponseTime()">å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testConcurrentExecution()">åŒæ™‚å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testMemoryUsage()">ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testCacheEfficiency()">ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="response-time">--</div>
                    <div class="metric-label">å¹³å‡å¿œç­”æ™‚é–“ (ms)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="response-time-progress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value" id="success-rate">--</div>
                    <div class="metric-label">æˆåŠŸç‡ (%)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="success-rate-progress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value" id="cache-hit-rate">--</div>
                    <div class="metric-label">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ (%)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="cache-progress" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value" id="memory-usage">--</div>
                    <div class="metric-label">ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ (MB)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="memory-progress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <div id="performance-results" class="results">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
        
        <!-- ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h2>ğŸ› ï¸ ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button onclick="testErrorHandling()">ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testFallbackScenarios()">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testEdgeCases()">ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testComponentFailures()">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div id="error-handling-results" class="results">ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
        
        <!-- bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆ -->
        <div class="bunenjin-integration">
            <h2>ğŸ§˜ bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-controls">
                <button onclick="testBunenjinIntegration()">å“²å­¦çµ±åˆç¢ºèª</button>
                <button onclick="testMultipleViews()">è¤‡æ•°è¦–ç‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testParadoxHandling()">çŸ›ç›¾è¨±å®¹ãƒ†ã‚¹ãƒˆ</button>
                <button onclick="testTripleOSIntegration()">Triple OSçµ±åˆãƒ†ã‚¹ãƒˆ</button>
            </div>
            
            <div class="philosophy-note">
                bunenjinå“²å­¦ï¼šè¤‡æ•°ã®è¦–ç‚¹ã‚’åŒæ™‚ã«ä¿æŒã—ã€çŸ›ç›¾ã™ã‚‹è§£é‡ˆã‚‚å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šè±Šã‹ãªç†è§£ã‚’å¾—ã‚‹
            </div>
            
            <div id="bunenjin-results" class="results">bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
        
        <!-- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ -->
        <div class="test-section">
            <h2>ğŸ† åŒ…æ‹¬çš„çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</h2>
            <div class="test-controls">
                <button onclick="runComprehensiveTests()" style="background: linear-gradient(135deg, #38a169, #2f855a); font-size: 16px; padding: 15px 30px;">
                    å…¨ä½“çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                </button>
                <button onclick="generateTestReport()">ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
                <button onclick="clearResults()">çµæœã‚¯ãƒªã‚¢</button>
            </div>
            
            <div class="test-scenario">
                <strong>åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:</strong>
                <ol>
                    <li>ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã¨å¥å…¨æ€§ç¢ºèª</li>
                    <li>åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆæ‚©ã¿åˆ†é¡ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—ãƒ»ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”Ÿæˆï¼‰</li>
                    <li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆå¿œç­”æ™‚é–“ãƒ»åŒæ™‚å®Ÿè¡Œãƒ»ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ï¼‰</li>
                    <li>ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</li>
                    <li>ç²¾åº¦ãƒ»å“è³ªãƒ†ã‚¹ãƒˆï¼ˆå„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆç²¾åº¦ï¼‰</li>
                    <li>bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆ</li>
                    <li>ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé€£æºï¼‰</li>
                </ol>
            </div>
            
            <div id="comprehensive-results" class="results">åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
    </div>

    <!-- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆèª­ã¿è¾¼ã¿ -->
    <script src="js/core/ConcernClassifier.js"></script>
    <script src="js/core/AdaptiveDisplayManager.js"></script>
    <script src="js/core/AdaptiveIChingEngine.js"></script>
    <script src="js/pages/future-simulator/ComprehensiveTransformationPatterns.js"></script>
    <script src="js/pages/future-simulator/EnhancedMetaphorEngine.js"></script>
    <script src="js/core/IntegratedTransformationOrchestrator.js"></script>
    <script src="js/core/IntegrationTestSuite.js"></script>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let orchestrator = null;
        let testSuite = null;
        let testResults = {};

        // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
        async function initializeSystem() {
            const statusElement = document.getElementById('system-status');
            statusElement.innerHTML = '<span class="info">ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...</span>';
            
            try {
                // ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼åˆæœŸåŒ–
                orchestrator = new IntegratedTransformationOrchestrator();
                
                // ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆåˆæœŸåŒ–
                testSuite = new IntegrationTestSuite();
                
                // åˆæœŸåŒ–å®Œäº†ã¾ã§å¾…æ©Ÿ
                let attempts = 0;
                while (orchestrator.systemStatus === 'initializing' && attempts < 100) {
                    await sleep(50);
                    attempts++;
                }
                
                const systemHealth = orchestrator.systemHealth;
                
                statusElement.innerHTML = `
                    <span class="success">âœ… ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†</span><br>
                    <span class="info">ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹: ${orchestrator.systemStatus}</span><br>
                    <span class="info">ğŸ”§ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçŠ¶æ…‹:</span><br>
                    ${Object.entries(systemHealth).map(([component, status]) => 
                        `  - ${component}: <span class="${status === true ? 'success' : status === 'fallback' ? 'warning' : 'error'}">${status}</span>`
                    ).join('<br>')}
                `;
                
            } catch (error) {
                statusElement.innerHTML = `<span class="error">âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ç¢ºèª
        async function checkSystemHealth() {
            const statusElement = document.getElementById('system-status');
            
            if (!orchestrator) {
                statusElement.innerHTML = '<span class="warning">âš ï¸ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            try {
                const diagnostics = await orchestrator.runSystemDiagnostics();
                
                statusElement.innerHTML = `
                    <span class="success">ğŸ” ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­çµæœ</span><br>
                    <span class="info">ç·åˆå¥å…¨æ€§: <span class="${diagnostics.overallHealth === 'healthy' ? 'success' : diagnostics.overallHealth === 'degraded' ? 'warning' : 'error'}">${diagnostics.overallHealth}</span></span><br>
                    <span class="info">å¹³å‡å¿œç­”æ™‚é–“: ${diagnostics.performance?.averageResponseTime?.toFixed(2) || 'N/A'}ms</span><br>
                    <span class="info">æˆåŠŸç‡: ${(diagnostics.performance?.successRate * 100)?.toFixed(1) || 'N/A'}%</span><br>
                    <span class="info">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡: ${(diagnostics.performance?.cacheHitRate * 100)?.toFixed(1) || 'N/A'}%</span><br>
                    ${diagnostics.recommendations?.length > 0 ? 
                        `<span class="warning">ğŸ“‹ æ¨å¥¨äº‹é …:</span><br>${diagnostics.recommendations.map(r => `  - ${r}`).join('<br>')}` : 
                        '<span class="success">ğŸ“‹ æ¨å¥¨äº‹é …: ãªã—ï¼ˆè‰¯å¥½ï¼‰</span>'
                    }
                `;
                
            } catch (error) {
                statusElement.innerHTML = `<span class="error">âŒ è¨ºæ–­ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // è¨ºæ–­å®Ÿè¡Œ
        async function runDiagnostics() {
            await checkSystemHealth();
        }

        // çµ±åˆåˆ†æãƒ†ã‚¹ãƒˆ
        async function testIntegratedAnalysis() {
            const resultsElement = document.getElementById('integration-results');
            const userInput = document.getElementById('user-input').value.trim();
            
            if (!userInput) {
                resultsElement.innerHTML = '<span class="warning">âš ï¸ å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>';
                return;
            }
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ çµ±åˆåˆ†æå®Ÿè¡Œä¸­...</span>';
            
            try {
                const startTime = performance.now();
                
                const testInput = {
                    userInput: userInput,
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    emotionalContext: { intensity: 0.7, primary: 'anxiety' },
                    contextualAnalysis: { confidence: 0.8 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                const responseTime = performance.now() - startTime;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… çµ±åˆåˆ†æå®Œäº† (${responseTime.toFixed(2)}ms)</span><br><br>
                    <span class="info">ğŸ“Š åˆ†æçµæœ:</span><br>
                    <span class="info">æ‚©ã¿ã®ç¨®é¡: ${result.concernAnalysis?.nature?.primary || result.contextAnalysis?.concernType || 'N/A'}</span><br>
                    <span class="info">ç·Šæ€¥åº¦: ${result.concernAnalysis?.urgency?.level || result.contextAnalysis?.urgencyLevel || 'N/A'}</span><br>
                    <span class="info">ä¿¡é ¼åº¦: ${(result.qualityMetrics?.overallScore || result.qualityAssessment?.overallScore || 0.7).toFixed(2)}</span><br><br>
                    
                    <span class="info">ğŸ­ ä¸»è¦ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼:</span><br>
                    <span class="success">${result.primaryMetaphor?.essence || result.integratedContent?.primaryInsight?.essence || 'ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”Ÿæˆä¸­...'}</span><br><br>
                    
                    <span class="info">ğŸ§˜ bunenjinçµ±åˆ:</span><br>
                    <span class="info">è¤‡æ•°è¦–ç‚¹æ•°: ${result.bunenjinIntegration?.multipleViews?.perspectives?.length || result.integratedContent?.bunenjinWisdom?.multipleViews?.perspectives?.length || 0}</span><br>
                    <span class="info">Triple OSçµ±åˆ: ${result.bunenjinIntegration?.tripleOSIntegration ? 'âœ…' : result.integratedContent?.bunenjinWisdom?.tripleOSIntegration ? 'âœ…' : 'âŒ'}</span><br><br>
                    
                    <span class="info">âš¡ ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½:</span><br>
                    <span class="success">å¿œç­”æ™‚é–“: ${responseTime.toFixed(2)}ms (ç›®æ¨™: 1000msä»¥å†…)</span><br>
                    <span class="${responseTime <= 1000 ? 'success' : 'warning'}">æ€§èƒ½è©•ä¾¡: ${responseTime <= 1000 ? 'A (å„ªç§€)' : responseTime <= 1500 ? 'B (è‰¯å¥½)' : 'C (è¦æ”¹å–„)'}</span>
                `;
                
                // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                updateMetric('response-time', responseTime.toFixed(0), (1000 - Math.min(responseTime, 1000)) / 1000 * 100);
                updateMetric('success-rate', '100', 100);
                
            } catch (error) {
                const responseTime = performance.now() - startTime;
                resultsElement.innerHTML = `
                    <span class="error">âŒ çµ±åˆåˆ†æã‚¨ãƒ©ãƒ¼ (${responseTime.toFixed(2)}ms)</span><br>
                    <span class="error">ã‚¨ãƒ©ãƒ¼è©³ç´°: ${error.message}</span><br>
                    <span class="warning">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</span>
                `;
                
                updateMetric('success-rate', '0', 0);
            }
        }

        // ç²¾åº¦æ¤œè¨¼ãƒ†ã‚¹ãƒˆ
        async function testAccuracy() {
            if (!testSuite) {
                document.getElementById('integration-results').innerHTML = '<span class="error">âŒ ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            const resultsElement = document.getElementById('integration-results');
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ç²¾åº¦æ¤œè¨¼å®Ÿè¡Œä¸­...</span>';
            
            try {
                // ç²¾åº¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
                await testSuite.runAccuracyTests();
                
                const accuracyResults = testSuite.testResults.testSuites.Accuracy;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ç²¾åº¦æ¤œè¨¼å®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ç²¾åº¦ãƒ†ã‚¹ãƒˆçµæœ:</span><br>
                    <span class="info">å®Ÿè¡Œãƒ†ã‚¹ãƒˆæ•°: ${accuracyResults?.tests?.length || 0}</span><br>
                    <span class="info">æˆåŠŸ: ${accuracyResults?.passed || 0}</span><br>
                    <span class="info">å¤±æ•—: ${accuracyResults?.failed || 0}</span><br>
                    <span class="success">æˆåŠŸç‡: ${accuracyResults ? (accuracyResults.passed / (accuracyResults.passed + accuracyResults.failed) * 100).toFixed(1) : 0}%</span><br><br>
                    
                    <span class="info">ğŸ¯ å“è³ªåŸºæº–é”æˆçŠ¶æ³:</span><br>
                    <span class="info">æ‚©ã¿åˆ†é¡ç²¾åº¦: ${accuracyResults?.passed >= 1 ? 'âœ… é”æˆ' : 'âŒ è¦æ”¹å–„'}</span><br>
                    <span class="info">ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—ç²¾åº¦: ${accuracyResults?.passed >= 2 ? 'âœ… é”æˆ' : 'âŒ è¦æ”¹å–„'}</span><br>
                    <span class="info">ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼å“è³ª: ${accuracyResults?.passed >= 3 ? 'âœ… é”æˆ' : 'âŒ è¦æ”¹å–„'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ç²¾åº¦æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // 7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼
        async function testPatternCalculation() {
            const resultsElement = document.getElementById('integration-results');
            
            if (!orchestrator || !orchestrator.components.patternEngine) {
                resultsElement.innerHTML = '<span class="error">âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ 7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼ä¸­...</span>';
            
            try {
                const testInput = {
                    hexagram: 1,
                    changingLines: [1, 4],
                    userType: 'free',
                    context: { urgency: 'high', importance: 'high' }
                };
                
                const patternResult = await orchestrator.components.patternEngine.calculateAllPatterns(testInput);
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… 7å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼å®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ãƒ‘ã‚¿ãƒ¼ãƒ³è¨ˆç®—çµæœ:</span><br>
                    <span class="info">è¨ˆç®—ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³æ•°: ${patternResult.patterns?.length || 0}</span><br>
                    <span class="info">è¡¨ç¤ºå¯èƒ½ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°: ${patternResult.patterns?.filter(p => p.displayInFree)?.length || 0}</span><br>
                    <span class="info">éš ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³æ•°: ${(patternResult.patterns?.length || 0) - (patternResult.patterns?.filter(p => p.displayInFree)?.length || 0)}</span><br><br>
                    
                    <span class="info">ğŸ¯ ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°:</span><br>
                    ${patternResult.patterns?.map(p => 
                        `<span class="${p.displayInFree ? 'success' : 'warning'}">- ${p.name} (${p.pattern}): ${p.displayInFree ? 'è¡¨ç¤º' : 'éè¡¨ç¤º'}</span>`
                    ).join('<br>') || '<span class="warning">ãƒ‘ã‚¿ãƒ¼ãƒ³æƒ…å ±ãªã—</span>'}<br><br>
                    
                    <span class="info">âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:</span><br>
                    <span class="success">ä¿¡é ¼åº¦: ${(patternResult.confidence || 0.8).toFixed(2)}</span><br>
                    <span class="info">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ${patternResult.fallback ? 'âŒ ä½¿ç”¨' : 'âœ… æœªä½¿ç”¨'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼å“è³ªæ¤œè¨¼
        async function testMetaphorQuality() {
            const resultsElement = document.getElementById('integration-results');
            
            if (!orchestrator || !orchestrator.components.metaphorEngine) {
                resultsElement.innerHTML = '<span class="error">âŒ ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼å“è³ªæ¤œè¨¼ä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'ä»•äº‹ã§ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã¦ã„ã¾ã™',
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    contextType: 'work',
                    hexagram: 1,
                    changingLines: [1],
                    patterns: []
                };
                
                const metaphorResult = await orchestrator.components.metaphorEngine.generateEnhancedMetaphor(testInput);
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼å“è³ªæ¤œè¨¼å®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼ç”Ÿæˆçµæœ:</span><br>
                    <span class="success">ä¸»è¦ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼: "${metaphorResult.primaryMetaphor?.essence || 'N/A'}"</span><br>
                    <span class="info">å“è³ªã‚°ãƒ¬ãƒ¼ãƒ‰: ${metaphorResult.qualityMetrics?.overallGrade || 'N/A'}</span><br>
                    <span class="info">æ´å¯Ÿæ·±åº¦: ${(metaphorResult.qualityMetrics?.insightDepth || 0).toFixed(2)}</span><br>
                    <span class="info">ç‹¬å‰µæ€§: ${(metaphorResult.qualityMetrics?.originalityScore || 0).toFixed(2)}</span><br>
                    <span class="info">æ„Ÿæƒ…å…±é³´: ${(metaphorResult.qualityMetrics?.emotionalResonance || 0).toFixed(2)}</span><br><br>
                    
                    <span class="info">ğŸ­ åˆ©ç”¨å¯èƒ½ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼:</span><br>
                    ${Object.keys(metaphorResult.availableMetaphors || {}).map(key => 
                        `<span class="success">- ${key}: ç”Ÿæˆæ¸ˆã¿</span>`
                    ).join('<br>') || '<span class="warning">ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼æƒ…å ±ãªã—</span>'}<br><br>
                    
                    <span class="info">ğŸ’ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½:</span><br>
                    <span class="info">éš ã•ã‚ŒãŸãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼æ•°: ${Object.keys(metaphorResult.premiumMetaphors || {}).length}</span><br>
                    <span class="warning">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ${metaphorResult.fallback ? 'âŒ ä½¿ç”¨' : 'âœ… æœªä½¿ç”¨'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆ
        async function testResponseTime() {
            const resultsElement = document.getElementById('performance-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'ä»•äº‹ã®ã‚¹ãƒˆãƒ¬ã‚¹ã§å›°ã£ã¦ã„ã¾ã™',
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    emotionalContext: { intensity: 0.6, primary: 'stress' },
                    contextualAnalysis: { confidence: 0.7 }
                };
                
                const iterations = 5;
                const responseTimes = [];
                
                for (let i = 0; i < iterations; i++) {
                    const startTime = performance.now();
                    await orchestrator.executeIntegratedTransformation(testInput);
                    const responseTime = performance.now() - startTime;
                    responseTimes.push(responseTime);
                    
                    resultsElement.innerHTML = `<span class="info">ğŸ”„ å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­... (${i + 1}/${iterations})</span>`;
                }
                
                const averageTime = responseTimes.reduce((sum, time) => sum + time, 0) / iterations;
                const maxTime = Math.max(...responseTimes);
                const minTime = Math.min(...responseTimes);
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š å¿œç­”æ™‚é–“çµ±è¨ˆ (${iterations}å›å®Ÿè¡Œ):</span><br>
                    <span class="success">å¹³å‡æ™‚é–“: ${averageTime.toFixed(2)}ms</span><br>
                    <span class="info">æœ€å¤§æ™‚é–“: ${maxTime.toFixed(2)}ms</span><br>
                    <span class="info">æœ€å°æ™‚é–“: ${minTime.toFixed(2)}ms</span><br><br>
                    
                    <span class="info">ğŸ¯ æ€§èƒ½è©•ä¾¡:</span><br>
                    <span class="${averageTime <= 1000 ? 'success' : 'warning'}">ç›®æ¨™é”æˆ: ${averageTime <= 1000 ? 'âœ… 1ç§’ä»¥å†…é”æˆ' : 'âŒ 1ç§’è¶…é'}</span><br>
                    <span class="info">æ€§èƒ½ã‚°ãƒ¬ãƒ¼ãƒ‰: ${averageTime <= 500 ? 'A+' : averageTime <= 1000 ? 'A' : averageTime <= 1500 ? 'B' : 'C'}</span>
                `;
                
                // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                updateMetric('response-time', averageTime.toFixed(0), Math.max(0, (1000 - averageTime) / 1000 * 100));
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ å¿œç­”æ™‚é–“ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // åŒæ™‚å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
        async function testConcurrentExecution() {
            const resultsElement = document.getElementById('performance-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ åŒæ™‚å®Ÿè¡Œãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'äººç”Ÿã«ã¤ã„ã¦è€ƒãˆã¦ã„ã¾ã™',
                    userProfile: { experienceLevel: 'ä¸­ç´šè€…' },
                    emotionalContext: { intensity: 0.5, primary: 'contemplative' },
                    contextualAnalysis: { confidence: 0.8 }
                };
                
                const concurrentRequests = 8;
                const startTime = performance.now();
                
                // åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè¡Œ
                const promises = Array.from({ length: concurrentRequests }, () =>
                    orchestrator.executeIntegratedTransformation(testInput)
                );
                
                const results = await Promise.allSettled(promises);
                const totalTime = performance.now() - startTime;
                
                const successful = results.filter(r => r.status === 'fulfilled').length;
                const failed = results.filter(r => r.status === 'rejected').length;
                const successRate = (successful / concurrentRequests) * 100;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… åŒæ™‚å®Ÿè¡Œãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š åŒæ™‚å®Ÿè¡Œçµ±è¨ˆ:</span><br>
                    <span class="info">åŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°: ${concurrentRequests}</span><br>
                    <span class="success">æˆåŠŸ: ${successful}ä»¶</span><br>
                    <span class="error">å¤±æ•—: ${failed}ä»¶</span><br>
                    <span class="success">æˆåŠŸç‡: ${successRate.toFixed(1)}%</span><br>
                    <span class="info">ç·å®Ÿè¡Œæ™‚é–“: ${totalTime.toFixed(2)}ms</span><br>
                    <span class="info">ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½“ãŸã‚Šå¹³å‡: ${(totalTime / concurrentRequests).toFixed(2)}ms</span><br><br>
                    
                    <span class="info">ğŸ¯ æ€§èƒ½è©•ä¾¡:</span><br>
                    <span class="${successRate >= 90 ? 'success' : 'warning'}">æˆåŠŸç‡è©•ä¾¡: ${successRate >= 90 ? 'âœ… å„ªç§€' : successRate >= 80 ? 'âš ï¸ è‰¯å¥½' : 'âŒ è¦æ”¹å–„'}</span><br>
                    <span class="${totalTime <= 2000 ? 'success' : 'warning'}">åŒæ™‚å®Ÿè¡Œæ€§èƒ½: ${totalTime <= 2000 ? 'âœ… é«˜é€Ÿ' : 'âš ï¸ æ”¹å–„ä½™åœ°ã‚ã‚Š'}</span>
                `;
                
                // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                updateMetric('success-rate', successRate.toFixed(1), successRate);
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ åŒæ™‚å®Ÿè¡Œãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
                updateMetric('success-rate', '0', 0);
            }
        }

        // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆ
        async function testMemoryUsage() {
            const resultsElement = document.getElementById('performance-results');
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const initialMemory = estimateMemoryUsage();
                
                const testInput = {
                    userInput: 'ãƒ¡ãƒ¢ãƒªãƒ†ã‚¹ãƒˆç”¨å…¥åŠ›',
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    emotionalContext: { intensity: 0.5, primary: 'neutral' },
                    contextualAnalysis: { confidence: 0.7 }
                };
                
                const iterations = 50;
                
                for (let i = 0; i < iterations; i++) {
                    if (orchestrator) {
                        await orchestrator.executeIntegratedTransformation(testInput);
                    }
                    
                    if (i % 10 === 0) {
                        resultsElement.innerHTML = `<span class="info">ğŸ”„ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­... (${i}/${iterations})</span>`;
                    }
                }
                
                const finalMemory = estimateMemoryUsage();
                const memoryGrowth = finalMemory - initialMemory;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ãƒ¡ãƒ¢ãƒªä½¿ç”¨çµ±è¨ˆ (${iterations}å›å®Ÿè¡Œ):</span><br>
                    <span class="info">åˆæœŸãƒ¡ãƒ¢ãƒª: ${initialMemory.toFixed(2)}MB</span><br>
                    <span class="info">æœ€çµ‚ãƒ¡ãƒ¢ãƒª: ${finalMemory.toFixed(2)}MB</span><br>
                    <span class="success">ãƒ¡ãƒ¢ãƒªå¢—åŠ : ${memoryGrowth.toFixed(2)}MB</span><br><br>
                    
                    <span class="info">ğŸ¯ ãƒ¡ãƒ¢ãƒªåŠ¹ç‡è©•ä¾¡:</span><br>
                    <span class="${memoryGrowth <= 10 ? 'success' : 'warning'}">ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯: ${memoryGrowth <= 10 ? 'âœ… ãªã—' : 'âš ï¸ å¯èƒ½æ€§ã‚ã‚Š'}</span><br>
                    <span class="info">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º: ${orchestrator?.integratedCache?.size || 0}ã‚¨ãƒ³ãƒˆãƒª</span>
                `;
                
                // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                updateMetric('memory-usage', finalMemory.toFixed(1), Math.min(finalMemory / 50 * 100, 100));
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ãƒ¡ãƒ¢ãƒªãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ãƒ†ã‚¹ãƒˆ
        async function testCacheEfficiency() {
            const resultsElement = document.getElementById('performance-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
                orchestrator.integratedCache.clear();
                
                const testInput = {
                    userInput: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ†ã‚¹ãƒˆç”¨å…¥åŠ›',
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    emotionalContext: { intensity: 0.5, primary: 'neutral' },
                    contextualAnalysis: { confidence: 0.7 }
                };
                
                const iterations = 20;
                const responseTimes = [];
                
                for (let i = 0; i < iterations; i++) {
                    const startTime = performance.now();
                    await orchestrator.executeIntegratedTransformation(testInput);
                    const responseTime = performance.now() - startTime;
                    responseTimes.push(responseTime);
                }
                
                const averageTime = responseTimes.reduce((sum, time) => sum + time, 0) / iterations;
                const cacheHitRate = orchestrator.performanceMetrics.cacheHitRate;
                const cacheSize = orchestrator.integratedCache.size;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±è¨ˆ (${iterations}å›å®Ÿè¡Œ):</span><br>
                    <span class="success">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡: ${(cacheHitRate * 100).toFixed(1)}%</span><br>
                    <span class="info">å¹³å‡å¿œç­”æ™‚é–“: ${averageTime.toFixed(2)}ms</span><br>
                    <span class="info">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º: ${cacheSize}ã‚¨ãƒ³ãƒˆãƒª</span><br><br>
                    
                    <span class="info">ğŸ¯ ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡è©•ä¾¡:</span><br>
                    <span class="${cacheHitRate >= 0.7 ? 'success' : 'warning'}">åŠ¹ç‡æ€§: ${cacheHitRate >= 0.7 ? 'âœ… é«˜åŠ¹ç‡' : 'âš ï¸ æ”¹å–„ä½™åœ°ã‚ã‚Š'}</span><br>
                    <span class="${averageTime <= 500 ? 'success' : 'warning'}">ã‚­ãƒ£ãƒƒã‚·ãƒ¥é€Ÿåº¦: ${averageTime <= 500 ? 'âœ… é«˜é€Ÿ' : 'âš ï¸ æ¨™æº–'}</span>
                `;
                
                // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                updateMetric('cache-hit-rate', (cacheHitRate * 100).toFixed(1), cacheHitRate * 100);
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆ
        async function testErrorHandling() {
            const resultsElement = document.getElementById('error-handling-results');
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const errorScenarios = [
                    { name: 'ç©ºå…¥åŠ›', input: { userInput: '', userProfile: null } },
                    { name: 'ç„¡åŠ¹ãƒ‡ãƒ¼ã‚¿', input: { userInput: null, userProfile: undefined } },
                    { name: 'é•·ã™ãã‚‹å…¥åŠ›', input: { userInput: 'ã‚'.repeat(3000), userProfile: {} } }
                ];
                
                let totalTests = 0;
                let handledErrors = 0;
                const results = [];
                
                for (const scenario of errorScenarios) {
                    totalTests++;
                    
                    try {
                        if (orchestrator) {
                            await orchestrator.executeIntegratedTransformation(scenario.input);
                            results.push(`${scenario.name}: âœ… æ­£å¸¸å‡¦ç†`);
                        } else {
                            results.push(`${scenario.name}: âš ï¸ ã‚·ã‚¹ãƒ†ãƒ æœªåˆæœŸåŒ–`);
                        }
                    } catch (error) {
                        if (error.message.includes('æ¤œè¨¼ã‚¨ãƒ©ãƒ¼') || error.message.includes('ValidationError')) {
                            handledErrors++;
                            results.push(`${scenario.name}: âœ… é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼å‡¦ç†`);
                        } else {
                            results.push(`${scenario.name}: âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                        }
                    }
                }
                
                const errorHandlingRate = (handledErrors / totalTests) * 100;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ã‚¨ãƒ©ãƒ¼å‡¦ç†çµ±è¨ˆ:</span><br>
                    <span class="info">ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªæ•°: ${totalTests}</span><br>
                    <span class="success">é©åˆ‡ã«å‡¦ç†ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼: ${handledErrors}</span><br>
                    <span class="success">ã‚¨ãƒ©ãƒ¼å‡¦ç†ç‡: ${errorHandlingRate.toFixed(1)}%</span><br><br>
                    
                    <span class="info">ğŸ› ï¸ ã‚·ãƒŠãƒªã‚ªåˆ¥çµæœ:</span><br>
                    ${results.map(r => `<span class="${r.includes('âœ…') ? 'success' : r.includes('âš ï¸') ? 'warning' : 'error'}">${r}</span>`).join('<br>')}<br><br>
                    
                    <span class="info">ğŸ¯ ã‚¨ãƒ©ãƒ¼å‡¦ç†è©•ä¾¡:</span><br>
                    <span class="${errorHandlingRate >= 80 ? 'success' : 'warning'}">å‡¦ç†èƒ½åŠ›: ${errorHandlingRate >= 80 ? 'âœ… å„ªç§€' : 'âš ï¸ è¦æ”¹å–„'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ†ã‚¹ãƒˆè‡ªä½“ã§ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        async function testFallbackScenarios() {
            const resultsElement = document.getElementById('error-handling-results');
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                if (!orchestrator) {
                    resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                    return;
                }
                
                // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                const originalConcernClassifier = orchestrator.components.concernClassifier;
                
                // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ„å›³çš„ã«ç„¡åŠ¹åŒ–
                orchestrator.components.concernClassifier = null;
                
                const testInput = {
                    userInput: 'ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ',
                    userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                    emotionalContext: { intensity: 0.5, primary: 'neutral' },
                    contextualAnalysis: { confidence: 0.7 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                
                // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å¾©å…ƒ
                orchestrator.components.concernClassifier = originalConcernClassifier;
                
                const hasFallback = result.systemInfo?.fallbackMode || result.fallback || 
                                   (result.concernAnalysis && result.concernAnalysis.componentStatus === 'fallback');
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œç¢ºèª:</span><br>
                    <span class="${hasFallback ? 'success' : 'warning'}">ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œ: ${hasFallback ? 'âœ… æ­£å¸¸å‹•ä½œ' : 'âš ï¸ æ¤œå‡ºã•ã‚Œãš'}</span><br>
                    <span class="info">çµæœå–å¾—: ${result ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}</span><br>
                    <span class="info">ã‚¨ãƒ©ãƒ¼å›é¿: ${result && !result.error ? 'âœ… æˆåŠŸ' : 'âŒ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ'}</span><br><br>
                    
                    <span class="info">ğŸ›¡ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å†…å®¹:</span><br>
                    <span class="info">åŸºæœ¬ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼: ${result.primaryMetaphor?.essence ? 'âœ… æä¾›' : 'âŒ ãªã—'}</span><br>
                    <span class="info">çµ±åˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„: ${result.integratedContent ? 'âœ… æä¾›' : 'âŒ ãªã—'}</span><br>
                    <span class="info">ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±: ${result.systemInfo ? 'âœ… æä¾›' : 'âŒ ãªã—'}</span><br><br>
                    
                    <span class="info">ğŸ¯ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è©•ä¾¡:</span><br>
                    <span class="${hasFallback && result ? 'success' : 'warning'}">ä¿¡é ¼æ€§: ${hasFallback && result ? 'âœ… é«˜ã„' : 'âš ï¸ è¦æ”¹å–„'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
        async function testEdgeCases() {
            const resultsElement = document.getElementById('error-handling-results');
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            const edgeCases = [
                { name: 'ç‰¹æ®Šæ–‡å­—', input: '!@#$%^&*()_+{}|:<>?[]\\;\'\",./' },
                { name: 'æ•°å­—ã®ã¿', input: '1234567890' },
                { name: 'æ··åˆè¨€èª', input: 'Hello ã“ã‚“ã«ã¡ã¯ ì•ˆë…•í•˜ì„¸ìš” ä½ å¥½' },
                { name: 'çµµæ–‡å­—', input: 'ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜ŠğŸ™‚' },
                { name: 'ç©ºç™½æ–‡å­—', input: '   \t\n\r   ' }
            ];
            
            let totalTests = 0;
            let successfulTests = 0;
            const results = [];
            
            for (const edgeCase of edgeCases) {
                totalTests++;
                
                try {
                    const testInput = {
                        userInput: edgeCase.input,
                        userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                        emotionalContext: { intensity: 0.5, primary: 'neutral' },
                        contextualAnalysis: { confidence: 0.7 }
                    };
                    
                    if (orchestrator) {
                        const result = await orchestrator.executeIntegratedTransformation(testInput);
                        
                        if (result && (result.primaryMetaphor || result.integratedContent)) {
                            successfulTests++;
                            results.push(`${edgeCase.name}: âœ… æ­£å¸¸å‡¦ç†`);
                        } else {
                            results.push(`${edgeCase.name}: âš ï¸ çµæœä¸å®Œå…¨`);
                        }
                    } else {
                        results.push(`${edgeCase.name}: âŒ ã‚·ã‚¹ãƒ†ãƒ æœªåˆæœŸåŒ–`);
                    }
                    
                } catch (error) {
                    if (error.message.includes('æ¤œè¨¼ã‚¨ãƒ©ãƒ¼')) {
                        successfulTests++;
                        results.push(`${edgeCase.name}: âœ… é©åˆ‡ã«æ‹’å¦`);
                    } else {
                        results.push(`${edgeCase.name}: âŒ ã‚¨ãƒ©ãƒ¼: ${error.message.substring(0, 50)}`);
                    }
                }
            }
            
            const successRate = (successfulTests / totalTests) * 100;
            
            resultsElement.innerHTML = `
                <span class="success">âœ… ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                <span class="info">ğŸ“Š ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹çµ±è¨ˆ:</span><br>
                <span class="info">ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•°: ${totalTests}</span><br>
                <span class="success">é©åˆ‡ã«å‡¦ç†: ${successfulTests}</span><br>
                <span class="success">æˆåŠŸç‡: ${successRate.toFixed(1)}%</span><br><br>
                
                <span class="info">ğŸ§ª ã‚±ãƒ¼ã‚¹åˆ¥çµæœ:</span><br>
                ${results.map(r => `<span class="${r.includes('âœ…') ? 'success' : r.includes('âš ï¸') ? 'warning' : 'error'}">${r}</span>`).join('<br>')}<br><br>
                
                <span class="info">ğŸ¯ ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œè©•ä¾¡:</span><br>
                <span class="${successRate >= 80 ? 'success' : 'warning'}">å …ç‰¢æ€§: ${successRate >= 80 ? 'âœ… é«˜ã„' : 'âš ï¸ è¦æ”¹å–„'}</span>
            `;
        }

        // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ãƒ†ã‚¹ãƒˆ
        async function testComponentFailures() {
            const resultsElement = document.getElementById('error-handling-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            const components = ['concernClassifier', 'patternEngine', 'metaphorEngine', 'displayManager'];
            const results = [];
            let successfulRecoveries = 0;
            
            for (const componentName of components) {
                try {
                    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
                    const originalComponent = orchestrator.components[componentName];
                    orchestrator.components[componentName] = null;
                    
                    const testInput = {
                        userInput: `${componentName}å¤±æ•—ãƒ†ã‚¹ãƒˆ`,
                        userProfile: { experienceLevel: 'åˆå¿ƒè€…' },
                        emotionalContext: { intensity: 0.5, primary: 'neutral' },
                        contextualAnalysis: { confidence: 0.7 }
                    };
                    
                    const result = await orchestrator.executeIntegratedTransformation(testInput);
                    
                    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å¾©å…ƒ
                    orchestrator.components[componentName] = originalComponent;
                    
                    if (result && (result.primaryMetaphor || result.integratedContent)) {
                        successfulRecoveries++;
                        results.push(`${componentName}: âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆåŠŸ`);
                    } else {
                        results.push(`${componentName}: âŒ å¾©æ—§å¤±æ•—`);
                    }
                    
                } catch (error) {
                    results.push(`${componentName}: âŒ ã‚¨ãƒ©ãƒ¼: ${error.message.substring(0, 30)}`);
                }
            }
            
            const recoveryRate = (successfulRecoveries / components.length) * 100;
            
            resultsElement.innerHTML = `
                <span class="success">âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤±æ•—ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                <span class="info">ğŸ“Š ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¾©æ—§çµ±è¨ˆ:</span><br>
                <span class="info">ãƒ†ã‚¹ãƒˆå¯¾è±¡: ${components.length}ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</span><br>
                <span class="success">å¾©æ—§æˆåŠŸ: ${successfulRecoveries}</span><br>
                <span class="success">å¾©æ—§ç‡: ${recoveryRate.toFixed(1)}%</span><br><br>
                
                <span class="info">ğŸ”§ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥çµæœ:</span><br>
                ${results.map(r => `<span class="${r.includes('âœ…') ? 'success' : 'error'}">${r}</span>`).join('<br>')}<br><br>
                
                <span class="info">ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ è€éšœå®³æ€§è©•ä¾¡:</span><br>
                <span class="${recoveryRate >= 75 ? 'success' : 'warning'}">è€éšœå®³æ€§: ${recoveryRate >= 75 ? 'âœ… é«˜ã„' : 'âš ï¸ è¦æ”¹å–„'}</span>
            `;
        }

        // bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆ
        async function testBunenjinIntegration() {
            const resultsElement = document.getElementById('bunenjin-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'äººé–“é–¢ä¿‚ã§æ‚©ã‚“ã§ã„ã¾ã™ã€‚ç›¸æ‰‹ã®æ°—æŒã¡ãŒã‚ã‹ã‚‰ãšã€ã©ã†ã™ã‚Œã°è‰¯ã„ã‹è¿·ã£ã¦ã„ã¾ã™ã€‚',
                    userProfile: { experienceLevel: 'ä¸­ç´šè€…' },
                    emotionalContext: { intensity: 0.6, primary: 'confusion' },
                    contextualAnalysis: { confidence: 0.8 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                
                // bunenjinçµ±åˆè¦ç´ ã®ç¢ºèª
                const bunenjinIntegration = result.bunenjinIntegration || result.integratedContent?.bunenjinWisdom;
                const multipleViews = bunenjinIntegration?.multipleViews;
                const dividedPerformance = bunenjinIntegration?.dividedPerformance;
                const tripleOSIntegration = bunenjinIntegration?.tripleOSIntegration;
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š å“²å­¦çµ±åˆç¢ºèª:</span><br>
                    <span class="${bunenjinIntegration ? 'success' : 'error'}">bunenjinçµ±åˆ: ${bunenjinIntegration ? 'âœ… å®Ÿè£…' : 'âŒ æœªå®Ÿè£…'}</span><br>
                    <span class="${multipleViews ? 'success' : 'error'}">è¤‡æ•°è¦–ç‚¹: ${multipleViews ? 'âœ… å®Ÿè£…' : 'âŒ æœªå®Ÿè£…'}</span><br>
                    <span class="${dividedPerformance ? 'success' : 'error'}">åˆ†ã‹ã‚ŒãŸæ¼”æŠ€: ${dividedPerformance ? 'âœ… å®Ÿè£…' : 'âŒ æœªå®Ÿè£…'}</span><br>
                    <span class="${tripleOSIntegration ? 'success' : 'error'}">Triple OSçµ±åˆ: ${tripleOSIntegration ? 'âœ… å®Ÿè£…' : 'âŒ æœªå®Ÿè£…'}</span><br><br>
                    
                    <span class="info">ğŸ§˜ å“²å­¦è¦ç´ è©³ç´°:</span><br>
                    <span class="info">è¦–ç‚¹æ•°: ${multipleViews?.perspectives?.length || 0}</span><br>
                    <span class="info">çŸ›ç›¾æ•°: ${dividedPerformance?.paradoxes?.length || 0}</span><br>
                    <span class="info">OSãƒ¢ãƒ¼ãƒ‰æ•°: ${tripleOSIntegration ? Object.keys(tripleOSIntegration).length : 0}</span><br><br>
                    
                    <span class="info">ğŸ¯ å“²å­¦çµ±åˆè©•ä¾¡:</span><br>
                    <span class="${bunenjinIntegration && multipleViews && tripleOSIntegration ? 'success' : 'warning'}">çµ±åˆåº¦: ${bunenjinIntegration && multipleViews && tripleOSIntegration ? 'âœ… å®Œå…¨çµ±åˆ' : 'âš ï¸ éƒ¨åˆ†çµ±åˆ'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ bunenjinçµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // è¤‡æ•°è¦–ç‚¹ãƒ†ã‚¹ãƒˆ
        async function testMultipleViews() {
            const resultsElement = document.getElementById('bunenjin-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ è¤‡æ•°è¦–ç‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'ä»•äº‹ã¨å®¶åº­ã®ä¸¡ç«‹ã§æ‚©ã‚“ã§ã„ã¾ã™',
                    userProfile: { experienceLevel: 'ä¸Šç´šè€…' },
                    emotionalContext: { intensity: 0.7, primary: 'stress' },
                    contextualAnalysis: { confidence: 0.9 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                
                const bunenjinIntegration = result.bunenjinIntegration || result.integratedContent?.bunenjinWisdom;
                const multipleViews = bunenjinIntegration?.multipleViews;
                const perspectives = multipleViews?.perspectives || [];
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… è¤‡æ•°è¦–ç‚¹ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š è¦–ç‚¹åˆ†æçµæœ:</span><br>
                    <span class="info">æ¤œå‡ºã•ã‚ŒãŸè¦–ç‚¹æ•°: ${perspectives.length}</span><br>
                    <span class="${perspectives.length >= 2 ? 'success' : 'warning'}">æœ€å°è¦ä»¶: ${perspectives.length >= 2 ? 'âœ… æº€ãŸã™ (2è¦–ç‚¹ä»¥ä¸Š)' : 'âŒ ä¸è¶³'}</span><br><br>
                    
                    <span class="info">ğŸ” è¦–ç‚¹è©³ç´°:</span><br>
                    ${perspectives.map((p, i) => 
                        `<span class="success">${i + 1}. ${p.name || p.perspectiveName || `è¦–ç‚¹${i + 1}`}: ${p.insight || p.source || 'æ´å¯Ÿã‚ã‚Š'}</span>`
                    ).join('<br>') || '<span class="warning">è¦–ç‚¹æƒ…å ±ãªã—</span>'}<br><br>
                    
                    <span class="info">ğŸ¯ è¤‡æ•°è¦–ç‚¹è©•ä¾¡:</span><br>
                    <span class="${perspectives.length >= 3 ? 'success' : 'warning'}">è¦–ç‚¹ã®è±Šå¯Œã•: ${perspectives.length >= 3 ? 'âœ… è±Šå¯Œ' : 'âš ï¸ æ¨™æº–'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ è¤‡æ•°è¦–ç‚¹ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // çŸ›ç›¾è¨±å®¹ãƒ†ã‚¹ãƒˆ
        async function testParadoxHandling() {
            const resultsElement = document.getElementById('bunenjin-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ çŸ›ç›¾è¨±å®¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'å¤‰åŒ–ã—ãŸã„ã®ã«å¤‰åŒ–ãŒæ€–ã„ã€å®‰å®šã‚’æ±‚ã‚ã‚‹ã®ã«é€€å±ˆã‚‚æ„Ÿã˜ã‚‹',
                    userProfile: { experienceLevel: 'ä¸Šç´šè€…' },
                    emotionalContext: { intensity: 0.8, primary: 'conflict' },
                    contextualAnalysis: { confidence: 0.7 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                
                const bunenjinIntegration = result.bunenjinIntegration || result.integratedContent?.bunenjinWisdom;
                const dividedPerformance = bunenjinIntegration?.dividedPerformance;
                const paradoxes = dividedPerformance?.paradoxes || [];
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… çŸ›ç›¾è¨±å®¹ãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š çŸ›ç›¾å‡¦ç†çµæœ:</span><br>
                    <span class="info">æ¤œå‡ºã•ã‚ŒãŸçŸ›ç›¾æ•°: ${paradoxes.length}</span><br>
                    <span class="${paradoxes.length > 0 ? 'success' : 'warning'}">çŸ›ç›¾èªè­˜: ${paradoxes.length > 0 ? 'âœ… é©åˆ‡' : 'âš ï¸ ä¸ååˆ†'}</span><br><br>
                    
                    <span class="info">ğŸ¤” çŸ›ç›¾å†…å®¹:</span><br>
                    ${paradoxes.map((p, i) => 
                        `<span class="info">${i + 1}. ${p}</span>`
                    ).join('<br>') || '<span class="warning">çŸ›ç›¾æƒ…å ±ãªã—</span>'}<br><br>
                    
                    <span class="info">ğŸ§˜ åˆ†ã‹ã‚ŒãŸæ¼”æŠ€:</span><br>
                    <span class="info">ã‚³ãƒ³ã‚»ãƒ—ãƒˆ: ${dividedPerformance?.concept || 'æœªå®šç¾©'}</span><br>
                    <span class="info">å®Ÿè·µæ–¹æ³•: ${dividedPerformance?.instruction || 'æœªå®šç¾©'}</span><br><br>
                    
                    <span class="info">ğŸ¯ çŸ›ç›¾è¨±å®¹è©•ä¾¡:</span><br>
                    <span class="${paradoxes.length >= 2 ? 'success' : 'warning'}">è¨±å®¹èƒ½åŠ›: ${paradoxes.length >= 2 ? 'âœ… é«˜ã„' : 'âš ï¸ æ¨™æº–'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ çŸ›ç›¾è¨±å®¹ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // Triple OSçµ±åˆãƒ†ã‚¹ãƒˆ
        async function testTripleOSIntegration() {
            const resultsElement = document.getElementById('bunenjin-results');
            
            if (!orchestrator) {
                resultsElement.innerHTML = '<span class="error">âŒ ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ Triple OSçµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</span>';
            
            try {
                const testInput = {
                    userInput: 'ãƒªã‚¹ã‚¯ã‚’å–ã£ã¦æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ãŸã„ãŒã€å®‰å…¨æ€§ã‚‚ç¢ºä¿ã—ãŸã„',
                    userProfile: { experienceLevel: 'ä¸Šç´šè€…' },
                    emotionalContext: { intensity: 0.6, primary: 'ambivalence' },
                    contextualAnalysis: { confidence: 0.8 }
                };
                
                const result = await orchestrator.executeIntegratedTransformation(testInput);
                
                const bunenjinIntegration = result.bunenjinIntegration || result.integratedContent?.bunenjinWisdom;
                const tripleOSIntegration = bunenjinIntegration?.tripleOSIntegration;
                
                const osTypes = ['engineOS', 'interfaceOS', 'safeModeOS'];
                const availableOS = osTypes.filter(os => tripleOSIntegration?.[os]);
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… Triple OSçµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š OSçµ±åˆçµæœ:</span><br>
                    <span class="info">å®Ÿè£…ã•ã‚ŒãŸOSæ•°: ${availableOS.length}/3</span><br>
                    <span class="${availableOS.length === 3 ? 'success' : 'warning'}">å®Œå…¨æ€§: ${availableOS.length === 3 ? 'âœ… å®Œå…¨' : 'âš ï¸ éƒ¨åˆ†çš„'}</span><br><br>
                    
                    <span class="info">ğŸ–¥ï¸ OSåˆ¥è©³ç´°:</span><br>
                    ${osTypes.map(os => {
                        const osData = tripleOSIntegration?.[os];
                        return `<span class="${osData ? 'success' : 'error'}">${os}: ${osData ? 'âœ… å®Ÿè£…' : 'âŒ æœªå®Ÿè£…'}</span><br>
                                ${osData ? `  ç„¦ç‚¹: ${osData.focus || 'N/A'}<br>  æŒ‡å°: ${osData.guidance?.[0] || 'N/A'}` : ''}`;
                    }).join('<br>')}<br><br>
                    
                    <span class="info">ğŸ¯ Triple OSè©•ä¾¡:</span><br>
                    <span class="${availableOS.length >= 2 ? 'success' : 'warning'}">OSé€£æº: ${availableOS.length >= 2 ? 'âœ… è‰¯å¥½' : 'âš ï¸ è¦æ”¹å–„'}</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ Triple OSãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runComprehensiveTests() {
            const resultsElement = document.getElementById('comprehensive-results');
            
            if (!testSuite) {
                resultsElement.innerHTML = '<span class="error">âŒ ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ åŒ…æ‹¬çš„çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­... (ç´„30ç§’)</span>';
            
            try {
                const testReport = await testSuite.runComprehensiveTests();
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… åŒ…æ‹¬çš„çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“Š ç·åˆçµæœ:</span><br>
                    <span class="info">ç·åˆè©•ä¾¡: <span class="${testReport.summary.overallResult === 'excellent' ? 'success' : testReport.summary.overallResult === 'good' ? 'success' : 'warning'}">${testReport.summary.overallResult}</span></span><br>
                    <span class="info">ç·ãƒ†ã‚¹ãƒˆæ•°: ${testReport.summary.totalTests}</span><br>
                    <span class="success">æˆåŠŸ: ${testReport.summary.passedTests}</span><br>
                    <span class="error">å¤±æ•—: ${testReport.summary.failedTests}</span><br>
                    <span class="success">æˆåŠŸç‡: ${testReport.summary.successRate}</span><br>
                    <span class="info">å®Ÿè¡Œæ™‚é–“: ${testReport.summary.duration}</span><br><br>
                    
                    <span class="info">ğŸ¯ å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹:</span><br>
                    <span class="info">ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: ${testReport.qualityMetrics.testCoverage}%</span><br>
                    <span class="info">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ${testReport.qualityMetrics.performanceGrade}</span><br>
                    <span class="info">ç²¾åº¦ã‚¹ã‚³ã‚¢: ${testReport.qualityMetrics.accuracyScore}%</span><br>
                    <span class="info">ä¿¡é ¼æ€§ã‚¹ã‚³ã‚¢: ${testReport.qualityMetrics.reliabilityScore}%</span><br><br>
                    
                    <span class="info">ğŸ§˜ bunenjinæº–æ‹ :</span><br>
                    <span class="info">å“²å­¦æº–æ‹ ãƒ¬ãƒ™ãƒ«: ${testReport.bunenjinCompliance.compliance}</span><br>
                    <span class="info">æº–æ‹ ã‚¹ã‚³ã‚¢: ${testReport.bunenjinCompliance.score}%</span><br>
                    <span class="${testReport.bunenjinCompliance.areas.multipleViews ? 'success' : 'warning'}">è¤‡æ•°è¦–ç‚¹: ${testReport.bunenjinCompliance.areas.multipleViews ? 'âœ…' : 'âŒ'}</span><br>
                    <span class="${testReport.bunenjinCompliance.areas.paradoxAcceptance ? 'success' : 'warning'}">çŸ›ç›¾è¨±å®¹: ${testReport.bunenjinCompliance.areas.paradoxAcceptance ? 'âœ…' : 'âŒ'}</span><br>
                    <span class="${testReport.bunenjinCompliance.areas.tripleOSIntegration ? 'success' : 'warning'}">Triple OS: ${testReport.bunenjinCompliance.areas.tripleOSIntegration ? 'âœ…' : 'âŒ'}</span><br><br>
                    
                    <span class="info">ğŸ“‹ æ¨å¥¨äº‹é …:</span><br>
                    ${testReport.recommendations.map(r => `<span class="info">- ${r}</span>`).join('<br>')}
                `;
                
                // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ†ã‚¹ãƒˆçµæœã‚’ä¿å­˜
                testResults = testReport;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        async function generateTestReport() {
            const resultsElement = document.getElementById('comprehensive-results');
            
            if (!testResults || Object.keys(testResults).length === 0) {
                resultsElement.innerHTML = '<span class="warning">âš ï¸ å…ˆã«åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„</span>';
                return;
            }
            
            resultsElement.innerHTML = '<span class="info">ğŸ”„ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­...</span>';
            
            try {
                const reportData = {
                    timestamp: new Date().toISOString(),
                    testResults: testResults,
                    systemInfo: orchestrator ? {
                        version: orchestrator.version,
                        philosophy: orchestrator.philosophy,
                        systemHealth: orchestrator.systemHealth,
                        performanceMetrics: orchestrator.performanceMetrics
                    } : null
                };
                
                // JSONãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã«ã™ã‚‹
                const jsonReport = JSON.stringify(reportData, null, 2);
                const blob = new Blob([jsonReport], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `haqei-integration-test-report-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                resultsElement.innerHTML = `
                    <span class="success">âœ… ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†</span><br><br>
                    <span class="info">ğŸ“„ ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹:</span><br>
                    <span class="info">- åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆçµæœè©³ç´°</span><br>
                    <span class="info">- ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½ãƒ¡ãƒˆãƒªã‚¯ã‚¹</span><br>
                    <span class="info">- bunenjinå“²å­¦æº–æ‹ è©•ä¾¡</span><br>
                    <span class="info">- æ”¹å–„æ¨å¥¨äº‹é …</span><br>
                    <span class="info">- ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­æƒ…å ±</span><br><br>
                    <span class="success">ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ</span>
                `;
                
            } catch (error) {
                resultsElement.innerHTML = `<span class="error">âŒ ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            }
        }

        // çµæœã‚¯ãƒªã‚¢
        function clearResults() {
            const resultElements = [
                'system-status', 'integration-results', 'performance-results', 
                'error-handling-results', 'bunenjin-results', 'comprehensive-results'
            ];
            
            resultElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = `${id.replace('-', ' ')}çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...`;
                }
            });
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒªã‚»ãƒƒãƒˆ
            updateMetric('response-time', '--', 0);
            updateMetric('success-rate', '--', 0);
            updateMetric('cache-hit-rate', '--', 0);
            updateMetric('memory-usage', '--', 0);
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç¾¤
        function updateMetric(metricId, value, progressPercent) {
            const valueElement = document.getElementById(metricId);
            const progressElement = document.getElementById(metricId + '-progress');
            
            if (valueElement) valueElement.textContent = value;
            if (progressElement) progressElement.style.width = progressPercent + '%';
        }

        function estimateMemoryUsage() {
            // ç°¡æ˜“çš„ãªãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ¨å®š
            const cacheSize = orchestrator?.integratedCache?.size || 0;
            const objectCount = orchestrator ? Object.keys(orchestrator.components).length : 0;
            return cacheSize * 0.01 + objectCount * 0.1; // MBå˜ä½
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        window.addEventListener('load', function() {
            console.log('ğŸŒŸ HAQEIçµ±åˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            console.log('ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ†ã‚¹ãƒˆæ©Ÿèƒ½:');
            console.log('  - ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ãƒ»å¥å…¨æ€§ç¢ºèª');
            console.log('  - çµ±åˆæ©Ÿèƒ½ç²¾åº¦ãƒ†ã‚¹ãƒˆ');
            console.log('  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»é€Ÿåº¦ãƒ†ã‚¹ãƒˆ');
            console.log('  - ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ');
            console.log('  - bunenjinå“²å­¦çµ±åˆãƒ†ã‚¹ãƒˆ');
            console.log('  - åŒ…æ‹¬çš„çµ±åˆãƒ†ã‚¹ãƒˆ');
            
            // ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã®æ¨å¥¨
            setTimeout(() => {
                if (!orchestrator) {
                    document.getElementById('system-status').innerHTML = 
                        '<span class="warning">âš ï¸ ã¾ãšã€Œã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</span>';
                }
            }, 1000);
        });
    </script>
</body>
</html>