<!DOCTYPE html>
<html lang='ja'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>HAQEI Analyzer - Screen Transition Test</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 20px; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .test-pass { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .test-fail { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .test-info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-test { background: #28a745; color: white; }
        iframe { width: 100%; height: 600px; border: 1px solid #ccc; border-radius: 4px; }
    </style>
</head>
<body>
    <div class='test-container'>
        <h1>🧪 HAQEI Analyzer - Phase A1 Screen Transition Test</h1>
        
        <div class='test-result test-info'>
            <h3>テスト対象</h3>
            <p><strong>ファイル:</strong> /public/os_analyzer.html</p>
            <p><strong>検証項目:</strong> Welcome画面から質問画面への遷移</p>
            <p><strong>日時:</strong> 2025/8/16 14:34:58</p>
        </div>
        
        <div class='test-result test-info'>
            <h3>🎯 検証手順</h3>
            <ol>
                <li>下のiframe内でWelcome画面が表示されることを確認</li>
                <li>「分析を始める」ボタンをクリック</li>
                <li>質問画面に正常に遷移することを確認</li>
                <li>質問が表示されることを確認</li>
            </ol>
        </div>
        
        <button class='btn btn-test' onclick='refreshTest()'>🔄 テスト再実行</button>
        <button class='btn btn-primary' onclick='openInNewTab()'>🔗 新しいタブで開く</button>
        
        <hr style='margin: 20px 0;'>
        
        <div id='test-frame-container'>
            <iframe id='test-frame' src='os_analyzer.html'></iframe>
        </div>
        
        <div class='test-result test-info'>
            <h3>📊 期待される動作</h3>
            <ul>
                <li>✅ Welcome画面のタイトル「HaQei」が表示される</li>
                <li>✅ 「分析を始める」ボタンが表示される</li>
                <li>✅ ボタンクリック後、質問画面に遷移する</li>
                <li>✅ 質問文が表示される</li>
                <li>✅ 選択肢ボタンが表示される</li>
            </ul>
        </div>
        
        <div class='test-result test-info'>
            <h3>🔧 技術的検証ポイント</h3>
            <ul>
                <li><strong>startAnalysis():</strong> イベントハンドラーが正常に動作</li>
                <li><strong>ScreenManager:</strong> switchToAccessible('question') が実行</li>
                <li><strong>画面切り替え:</strong> welcome-screen → question-screen</li>
                <li><strong>showQuestion(0):</strong> 最初の質問が表示</li>
            </ul>
        </div>
    </div>
    
    <script>
        function refreshTest() {
            document.getElementById('test-frame').src = 'os_analyzer.html?' + Date.now();
        }
        
        function openInNewTab() {
            window.open('os_analyzer.html', '_blank');
        }
        
        // Frame load monitoring
        document.getElementById('test-frame').onload = function() {
            console.log('✅ Test frame loaded successfully');
        };
        
        document.getElementById('test-frame').onerror = function() {
            console.error('❌ Test frame failed to load');
        };
    </script>
</body>
</html>