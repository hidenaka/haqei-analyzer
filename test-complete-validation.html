<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å®Œå…¨æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ  - å…¨262,144ãƒ‘ã‚¿ãƒ¼ãƒ³</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #0a0a0a; 
            color: #fff; 
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 10px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
        }
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            padding: 15px;
            border: 1px solid #444;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4ade80;
            display: block;
        }
        .control-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #555;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
        }
        .progress-container {
            margin: 20px 0;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #333;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            width: 0%;
            transition: width 0.3s ease;
        }
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            font-size: 12px;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s ease;
        }
        button:hover { 
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
        }
        button.start {
            background: linear-gradient(135deg, #059669, #10b981);
        }
        button.start:hover {
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        .results-section {
            margin-top: 30px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            border: 1px solid #444;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
        }
        .warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: #fbbf24;
        }
        .success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: #10b981;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¯ å®Œå…¨æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ </h1>
        <p>Triple OS å…¨262,144é€šã‚Šï¼ˆ64Ã—64Ã—64ï¼‰ã®åŒ…æ‹¬çš„æ¤œè¨¼</p>
        <p style="color: #fbbf24;">âš ï¸ æœ¬æ ¼çš„ãªå…¨ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼ - å‡¦ç†æ™‚é–“æ•°åˆ†ã€œæ•°ååˆ†</p>
    </div>

    <div class="stats-container">
        <div class="stat-card">
            <span class="stat-number" id="total-combinations">262,144</span>
            <div>ç·çµ„ã¿åˆã‚ã›æ•°</div>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="validated-count">0</span>
            <div>æ¤œè¨¼æ¸ˆã¿</div>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="valid-count">0</span>
            <div>æ­£å¸¸</div>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="problematic-count">0</span>
            <div>å•é¡Œ</div>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="success-rate">0.0%</span>
            <div>æˆåŠŸç‡</div>
        </div>
    </div>

    <div class="control-section">
        <h3>ğŸš€ æ¤œè¨¼å®Ÿè¡Œåˆ¶å¾¡</h3>
        <button class="start" onclick="startCompleteValidation()">ğŸ“Š å…¨262,144ãƒ‘ã‚¿ãƒ¼ãƒ³å®Œå…¨æ¤œè¨¼é–‹å§‹</button>
        <button onclick="pauseValidation()">â¸ï¸ ä¸€æ™‚åœæ­¢</button>
        <button onclick="resumeValidation()">â–¶ï¸ å†é–‹</button>
        <button onclick="stopValidation()">â¹ï¸ åœæ­¢</button>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
                <div class="progress-text" id="progress-text">0.0%</div>
            </div>
        </div>
        
        <div id="current-status">å¾…æ©Ÿä¸­...</div>
    </div>

    <div class="warning">
        <h4>âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …</h4>
        <ul>
            <li>ã“ã®æ¤œè¨¼ã¯ <strong>262,144é€šã‚Š</strong> ã™ã¹ã¦ã‚’å‡¦ç†ã—ã¾ã™</li>
            <li>å®Œäº†ã¾ã§ <strong>æ•°åˆ†ã€œæ•°ååˆ†</strong> ã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>
            <li>å‡¦ç†ä¸­ã¯ãƒ–ãƒ©ã‚¦ã‚¶ãŒé‡ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™</li>
            <li>é€”ä¸­ã§ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹ã¨é€²æ—ãŒå¤±ã‚ã‚Œã¾ã™</li>
        </ul>
    </div>

    <div class="results-section">
        <h3>ğŸ“ˆ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµæœ</h3>
        <div id="results-output">æ¤œè¨¼é–‹å§‹ã‚’ãŠå¾…ã¡ãã ã•ã„...</div>
    </div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script src="./complete-validation-system.js"></script>
    <script>
        let completeValidator = null;
        let validationRunning = false;
        let validationPaused = false;
        
        function updateStats(stats) {
            document.getElementById('validated-count').textContent = stats.validatedCount.toLocaleString();
            document.getElementById('valid-count').textContent = stats.validCount.toLocaleString();
            document.getElementById('problematic-count').textContent = stats.problematicCount.toLocaleString();
            document.getElementById('success-rate').textContent = stats.successRate + '%';
            
            const progress = (stats.validatedCount / 262144 * 100);
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = progress.toFixed(2) + '%';
        }
        
        function updateStatus(message) {
            document.getElementById('current-status').innerHTML = message;
        }
        
        function addResult(message) {
            const output = document.getElementById('results-output');
            output.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        async function startCompleteValidation() {
            if (validationRunning) {
                alert('æ—¢ã«æ¤œè¨¼ãŒå®Ÿè¡Œä¸­ã§ã™');
                return;
            }
            
            if (!confirm('æœ¬å½“ã«å…¨262,144ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œè¨¼ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ\nå®Œäº†ã¾ã§æ•°åˆ†ã€œæ•°ååˆ†ã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚')) {
                return;
            }
            
            validationRunning = true;
            validationPaused = false;
            
            updateStatus('ğŸš€ å®Œå…¨æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...');
            addResult('å®Œå…¨æ¤œè¨¼é–‹å§‹');
            
            completeValidator = new CompleteValidationSystem();
            
            // ã‚ªãƒªã‚¸ãƒŠãƒ«ã®batchProcessorã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦é€²æ—æ›´æ–°
            const originalValidateBatch = completeValidator.validateBatch;
            completeValidator.validateBatch = async function(startIndex, endIndex) {
                const result = await originalValidateBatch.call(this, startIndex, endIndex);
                
                // UIæ›´æ–°
                updateStats({
                    validatedCount: this.validatedCount + this.problematicCount,
                    validCount: this.validatedCount,
                    problematicCount: this.problematicCount,
                    successRate: (this.validatedCount / (this.validatedCount + this.problematicCount) * 100).toFixed(1)
                });
                
                updateStatus(`ãƒãƒƒãƒ ${this.currentBatch}/${Math.ceil(262144/1000)} å®Œäº†`);
                addResult(`ãƒãƒƒãƒ${this.currentBatch}: æ­£å¸¸${this.validatedCount}, å•é¡Œ${this.problematicCount}`);
                
                return result;
            };
            
            try {
                const results = await completeValidator.validateAllCombinations();
                
                updateStatus('ğŸ‰ å®Œå…¨æ¤œè¨¼å®Œäº†ï¼');
                addResult(`<strong>æ¤œè¨¼å®Œäº†: æ­£å¸¸${results.validatedCount}/${results.totalCombinations}</strong>`);
                
                if (results.problematicCount === 0) {
                    document.getElementById('results-output').innerHTML += 
                        '<div class="success"><h4>ğŸŠ å®Œç’§ãªçµæœï¼</h4><p>å…¨262,144é€šã‚Šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼</p></div>';
                }
                
            } catch (error) {
                updateStatus('âŒ æ¤œè¨¼ã‚¨ãƒ©ãƒ¼');
                addResult(`ã‚¨ãƒ©ãƒ¼: ${error.message}`);
                console.error('æ¤œè¨¼ã‚¨ãƒ©ãƒ¼:', error);
            } finally {
                validationRunning = false;
            }
        }
        
        function pauseValidation() {
            validationPaused = true;
            updateStatus('â¸ï¸ ä¸€æ™‚åœæ­¢ä¸­...');
        }
        
        function resumeValidation() {
            validationPaused = false;
            updateStatus('â–¶ï¸ æ¤œè¨¼å†é–‹');
        }
        
        function stopValidation() {
            if (confirm('æ¤œè¨¼ã‚’åœæ­¢ã—ã¾ã™ã‹ï¼Ÿé€²æ—ã¯å¤±ã‚ã‚Œã¾ã™ã€‚')) {
                validationRunning = false;
                validationPaused = false;
                updateStatus('â¹ï¸ æ¤œè¨¼åœæ­¢');
                addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ¤œè¨¼åœæ­¢');
            }
        }
    </script>
</body>
</html>