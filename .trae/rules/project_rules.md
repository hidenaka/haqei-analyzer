# 🚨 TRAE - 作業開始前に必ず読んでください

## ⚠️ 重要な注意事項
**このファイルは、TRAEが任意のタスクを開始する前に必ず確認しなければならない最重要ドキュメントです。**

---

## 🔥 緊急チェックリスト

### 1. 📋 必須ドキュメントの確認
```bash
# 必須ガイドラインを表示
npm run trae:mandatory-read
```

### 2. 🔍 作業前環境チェック
```bash
# 環境とプロジェクト状態をチェック
npm run trae:check
```

### 3. 🚫 重複チェック（新規作成時）
```bash
# ファイル名の重複チェック
npm run trae:check-duplication [ファイル名] [関数名] [クラス名]

# 例: npm run trae:check-duplication "newfile.js" "newFunction" "NewClass"
```

---

## 📚 必読ドキュメント（優先順位順）

### 🥇 最優先（作業前必須）
1. **[TRAE_MANDATORY_READ.md](docs/TRAE_MANDATORY_READ.md)** - 絶対禁止事項と必須手順
2. **[20250819_TRAE作業指示書テンプレート.md](docs/20250819_TRAE作業指示書テンプレート.md)** - 詳細作業ガイド

### 🥈 重要（タスク開始前）
3. **プロジェクト構造の理解**
   - `public/js/` - メインJavaScriptファイル
   - `public/css/` - スタイルシート
   - `docs/` - ドキュメント
   - `data/` - データファイル

### 🥉 参考（必要に応じて）
4. **[docs/architecture/](docs/architecture/)** - システム設計
5. **[docs/api/](docs/api/)** - API仕様
6. **[docs/development/](docs/development/)** - 開発ガイド

---

## 🚫 絶対に避けるべき行為（再確認）

### ❌ 重複作成の禁止
- 既存ファイルと同じ機能のファイルを作成しない
- 既存関数と同じ名前の関数を作成しない
- 既存クラスと同じ名前のクラスを作成しない
- 既存CSSクラスと競合するものを作成しない

### ❌ 構造破壊の禁止
- フォルダー構造を勝手に変更しない
- ファイルの移動を無断で行わない
- 既存の命名規則を無視しない
- 設定ファイルを無断で変更しない

### ❌ 無確認変更の禁止
- 既存ファイルの内容確認なしに編集しない
- 全体設計に影響する変更を行わない
- 他機能への影響を評価せずに変更しない
- テストなしに本番環境に影響する変更を行わない

---

## ✅ 正しい作業フロー

### Step 1: 事前準備
```bash
# 1. 環境チェック
npm run trae:check

# 2. 必須ガイドライン確認
npm run trae:mandatory-read

# 3. Git状態確認
git status
```

### Step 2: 調査・分析
```bash
# 1. 対象ファイルの確認
ls -la [対象パス]

# 2. 関連ファイルの検索
find . -name "*[キーワード]*" -type f

# 3. 既存実装の確認
grep -r "[関数名/クラス名]" ./public/js/
```

### Step 3: 重複チェック
```bash
# 新規作成予定のファイル/関数/クラスの重複チェック
npm run trae:check-duplication [ファイル名] [関数名] [クラス名]
```

### Step 4: 実装
- **最小限の変更**で目標達成
- **既存コードスタイル**に合わせる
- **適切なエラーハンドリング**を実装
- **十分なコメント**を追加

### Step 5: 検証
```bash
# 1. 機能テスト
# 2. 既存機能への影響確認
# 3. エラーログ確認
# 4. パフォーマンステスト
```

---

## 🆘 困った時の対処法

### 重複を発見した場合
1. **作業を一時停止**
2. **既存実装を詳細確認**
3. **既存実装の拡張で対応可能か検討**
4. **新規作成が必要な場合は別名を使用**

### 構造変更が必要な場合
1. **本当に必要か再検討**
2. **既存構造内での解決方法を模索**
3. **最小限の変更で済む方法を検討**
4. **どうしても必要な場合は詳細な影響評価を実施**

### エラーが発生した場合
1. **エラーメッセージを詳細に確認**
2. **既存の類似実装を参考にする**
3. **段階的に実装して問題箇所を特定**
4. **必要に応じてロールバック**

---

## 📞 サポート情報

### 自動チェックツール
- **環境チェック**: `npm run trae:check`
- **重複チェック**: `npm run trae:check-duplication`
- **ガイドライン表示**: `npm run trae:mandatory-read`

### 手動確認コマンド
```bash
# ファイル検索
find . -name "[パターン]" -type f

# 関数検索
grep -r "function [関数名]" ./

# クラス検索
grep -r "class [クラス名]" ./

# Git状態確認
git status --porcelain
```

---

## 🎯 成功のための心得

1. **「確認してから実行」** - 推測ではなく確認
2. **「既存を活用」** - 新規作成より既存拡張
3. **「最小限の変更」** - 必要最小限の修正
4. **「調和と統合」** - プロジェクト全体との整合性
5. **「段階的実装」** - 一度に大きく変更しない

---

## 🚨 最終確認

作業を開始する前に、以下を必ず確認してください：

- [ ] `npm run trae:check` を実行し、すべてのチェックが通った
- [ ] `docs/TRAE_MANDATORY_READ.md` を読了した
- [ ] 重複チェックを実行し、問題がないことを確認した
- [ ] 既存ファイルの状態を把握した
- [ ] 変更による影響範囲を評価した
- [ ] テスト方法を計画した

**すべてにチェックが入った場合のみ、作業を開始してください。**

---

**🔥 重要**: このガイドラインを無視した作業は、プロジェクトの整合性を損なう可能性があります。必ず遵守してください。