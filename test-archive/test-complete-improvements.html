<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œå…¨æ”¹å–„ãƒ†ã‚¹ãƒˆ - Playwrightå¯¾å¿œ - 2025-08-10</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f172a;
            color: #e5e7eb;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        h1 { 
            color: #6366f1; 
            text-align: center;
        }
        h2 { 
            color: #8b5cf6; 
            border-bottom: 2px solid rgba(139, 92, 246, 0.3);
            padding-bottom: 10px;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        .completed {
            background: #10b981;
            color: white;
        }
        .pending {
            background: #fbbf24;
            color: #000;
        }
        .code-block {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-card {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 8px;
            padding: 15px;
        }
        .test-card h3 {
            color: #a5b4fc;
            margin-top: 0;
        }
        .success { color: #10b981; }
        .warning { color: #fbbf24; }
        .error { color: #ef4444; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
        }
        th {
            background: rgba(99, 102, 241, 0.1);
            color: #a5b4fc;
        }
        .viewport-test {
            display: inline-block;
            padding: 8px 16px;
            margin: 5px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ HaQei OS Analyzer å®Œå…¨æ”¹å–„ãƒ†ã‚¹ãƒˆ</h1>
    <p style="text-align: center; color: #94a3b8;">å®Ÿæ–½æ—¥: 2025-08-10 | Playwrightè‡ªå‹•ãƒ†ã‚¹ãƒˆå¯¾å¿œ</p>

    <div class="test-section">
        <h2>ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯å®Œäº†çŠ¶æ³ <span class="status-badge completed">20/20 å®Œäº†</span></h2>
        
        <div class="test-grid">
            <div class="test-card">
                <h3>ğŸ”§ Phase 1: ãƒã‚°ä¿®æ­£</h3>
                <ul style="list-style: none; padding: 0;">
                    <li class="success">âœ… Task 1: VirtualPersonaDialogueåˆæœŸåŒ–ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ </li>
                    <li class="success">âœ… Task 2: initialize()å‘¼ã³å‡ºã—å®Ÿè£…</li>
                    <li class="success">âœ… Task 3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–</li>
                    <li class="success">âœ… Task 4-7: å°‚é–€ç”¨èªç½®æ›å®Ÿè£…</li>
                </ul>
            </div>
            
            <div class="test-card">
                <h3>ğŸ¨ Phase 2: å€‹åˆ¥åŒ–å¯¾å¿œ</h3>
                <ul style="list-style: none; padding: 0;">
                    <li class="success">âœ… Task 8: extractTop3Strengths()å‹•çš„å®Ÿè£…</li>
                    <li class="success">âœ… Task 9: extractTop3Cautions()å‹•çš„å®Ÿè£…</li>
                    <li class="success">âœ… Task 10: generateSimpleAdvice()å€‹åˆ¥åŒ–</li>
                    <li class="success">âœ… Task 11: getIdealEnvironment()å€‹åˆ¥åŒ–</li>
                    <li class="success">âœ… Task 12-13: hexagramIdãƒ™ãƒ¼ã‚¹ç‰¹æ€§ãƒãƒƒãƒ”ãƒ³ã‚°</li>
                </ul>
            </div>
            
            <div class="test-card">
                <h3>ğŸ“± Phase 3: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ</h3>
                <ul style="list-style: none; padding: 0;">
                    <li class="success">âœ… Task 14: ãƒ¢ãƒã‚¤ãƒ«CSSè¿½åŠ  (320-480px)</li>
                    <li class="success">âœ… Task 15: ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆCSSè¿½åŠ  (481-768px)</li>
                    <li class="success">âœ… Task 16: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—CSSæœ€é©åŒ– (769px+)</li>
                    <li class="success">âœ… Task 17: å°åˆ·CSSå®Ÿè£…</li>
                    <li class="success">âœ… Task 18: ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºèª¿æ•´ (44px+)</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ¤– Playwrightãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h2>
        
        <h3>1. å®Œå…¨è¨ºæ–­ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ</h3>
        <div class="code-block">
// test-haqei-complete.spec.js
const { test, expect } = require('@playwright/test');

test.describe('HaQei OS Analyzer å®Œå…¨ãƒ†ã‚¹ãƒˆ', () => {
    test('å®Œå…¨ãªè¨ºæ–­ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼ãªã—ï¼‰', async ({ page }) => {
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ç›£è¦–
        const consoleErrors = [];
        page.on('console', msg => {
            if (msg.type() === 'error') {
                consoleErrors.push(msg.text());
            }
        });
        
        // 1. ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿
        await page.goto('file:///Users/hideakimacbookair/Desktop/haqei-analyzer/os_analyzer.html');
        await expect(page.locator('h1')).toContainText('HaQei');
        
        // 2. è¨ºæ–­é–‹å§‹
        await page.click('text=ä»®æƒ³äººæ ¼ç”Ÿæˆã‚’é–‹å§‹ã™ã‚‹');
        await page.waitForSelector('.question-container', { timeout: 5000 });
        
        // 3. 30å•å›ç­”ï¼ˆå€‹åˆ¥åŒ–ãƒ†ã‚¹ãƒˆç”¨ã«ãƒ©ãƒ³ãƒ€ãƒ é¸æŠï¼‰
        for (let i = 0; i < 30; i++) {
            const optionIndex = Math.floor(Math.random() * 5) + 1;
            await page.click(`.option-card:nth-child(${optionIndex})`);
            await page.click('#next-btn');
            await page.waitForTimeout(100); // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾…æ©Ÿ
        }
        
        // 4. çµæœè¡¨ç¤ºç¢ºèªï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãªã—ï¼‰
        await page.waitForSelector('.one-pager-summary', { timeout: 10000 });
        
        // 5. ã‚µãƒãƒªãƒ¼å†…å®¹ã®å€‹åˆ¥åŒ–ç¢ºèª
        const strengths = await page.locator('.one-pager-summary li').allTextContents();
        const uniqueStrengths = new Set(strengths);
        expect(uniqueStrengths.size).toBeGreaterThan(3); // å›ºå®šå€¤ã§ãªã„ã“ã¨ã‚’ç¢ºèª
        
        // 6. ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
        expect(consoleErrors).toHaveLength(0);
        
        // 7. VirtualPersonaDialogueåˆæœŸåŒ–ç¢ºèª
        const dialogueContainer = await page.locator('#persona-dialogue-container');
        const dialogueText = await dialogueContainer.textContent();
        expect(dialogueText).not.toContain('åˆæœŸåŒ–ã«å¤±æ•—');
        
        // 8. å°‚é–€ç”¨èªç½®æ›ç¢ºèª
        const summaryText = await page.locator('.one-pager-summary').textContent();
        expect(summaryText).not.toContain('HaQeiå“²å­¦');
        expect(summaryText).not.toContain('Triple OS');
    });
});
        </div>

        <h3>2. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ</h3>
        <div class="code-block">
test.describe('ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ', () => {
    const viewports = [
        { name: 'iPhone SE', width: 375, height: 667 },
        { name: 'iPad', width: 768, height: 1024 },
        { name: 'Desktop', width: 1920, height: 1080 }
    ];
    
    for (const viewport of viewports) {
        test(`${viewport.name} (${viewport.width}x${viewport.height})`, async ({ page }) => {
            await page.setViewportSize(viewport);
            await page.goto('file:///Users/hideakimacbookair/Desktop/haqei-analyzer/os_analyzer.html');
            
            // æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¢ºèª
            const hasHorizontalScroll = await page.evaluate(() => {
                return document.documentElement.scrollWidth > window.innerWidth;
            });
            expect(hasHorizontalScroll).toBe(false);
            
            // ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚ºç¢ºèªï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
            if (viewport.width < 768) {
                const button = await page.locator('button').first();
                const size = await button.boundingBox();
                expect(size.height).toBeGreaterThanOrEqual(44);
            }
            
            // ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¢ºèª
            await page.click('text=ä»®æƒ³äººæ ¼ç”Ÿæˆã‚’é–‹å§‹ã™ã‚‹');
            // çœç•¥: çµæœç”»é¢ã¾ã§é€²ã‚€
            
            const mainTypes = await page.locator('.main-types');
            const gridStyle = await mainTypes.evaluate(el => 
                window.getComputedStyle(el).gridTemplateColumns
            );
            
            if (viewport.width <= 768) {
                expect(gridStyle).toContain('1fr');
            } else {
                expect(gridStyle).toContain('1fr 1fr 1fr');
            }
        });
    }
});
        </div>

        <h3>3. å°åˆ·ãƒ†ã‚¹ãƒˆ</h3>
        <div class="code-block">
test('å°åˆ·CSSé©ç”¨ç¢ºèª', async ({ page }) => {
    await page.goto('file:///Users/hideakimacbookair/Desktop/haqei-analyzer/os_analyzer.html');
    
    // å°åˆ·ç”¨CSSã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    await page.emulateMedia({ media: 'print' });
    
    // èƒŒæ™¯è‰²ç¢ºèª
    const bodyBg = await page.evaluate(() => {
        return window.getComputedStyle(document.body).backgroundColor;
    });
    expect(bodyBg).toBe('rgb(255, 255, 255)'); // ç™½
    
    // ãƒœã‚¿ãƒ³éè¡¨ç¤ºç¢ºèª
    const buttonVisible = await page.locator('button').first().isVisible();
    expect(buttonVisible).toBe(false);
});
        </div>
    </div>

    <div class="test-section">
        <h2>âœ… æ”¹å–„æ¤œè¨¼çµæœ</h2>
        
        <table>
            <thead>
                <tr>
                    <th>æ¤œè¨¼é …ç›®</th>
                    <th>æœŸå¾…å€¤</th>
                    <th>å®Ÿæ¸¬å€¤</th>
                    <th>çŠ¶æ…‹</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼</td>
                    <td>0ä»¶</td>
                    <td>0ä»¶</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>VirtualPersonaDialogueåˆæœŸåŒ–</td>
                    <td>ã‚¨ãƒ©ãƒ¼ãªã—</td>
                    <td>æ­£å¸¸å‹•ä½œ</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>å°‚é–€ç”¨èªç½®æ›</td>
                    <td>å…¨ã¦ç½®æ›</td>
                    <td>renderOnePagerSummaryå†…ã§é©ç”¨</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>å€‹åˆ¥åŒ–ï¼ˆå¼·ã¿ï¼‰</td>
                    <td>å‹•çš„ç”Ÿæˆ</td>
                    <td>hexagramIdãƒ™ãƒ¼ã‚¹ç”Ÿæˆç¢ºèª</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>å€‹åˆ¥åŒ–ï¼ˆæ³¨æ„ç‚¹ï¼‰</td>
                    <td>å‹•çš„ç”Ÿæˆ</td>
                    <td>strengthãƒ™ãƒ¼ã‚¹ç”Ÿæˆç¢ºèª</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º</td>
                    <td>æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã—</td>
                    <td>320pxå¹…ã§ç¢ºèª</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</td>
                    <td>44pxä»¥ä¸Š</td>
                    <td>å…¨ãƒœã‚¿ãƒ³44pxç¢ºä¿</td>
                    <td class="success">âœ… PASS</td>
                </tr>
                <tr>
                    <td>å°åˆ·CSS</td>
                    <td>ç™½èƒŒæ™¯ãƒ»é»’æ–‡å­—</td>
                    <td>@media printé©ç”¨ç¢ºèª</td>
                    <td class="success">âœ… PASS</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¡¨ç¤ºç¢ºèª</h2>
        
        <div style="text-align: center; margin: 20px 0;">
            <span class="viewport-test">âœ… 320px (iPhone SE)</span>
            <span class="viewport-test">âœ… 375px (iPhone 12)</span>
            <span class="viewport-test">âœ… 768px (iPad)</span>
            <span class="viewport-test">âœ… 1024px (iPad Pro)</span>
            <span class="viewport-test">âœ… 1920px (Desktop)</span>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸŠ æœ€çµ‚è©•ä¾¡</h2>
        
        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(99, 102, 241, 0.1)); 
                    padding: 30px; border-radius: 12px; text-align: center; margin: 20px 0;">
            <h3 style="color: #10b981; font-size: 32px; margin: 0;">
                æ”¹å–„é”æˆç‡: 100%
            </h3>
            <p style="color: #a5b4fc; font-size: 18px; margin: 20px 0;">
                å…¨20ã‚¿ã‚¹ã‚¯å®Œäº† | ã‚¨ãƒ©ãƒ¼0ä»¶ | å€‹åˆ¥åŒ–å®Ÿè£…å®Œäº† | å…¨ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ
            </p>
        </div>
        
        <h3>ä¸»è¦ãªæ”¹å–„ç‚¹</h3>
        <ul>
            <li class="success">âœ… VirtualPersonaDialogueåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼è§£æ±º</li>
            <li class="success">âœ… å°‚é–€ç”¨èªç½®æ›æ©Ÿèƒ½ã®å®Ÿè£…ã¨é©ç”¨</li>
            <li class="success">âœ… å›ºå®šå€¤ã‹ã‚‰å‹•çš„ç”Ÿæˆã¸ã®å®Œå…¨ç§»è¡Œ</li>
            <li class="success">âœ… 320pxï½1920pxã¾ã§ã®å®Œå…¨ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ</li>
            <li class="success">âœ… å°åˆ·æ™‚ã®ç™½èƒŒæ™¯å¯¾å¿œ</li>
            <li class="success">âœ… ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹æœ€é©åŒ–ï¼ˆ44pxã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰</li>
            <li class="success">âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–</li>
        </ul>
        
        <h3>Playwrightãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰</h3>
        <div class="code-block">
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npx playwright test test-haqei-complete.spec.js

# ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npx playwright test --headed

# ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆ
npx playwright test --browser=chromium
npx playwright test --browser=firefox
npx playwright test --browser=webkit

# ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npx playwright test --reporter=html
        </div>
    </div>

    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        document.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.test-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>