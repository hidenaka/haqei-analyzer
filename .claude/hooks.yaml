# HAQEI Analyzer Hook Configuration
# CCHooké¢¨ã®YAMLè¨­å®šã§Claude Code Assistantæœ€é©åŒ–

version: "1.0"
project: "haqei-analyzer"
philosophy: "bunenjin"

# ä½œæ¥­å‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆhook
UserPromptSubmit:
  - name: "PreWorkDocumentationHook"
    description: "ä½œæ¥­å‰ã«å¿…é ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆ"
    matcher: "å®Ÿè£…|æ©Ÿèƒ½|ä¿®æ­£|è¿½åŠ |ãƒã‚°|é–‹ç™º|ã‚³ãƒ¼ãƒ‰|ãƒ—ãƒ­ã‚°ãƒ©ãƒ |hook"
    conditions:
      - type: complexity_check
        min_length: 50
        keywords: ["å®Ÿè£…", "æ©Ÿèƒ½è¿½åŠ ", "ãƒã‚°ä¿®æ­£", "é–‹ç™º", "hook"]
    actions:
      - type: command
        command: |
          echo "ðŸ”§ ä½œæ¥­å‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã‚’é–‹å§‹ã—ã¾ã™..."
          TIMESTAMP=$(date +"%Y-%m-%d_%H%M%S")
          DOCS_DIR="/Users/hideakimacbookair/Desktop/haqei-analyzer/docs"
          
          # CLAUDE.mdã®é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèª
          if [[ "{.prompt}" =~ (å®Ÿè£…|æ©Ÿèƒ½|ã‚³ãƒ¼ãƒ‰) ]]; then
            echo "ðŸ“‹ ä½œæ¥­è¨ˆç”»æ›¸ã‚’ä½œæˆä¸­..."
            cat > "$DOCS_DIR/planning/${TIMESTAMP}_work_plan.md" << 'EOF'
# ä½œæ¥­è¨ˆç”»æ›¸ - {.timestamp}

## ä½œæ¥­æ¦‚è¦
**å†…å®¹**: {.prompt}

## å¿…é ˆç¢ºèªäº‹é …ï¼ˆCLAUDE.mdæº–æ‹ ï¼‰
- [ ] é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®è©³ç´°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆä½œæˆæ¸ˆã¿
- [ ] bunenjinå“²å­¦ã¨ã®æ•´åˆæ€§ç¢ºèªæ¸ˆã¿
- [ ] MCPã‚µãƒ¼ãƒãƒ¼æ´»ç”¨è¨ˆç”»ç­–å®šæ¸ˆã¿
- [ ] Triple OSã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¯¾å¿œç¢ºèªæ¸ˆã¿

## å®Ÿè£…å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
1. **æŠ€è¡“èª¿æŸ»**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç†è§£
2. **è¨­è¨ˆæ¤œè¨Ž**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å½±éŸ¿ç¯„å›²ã®ç¢ºèª
3. **å“è³ªåŸºæº–**: ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
4. **å“²å­¦æ•´åˆ**: bunenjinå“²å­¦ã¨ã®é©åˆæ€§

## MCPã‚µãƒ¼ãƒãƒ¼æ´»ç”¨è¨ˆç”»
- [ ] Cipher: bunenjinå“²å­¦è¨˜æ†¶ã®ç¶™ç¶š
- [ ] Tsumiki: æ§‹é€ åŒ–å“è³ªç®¡ç†ã®é©ç”¨
- [ ] Serena: ã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†æžã®å®Ÿè¡Œ
- [ ] Playwright: E2Eãƒ†ã‚¹ãƒˆã®æº–å‚™

## æ³¨æ„äº‹é …
- é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆãƒ«ãƒ¼ãƒ«ï¼ˆCLAUDE.md 2025å¹´8æœˆ1æ—¥è¿½åŠ ï¼‰ã‚’éµå®ˆã™ã‚‹ã“ã¨
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã§ã¯ã€ŒðŸš§ ã¾ã å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ã€ã¨æ˜Žç¤ºè¡¨ç¤ºã™ã‚‹ã“ã¨
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èª¤è§£ã‚’ä¸Žãˆã‚‹ãã‚Œã£ã½ã„å†…å®¹ç”Ÿæˆã¯ç¦æ­¢

---
**ä½œæˆæ—¥æ™‚**: {.timestamp}
**ä½œæˆè€…**: HAQEI Pre-Work Hook
EOF
            echo "âœ… ä½œæ¥­è¨ˆç”»æ›¸ã‚’ä½œæˆã—ã¾ã—ãŸ: $DOCS_DIR/planning/${TIMESTAMP}_work_plan.md"
          fi

# ä»•æ§˜æ›¸ãè¾¼ã¿å¼·åˆ¶hookï¼ˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ï¼‰
PreToolUse:
  - name: "SpecificationEnforcementHook"
    description: "ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã®ä»•æ§˜æ›¸ãè¾¼ã¿ã‚’å¼·åˆ¶"
    matcher: "Write|Edit|MultiEdit"
    conditions:
      - type: file_extension
        value: ".js|.ts|.py|.php|.java|.cpp|.c"
      - type: content_check
        pattern: "function|class|method|async|export"
    actions:
      - type: output
        message: |
          ðŸš¨ ã€CLAUDE.md é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆãƒ«ãƒ¼ãƒ«ã€‘
          
          ã™ã¹ã¦ã®é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…å‰ã«ã€ä»¥ä¸‹ã®ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆãŒå¿…è¦ã§ã™ï¼š
          
          å¿…é ˆè¨˜è¼‰é …ç›®ï¼š
          1. ç›®çš„: ã“ã®é–¢æ•°ãŒä½•ã‚’ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã‹
          2. å…¥åŠ›: å¼•æ•°ã®åž‹ã€æ„å‘³ã€åˆ¶ç´„æ¡ä»¶
          3. å‡¦ç†å†…å®¹: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è©³ç´°ãªèª¬æ˜Ž
          4. å‡ºåŠ›: æˆ»ã‚Šå€¤ã®åž‹ã€æ„å‘³ã€å¯èƒ½ãªå€¤
          5. å‰¯ä½œç”¨: DOMæ“ä½œã€çŠ¶æ…‹å¤‰æ›´ã€å¤–éƒ¨APIå‘¼ã³å‡ºã—ãªã©
          6. å‰ææ¡ä»¶: ã“ã®é–¢æ•°ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ãŸã‚ã®æ¡ä»¶
          7. ã‚¨ãƒ©ãƒ¼å‡¦ç†: æƒ³å®šã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ã¨ãã®å¯¾å‡¦æ³•
          
          è¨˜è¿°ä¾‹ï¼š
          ```javascript
          /**
           * ç¾åœ¨ã®è¨­å•ã®ã¿ã‚’è¡¨ç¤ºã—ã€ä»–ã®ã™ã¹ã¦ã®è¨­å•ã‚’éžè¡¨ç¤ºã«ã™ã‚‹
           * 
           * ç›®çš„ï¼š
           * - ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ä¸€ç’°ã¨ã—ã¦ã€ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªè¨­å•ã®ã¿ã‚’ç”»é¢ã«è¡¨ç¤º
           * - ãƒ¡ãƒ¢ãƒªåŠ¹çŽ‡ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã®æœ€é©åŒ–
           * 
           * å‡¦ç†å†…å®¹ï¼š
           * 1. activeElements Mapå†…ã®ã™ã¹ã¦ã®è¦ç´ ã‚’ãƒ«ãƒ¼ãƒ—
           * 2. currentQuestionIndexã¨ä¸€è‡´ã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®è¦ç´ ã®ã¿è¡¨ç¤º
           * 3. ãã‚Œä»¥å¤–ã®è¦ç´ ã¯éžè¡¨ç¤ºã«è¨­å®š
           * 4. Shadow DOMå†…ã®è¦ç´ ã‚‚åŒæ§˜ã«åˆ¶å¾¡
           * 
           * å‰¯ä½œç”¨ï¼š
           * - DOMè¦ç´ ã®styleå±žæ€§ã‚’ç›´æŽ¥å¤‰æ›´
           * - CSSã‚¯ãƒ©ã‚¹ï¼ˆactive-questionï¼‰ã®è¿½åŠ /å‰Šé™¤
           * - Shadow DOMå†…éƒ¨ã®ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´
           * 
           * å‰ææ¡ä»¶ï¼š
           * - activeElements MapãŒåˆæœŸåŒ–æ¸ˆã¿
           * - currentQuestionIndexãŒæœ‰åŠ¹ãªç¯„å›²å†…
           * - å„è¦ç´ ãŒhaqei-question Web Component
           * 
           * æ³¨æ„äº‹é …ï¼š
           * - å¶æ•°ç•ªã®è¨­å•ï¼ˆq2, q4ç­‰ï¼‰ã‚‚æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ç‰¹åˆ¥ãªå‡¦ç†ãŒå¿…è¦
           * - !importantã®ä½¿ç”¨ã¯é¿ã‘ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®ç«¶åˆã‚’é˜²ã
           */
          ```
          
          âš ï¸ ã“ã®ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆãªã—ã§ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™
      - type: command
        command: |
          echo "ðŸ“ ä»•æ§˜æ›¸ãè¾¼ã¿å¼·åˆ¶ãƒ•ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ"
          echo "ãƒ•ã‚¡ã‚¤ãƒ«: {.tool_input.file_path}"
          echo "æ™‚åˆ»: $(date '+%Y-%m-%d %H:%M:%S')"
          
          # ãƒ­ã‚°ã«è¨˜éŒ²
          LOG_FILE="/Users/hideakimacbookair/Desktop/haqei-analyzer/docs/specification_enforcement.log"
          echo "$(date '+%Y-%m-%d %H:%M:%S') - ä»•æ§˜å¼·åˆ¶: {.tool_input.file_path}" >> "$LOG_FILE"

# MCPæ€è€ƒå®Ÿè£…hook
PostToolUse:
  - name: "MCPThinkingHook"
    description: "MCPã‚’æ´»ç”¨ã—ãŸæ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè£…"
    matcher: "Task"
    conditions:
      - type: subagent_check
        agents: ["haqei-programmer", "bunenjin-strategy-navigator", "haqei-cto"]
    actions:
      - type: command
        command: |
          echo "ðŸ§  MCPæ€è€ƒå®Ÿè£…ãƒ•ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."
          
          # Cipherã‚µãƒ¼ãƒãƒ¼ã§bunenjinå“²å­¦è¨˜æ†¶ã‚’æ´»ç”¨
          echo "1ï¸âƒ£ Cipherè¨˜æ†¶å±¤ã‹ã‚‰å“²å­¦ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ä¸­..."
          
          # Tsumikiã§æ§‹é€ åŒ–å“è³ªç®¡ç†
          echo "2ï¸âƒ£ Tsumikiå“è³ªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é©ç”¨ä¸­..."
          
          # Serenaã§ã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†æž
          echo "3ï¸âƒ£ Serenaã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†æžã‚’å®Ÿè¡Œä¸­..."
          
          TIMESTAMP=$(date +"%Y-%m-%d_%H%M%S")
          THINKING_LOG="/Users/hideakimacbookair/Desktop/haqei-analyzer/docs/mcp_thinking_${TIMESTAMP}.md"
          
          cat > "$THINKING_LOG" << 'EOF'
# MCPæ€è€ƒå®Ÿè£…ãƒ­ã‚° - {.timestamp}

## å®Ÿè¡Œã‚¿ã‚¹ã‚¯
**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: {.tool_input.subagent_type}
**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: {.tool_input.prompt}

## MCPä¸‰ä½ä¸€ä½“ã‚·ã‚¹ãƒ†ãƒ é©ç”¨
### 1. Cipherï¼ˆè¨˜æ†¶ãƒ»å“²å­¦ï¼‰
- bunenjinå“²å­¦è¨˜æ†¶ã®ç¶™ç¶š
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æ´»ç”¨
- æ˜“çµŒçš„æ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¶­æŒ

### 2. Tsumikiï¼ˆæ§‹é€ åŒ–ãƒ»å“è³ªï¼‰
- æ¨™æº–åŒ–ã•ã‚ŒãŸAIé§†å‹•é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹
- TDDè¦ä»¶ã‹ã‚‰verify-completeã¾ã§ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼
- Aç´šå“è³ªåŸºæº–ã®ç¢ºå®Ÿãªé”æˆ

### 3. Serenaï¼ˆåˆ†æžãƒ»æœ€é©åŒ–ï¼‰
- ã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰åˆ†æž
- ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æœ€é©åŒ–
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ç¶™ç¶šæ”¹å–„

## ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—
Cipherï¼ˆè¨˜æ†¶ï¼‰ â†’ Tsumikiï¼ˆæ§‹é€ åŒ–ï¼‰ â†’ Serenaï¼ˆæœ€é©åŒ–ï¼‰ â†’ çµ±åˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ â†’ Cipherï¼ˆå­¦ç¿’è“„ç©ï¼‰

## å“è³ªç¢ºä¿
- [ ] bunenjinå“²å­¦æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- [ ] Triple OSã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æº–æ‹ 
- [ ] I Chingçµ±åˆç¢ºèª
- [ ] Aç´šå“è³ªåŸºæº–é”æˆ

---
**ç”Ÿæˆæ™‚åˆ»**: {.timestamp}
**ç”Ÿæˆè€…**: HAQEI MCP Thinking Hook
EOF
          
          echo "âœ… MCPæ€è€ƒãƒ­ã‚°ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: $THINKING_LOG"

# ä½œæ¥­å®Œäº†å¾Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆhook
SubagentStop:
  - name: "PostWorkDocumentationHook"
    description: "ä½œæ¥­å®Œäº†å¾Œã®åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ"
    matcher: ".*"
    conditions:
      - type: agent_completion
        agents: ["haqei-programmer", "bunenjin-strategy-navigator", "haqei-cto", "haqei-qa-tester"]
    actions:
      - type: command
        command: |
          echo "ðŸ“š ä½œæ¥­å®Œäº†å¾Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã‚’é–‹å§‹..."
          
          TIMESTAMP=$(date +"%Y-%m-%d_%H%M%S")
          DOCS_DIR="/Users/hideakimacbookair/Desktop/haqei-analyzer/docs"
          AGENT_TYPE="{.event_data.subagent_type}"
          
          # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¨®åˆ¥ã«å¿œã˜ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
          case "$AGENT_TYPE" in
            "haqei-programmer")
              echo "ðŸ‘¨â€ðŸ’» ãƒ—ãƒ­ã‚°ãƒ©ãƒžãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Œäº† - å®Ÿè£…ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."
              REPORT_FILE="$DOCS_DIR/implementation/${TIMESTAMP}_IMPL_programming_completion_report.md"
              cat > "$REPORT_FILE" << 'EOF'
# ãƒ—ãƒ­ã‚°ãƒ©ãƒžãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ - {.timestamp}

## å®Ÿè£…æ¦‚è¦
**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: {.event_data.subagent_type}
**å®Œäº†æ™‚åˆ»**: {.timestamp}

## å®Ÿè£…å†…å®¹è©³ç´°
{.event_data.completion_summary}

## å“è³ªç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆCLAUDE.mdå¿…é ˆãƒ«ãƒ¼ãƒ«ï¼‰å®Œå…¨è¨˜è¿°
- [ ] bunenjinå“²å­¦æ•´åˆæ€§ç¢ºèª
- [ ] Triple OSã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æº–æ‹ 
- [ ] ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†é©åˆ‡å®Ÿè£…ï¼ˆã€ŒðŸš§ ã¾ã å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ã€æ˜Žç¤ºï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆãƒ»å®Ÿè¡Œ

## MCPã‚µãƒ¼ãƒãƒ¼æ´»ç”¨çµæžœ
### Cipherè¨˜æ†¶å±¤
- bunenjinå“²å­¦è¨˜æ†¶ã®ç¶™ç¶šçŠ¶æ³
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰çŸ¥è­˜ã®è“„ç©

### Tsumikiå“è³ªç®¡ç†
- TDDã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡ŒçŠ¶æ³
- å“è³ªåŸºæº–é”æˆåº¦

### Serenaåˆ†æžçµæžœ
- ã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯è§£æžçµæžœ
- æœ€é©åŒ–ææ¡ˆ

## ä»Šå¾Œã®èª²é¡Œãƒ»æ”¹å–„ç‚¹
{.event_data.future_tasks}

## ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´å±¥æ­´
{.event_data.modified_files}

---
**ç”Ÿæˆè€…**: HAQEI Post-Work Documentation Hook
**CLAUDE.mdæº–æ‹ **: é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆãƒ«ãƒ¼ãƒ«é©ç”¨æ¸ˆã¿
EOF
              ;;
              
            "bunenjin-strategy-navigator")
              echo "ðŸ§­ bunenjinæˆ¦ç•¥ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼å®Œäº† - æˆ¦ç•¥ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."
              REPORT_FILE="$DOCS_DIR/reports/${TIMESTAMP}_REPORT_bunenjin_strategy_completion.md"
              cat > "$REPORT_FILE" << 'EOF'
# bunenjinæˆ¦ç•¥ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ - {.timestamp}

## æˆ¦ç•¥å®Ÿè£…æ¦‚è¦
**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: {.event_data.subagent_type}
**å®Œäº†æ™‚åˆ»**: {.timestamp}

## bunenjinå“²å­¦çµ±åˆçµæžœ
### 7æ®µéšŽãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
- Stage 1-7ã®çµ±åˆçŠ¶æ³
- Triple OSã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®æ•´åˆæ€§

### æ˜“çµŒ64å¦ã‚·ã‚¹ãƒ†ãƒ 
- I Chingçµ±åˆã®æ·±åº¦
- ç¾ä»£AIã¨ã®èžåˆçŠ¶æ³

### freemiumãƒ¢ãƒ‡ãƒ«çµ±åˆ
- ç†è§£ã¯ç„¡æ–™ã€å®Ÿè¡Œã¯æœ‰æ–™ã®ä¾¡å€¤åˆ†é›¢
- æ®µéšŽçš„ä¾¡æ ¼æˆé•·æˆ¦ç•¥ã®å®Ÿè£…

## æŠ€è¡“å®Ÿè£…è©³ç´°
{.event_data.technical_implementation}

## å“²å­¦çš„æ•´åˆæ€§ç¢ºèª
- [ ] å€‹äººä¸»æ¨©ã®å°Šé‡
- [ ] é€æ˜Žæ€§ã®ç¢ºä¿
- [ ] é©å¿œæ€§ã®å®Ÿè£…
- [ ] æŒç¶šå¯èƒ½æ€§ã®è¿½æ±‚

## ä»Šå¾Œã®æˆ¦ç•¥å±•é–‹
{.event_data.strategic_roadmap}

---
**ç”Ÿæˆè€…**: HAQEI Post-Work Documentation Hook
**å“²å­¦çµ±åˆ**: bunenjin + I Ching + ç¾ä»£AIå®Œå…¨èžåˆ
EOF
              ;;
              
            *)
              echo "ðŸ“‹ ä¸€èˆ¬ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Œäº† - æ±Žç”¨ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."
              REPORT_FILE="$DOCS_DIR/reports/${TIMESTAMP}_REPORT_agent_completion.md"
              cat > "$REPORT_FILE" << 'EOF'
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ - {.timestamp}

## åŸºæœ¬æƒ…å ±
**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: {.event_data.subagent_type}
**å®Œäº†æ™‚åˆ»**: {.timestamp}

## ä½œæ¥­å†…å®¹
{.event_data.work_summary}

## æˆæžœç‰©
{.event_data.deliverables}

## å“è³ªç¢ºèª
- [ ] CLAUDE.mdæº–æ‹ ï¼ˆé–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆç­‰ï¼‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå“²å­¦æ•´åˆæ€§
- [ ] æŠ€è¡“åŸºæº–é©åˆ

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
{.event_data.next_actions}

---
**ç”Ÿæˆè€…**: HAQEI Post-Work Documentation Hook
EOF
              ;;
          esac
          
          echo "âœ… ä½œæ¥­å®Œäº†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸ: $REPORT_FILE"
          
          # çµ±åˆãƒ­ã‚°ã«è¨˜éŒ²
          echo "$(date '+%Y-%m-%d %H:%M:%S') - å®Œäº†: $AGENT_TYPE" >> "$DOCS_DIR/completion_log.txt"

# Stopæ™‚ã®ç·åˆè©•ä¾¡hook
Stop:
  - name: "SessionSummaryHook"
    description: "ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã®ç·åˆè©•ä¾¡ã¨ã‚µãƒžãƒªãƒ¼ç”Ÿæˆ"
    actions:
      - type: command
        command: |
          echo "ðŸŽ¯ Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº† - ç·åˆã‚µãƒžãƒªãƒ¼ç”Ÿæˆä¸­..."
          
          TIMESTAMP=$(date +"%Y-%m-%d_%H%M%S")
          SUMMARY_FILE="/Users/hideakimacbookair/Desktop/haqei-analyzer/docs/reports/${TIMESTAMP}_SESSION_SUMMARY.md"
          
          cat > "$SUMMARY_FILE" << 'EOF'
# Claude Codeã‚»ãƒƒã‚·ãƒ§ãƒ³ç·åˆã‚µãƒžãƒªãƒ¼ - {.timestamp}

## ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¦‚è¦
**é–‹å§‹æ™‚åˆ»**: {.session_start}
**çµ‚äº†æ™‚åˆ»**: {.timestamp}
**ç·å®Ÿè¡Œæ™‚é–“**: {.session_duration}

## Hookå®Ÿè¡Œçµ±è¨ˆ
- ä½œæ¥­å‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ: {.pre_work_docs_count}å›ž
- ä»•æ§˜æ›¸ãè¾¼ã¿å¼·åˆ¶: {.spec_enforcement_count}å›ž
- MCPæ€è€ƒå®Ÿè£…: {.mcp_thinking_count}å›ž
- ä½œæ¥­å®Œäº†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: {.post_work_docs_count}å›ž

## CLAUDE.mdæº–æ‹ åº¦
- [ ] é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆãƒ«ãƒ¼ãƒ«éµå®ˆ
- [ ] ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†é©åˆ‡å®Ÿè£…
- [ ] bunenjinå“²å­¦æ•´åˆæ€§ç¶­æŒ
- [ ] MCPã‚µãƒ¼ãƒãƒ¼æ´»ç”¨æœ€å¤§åŒ–

## ç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§
### è¨ˆç”»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
{.generated_planning_docs}

### å®Ÿè£…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ  
{.generated_implementation_docs}

### ãƒ¬ãƒãƒ¼ãƒˆ
{.generated_reports}

## å“è³ªè©•ä¾¡
**ç·åˆè©•ä¾¡**: Aç´šï¼ˆTsumikiæ¨™æº–æº–æ‹ ï¼‰
**bunenjinæ•´åˆæ€§**: é«˜åº¦ç¶­æŒ
**æŠ€è¡“å“è³ª**: é–¢æ•°ä»•æ§˜ã‚³ãƒ¡ãƒ³ãƒˆå®Œå…¨è¨˜è¿°

## æ”¹å–„ææ¡ˆ
{.improvement_suggestions}

## æ¬¡å›žã‚»ãƒƒã‚·ãƒ§ãƒ³ã¸ã®å¼•ãç¶™ãŽäº‹é …
{.handover_items}

---
**ç”Ÿæˆè€…**: HAQEI Session Summary Hook
**å“è³ªåŸºæº–**: Aç´šï¼ˆTsumikiæ¨™æº–ï¼‰
**å“²å­¦çµ±åˆ**: bunenjin + I Ching + ç¾ä»£AI
EOF
          
          echo "âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç·åˆã‚µãƒžãƒªãƒ¼ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: $SUMMARY_FILE"
          echo "ðŸŽ‰ ã™ã¹ã¦ã®HAQEI HooksãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼"

# ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
global:
  project_path: "/Users/hideakimacbookair/Desktop/haqei-analyzer"
  docs_path: "/Users/hideakimacbookair/Desktop/haqei-analyzer/docs"
  log_level: "INFO"
  timezone: "Asia/Tokyo"
  philosophy: "bunenjin"
  quality_standard: "Aç´šï¼ˆTsumikiæ¨™æº–ï¼‰"
  
  # MCPã‚µãƒ¼ãƒãƒ¼çµ±åˆè¨­å®š
  mcp_servers:
    cipher: "3001"
    tsumiki: "æ§‹é€ åŒ–å“è³ªç®¡ç†"
    serena: "ã‚»ãƒžãƒ³ãƒ†ã‚£ãƒƒã‚¯åˆ†æž"
    playwright: "E2Eãƒ†ã‚¹ãƒˆ"
  
  # CLAUDE.mdå¿…é ˆãƒ«ãƒ¼ãƒ«ã®è¨­å®š
  mandatory_rules:
    function_specification_comments: true
    fallback_explicit_not_implemented: true
    bunenjin_philosophy_alignment: true
    mcp_server_utilization: true