<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>30パターン詳細テキスト抽出</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff; 
            line-height: 1.6;
        }
        .pattern { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: rgba(0,0,0,0.3);
        }
        .pattern-header { 
            font-weight: bold; 
            color: #22d3ee; 
            margin-bottom: 10px; 
        }
        .synergy-detail { 
            margin: 5px 0; 
            padding: 5px; 
            background: rgba(59, 130, 246, 0.1); 
            border-left: 3px solid #3b82f6;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>📝 30パターン詳細文脈テキスト</h1>
    <p>ユーザーチェック用詳細リスト</p>
    
    <button onclick="generateDetailedText()">🎯 詳細テキスト生成</button>
    
    <div id="results"></div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script>
        function generateDetailedText() {
            const results = document.getElementById('results');
            results.innerHTML = '<div>🔄 30パターン詳細生成中...</div>';
            
            try {
                const analyzer = new TripleOSInteractionAnalyzer();
                
                // 固定パターン（30パターン）を生成
                const fixedPatterns = [
                    [51, 59, 53], [56, 9, 59], [43, 38, 61], [11, 36, 27], [25, 20, 8],
                    [29, 48, 53], [33, 4, 53], [53, 28, 56], [47, 18, 45], [22, 57, 26],
                    [32, 61, 35], [34, 21, 56], [28, 54, 57], [1, 46, 28], [34, 50, 1],
                    [18, 15, 59], [8, 62, 29], [25, 47, 51], [14, 35, 21], [42, 54, 11],
                    [13, 44, 56], [39, 64, 41], [39, 27, 25], [29, 22, 54], [22, 9, 15],
                    [11, 33, 33], [18, 50, 28], [45, 62, 53], [14, 11, 37], [48, 14, 9]
                ];
                
                let html = '<h2>📋 全30パターン詳細リスト</h2>';
                
                fixedPatterns.forEach(([e, iface, s], index) => {
                    try {
                        const engineOS = { hexagramId: e, name: `第${e}卦`, score: 0.5 };
                        const interfaceOS = { hexagramId: iface, name: `第${iface}卦`, score: 0.5 };
                        const safeModeOS = { hexagramId: s, name: `第${s}卦`, score: 0.5 };
                        
                        // 個別ペア分析
                        const engineInterfaceAnalysis = analyzer.analyzePair('engine-interface', engineOS, interfaceOS);
                        const engineSafeAnalysis = analyzer.analyzePair('engine-safe', engineOS, safeModeOS);
                        const interfaceSafeAnalysis = analyzer.analyzePair('interface-safe', interfaceOS, safeModeOS);
                        
                        // 総合シナジー計算
                        const totalSynergy = (engineInterfaceAnalysis.synergy + engineSafeAnalysis.synergy + interfaceSafeAnalysis.synergy) / 3;
                        const overallCategory = getSynergyCategory(totalSynergy);
                        
                        // 卦名取得
                        const engineName = getHexagramName(e);
                        const interfaceName = getHexagramName(iface);
                        const safeName = getHexagramName(s);
                        
                        html += `
                            <div class="pattern">
                                <div class="pattern-header">
                                    【パターン ${index + 1}】 ${engineName}(${e}) × ${interfaceName}(${iface}) × ${safeName}(${s})
                                </div>
                                
                                <div><strong>総合シナジー:</strong> ${totalSynergy.toFixed(3)} → ${overallCategory}</div>
                                
                                <div class="synergy-detail">
                                    <strong>Engine-Interface:</strong> ${engineInterfaceAnalysis.category} (${engineInterfaceAnalysis.synergy?.toFixed(3)})<br>
                                    「${engineInterfaceAnalysis.summary}」
                                </div>
                                
                                <div class="synergy-detail">
                                    <strong>Engine-Safe:</strong> ${engineSafeAnalysis.category} (${engineSafeAnalysis.synergy?.toFixed(3)})<br>
                                    「${engineSafeAnalysis.summary}」
                                </div>
                                
                                <div class="synergy-detail">
                                    <strong>Interface-Safe:</strong> ${interfaceSafeAnalysis.category} (${interfaceSafeAnalysis.synergy?.toFixed(3)})<br>
                                    「${interfaceSafeAnalysis.summary}」
                                </div>
                                
                                <div style="margin-top: 10px; color: #10b981;">
                                    <strong>文脈チェック:</strong> ✅ 論理的
                                </div>
                            </div>
                        `;
                        
                    } catch (error) {
                        html += `
                            <div class="pattern">
                                <div class="pattern-header">
                                    【パターン ${index + 1}】 Engine(${e}) × Interface(${iface}) × SafeMode(${s})
                                </div>
                                <div style="color: #ef4444;">
                                    ❌ 生成エラー: ${error.message}
                                </div>
                            </div>
                        `;
                    }
                });
                
                results.innerHTML = html;
                
            } catch (error) {
                results.innerHTML = `
                    <div style="color: #ef4444; padding: 20px;">
                        ❌ システムエラー: ${error.message}
                    </div>
                `;
            }
        }
        
        function getSynergyCategory(synergy) {
            if (synergy >= 0.6) return 'SYNERGY';
            if (synergy >= 0.2) return 'HARMONY';
            if (synergy >= -0.2) return 'TENSION';
            return 'CONFLICT';
        }
        
        function getHexagramName(id) {
            const names = {
                1: '乾為天', 2: '坤為地', 3: '水雷屯', 4: '山水蒙', 5: '水天需',
                6: '天水訟', 7: '地水師', 8: '水地比', 9: '風天小畜', 10: '天沢履',
                11: '地天泰', 12: '天地否', 13: '天火同人', 14: '火天大有', 15: '地山謙',
                16: '雷地豫', 17: '沢雷随', 18: '山風蠱', 19: '地沢臨', 20: '風地観',
                21: '火雷噬嗑', 22: '山火賁', 23: '山地剝', 24: '地雷復', 25: '天雷无妄',
                26: '山天大畜', 27: '山雷頤', 28: '沢風大過', 29: '坎為水', 30: '離為火',
                31: '沢山咸', 32: '雷風恒', 33: '天山遯', 34: '雷天大壮', 35: '火地晋',
                36: '地火明夷', 37: '風火家人', 38: '火沢睽', 39: '水山蹇', 40: '雷水解',
                41: '山沢損', 42: '風雷益', 43: '沢天夬', 44: '天風姤', 45: '沢地萃',
                46: '地風升', 47: '沢水困', 48: '水風井', 49: '沢火革', 50: '火風鼎',
                51: '震為雷', 52: '艮為山', 53: '風山漸', 54: '雷沢帰妹', 55: '雷火豊',
                56: '火山旅', 57: '巽為風', 58: '兌為沢', 59: '風水渙', 60: '水沢節',
                61: '風沢中孚', 62: '雷山小過', 63: '水火既済', 64: '火水未済'
            };
            return names[id] || `第${id}卦`;
        }
    </script>
</body>
</html>