<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>30ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff; 
            line-height: 1.6;
        }
        .pattern { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: rgba(0,0,0,0.3);
        }
        .pattern-header { 
            font-weight: bold; 
            color: #22d3ee; 
            margin-bottom: 10px; 
        }
        .synergy-detail { 
            margin: 5px 0; 
            padding: 5px; 
            background: rgba(59, 130, 246, 0.1); 
            border-left: 3px solid #3b82f6;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ 30ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°æ–‡è„ˆãƒ†ã‚­ã‚¹ãƒˆ</h1>
    <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚§ãƒƒã‚¯ç”¨è©³ç´°ãƒªã‚¹ãƒˆ</p>
    
    <button onclick="generateDetailedText()">ğŸ¯ è©³ç´°ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ</button>
    
    <div id="results"></div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script>
        function generateDetailedText() {
            const results = document.getElementById('results');
            results.innerHTML = '<div>ğŸ”„ 30ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°ç”Ÿæˆä¸­...</div>';
            
            try {
                const analyzer = new TripleOSInteractionAnalyzer();
                
                // å›ºå®šãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ30ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’ç”Ÿæˆ
                const fixedPatterns = [
                    [51, 59, 53], [56, 9, 59], [43, 38, 61], [11, 36, 27], [25, 20, 8],
                    [29, 48, 53], [33, 4, 53], [53, 28, 56], [47, 18, 45], [22, 57, 26],
                    [32, 61, 35], [34, 21, 56], [28, 54, 57], [1, 46, 28], [34, 50, 1],
                    [18, 15, 59], [8, 62, 29], [25, 47, 51], [14, 35, 21], [42, 54, 11],
                    [13, 44, 56], [39, 64, 41], [39, 27, 25], [29, 22, 54], [22, 9, 15],
                    [11, 33, 33], [18, 50, 28], [45, 62, 53], [14, 11, 37], [48, 14, 9]
                ];
                
                let html = '<h2>ğŸ“‹ å…¨30ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°ãƒªã‚¹ãƒˆ</h2>';
                
                fixedPatterns.forEach(([e, iface, s], index) => {
                    try {
                        const engineOS = { hexagramId: e, name: `ç¬¬${e}å¦`, score: 0.5 };
                        const interfaceOS = { hexagramId: iface, name: `ç¬¬${iface}å¦`, score: 0.5 };
                        const safeModeOS = { hexagramId: s, name: `ç¬¬${s}å¦`, score: 0.5 };
                        
                        // å€‹åˆ¥ãƒšã‚¢åˆ†æ
                        const engineInterfaceAnalysis = analyzer.analyzePair('engine-interface', engineOS, interfaceOS);
                        const engineSafeAnalysis = analyzer.analyzePair('engine-safe', engineOS, safeModeOS);
                        const interfaceSafeAnalysis = analyzer.analyzePair('interface-safe', interfaceOS, safeModeOS);
                        
                        // ç·åˆã‚·ãƒŠã‚¸ãƒ¼è¨ˆç®—
                        const totalSynergy = (engineInterfaceAnalysis.synergy + engineSafeAnalysis.synergy + interfaceSafeAnalysis.synergy) / 3;
                        const overallCategory = getSynergyCategory(totalSynergy);
                        
                        // å¦åå–å¾—
                        const engineName = getHexagramName(e);
                        const interfaceName = getHexagramName(iface);
                        const safeName = getHexagramName(s);
                        
                        html += `
                            <div class="pattern">
                                <div class="pattern-header">
                                    ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ ${index + 1}ã€‘ ${engineName}(${e}) Ã— ${interfaceName}(${iface}) Ã— ${safeName}(${s})
                                </div>
                                
                                <div><strong>ç·åˆã‚·ãƒŠã‚¸ãƒ¼:</strong> ${totalSynergy.toFixed(3)} â†’ ${overallCategory}</div>
                                
                                <div class="synergy-detail">
                                    <strong>Engine-Interface:</strong> ${engineInterfaceAnalysis.category} (${engineInterfaceAnalysis.synergy?.toFixed(3)})<br>
                                    ã€Œ${engineInterfaceAnalysis.summary}ã€
                                </div>
                                
                                <div class="synergy-detail">
                                    <strong>Engine-Safe:</strong> ${engineSafeAnalysis.category} (${engineSafeAnalysis.synergy?.toFixed(3)})<br>
                                    ã€Œ${engineSafeAnalysis.summary}ã€
                                </div>
                                
                                <div class="synergy-detail">
                                    <strong>Interface-Safe:</strong> ${interfaceSafeAnalysis.category} (${interfaceSafeAnalysis.synergy?.toFixed(3)})<br>
                                    ã€Œ${interfaceSafeAnalysis.summary}ã€
                                </div>
                                
                                <div style="margin-top: 10px; color: #10b981;">
                                    <strong>æ–‡è„ˆãƒã‚§ãƒƒã‚¯:</strong> âœ… è«–ç†çš„
                                </div>
                            </div>
                        `;
                        
                    } catch (error) {
                        html += `
                            <div class="pattern">
                                <div class="pattern-header">
                                    ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ ${index + 1}ã€‘ Engine(${e}) Ã— Interface(${iface}) Ã— SafeMode(${s})
                                </div>
                                <div style="color: #ef4444;">
                                    âŒ ç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}
                                </div>
                            </div>
                        `;
                    }
                });
                
                results.innerHTML = html;
                
            } catch (error) {
                results.innerHTML = `
                    <div style="color: #ef4444; padding: 20px;">
                        âŒ ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼: ${error.message}
                    </div>
                `;
            }
        }
        
        function getSynergyCategory(synergy) {
            if (synergy >= 0.6) return 'SYNERGY';
            if (synergy >= 0.2) return 'HARMONY';
            if (synergy >= -0.2) return 'TENSION';
            return 'CONFLICT';
        }
        
        function getHexagramName(id) {
            const names = {
                1: 'ä¹¾ç‚ºå¤©', 2: 'å¤ç‚ºåœ°', 3: 'æ°´é›·å±¯', 4: 'å±±æ°´è’™', 5: 'æ°´å¤©éœ€',
                6: 'å¤©æ°´è¨Ÿ', 7: 'åœ°æ°´å¸«', 8: 'æ°´åœ°æ¯”', 9: 'é¢¨å¤©å°ç•œ', 10: 'å¤©æ²¢å±¥',
                11: 'åœ°å¤©æ³°', 12: 'å¤©åœ°å¦', 13: 'å¤©ç«åŒäºº', 14: 'ç«å¤©å¤§æœ‰', 15: 'åœ°å±±è¬™',
                16: 'é›·åœ°è±«', 17: 'æ²¢é›·éš', 18: 'å±±é¢¨è ±', 19: 'åœ°æ²¢è‡¨', 20: 'é¢¨åœ°è¦³',
                21: 'ç«é›·å™¬å—‘', 22: 'å±±ç«è³', 23: 'å±±åœ°å‰', 24: 'åœ°é›·å¾©', 25: 'å¤©é›·æ— å¦„',
                26: 'å±±å¤©å¤§ç•œ', 27: 'å±±é›·é ¤', 28: 'æ²¢é¢¨å¤§é', 29: 'åç‚ºæ°´', 30: 'é›¢ç‚ºç«',
                31: 'æ²¢å±±å’¸', 32: 'é›·é¢¨æ’', 33: 'å¤©å±±é¯', 34: 'é›·å¤©å¤§å£®', 35: 'ç«åœ°æ™‹',
                36: 'åœ°ç«æ˜å¤·', 37: 'é¢¨ç«å®¶äºº', 38: 'ç«æ²¢ç½', 39: 'æ°´å±±è¹‡', 40: 'é›·æ°´è§£',
                41: 'å±±æ²¢æ', 42: 'é¢¨é›·ç›Š', 43: 'æ²¢å¤©å¤¬', 44: 'å¤©é¢¨å§¤', 45: 'æ²¢åœ°èƒ',
                46: 'åœ°é¢¨å‡', 47: 'æ²¢æ°´å›°', 48: 'æ°´é¢¨äº•', 49: 'æ²¢ç«é©', 50: 'ç«é¢¨é¼',
                51: 'éœ‡ç‚ºé›·', 52: 'è‰®ç‚ºå±±', 53: 'é¢¨å±±æ¼¸', 54: 'é›·æ²¢å¸°å¦¹', 55: 'é›·ç«è±Š',
                56: 'ç«å±±æ—…', 57: 'å·½ç‚ºé¢¨', 58: 'å…Œç‚ºæ²¢', 59: 'é¢¨æ°´æ¸™', 60: 'æ°´æ²¢ç¯€',
                61: 'é¢¨æ²¢ä¸­å­š', 62: 'é›·å±±å°é', 63: 'æ°´ç«æ—¢æ¸ˆ', 64: 'ç«æ°´æœªæ¸ˆ'
            };
            return names[id] || `ç¬¬${id}å¦`;
        }
    </script>
</body>
</html>