<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç¶²ç¾…æ€§åˆ†æ</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #fff; 
            line-height: 1.6;
        }
        .analysis-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: rgba(0,0,0,0.3);
        }
        .covered-keyword {
            color: #10b981;
            background: rgba(16, 185, 129, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
            margin: 2px;
            display: inline-block;
        }
        .uncovered-keyword {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            padding: 2px 4px;
            border-radius: 3px;
            margin: 2px;
            display: inline-block;
        }
        .coverage-stats {
            background: rgba(59, 130, 246, 0.1);
            padding: 15px;
            border-left: 4px solid #3b82f6;
            margin: 15px 0;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ“Š ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç¶²ç¾…æ€§åˆ†æ</h1>
    <p>4è»¸ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é™ç•Œã‚’æ˜ã‚‰ã‹ã«ã—ã€å…¨213ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®åˆ†å¸ƒã‚’åˆ†æ</p>
    
    <button onclick="analyzeCoverage()">ğŸ” ç¶²ç¾…æ€§åˆ†æå®Ÿè¡Œ</button>
    
    <div id="results"></div>

    <script src="./public/assets/H384H64database.js"></script>
    <script src="./public/js/core/TripleOSInteractionAnalyzer.js"></script>
    <script>
        function analyzeCoverage() {
            const results = document.getElementById('results');
            results.innerHTML = '<div>ğŸ”„ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç¶²ç¾…æ€§åˆ†æä¸­...</div>';
            
            try {
                const analyzer = new TripleOSInteractionAnalyzer();
                
                // å…¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åé›†
                const allKeywords = new Set();
                for (let i = 1; i <= 64; i++) {
                    const char = analyzer.getHexagramCharacteristics(i);
                    if (char && char.keywords) {
                        char.keywords.forEach(k => allKeywords.add(k));
                    }
                }
                
                const allKeywordsArray = Array.from(allKeywords).sort();
                
                // ç¾åœ¨ã®4è»¸ã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
                const coveredKeywords = new Set();
                
                // 4è»¸ã®å®šç¾©ï¼ˆç¾åœ¨ã®å®Ÿè£…ï¼‰
                const SPEED_FAST = ["å§‹å‹•","æ´»æ°—","æ±ºæ–­","å‡¦æ–­","å¼·å¤§","å¨åŠ›","å‹‡çŒ›","ç©æ¥µæ€§","è§£æ”¾","è‡ªç”±","çªç ´","é©æ–°","è¡æ’ƒ","è¦šé†’","æ´»å‹•"];
                const SPEED_SLOW = ["å¾…æ©Ÿ","å¿è€","æº–å‚™","æ…é‡","è¬™éœ","ç¯€åˆ¶","å†…çœ","é™æ­¢","ç‘æƒ³","æ¼¸é€²","æ®µéšçš„","ç€å®Ÿ","ç©å¥","èª¿ç¯€","å¾®èª¿æ•´"];
                const VALUE_INDIVIDUAL = ["å‰µé€ åŠ›","ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—","å¼·ã„æ¨é€²åŠ›","æ±ºæ–­","å‡¦æ–­","è‡ªç”±"];
                const VALUE_GROUP = ["å—å®¹æ€§","åŒ…å®¹åŠ›","æŸ”è»Ÿæ€§","è¦ªå’Œ","å”èª¿","å›£çµ","ç›¸äº’æ”¯æ´","èª¿å’Œ","å”åŠ›","åŒå¿—","çµ±åˆ","é›†åˆ","çµé›†"];
                const TIME_CHANGE = ["è…æ•—","æ”¹é©","å†ç”Ÿ","åˆ·æ–°","çªç ´","é©æ–°","é©å‘½","å¤‰é©","è»¢æ›","å¤‰åŒ–","æ–°ç§©åº"];
                const TIME_STABLE = ["è“„ç©","è²¯è”µ","æŒç¶š","ç¶™ç¶š","ä¸å¤‰","æ°¸ç¶š","å®‰å®š","é™æ­¢","å®Œæˆ","é”æˆ","å®Œç’§"];
                const DIRECTION_EXPAND = ["ç¹æ „","è±Šã‹ã•","æ˜æ™°æ€§","ç…§æ˜","é€²æ­©","æ˜‡é€²","å‘ä¸Š","ç™ºå±•","è§£æ”¾","ä¸Šæ˜‡","æˆé•·","ç™ºé”","æ•£é–‹","åˆ†æ•£","æ‹¡æ•£"];
                const DIRECTION_CONTRACT = ["é–‰å¡","åœæ»","æ–­çµ¶","ç¯€åˆ¶","æ·±ã„æ´å¯Ÿ","å†…çœ","é€€é¿","æˆ¦ç•¥çš„æ’¤é€€","ä¿èº«","æ¸›å°‘","å›°çª®","æˆ‘æ…¢","åˆ¶é™"];
                
                // ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒ¼ã‚¯
                [...SPEED_FAST, ...SPEED_SLOW, ...VALUE_INDIVIDUAL, ...VALUE_GROUP, 
                 ...TIME_CHANGE, ...TIME_STABLE, ...DIRECTION_EXPAND, ...DIRECTION_CONTRACT].forEach(k => {
                    coveredKeywords.add(k);
                });
                
                // æœªã‚«ãƒãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç‰¹å®š
                const uncoveredKeywords = allKeywordsArray.filter(k => !coveredKeywords.has(k));
                const coverageRate = ((coveredKeywords.size / allKeywords.size) * 100).toFixed(1);
                
                // æœªã‚«ãƒãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ„å‘³åˆ†æ
                const uncoveredAnalysis = analyzeUncoveredKeywords(uncoveredKeywords);
                
                let html = `
                    <div class="analysis-section">
                        <h2>ğŸ“ˆ ç¶²ç¾…æ€§çµ±è¨ˆ</h2>
                        <div class="coverage-stats">
                            <p><strong>ç·ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ•°:</strong> ${allKeywords.size}å€‹</p>
                            <p><strong>4è»¸ã§ã‚«ãƒãƒ¼:</strong> ${coveredKeywords.size}å€‹</p>
                            <p><strong>æœªã‚«ãƒãƒ¼:</strong> ${uncoveredKeywords.length}å€‹</p>
                            <p><strong>ç¶²ç¾…ç‡:</strong> ${coverageRate}%</p>
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>âœ… 4è»¸ã§ã‚«ãƒãƒ¼æ¸ˆã¿ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ (${coveredKeywords.size}å€‹)</h2>
                        <div>
                            ${Array.from(coveredKeywords).sort().map(k => 
                                `<span class="covered-keyword">${k}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>âŒ 4è»¸ã§æœªã‚«ãƒãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ (${uncoveredKeywords.length}å€‹)</h2>
                        <div>
                            ${uncoveredKeywords.map(k => 
                                `<span class="uncovered-keyword">${k}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="analysis-section">
                        <h2>ğŸ§  æœªã‚«ãƒãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ„å‘³åˆ†æ</h2>
                        ${uncoveredAnalysis.map(category => `
                            <div style="margin: 15px 0; padding: 10px; background: rgba(239, 68, 68, 0.05); border-left: 3px solid #ef4444;">
                                <h4>${category.name} (${category.keywords.length}å€‹)</h4>
                                <p><strong>èª¬æ˜:</strong> ${category.description}</p>
                                <p><strong>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰:</strong> ${category.keywords.join(', ')}</p>
                                <p><strong>äººé–“å¿ƒç†ã¸ã®å½±éŸ¿:</strong> ${category.psychologicalImpact}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="analysis-section">
                        <h2>ğŸ’¡ æ–°ã—ã„è»¸ã®ææ¡ˆ</h2>
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-left: 4px solid #10b981;">
                            <h4>ç¾åœ¨ã®4è»¸ã®é™ç•Œ</h4>
                            <p>â€¢ <strong>æ„Ÿæƒ…è»¸</strong>ãŒæ¬ å¦‚: å–œã³ã€æ‚²ã—ã¿ã€æã‚Œã€å¸Œæœ›ãªã©ã®æ„Ÿæƒ…çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒæœªåˆ†é¡</p>
                            <p>â€¢ <strong>é–¢ä¿‚æ€§è»¸</strong>ãŒä¸ååˆ†: å®¶æ—ã€çµå©šã€å¯¾ç«‹ã€ç–å¤–ãªã©ã®äººé–“é–¢ä¿‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒæœªåˆ†é¡</p>
                            <p>â€¢ <strong>ç‰©è³ªæ€§è»¸</strong>ãŒæ¬ å¦‚: è±Šã‹ã•ã€å›°çª®ã€è³‡æºã€ä¾›çµ¦ãªã©ã®ç‰©è³ªçš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒæœªåˆ†é¡</p>
                            <p>â€¢ <strong>çŸ¥çš„æ´»å‹•è»¸</strong>ãŒæ¬ å¦‚: æ•™è‚²ã€å­¦ç¿’ã€è¦³å¯Ÿã€ç†è§£ãªã©ã®èªçŸ¥çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒæœªåˆ†é¡</p>
                            
                            <h4>ææ¡ˆ: 8è»¸ä½“ç³»</h4>
                            <p>1. ã‚¹ãƒ”ãƒ¼ãƒ‰è»¸ (æ—¢å­˜)</p>
                            <p>2. ä¾¡å€¤è¦³è»¸ (æ—¢å­˜)</p>
                            <p>3. æ™‚é–“è»¸ (æ—¢å­˜)</p>
                            <p>4. æ–¹å‘æ€§è»¸ (æ—¢å­˜)</p>
                            <p><strong>5. æ„Ÿæƒ…è»¸</strong>: ãƒã‚¸ãƒ†ã‚£ãƒ– vs ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…</p>
                            <p><strong>6. é–¢ä¿‚è»¸</strong>: çµåˆãƒ»çµ±åˆ vs åˆ†é›¢ãƒ»å¯¾ç«‹</p>
                            <p><strong>7. ç‰©è³ªè»¸</strong>: è±Šã‹ã•ãƒ»æ‹¡å¤§ vs åˆ¶é™ãƒ»ç¯€ç´„</p>
                            <p><strong>8. èªçŸ¥è»¸</strong>: å­¦ç¿’ãƒ»ç†è§£ vs ç›´æ„Ÿãƒ»æ„Ÿå¿œ</p>
                        </div>
                    </div>
                `;
                
                results.innerHTML = html;
                
            } catch (error) {
                results.innerHTML = `
                    <div style="color: #ef4444; padding: 20px;">
                        âŒ åˆ†æã‚¨ãƒ©ãƒ¼: ${error.message}
                    </div>
                `;
                console.error('ç¶²ç¾…æ€§åˆ†æã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        function analyzeUncoveredKeywords(uncovered) {
            // æœªã‚«ãƒãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ„å‘³ã®ã‚ã‚‹ã‚«ãƒ†ã‚´ãƒªã§åˆ†æ
            const categories = [
                {
                    name: "æ„Ÿæƒ…ãƒ»å¿ƒç†çŠ¶æ…‹",
                    keywords: uncovered.filter(k => ['å–œã³', 'æ¥½ã—ã¿', 'æ¥½è¦³', 'å¸Œæœ›', 'æã‚Œ', 'ä¸å®‰', 'æ‚²ã—ã¿', 'çµ¶æœ›', 'å›°é›£', 'è©¦ç·´', 'è‹¦ç—›', 'ç—›ã¿'].includes(k)),
                    description: "äººé–“ã®åŸºæœ¬çš„ãªæ„Ÿæƒ…çŠ¶æ…‹ã‚„å¿ƒç†çš„ä½“é¨“",
                    psychologicalImpact: "æ„Ÿæƒ…çš„ãªè¡çªã‚„å…±é³´ãŒå¿ƒç†çš„ç·Šå¼µã‚„å®‰ã‚‰ãã‚’ç”Ÿã‚€"
                },
                {
                    name: "äººé–“é–¢ä¿‚ãƒ»ç¤¾ä¼šçš„çµåˆ",
                    keywords: uncovered.filter(k => ['å®¶æ—', 'å©šå§»', 'çµåˆ', 'å‡ºä¼šã„', 'å¯¾ç«‹', 'åˆ†é›¢', 'ç–å¤–', 'èª¤è§£', 'ä¿¡é ¼', 'èª å®Ÿ', 'è¦ªã—ã¿', 'æ¸©æƒ…', 'åŒ…å®¹'].includes(k)),
                    description: "äººã¨äººã¨ã®é–¢ä¿‚æ€§ã‚„ç¤¾ä¼šçš„ãªçµã³ã¤ã",
                    psychologicalImpact: "é–¢ä¿‚æ€§ã®é•ã„ãŒå­¤ç‹¬æ„Ÿã‚„æ‰€å±æ„Ÿã®è‘›è—¤ã‚’ç”Ÿã‚€"
                },
                {
                    name: "ç‰©è³ªãƒ»è³‡æºãƒ»çµŒæ¸ˆ",
                    keywords: uncovered.filter(k => ['è±Šã‹ã•', 'ç¹æ „', 'å›°çª®', 'è³‡æº', 'ä¾›çµ¦', 'çŠ ç‰²', 'ç¯€ç´„', 'æ¸›å°‘', 'å¢—åŠ ', 'åˆ©ç›Š', 'æå¤±'].includes(k)),
                    description: "ç‰©è³ªçš„ãªè±Šã‹ã•ã‚„è³‡æºã®ç®¡ç†ã«é–¢ã™ã‚‹æ¦‚å¿µ",
                    psychologicalImpact: "ç‰©è³ªçš„ä¾¡å€¤è¦³ã®é•ã„ãŒå®‰å¿ƒæ„Ÿvsä¸å®‰æ„Ÿã®è‘›è—¤ã‚’ç”Ÿã‚€"
                },
                {
                    name: "å­¦ç¿’ãƒ»èªçŸ¥ãƒ»ç†è§£",
                    keywords: uncovered.filter(k => ['æ•™è‚²', 'å­¦ç¿’', 'å•“ç™º', 'æŒ‡å°', 'è¦³å¯Ÿ', 'æ´å¯Ÿ', 'ç†è§£', 'å®¢è¦³æ€§', 'æ¢æ±‚', 'ç™ºè¦‹'].includes(k)),
                    description: "çŸ¥è­˜ã®ç²å¾—ã‚„èªçŸ¥çš„ãªæ´»å‹•",
                    psychologicalImpact: "å­¦ç¿’ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é•ã„ãŒæ··ä¹±vsæ˜ç¢ºæ€§ã®è‘›è—¤ã‚’ç”Ÿã‚€"
                },
                {
                    name: "æ–‡åŒ–ãƒ»ç¾ãƒ»è¡¨ç¾",
                    keywords: uncovered.filter(k => ['æ–‡åŒ–', 'æ–‡æ˜', 'è£…é£¾', 'ç¾åŒ–', 'å¤–è¦‹', 'å“æ ¼', 'ç¤¼å„€', 'ç¾å¾³', 'å°Šæ•¬'].includes(k)),
                    description: "æ–‡åŒ–çš„ä¾¡å€¤ã‚„ç¾çš„è¡¨ç¾ã«é–¢ã™ã‚‹æ¦‚å¿µ",
                    psychologicalImpact: "ç¾çš„ä¾¡å€¤è¦³ã®é•ã„ãŒè¡¨é¢æ€§vsæœ¬è³ªæ€§ã®è‘›è—¤ã‚’ç”Ÿã‚€"
                },
                {
                    name: "ç”Ÿå‘½ãƒ»èº«ä½“ãƒ»ç”Ÿç†",
                    keywords: uncovered.filter(k => ['é¤Šè‚²', 'æ „é¤Š', 'æˆé•·', 'ç™ºé”', 'ç”Ÿå‘½', 'èº«ä½“', 'å¥åº·', 'ç—…æ°—', 'æ²»ç™‚', 'å›å¾©'].includes(k)),
                    description: "ç”Ÿå‘½æ´»å‹•ã‚„èº«ä½“çš„ãªçŠ¶æ…‹ã«é–¢ã™ã‚‹æ¦‚å¿µ",
                    psychologicalImpact: "èº«ä½“çš„ä¾¡å€¤è¦³ã®é•ã„ãŒæ´»åŠ›vsç–²åŠ´ã®è‘›è—¤ã‚’ç”Ÿã‚€"
                }
            ];
            
            return categories.filter(cat => cat.keywords.length > 0);
        }
    </script>
</body>
</html>